(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41928,(e,s,a)=>{s.exports=e.r(34911)},52080,e=>{"use strict";let s=(0,e.i(60217).getBrowserSupabaseClient)();e.s(["supabase",0,s])},99697,e=>{"use strict";e.i(5145);var s=e.i(77732),a=e.i(85179),t=e.i(65437),i=e.i(61161),l=e.i(31467),r=e.i(49688),c=e.i(54767),n=a,d=e.i(25794);function o(e,s){if("function"==typeof e)return e(s);null!=e&&(e.current=s)}class h extends n.Component{getSnapshotBeforeUpdate(e){let s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){let e=s.offsetParent,a=(0,c.isHTMLElement)(e)&&e.offsetWidth||0,t=this.props.sizeRef.current;t.height=s.offsetHeight||0,t.width=s.offsetWidth||0,t.top=s.offsetTop,t.left=s.offsetLeft,t.right=a-t.width-t.left}return null}componentDidUpdate(){}render(){return this.props.children}}function m({children:e,isPresent:t,anchorX:i,root:l}){let r=(0,n.useId)(),c=(0,n.useRef)(null),m=(0,n.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=(0,n.useContext)(d.MotionConfigContext),x=function(...e){return a.useCallback(function(...e){return s=>{let a=!1,t=e.map(e=>{let t=o(e,s);return a||"function"!=typeof t||(a=!0),t});if(a)return()=>{for(let s=0;s<t.length;s++){let a=t[s];"function"==typeof a?a():o(e[s],null)}}}}(...e),e)}(c,e?.ref);return(0,n.useInsertionEffect)(()=>{let{width:e,height:s,top:a,left:n,right:d}=m.current;if(t||!c.current||!e||!s)return;let o="left"===i?`left: ${n}`:`right: ${d}`;c.current.dataset.motionPopId=r;let h=document.createElement("style");u&&(h.nonce=u);let x=l??document.head;return x.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${s}px !important;
            ${o}px !important;
            top: ${a}px !important;
          }
        `),()=>{x.contains(h)&&x.removeChild(h)}},[t]),(0,s.jsx)(h,{isPresent:t,childRef:c,sizeRef:m,children:n.cloneElement(e,{ref:x})})}let u=({children:e,initial:t,isPresent:l,onExitComplete:c,custom:n,presenceAffectsLayout:d,mode:o,anchorX:h,root:u})=>{let j=(0,i.useConstant)(x),p=(0,a.useId)(),v=!0,g=(0,a.useMemo)(()=>(v=!1,{id:p,initial:t,isPresent:l,custom:n,onExitComplete:e=>{for(let s of(j.set(e,!0),j.values()))if(!s)return;c&&c()},register:e=>(j.set(e,!1),()=>j.delete(e))}),[l,j,c]);return d&&v&&(g={...g}),(0,a.useMemo)(()=>{j.forEach((e,s)=>j.set(s,!1))},[l]),a.useEffect(()=>{l||j.size||!c||c()},[l]),"popLayout"===o&&(e=(0,s.jsx)(m,{isPresent:l,anchorX:h,root:u,children:e})),(0,s.jsx)(r.PresenceContext.Provider,{value:g,children:e})};function x(){return new Map}var j=e.i(41088);let p=e=>e.key||"";function v(e){let s=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&s.push(e)}),s}let g=({children:e,custom:r,initial:c=!0,onExitComplete:n,presenceAffectsLayout:d=!0,mode:o="sync",propagate:h=!1,anchorX:m="left",root:x})=>{let[g,N]=(0,j.usePresence)(h),b=(0,a.useMemo)(()=>v(e),[e]),f=h&&!g?[]:b.map(p),y=(0,a.useRef)(!0),_=(0,a.useRef)(b),w=(0,i.useConstant)(()=>new Map),[C,A]=(0,a.useState)(b),[k,S]=(0,a.useState)(b);(0,l.useIsomorphicLayoutEffect)(()=>{y.current=!1,_.current=b;for(let e=0;e<k.length;e++){let s=p(k[e]);f.includes(s)?w.delete(s):!0!==w.get(s)&&w.set(s,!1)}},[k,f.length,f.join("-")]);let U=[];if(b!==C){let e=[...b];for(let s=0;s<k.length;s++){let a=k[s],t=p(a);f.includes(t)||(e.splice(s,0,a),U.push(a))}return"wait"===o&&U.length&&(e=U),S(v(e)),A(b),null}let{forceRender:E}=(0,a.useContext)(t.LayoutGroupContext);return(0,s.jsx)(s.Fragment,{children:k.map(e=>{let a=p(e),t=(!h||!!g)&&(b===k||f.includes(a));return(0,s.jsx)(u,{isPresent:t,initial:(!y.current||!!c)&&void 0,custom:r,presenceAffectsLayout:d,mode:o,root:x,onExitComplete:t?void 0:()=>{if(!w.has(a))return;w.set(a,!0);let e=!0;w.forEach(s=>{s||(e=!1)}),e&&(E?.(),S(_.current),h&&N?.(),n&&n())},anchorX:m,children:e},a)})})};e.s(["AnimatePresence",()=>g],99697)},6958,e=>{"use strict";var s=e.i(77732),a=e.i(85179),t=e.i(41928),i=e.i(52080),l=e.i(5531),r=e.i(8679),c=e.i(99697),n=e.i(82418);e.s(["default",0,()=>{let{user:e,session:d,loading:o}=(0,l.useAuth)(),h=(0,t.useRouter)(),[m,u]=(0,a.useState)("overview"),[x,j]=(0,a.useState)([]),[p,v]=(0,a.useState)([]),[g,N]=(0,a.useState)(null),[b,f]=(0,a.useState)(null),[y,_]=(0,a.useState)(!0),[w,C]=(0,a.useState)(""),[A,k]=(0,a.useState)(!0),[S,U]=(0,a.useState)("all"),E=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(console.log("AdminDashboard: Auth state -",{loading:o,user:e?.email,session:!!d}),o)return void console.log("AdminDashboard: Auth still loading...");if(!d||!e){console.log("AdminDashboard: No session, redirecting to /login"),h.replace("/login");return}if("andregreengp@gmail.com"!==e.email){console.log("AdminDashboard: Not admin ("+e.email+"), redirecting to /chat"),h.replace("/chat");return}console.log("AdminDashboard: âœ… Admin access confirmed for",e.email)},[e,d,o,h]);let P=async()=>{try{let{count:e}=await i.supabase.from("users").select("*",{count:"exact",head:!0}),{data:s}=await i.supabase.from("users").select("subscription_tier"),a=s?.filter(e=>!e.subscription_tier||"free"===e.subscription_tier).length||0,t=s?.filter(e=>"pro"===e.subscription_tier).length||0,{count:l}=await i.supabase.from("api_logs").select("*",{count:"exact",head:!0}),r=new Date;r.setHours(0,0,0,0);let{count:c}=await i.supabase.from("api_logs").select("*",{count:"exact",head:!0}).gte("created_at",r.toISOString());N({total_users:e||0,active_today:c||0,total_revenue:4.99*t+0,free_users:a,pro_users:t,ultra_users:0,total_api_calls:l||0,avg_response_time:1.2})}catch(e){console.error("Error fetching system metrics:",e)}},D=async()=>{try{let{data:e,error:s}=await i.supabase.rpc("get_admin_user_stats");if(s){console.error("Error fetching users:",s);let{data:e}=await i.supabase.from("users").select(`
            id,
            email,
            subscription_tier,
            stripe_customer_id,
            created_at
          `),a=await Promise.all((e||[]).map(async e=>{let{data:s}=await i.supabase.from("usage_tracking").select("count").eq("user_id",e.id).eq("usage_type","chat"),{data:a}=await i.supabase.from("usage_tracking").select("count").eq("user_id",e.id).eq("usage_type","image_gen"),{data:t}=await i.supabase.from("usage_tracking").select("count").eq("user_id",e.id).eq("usage_type","video_gen"),{data:l}=await i.supabase.from("usage_tracking").select("created_at").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(1).single();return{id:e.id,email:e.email||"Unknown",created_at:e.created_at,tier:e.subscription_tier||"free",total_chats:s?.reduce((e,s)=>e+(s.count||0),0)||0,total_images:a?.reduce((e,s)=>e+(s.count||0),0)||0,total_videos:t?.reduce((e,s)=>e+(s.count||0),0)||0,total_web_searches:0,last_active:l?.created_at||e.created_at,stripe_customer_id:e.stripe_customer_id}}));j(a)}else j(e||[])}catch(e){console.error("Error fetching users:",e)}},R=async()=>{try{let e=i.supabase.from("api_logs").select(`
          id,
          user_id,
          endpoint,
          request_data,
          response_data,
          status_code,
          created_at
        `).order("created_at",{ascending:!1}).limit(100);"errors"===S?e.gte("status_code",400):"success"===S&&e.lt("status_code",400);let{data:s,error:a}=await e;if(!a&&s){let e=await Promise.all(s.map(async e=>{let{data:s}=await i.supabase.auth.admin.getUserById(e.user_id);return{...e,email:s?.user?.email||"Unknown"}}));v(e)}}catch(e){console.error("Error fetching API logs:",e)}};(0,a.useEffect)(()=>{(async()=>{e&&"andregreengp@gmail.com"===e.email?(console.log("AdminDashboard: Loading admin data..."),_(!0),await Promise.all([P(),D(),R()]),_(!1)):console.log("AdminDashboard: Skipping data load - not admin")})()},[S,e]),(0,a.useEffect)(()=>{if(!A)return;let e=setInterval(()=>{P(),R()},3e4);return()=>clearInterval(e)},[A,S]),(0,a.useEffect)(()=>{E.current&&!y&&n.gsap.fromTo(E.current.children,{opacity:0,y:20},{opacity:1,y:0,duration:.5,stagger:.1,ease:"power2.out"})},[y,m]);let $=x.filter(e=>e.email.toLowerCase().includes(w.toLowerCase())),L=async(e,s)=>{try{await i.supabase.from("users").update({subscription_tier:s,subscription_status:"active"}).eq("id",e),alert(`User upgraded to ${s.toUpperCase()} tier`),D()}catch(e){console.error("Error upgrading user:",e),alert("Failed to upgrade user")}},T=async e=>{try{await i.supabase.from("usage_tracking").delete().eq("user_id",e),alert("User usage reset successfully"),D()}catch(e){console.error("Error resetting usage:",e),alert("Failed to reset usage")}},I=async e=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{await i.supabase.auth.admin.deleteUser(e),alert("User deleted successfully"),D(),f(null)}catch(e){console.error("Error deleting user:",e),alert("Failed to delete user")}};return o||y?(0,s.jsxs)("div",{className:"admin-loading",children:[(0,s.jsx)("div",{className:"loading-spinner"}),(0,s.jsx)("p",{children:"Loading Admin Dashboard..."})]}):e&&"andregreengp@gmail.com"===e.email?(0,s.jsxs)("div",{className:"admin-dashboard",ref:E,children:[(0,s.jsxs)("div",{className:"admin-header",children:[(0,s.jsxs)("div",{className:"header-left",children:[(0,s.jsx)("button",{className:"back-btn",onClick:()=>h.push("/chat"),children:"â† Back to App"}),(0,s.jsxs)("div",{className:"admin-title",children:[(0,s.jsx)("h1",{children:"Admin Dashboard"}),(0,s.jsx)("span",{className:"admin-badge",children:"MASTER CONTROL"})]})]}),(0,s.jsxs)("div",{className:"header-right",children:[(0,s.jsxs)("div",{className:"refresh-toggle",children:[(0,s.jsx)("input",{type:"checkbox",id:"auto-refresh",checked:A,onChange:e=>k(e.target.checked)}),(0,s.jsx)("label",{htmlFor:"auto-refresh",children:"Auto-refresh (30s)"})]}),(0,s.jsx)("button",{className:"refresh-btn",onClick:()=>{P(),D(),R()},children:"ðŸ”„ Refresh Now"})]})]}),g&&(0,s.jsxs)("div",{className:"metrics-grid",children:[(0,s.jsxs)(r.motion.div,{className:"metric-card",whileHover:{scale:1.02},children:[(0,s.jsx)("div",{className:"metric-icon",children:"ðŸ‘¥"}),(0,s.jsxs)("div",{className:"metric-content",children:[(0,s.jsx)("div",{className:"metric-label",children:"Total Users"}),(0,s.jsx)("div",{className:"metric-value",children:g.total_users}),(0,s.jsxs)("div",{className:"metric-breakdown",children:[(0,s.jsxs)("span",{className:"tier-badge free",children:[g.free_users," Free"]}),(0,s.jsxs)("span",{className:"tier-badge pro",children:[g.pro_users," Pro"]}),(0,s.jsxs)("span",{className:"tier-badge ultra",children:[g.ultra_users," Ultra"]})]})]})]}),(0,s.jsxs)(r.motion.div,{className:"metric-card",whileHover:{scale:1.02},children:[(0,s.jsx)("div",{className:"metric-icon",children:"âš¡"}),(0,s.jsxs)("div",{className:"metric-content",children:[(0,s.jsx)("div",{className:"metric-label",children:"Active Today"}),(0,s.jsx)("div",{className:"metric-value",children:g.active_today}),(0,s.jsx)("div",{className:"metric-detail",children:g.total_users>0?`${(g.active_today/g.total_users*100).toFixed(1)}% of total`:"0%"})]})]}),(0,s.jsxs)(r.motion.div,{className:"metric-card revenue",whileHover:{scale:1.02},children:[(0,s.jsx)("div",{className:"metric-icon",children:"ðŸ’°"}),(0,s.jsxs)("div",{className:"metric-content",children:[(0,s.jsx)("div",{className:"metric-label",children:"Monthly Revenue (Est.)"}),(0,s.jsxs)("div",{className:"metric-value",children:["$",g.total_revenue.toFixed(2)]}),(0,s.jsxs)("div",{className:"metric-detail",children:["$",(12*g.total_revenue).toFixed(2),"/year"]})]})]}),(0,s.jsxs)(r.motion.div,{className:"metric-card",whileHover:{scale:1.02},children:[(0,s.jsx)("div",{className:"metric-icon",children:"ðŸ“Š"}),(0,s.jsxs)("div",{className:"metric-content",children:[(0,s.jsx)("div",{className:"metric-label",children:"Total API Calls"}),(0,s.jsx)("div",{className:"metric-value",children:g.total_api_calls.toLocaleString()}),(0,s.jsxs)("div",{className:"metric-detail",children:["Avg: ",g.avg_response_time,"s response"]})]})]})]}),(0,s.jsxs)("div",{className:"admin-tabs",children:[(0,s.jsxs)("button",{className:`tab-btn ${"overview"===m?"active":""}`,onClick:()=>u("overview"),children:[(0,s.jsx)("span",{className:"tab-icon",children:"ðŸ“Š"}),"Overview"]}),(0,s.jsxs)("button",{className:`tab-btn ${"users"===m?"active":""}`,onClick:()=>u("users"),children:[(0,s.jsx)("span",{className:"tab-icon",children:"ðŸ‘¥"}),"Users (",x.length,")"]}),(0,s.jsxs)("button",{className:`tab-btn ${"logs"===m?"active":""}`,onClick:()=>u("logs"),children:[(0,s.jsx)("span",{className:"tab-icon",children:"ðŸ“"}),"API Logs (",p.length,")"]}),(0,s.jsxs)("button",{className:`tab-btn ${"analytics"===m?"active":""}`,onClick:()=>u("analytics"),children:[(0,s.jsx)("span",{className:"tab-icon",children:"ðŸ“ˆ"}),"Analytics"]}),(0,s.jsxs)("button",{className:`tab-btn ${"control"===m?"active":""}`,onClick:()=>u("control"),children:[(0,s.jsx)("span",{className:"tab-icon",children:"âš™ï¸"}),"Control Panel"]})]}),(0,s.jsx)("div",{className:"admin-content",children:(0,s.jsxs)(c.AnimatePresence,{mode:"wait",children:["overview"===m&&(0,s.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"tab-content",children:[(0,s.jsx)("h2",{children:"System Overview"}),(0,s.jsxs)("div",{className:"section-card",children:[(0,s.jsx)("h3",{children:"Recent Activity (Last 10)"}),(0,s.jsx)("div",{className:"activity-list",children:p.slice(0,10).map(e=>(0,s.jsxs)("div",{className:"activity-item",children:[(0,s.jsx)("div",{className:"activity-icon",children:e.status_code<400?"âœ…":"âŒ"}),(0,s.jsxs)("div",{className:"activity-details",children:[(0,s.jsx)("div",{className:"activity-user",children:e.email}),(0,s.jsxs)("div",{className:"activity-action",children:[e.endpoint," â€¢ Status: ",e.status_code]})]}),(0,s.jsx)("div",{className:"activity-time",children:new Date(e.created_at).toLocaleTimeString()})]},e.id))})]}),(0,s.jsxs)("div",{className:"section-card",children:[(0,s.jsx)("h3",{children:"Top Users by Activity"}),(0,s.jsx)("div",{className:"top-users-list",children:x.sort((e,s)=>s.total_chats+s.total_images+s.total_videos+s.total_web_searches-(e.total_chats+e.total_images+e.total_videos+e.total_web_searches)).slice(0,5).map(e=>{let a=e.total_chats+e.total_images+e.total_videos+e.total_web_searches;return(0,s.jsxs)("div",{className:"top-user-item",children:[(0,s.jsxs)("div",{className:"user-info",children:[(0,s.jsx)("div",{className:"user-email",children:e.email}),(0,s.jsx)("span",{className:`tier-badge ${e.tier}`,children:e.tier})]}),(0,s.jsxs)("div",{className:"user-activity",children:[(0,s.jsx)("div",{className:"activity-bar",style:{width:`${a/100*100}%`}}),(0,s.jsxs)("span",{className:"activity-count",children:[a," actions"]})]})]},e.id)})})]})]},"overview"),"users"===m&&(0,s.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"tab-content",children:[(0,s.jsxs)("div",{className:"content-header",children:[(0,s.jsx)("h2",{children:"User Management"}),(0,s.jsx)("input",{type:"text",className:"search-input",placeholder:"Search users by email...",value:w,onChange:e=>C(e.target.value)})]}),(0,s.jsx)("div",{className:"users-table-container",children:(0,s.jsxs)("table",{className:"users-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Email"}),(0,s.jsx)("th",{children:"Tier"}),(0,s.jsx)("th",{children:"Chats"}),(0,s.jsx)("th",{children:"Images"}),(0,s.jsx)("th",{children:"Videos"}),(0,s.jsx)("th",{children:"Web Tasks"}),(0,s.jsx)("th",{children:"Joined"}),(0,s.jsx)("th",{children:"Last Active"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:$.map(e=>(0,s.jsxs)("tr",{onClick:()=>f(e),children:[(0,s.jsx)("td",{className:"email-cell",children:e.email}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:`tier-badge ${e.tier}`,children:e.tier})}),(0,s.jsx)("td",{children:e.total_chats}),(0,s.jsx)("td",{children:e.total_images}),(0,s.jsx)("td",{children:e.total_videos}),(0,s.jsx)("td",{children:e.total_web_searches}),(0,s.jsx)("td",{children:new Date(e.created_at).toLocaleDateString()}),(0,s.jsx)("td",{children:new Date(e.last_active).toLocaleDateString()}),(0,s.jsx)("td",{className:"actions-cell",children:(0,s.jsx)("button",{className:"action-btn",onClick:s=>{s.stopPropagation(),f(e)},children:"Details"})})]},e.id))})]})})]},"users"),"logs"===m&&(0,s.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"tab-content",children:[(0,s.jsxs)("div",{className:"content-header",children:[(0,s.jsx)("h2",{children:"API Logs"}),(0,s.jsxs)("div",{className:"log-filters",children:[(0,s.jsx)("button",{className:`filter-btn ${"all"===S?"active":""}`,onClick:()=>U("all"),children:"All"}),(0,s.jsx)("button",{className:`filter-btn ${"success"===S?"active":""}`,onClick:()=>U("success"),children:"Success"}),(0,s.jsx)("button",{className:`filter-btn ${"errors"===S?"active":""}`,onClick:()=>U("errors"),children:"Errors"})]})]}),(0,s.jsx)("div",{className:"logs-container",children:p.map(e=>(0,s.jsxs)("div",{className:`log-item ${e.status_code>=400?"error":"success"}`,children:[(0,s.jsxs)("div",{className:"log-header",children:[(0,s.jsx)("span",{className:"log-status",children:e.status_code}),(0,s.jsx)("span",{className:"log-endpoint",children:e.endpoint}),(0,s.jsx)("span",{className:"log-user",children:e.email}),(0,s.jsx)("span",{className:"log-time",children:new Date(e.created_at).toLocaleString()})]}),(0,s.jsxs)("details",{className:"log-details",children:[(0,s.jsx)("summary",{children:"View Request/Response"}),(0,s.jsxs)("div",{className:"log-data",children:[(0,s.jsxs)("div",{className:"log-section",children:[(0,s.jsx)("h4",{children:"Request:"}),(0,s.jsx)("pre",{children:JSON.stringify(e.request_data,null,2)})]}),(0,s.jsxs)("div",{className:"log-section",children:[(0,s.jsx)("h4",{children:"Response:"}),(0,s.jsx)("pre",{children:JSON.stringify(e.response_data,null,2)})]})]})]})]},e.id))})]},"logs"),"analytics"===m&&(0,s.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"tab-content",children:[(0,s.jsx)("h2",{children:"Analytics & Insights"}),(0,s.jsxs)("div",{className:"analytics-grid",children:[(0,s.jsxs)("div",{className:"analytics-card",children:[(0,s.jsx)("h3",{children:"User Growth"}),(0,s.jsx)("div",{className:"chart-placeholder",children:(0,s.jsx)("div",{className:"coming-soon",children:"Chart visualization coming soon"})})]}),(0,s.jsxs)("div",{className:"analytics-card",children:[(0,s.jsx)("h3",{children:"Feature Usage"}),(0,s.jsxs)("div",{className:"usage-breakdown",children:[(0,s.jsxs)("div",{className:"usage-item",children:[(0,s.jsx)("span",{className:"usage-label",children:"Chat Messages"}),(0,s.jsx)("div",{className:"usage-bar-container",children:(0,s.jsx)("div",{className:"usage-bar",style:{width:"85%"}})}),(0,s.jsx)("span",{className:"usage-percent",children:"85%"})]}),(0,s.jsxs)("div",{className:"usage-item",children:[(0,s.jsx)("span",{className:"usage-label",children:"Image Generation"}),(0,s.jsx)("div",{className:"usage-bar-container",children:(0,s.jsx)("div",{className:"usage-bar",style:{width:"60%"}})}),(0,s.jsx)("span",{className:"usage-percent",children:"60%"})]}),(0,s.jsxs)("div",{className:"usage-item",children:[(0,s.jsx)("span",{className:"usage-label",children:"Video Generation"}),(0,s.jsx)("div",{className:"usage-bar-container",children:(0,s.jsx)("div",{className:"usage-bar",style:{width:"35%"}})}),(0,s.jsx)("span",{className:"usage-percent",children:"35%"})]}),(0,s.jsxs)("div",{className:"usage-item",children:[(0,s.jsx)("span",{className:"usage-label",children:"AI Web Tasks"}),(0,s.jsx)("div",{className:"usage-bar-container",children:(0,s.jsx)("div",{className:"usage-bar",style:{width:"25%"}})}),(0,s.jsx)("span",{className:"usage-percent",children:"25%"})]})]})]}),(0,s.jsxs)("div",{className:"analytics-card",children:[(0,s.jsx)("h3",{children:"Conversion Funnel"}),(0,s.jsxs)("div",{className:"funnel-chart",children:[(0,s.jsx)("div",{className:"funnel-stage",children:(0,s.jsx)("div",{className:"funnel-bar",style:{width:"100%"},children:(0,s.jsx)("span",{children:"Visitors: 100%"})})}),(0,s.jsx)("div",{className:"funnel-stage",children:(0,s.jsx)("div",{className:"funnel-bar",style:{width:"70%"},children:(0,s.jsx)("span",{children:"Sign Ups: 70%"})})}),(0,s.jsx)("div",{className:"funnel-stage",children:(0,s.jsx)("div",{className:"funnel-bar",style:{width:"30%"},children:(0,s.jsx)("span",{children:"Pro Users: 30%"})})}),(0,s.jsx)("div",{className:"funnel-stage",children:(0,s.jsx)("div",{className:"funnel-bar",style:{width:"10%"},children:(0,s.jsx)("span",{children:"Ultra Users: 10%"})})})]})]})]})]},"analytics"),"control"===m&&(0,s.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"tab-content",children:[(0,s.jsx)("h2",{children:"System Control Panel"}),(0,s.jsxs)("div",{className:"control-grid",children:[(0,s.jsxs)("div",{className:"control-card",children:[(0,s.jsx)("h3",{children:"ðŸ—„ï¸ Database Management"}),(0,s.jsx)("button",{className:"control-btn",children:"View Database Status"}),(0,s.jsx)("button",{className:"control-btn",children:"Run Maintenance"}),(0,s.jsx)("button",{className:"control-btn",children:"Export All Data"})]}),(0,s.jsxs)("div",{className:"control-card",children:[(0,s.jsx)("h3",{children:"ðŸ” Security & Auth"}),(0,s.jsx)("button",{className:"control-btn",children:"View Active Sessions"}),(0,s.jsx)("button",{className:"control-btn",children:"Revoke All Tokens"}),(0,s.jsx)("button",{className:"control-btn",children:"Security Audit Log"})]}),(0,s.jsxs)("div",{className:"control-card",children:[(0,s.jsx)("h3",{children:"ðŸ’³ Billing & Subscriptions"}),(0,s.jsx)("button",{className:"control-btn",children:"Stripe Dashboard"}),(0,s.jsx)("button",{className:"control-btn",children:"Revenue Report"}),(0,s.jsx)("button",{className:"control-btn",children:"Failed Payments"})]}),(0,s.jsxs)("div",{className:"control-card",children:[(0,s.jsx)("h3",{children:"ðŸš¨ System Alerts"}),(0,s.jsxs)("div",{className:"alerts-list",children:[(0,s.jsx)("div",{className:"alert-item success",children:"âœ… All systems operational"}),(0,s.jsx)("div",{className:"alert-item info",children:"â„¹ï¸ Database backup scheduled for tonight"})]})]}),(0,s.jsxs)("div",{className:"control-card danger",children:[(0,s.jsx)("h3",{children:"âš ï¸ Danger Zone"}),(0,s.jsx)("button",{className:"control-btn danger",children:"Reset All Usage Counters"}),(0,s.jsx)("button",{className:"control-btn danger",children:"Clear All Logs"}),(0,s.jsx)("button",{className:"control-btn danger",children:"Emergency Shutdown"})]})]})]},"control")]})}),(0,s.jsx)(c.AnimatePresence,{children:b&&(0,s.jsx)(r.motion.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>f(null),children:(0,s.jsxs)(r.motion.div,{className:"user-detail-modal",initial:{scale:.9,y:50},animate:{scale:1,y:0},exit:{scale:.9,y:50},onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h2",{children:"User Details"}),(0,s.jsx)("button",{className:"close-btn",onClick:()=>f(null),children:"âœ•"})]}),(0,s.jsxs)("div",{className:"modal-body",children:[(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("span",{className:"detail-label",children:"Email:"}),(0,s.jsx)("span",{className:"detail-value",children:b.email})]}),(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("span",{className:"detail-label",children:"User ID:"}),(0,s.jsx)("span",{className:"detail-value code",children:b.id})]}),(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("span",{className:"detail-label",children:"Current Tier:"}),(0,s.jsx)("span",{className:`tier-badge ${b.tier}`,children:b.tier})]}),(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("span",{className:"detail-label",children:"Stripe Customer ID:"}),(0,s.jsx)("span",{className:"detail-value code",children:b.stripe_customer_id||"N/A"})]}),(0,s.jsxs)("div",{className:"usage-summary",children:[(0,s.jsx)("h3",{children:"Usage Summary"}),(0,s.jsxs)("div",{className:"usage-grid",children:[(0,s.jsxs)("div",{className:"usage-stat",children:[(0,s.jsx)("div",{className:"stat-value",children:b.total_chats}),(0,s.jsx)("div",{className:"stat-label",children:"Chats"})]}),(0,s.jsxs)("div",{className:"usage-stat",children:[(0,s.jsx)("div",{className:"stat-value",children:b.total_images}),(0,s.jsx)("div",{className:"stat-label",children:"Images"})]}),(0,s.jsxs)("div",{className:"usage-stat",children:[(0,s.jsx)("div",{className:"stat-value",children:b.total_videos}),(0,s.jsx)("div",{className:"stat-label",children:"Videos"})]}),(0,s.jsxs)("div",{className:"usage-stat",children:[(0,s.jsx)("div",{className:"stat-value",children:b.total_web_searches}),(0,s.jsx)("div",{className:"stat-label",children:"Web Tasks"})]})]})]}),(0,s.jsxs)("div",{className:"modal-actions",children:[(0,s.jsx)("h3",{children:"Admin Actions"}),(0,s.jsxs)("div",{className:"action-buttons",children:[(0,s.jsx)("button",{className:"action-btn upgrade",onClick:()=>L(b.id,"pro"),children:"Upgrade to Pro"}),(0,s.jsx)("button",{className:"action-btn upgrade",onClick:()=>L(b.id,"ultra"),children:"Upgrade to Ultra"}),(0,s.jsx)("button",{className:"action-btn reset",onClick:()=>T(b.id),children:"Reset Usage"}),(0,s.jsx)("button",{className:"action-btn delete",onClick:()=>I(b.id),children:"Delete User"})]})]})]})]})})}),(0,s.jsx)("div",{className:"admin-particles",children:[...Array(10)].map((e,a)=>(0,s.jsx)("div",{className:"particle",style:{left:`${100*Math.random()}%`,top:`${100*Math.random()}%`,animationDelay:`${5*Math.random()}s`}},a))})]}):null}])}]);