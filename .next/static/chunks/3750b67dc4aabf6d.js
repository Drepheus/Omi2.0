(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99861,e=>{"use strict";var t,i,r,a,s,n,o,l,c,h,d=e.i(77732),u=e.i(41928),m=e.i(85179),g=e.i(8679),p=e.i(63673);let f={some:0,all:1};function v({text:e,className:t="",delay:i=0}){let r,a,s=(0,m.useRef)(null),n=function(e,{root:t,margin:i,amount:r,once:a=!1,initial:s=!1}={}){let[n,o]=(0,m.useState)(s);return(0,m.useEffect)(()=>{if(!e.current||a&&n)return;let s={root:t&&t.current||void 0,margin:i,amount:r};return function(e,t,{root:i,margin:r,amount:a="some"}={}){let s=(0,p.resolveElements)(e),n=new WeakMap,o=new IntersectionObserver(e=>{e.forEach(e=>{let i=n.get(e.target);if(!!i!==e.isIntersecting)if(e.isIntersecting){let i=t(e.target,e);"function"==typeof i?n.set(e.target,i):o.unobserve(e.target)}else"function"==typeof i&&(i(e),n.delete(e.target))})},{root:i,rootMargin:r,threshold:"number"==typeof a?a:f[a]});return s.forEach(e=>o.observe(e)),()=>o.disconnect()}(e.current,()=>(o(!0),a?void 0:()=>o(!1)),s)},[t,e,i,a,r]),n}(s,{once:!0});return(0,d.jsx)("div",{ref:s,className:t,children:(r=[],a=0,e.split(/(\*\*[^*]+\*\*|\*[^*]+\*|`[^`]+`|\[([^\]]+)\]\(([^)]+)\)|^[-•]\s+.*$|^\d+\.\s+.*$)/gm).forEach((e,t)=>{if(e)if(e.match(/^\*\*[^*]+\*\*$/))e.slice(2,-2).split(" ").forEach((e,s)=>{e.trim()&&(r.push((0,d.jsx)(g.motion.strong,{initial:{opacity:0,filter:"blur(10px)"},animate:n?{opacity:1,filter:"blur(0px)"}:{},transition:{duration:.3,delay:.03*a+i,ease:[.4,0,.2,1]},style:{display:"inline-block",marginRight:"0.25em"},className:"text-bold",children:e},`${t}-${s}-${a}`)),a++)});else if(e.match(/^\*[^*]+\*$/)&&!e.match(/^\*\*.*\*\*$/))e.slice(1,-1).split(" ").forEach((e,s)=>{e.trim()&&(r.push((0,d.jsx)(g.motion.em,{initial:{opacity:0,filter:"blur(10px)"},animate:n?{opacity:1,filter:"blur(0px)"}:{},transition:{duration:.3,delay:.03*a+i,ease:[.4,0,.2,1]},style:{display:"inline-block",marginRight:"0.25em"},className:"text-italic",children:e},`${t}-${s}-${a}`)),a++)});else if(e.match(/^`[^`]+`$/)){let s=e.slice(1,-1);r.push((0,d.jsx)(g.motion.code,{initial:{opacity:0,filter:"blur(10px)"},animate:n?{opacity:1,filter:"blur(0px)"}:{},transition:{duration:.3,delay:.03*a+i,ease:[.4,0,.2,1]},style:{display:"inline-block",marginRight:"0.25em"},className:"text-code",children:s},`${t}-${a}`)),a++}else if(e.match(/\[([^\]]+)\]\(([^)]+)\)/)){let s=e.match(/\[([^\]]+)\]\(([^)]+)\)/);if(s){let e=s[1],o=s[2];r.push((0,d.jsx)(g.motion.a,{href:o,target:"_blank",rel:"noopener noreferrer",initial:{opacity:0,filter:"blur(10px)"},animate:n?{opacity:1,filter:"blur(0px)"}:{},transition:{duration:.3,delay:.03*a+i,ease:[.4,0,.2,1]},style:{display:"inline-block",marginRight:"0.25em"},className:"text-link gradient-link",children:e},`${t}-${a}`)),a+=e.split(" ").length}}else if(e.match(/^[-•]\s+/)||e.match(/^\d+\.\s+/)){let s=e.match(/^\d+\.\s+/)?e.match(/^\d+\./)[0]:"•",o=e.replace(/^[-•]\s+|^\d+\.\s+/,"");r.push((0,d.jsxs)(g.motion.div,{initial:{opacity:0,filter:"blur(10px)"},animate:n?{opacity:1,filter:"blur(0px)"}:{},transition:{duration:.3,delay:.03*a+i,ease:[.4,0,.2,1]},className:"bullet-point",children:[(0,d.jsx)("span",{className:"bullet",children:s}),(0,d.jsx)("span",{className:"bullet-text",children:o})]},`${t}-${a}`)),a+=o.split(" ").length}else"\n"===e?r.push((0,d.jsx)("br",{},`br-${t}-${a}`)):e.split(/(\s+)/).forEach((e,s)=>{e.trim()?(r.push((0,d.jsx)(g.motion.span,{initial:{opacity:0,filter:"blur(10px)"},animate:n?{opacity:1,filter:"blur(0px)"}:{},transition:{duration:.3,delay:.03*a+i,ease:[.4,0,.2,1]},style:{display:"inline-block",marginRight:"0.25em"},children:e},`${t}-${s}-${a}`)),a++):" "===e&&r.push((0,d.jsx)("span",{children:" "},`space-${t}-${s}`))})}),r)})}var x=e.i(13050),b=e.i(25794),y=e.i(61161);function w(e){let t=(0,y.useConstant)(()=>(0,x.motionValue)(e)),{isStatic:i}=(0,m.useContext)(b.MotionConfigContext);if(i){let[,i]=(0,m.useState)(e);(0,m.useEffect)(()=>t.on("change",i),[])}return t}var j=e.i(88032),M=e.i(99630),N=e.i(38888);function E(e){return"number"==typeof e?e:parseFloat(e)}var _=e.i(61562),A=e.i(31467);function T(e,t){let i=w(t()),r=()=>i.set(t());return r(),(0,A.useIsomorphicLayoutEffect)(()=>{let t=()=>N.frame.preRender(r,!1,!0),i=e.map(e=>e.on("change",t));return()=>{i.forEach(e=>e()),(0,N.cancelFrame)(r)}}),i}function S(e,t,i,r){if("function"==typeof e){let t;return x.collectMotionValues.current=[],e(),t=T(x.collectMotionValues.current,e),x.collectMotionValues.current=void 0,t}let a="function"==typeof t?t:function(...e){let t=!Array.isArray(e[0]),i=t?0:-1,r=e[0+i],a=e[1+i],s=e[2+i],n=e[3+i],o=(0,_.interpolate)(a,s,n);return t?o(r):o}(t,i,r);return Array.isArray(e)?C(e,a):C([e],([e])=>a(e))}function C(e,t){let i=(0,y.useConstant)(()=>[]);return T(e,()=>{i.length=0;let r=e.length;for(let t=0;t<r;t++)i[t]=e[t].get();return t(i)})}function P(e,t={}){let{isStatic:i}=(0,m.useContext)(b.MotionConfigContext),r=()=>(0,M.isMotionValue)(e)?e.get():e;if(i)return S(r);let a=w(r());return(0,m.useInsertionEffect)(()=>(function(e,t,i){let r,a=e.get(),s=null,n=a,o="string"==typeof a?a.replace(/[\d.-]/g,""):void 0,l=()=>{s&&(s.stop(),s=null)},c=()=>{l(),s=new j.JSAnimation({keyframes:[E(e.get()),E(n)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...i,onUpdate:r})};if(e.attach((e,t)=>{n=e,r=e=>{var i,r;return t((i=e,(r=o)?i+r:i))},N.frame.postRender(c)},l),(0,M.isMotionValue)(t)){let i=t.on("change",t=>{var i,r;return e.set((i=t,(r=o)?i+r:i))}),r=e.on("destroy",i);return()=>{i(),r()}}return l})(a,e,t),[a,JSON.stringify(t)]),a}var R=e.i(99697);function I({children:e,className:t="",onClick:i,mouseX:r,spring:a,distance:s,magnification:n,baseItemSize:o}){let l=(0,m.useRef)(null),c=w(0),h=S(r,e=>e-(l.current?.getBoundingClientRect()??{x:0,width:o}).x-o/2),u=P(S(h,[-s,0,s],[o,n,o]),a);return(0,d.jsx)(g.motion.div,{ref:l,style:{width:u,height:u},onHoverStart:()=>c.set(1),onHoverEnd:()=>c.set(0),onFocus:()=>c.set(1),onBlur:()=>c.set(0),onClick:i,className:`dock-item ${t}`,tabIndex:0,role:"button","aria-haspopup":"true",children:m.Children.map(e,e=>(0,m.cloneElement)(e,{isHovered:c}))})}function k({children:e,className:t="",...i}){let{isHovered:r}=i,[a,s]=(0,m.useState)(!1);return(0,m.useEffect)(()=>{let e=r.on("change",e=>{s(1===e)});return()=>e()},[r]),(0,d.jsx)(R.AnimatePresence,{children:a&&(0,d.jsx)(g.motion.div,{initial:{opacity:0,y:0},animate:{opacity:1,y:-10},exit:{opacity:0,y:0},transition:{duration:.2},className:`dock-label ${t}`,role:"tooltip",style:{x:"-50%"},children:e})})}function D({children:e,className:t=""}){return(0,d.jsx)("div",{className:`dock-icon ${t}`,children:e})}function L({items:e,className:t="",spring:i={mass:.1,stiffness:150,damping:12},magnification:r=70,distance:a=200,panelHeight:s=68,dockHeight:n=256,baseItemSize:o=50}){let l=w(1/0),c=w(0),h=P(S(c,[0,1],[s,(0,m.useMemo)(()=>Math.max(n,r+r/2+4),[r,n])]),i);return(0,d.jsx)(g.motion.div,{style:{height:h,scrollbarWidth:"none"},className:"dock-outer",children:(0,d.jsx)(g.motion.div,{onMouseMove:({pageX:e})=>{c.set(1),l.set(e)},onMouseLeave:()=>{c.set(0),l.set(1/0)},className:`dock-panel ${t}`,style:{height:s},role:"toolbar","aria-label":"Application dock",children:e.map((e,t)=>(0,d.jsxs)(I,{onClick:e.onClick,className:e.className,mouseX:l,spring:i,distance:a,magnification:r,baseItemSize:o,children:[(0,d.jsx)(D,{children:e.isImage?(0,d.jsx)("img",{src:e.icon,alt:e.label,style:{width:"100%",height:"100%",objectFit:"contain"}}):e.icon}),(0,d.jsx)(k,{children:e.label})]},t))})})}var U=e.i(82418),F,O,z,G,V,B,q,X,$,Y,W,H,Q,Z=function(){return F||"undefined"!=typeof window&&(F=window.gsap)&&F.registerPlugin&&F},K=1,J=[],ee=[],et=[],ei=Date.now,er=function(e,t){return t},ea=function(){var e=$.core,t=e.bridge||{},i=e._scrollers,r=e._proxies;i.push.apply(i,ee),r.push.apply(r,et),ee=i,et=r,er=function(e,i){return t[e](i)}},es=function(e){return!!~Y.indexOf(e)},en=function(e,t,i,r,a){return e.addEventListener(t,i,{passive:!1!==r,capture:!!a})},eo=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},el="scrollLeft",ec="scrollTop",eh=function(){return W&&W.isPressed||ee.cache++},ed=function(e,t){var i=function i(r){if(r||0===r){K&&(z.history.scrollRestoration="manual");var a=W&&W.isPressed;e(r=i.v=Math.round(r)||(W&&W.iOS?1:0)),i.cacheID=ee.cache,a&&er("ss",r)}else(t||ee.cache!==i.cacheID||er("ref"))&&(i.cacheID=ee.cache,i.v=e());return i.v+i.offset};return i.offset=0,e&&i},eu={s:el,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:ed(function(e){return arguments.length?z.scrollTo(e,em.sc()):z.pageXOffset||G[el]||V[el]||B[el]||0})},em={s:ec,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:eu,sc:ed(function(e){return arguments.length?z.scrollTo(eu.sc(),e):z.pageYOffset||G[ec]||V[ec]||B[ec]||0})},eg=function(e,t){for(var i=t.length;i--;)if(t[i]===e||t[i].contains(e))return!0;return!1},ep=function(e,t){var i,r=t.s,a=t.sc;es(e)&&(e=G.scrollingElement||V);var s=ee.indexOf(e),n=a===em.sc?1:2;~s||(s=ee.push(e)-1),ee[s+n]||en(e,"scroll",eh);var o=ee[s+n],l=o||(ee[s+n]=ed((i=e,~et.indexOf(i)&&et[et.indexOf(i)+1][r]),!0)||(es(e)?a:ed(function(t){return arguments.length?e[r]=t:e[r]})));return l.target=e,o||(l.smooth="smooth"===F.getProperty(e,"scrollBehavior")),l},ef=function(e,t,i){var r=e,a=e,s=ei(),n=s,o=t||50,l=Math.max(500,3*o),c=function(e,t){var l=ei();t||l-s>o?(a=r,r=e,n=s,s=l):i?r+=e:r=a+(e-a)/(l-n)*(s-n)};return{update:c,reset:function(){a=r=i?0:r,n=s=0},getVelocity:function(e){var t=n,o=a,h=ei();return(e||0===e)&&e!==r&&c(e),s===n||h-n>l?0:(r+(i?o:-o))/((i?h:s)-t)*1e3}}},ev=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},ex=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},eb=function(){($=F.core.globals().ScrollTrigger)&&$.core&&ea()},ey=function(e){return F=e||Z(),!O&&F&&"undefined"!=typeof document&&document.body&&(z=window,V=(G=document).documentElement,B=G.body,Y=[z,G,V,B],F.utils.clamp,Q=F.core.context||function(){},X="onpointerenter"in B?"pointer":"mouse",q=ew.isTouch=z.matchMedia&&z.matchMedia("(hover: none), (pointer: coarse)").matches?1:2*("ontouchstart"in z||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),H=ew.eventTypes=("ontouchstart"in V?"touchstart,touchmove,touchcancel,touchend":!("onpointerdown"in V)?"mousedown,mousemove,mouseup,mouseup":"pointerdown,pointermove,pointercancel,pointerup").split(","),setTimeout(function(){return K=0},500),eb(),O=1),O};eu.op=em,ee.cache=0;var ew=function(){var e;function t(e){this.init(e)}return t.prototype.init=function(e){O||ey(F)||console.warn("Please gsap.registerPlugin(Observer)"),$||eb();var t=e.tolerance,i=e.dragMinimum,r=e.type,a=e.target,s=e.lineHeight,n=e.debounce,o=e.preventDefault,l=e.onStop,c=e.onStopDelay,h=e.ignore,d=e.wheelSpeed,u=e.event,m=e.onDragStart,g=e.onDragEnd,p=e.onDrag,f=e.onPress,v=e.onRelease,x=e.onRight,b=e.onLeft,y=e.onUp,w=e.onDown,j=e.onChangeX,M=e.onChangeY,N=e.onChange,E=e.onToggleX,_=e.onToggleY,A=e.onHover,T=e.onHoverEnd,S=e.onMove,C=e.ignoreCheck,P=e.isNormalizer,R=e.onGestureStart,I=e.onGestureEnd,k=e.onWheel,D=e.onEnable,L=e.onDisable,U=e.onClick,Y=e.scrollSpeed,Z=e.capture,K=e.allowClicks,ee=e.lockAxis,et=e.onLockAxis;this.target=(er=a,a=(0,F.utils.toArray)(er)[0]||("string"==typeof er&&!1!==F.config().nullTargetWarn?console.warn("Element not found:",er):null)||V),this.vars=e,h&&(h=F.utils.toArray(h)),t=t||1e-9,i=i||0,d=d||1,Y=Y||1,r=r||"wheel,touch,pointer",n=!1!==n,s||(s=parseFloat(z.getComputedStyle(B).lineHeight)||22);var er,ea,el,ec,ed,ew,ej,eM,eN=this,eE=0,e_=0,eA=e.passive||!o&&!1!==e.passive,eT=ep(a,eu),eS=ep(a,em),eC=eT(),eP=eS(),eR=~r.indexOf("touch")&&!~r.indexOf("pointer")&&"pointerdown"===H[0],eI=es(a),ek=a.ownerDocument||G,eD=[0,0,0],eL=[0,0,0],eU=0,eF=function(){return eU=ei()},eO=function(e,t){return(eN.event=e)&&h&&eg(e.target,h)||t&&eR&&"touch"!==e.pointerType||C&&C(e,t)},ez=function(){var e=eN.deltaX=ex(eD),i=eN.deltaY=ex(eL),r=Math.abs(e)>=t,a=Math.abs(i)>=t;N&&(r||a)&&N(eN,e,i,eD,eL),r&&(x&&eN.deltaX>0&&x(eN),b&&eN.deltaX<0&&b(eN),j&&j(eN),E&&eN.deltaX<0!=eE<0&&E(eN),eE=eN.deltaX,eD[0]=eD[1]=eD[2]=0),a&&(w&&eN.deltaY>0&&w(eN),y&&eN.deltaY<0&&y(eN),M&&M(eN),_&&eN.deltaY<0!=e_<0&&_(eN),e_=eN.deltaY,eL[0]=eL[1]=eL[2]=0),(ed||ec)&&(S&&S(eN),ec&&(m&&1===ec&&m(eN),p&&p(eN),ec=0),ed=!1),ej&&(ej=!1,1)&&et&&et(eN),ew&&(k(eN),ew=!1),ea=0},eG=function(e,t,i){eD[i]+=e,eL[i]+=t,eN._vx.update(e),eN._vy.update(t),n?ea||(ea=requestAnimationFrame(ez)):ez()},eV=function(e,t){ee&&!eM&&(eN.axis=eM=Math.abs(e)>Math.abs(t)?"x":"y",ej=!0),"y"!==eM&&(eD[2]+=e,eN._vx.update(e,!0)),"x"!==eM&&(eL[2]+=t,eN._vy.update(t,!0)),n?ea||(ea=requestAnimationFrame(ez)):ez()},eB=function(e){if(!eO(e,1)){var t=(e=ev(e,o)).clientX,r=e.clientY,a=t-eN.x,s=r-eN.y,n=eN.isDragging;eN.x=t,eN.y=r,(n||(a||s)&&(Math.abs(eN.startX-t)>=i||Math.abs(eN.startY-r)>=i))&&(ec=n?2:1,n||(eN.isDragging=!0),eV(a,s))}},eq=eN.onPress=function(e){eO(e,1)||e&&e.button||(eN.axis=eM=null,el.pause(),eN.isPressed=!0,e=ev(e),eE=e_=0,eN.startX=eN.x=e.clientX,eN.startY=eN.y=e.clientY,eN._vx.reset(),eN._vy.reset(),en(P?a:ek,H[1],eB,eA,!0),eN.deltaX=eN.deltaY=0,f&&f(eN))},eX=eN.onRelease=function(e){if(!eO(e,1)){eo(P?a:ek,H[1],eB,!0);var t=!isNaN(eN.y-eN.startY),i=eN.isDragging,r=i&&(Math.abs(eN.x-eN.startX)>3||Math.abs(eN.y-eN.startY)>3),s=ev(e);!r&&t&&(eN._vx.reset(),eN._vy.reset(),o&&K&&F.delayedCall(.08,function(){if(ei()-eU>300&&!e.defaultPrevented){if(e.target.click)e.target.click();else if(ek.createEvent){var t=ek.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,z,1,s.screenX,s.screenY,s.clientX,s.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(t)}}})),eN.isDragging=eN.isGesturing=eN.isPressed=!1,l&&i&&!P&&el.restart(!0),ec&&ez(),g&&i&&g(eN),v&&v(eN,r)}},e$=function(e){return e.touches&&e.touches.length>1&&(eN.isGesturing=!0)&&R(e,eN.isDragging)},eY=function(){return eN.isGesturing=!1,I(eN)},eW=function(e){if(!eO(e)){var t=eT(),i=eS();eG((t-eC)*Y,(i-eP)*Y,1),eC=t,eP=i,l&&el.restart(!0)}},eH=function(e){if(!eO(e)){e=ev(e,o),k&&(ew=!0);var t=(1===e.deltaMode?s:2===e.deltaMode?z.innerHeight:1)*d;eG(e.deltaX*t,e.deltaY*t,0),l&&!P&&el.restart(!0)}},eQ=function(e){if(!eO(e)){var t=e.clientX,i=e.clientY,r=t-eN.x,a=i-eN.y;eN.x=t,eN.y=i,ed=!0,l&&el.restart(!0),(r||a)&&eV(r,a)}},eZ=function(e){eN.event=e,A(eN)},eK=function(e){eN.event=e,T(eN)},eJ=function(e){return eO(e)||ev(e,o)&&U(eN)};el=eN._dc=F.delayedCall(c||.25,function(){eN._vx.reset(),eN._vy.reset(),el.pause(),l&&l(eN)}).pause(),eN.deltaX=eN.deltaY=0,eN._vx=ef(0,50,!0),eN._vy=ef(0,50,!0),eN.scrollX=eT,eN.scrollY=eS,eN.isDragging=eN.isGesturing=eN.isPressed=!1,Q(this),eN.enable=function(e){return!eN.isEnabled&&(en(eI?ek:a,"scroll",eh),r.indexOf("scroll")>=0&&en(eI?ek:a,"scroll",eW,eA,Z),r.indexOf("wheel")>=0&&en(a,"wheel",eH,eA,Z),(r.indexOf("touch")>=0&&q||r.indexOf("pointer")>=0)&&(en(a,H[0],eq,eA,Z),en(ek,H[2],eX),en(ek,H[3],eX),K&&en(a,"click",eF,!0,!0),U&&en(a,"click",eJ),R&&en(ek,"gesturestart",e$),I&&en(ek,"gestureend",eY),A&&en(a,X+"enter",eZ),T&&en(a,X+"leave",eK),S&&en(a,X+"move",eQ)),eN.isEnabled=!0,eN.isDragging=eN.isGesturing=eN.isPressed=ed=ec=!1,eN._vx.reset(),eN._vy.reset(),eC=eT(),eP=eS(),e&&e.type&&eq(e),D&&D(eN)),eN},eN.disable=function(){eN.isEnabled&&(J.filter(function(e){return e!==eN&&es(e.target)}).length||eo(eI?ek:a,"scroll",eh),eN.isPressed&&(eN._vx.reset(),eN._vy.reset(),eo(P?a:ek,H[1],eB,!0)),eo(eI?ek:a,"scroll",eW,Z),eo(a,"wheel",eH,Z),eo(a,H[0],eq,Z),eo(ek,H[2],eX),eo(ek,H[3],eX),eo(a,"click",eF,!0),eo(a,"click",eJ),eo(ek,"gesturestart",e$),eo(ek,"gestureend",eY),eo(a,X+"enter",eZ),eo(a,X+"leave",eK),eo(a,X+"move",eQ),eN.isEnabled=eN.isPressed=eN.isDragging=!1,L&&L(eN))},eN.kill=eN.revert=function(){eN.disable();var e=J.indexOf(eN);e>=0&&J.splice(e,1),W===eN&&(W=0)},J.push(eN),P&&es(a)&&(W=eN),eN.enable(u)},e=[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}],function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();ew.version="3.13.0",ew.create=function(e){return new ew(e)},ew.register=ey,ew.getAll=function(){return J.slice()},ew.getById=function(e){return J.filter(function(t){return t.vars.id===e})[0]},Z()&&F.registerPlugin(ew),U.gsap.registerPlugin(ew);let ej=({width:e="30rem",maxHeight:t="100%",negativeMargin:i="-0.5em",items:r=[],itemMinHeight:a=150,isTilted:s=!1,tiltDirection:n="left",autoplay:o=!1,autoplaySpeed:l=.5,autoplayDirection:c="down",pauseOnHover:h=!1})=>{let u=(0,m.useRef)(null),g=(0,m.useRef)(null);return(0,m.useEffect)(()=>{let e=g.current;if(!e||0===r.length)return;let t=U.gsap.utils.toArray(e.children);if(!t.length)return;let i=t[0],a=getComputedStyle(i),s=i.offsetHeight,n=parseFloat(a.marginTop)||0,d=s+n,u=s*r.length+n*(r.length-1),m=U.gsap.utils.wrap(-u,u);t.forEach((e,t)=>{U.gsap.set(e,{y:t*d})});let p=ew.create({target:e,type:"wheel,touch,pointer",preventDefault:!0,onPress:({target:e})=>{e.style.cursor="grabbing"},onRelease:({target:e})=>{e.style.cursor="grab"},onChange:({deltaY:e,isDragging:i,event:r})=>{let a="wheel"===r.type?-e:e,s=i?5*a:10*a;t.forEach(e=>{U.gsap.to(e,{duration:.5,ease:"expo.out",y:`+=${s}`,modifiers:{y:U.gsap.utils.unitize(m)}})})}}),f=null;if(o){let i=l*("down"===c?1:-1),r=()=>{t.forEach(e=>{U.gsap.set(e,{y:`+=${i}`,modifiers:{y:U.gsap.utils.unitize(m)}})}),f=requestAnimationFrame(r)};if(f=requestAnimationFrame(r),!h)return()=>{p.kill(),f&&cancelAnimationFrame(f)};{let t=()=>f&&cancelAnimationFrame(f),i=()=>f=requestAnimationFrame(r);return e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",i),()=>{p.kill(),t(),e.removeEventListener("mouseenter",t),e.removeEventListener("mouseleave",i)}}}return()=>{p.kill(),f&&cancelAnimationFrame(f)}},[r,o,l,c,h,s,n,i]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("style",{children:`
        .infinite-scroll-wrapper {
          max-height: ${t};
        }

        .infinite-scroll-container {
          width: ${e};
        }

        .infinite-scroll-item {
          height: ${a}px;
          margin-top: ${i};
        }
        `}),(0,d.jsx)("div",{className:"infinite-scroll-wrapper",ref:u,children:(0,d.jsx)("div",{className:"infinite-scroll-container",ref:g,style:{transform:s?"left"===n?"rotateX(20deg) rotateZ(-20deg) skewX(20deg)":"rotateX(20deg) rotateZ(20deg) skewX(-20deg)":"none"},children:r.map((e,t)=>(0,d.jsx)("div",{className:"infinite-scroll-item",children:e.content},t))})})]})};var eM="undefined"!=typeof Float32Array?Float32Array:Array,eN=Math.random;function eE(e){return e>=0?Math.round(e):e%.5==0?Math.floor(e):Math.round(e)}function e_(){var e=new eM(16);return eM!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function eA(e){var t=new eM(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function eT(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function eS(e,t,i,r,a,s,n,o,l,c,h,d,u,m,g,p){var f=new eM(16);return f[0]=e,f[1]=t,f[2]=i,f[3]=r,f[4]=a,f[5]=s,f[6]=n,f[7]=o,f[8]=l,f[9]=c,f[10]=h,f[11]=d,f[12]=u,f[13]=m,f[14]=g,f[15]=p,f}function eC(e,t,i,r,a,s,n,o,l,c,h,d,u,m,g,p,f){return e[0]=t,e[1]=i,e[2]=r,e[3]=a,e[4]=s,e[5]=n,e[6]=o,e[7]=l,e[8]=c,e[9]=h,e[10]=d,e[11]=u,e[12]=m,e[13]=g,e[14]=p,e[15]=f,e}function eP(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function eR(e,t){if(e===t){var i=t[1],r=t[2],a=t[3],s=t[6],n=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=a,e[13]=n,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function eI(e,t){var i=t[0],r=t[1],a=t[2],s=t[3],n=t[4],o=t[5],l=t[6],c=t[7],h=t[8],d=t[9],u=t[10],m=t[11],g=t[12],p=t[13],f=t[14],v=t[15],x=i*o-r*n,b=i*l-a*n,y=i*c-s*n,w=r*l-a*o,j=r*c-s*o,M=a*c-s*l,N=h*p-d*g,E=h*f-u*g,_=h*v-m*g,A=d*f-u*p,T=d*v-m*p,S=u*v-m*f,C=x*S-b*T+y*A+w*_-j*E+M*N;return C?(C=1/C,e[0]=(o*S-l*T+c*A)*C,e[1]=(a*T-r*S-s*A)*C,e[2]=(p*M-f*j+v*w)*C,e[3]=(u*j-d*M-m*w)*C,e[4]=(l*_-n*S-c*E)*C,e[5]=(i*S-a*_+s*E)*C,e[6]=(f*y-g*M-v*b)*C,e[7]=(h*M-u*y+m*b)*C,e[8]=(n*T-o*_+c*N)*C,e[9]=(r*_-i*T-s*N)*C,e[10]=(g*j-p*y+v*x)*C,e[11]=(d*y-h*j-m*x)*C,e[12]=(o*E-n*A-l*N)*C,e[13]=(i*A-r*E+a*N)*C,e[14]=(p*b-g*w-f*x)*C,e[15]=(h*w-d*b+u*x)*C,e):null}function ek(e,t){var i=t[0],r=t[1],a=t[2],s=t[3],n=t[4],o=t[5],l=t[6],c=t[7],h=t[8],d=t[9],u=t[10],m=t[11],g=t[12],p=t[13],f=t[14],v=t[15],x=i*o-r*n,b=i*l-a*n,y=i*c-s*n,w=r*l-a*o,j=r*c-s*o,M=a*c-s*l,N=h*p-d*g,E=h*f-u*g,_=h*v-m*g,A=d*f-u*p,T=d*v-m*p,S=u*v-m*f;return e[0]=o*S-l*T+c*A,e[1]=a*T-r*S-s*A,e[2]=p*M-f*j+v*w,e[3]=u*j-d*M-m*w,e[4]=l*_-n*S-c*E,e[5]=i*S-a*_+s*E,e[6]=f*y-g*M-v*b,e[7]=h*M-u*y+m*b,e[8]=n*T-o*_+c*N,e[9]=r*_-i*T-s*N,e[10]=g*j-p*y+v*x,e[11]=d*y-h*j-m*x,e[12]=o*E-n*A-l*N,e[13]=i*A-r*E+a*N,e[14]=p*b-g*w-f*x,e[15]=h*w-d*b+u*x,e}function eD(e){var t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],n=e[5],o=e[6],l=e[7],c=e[8],h=e[9],d=e[10],u=e[11],m=e[12],g=e[13],p=e[14],f=e[15],v=t*n-i*s,x=t*o-r*s,b=i*o-r*n,y=c*g-h*m,w=c*p-d*m,j=h*p-d*g;return l*(t*j-i*w+r*y)-a*(s*j-n*w+o*y)+f*(c*b-h*x+d*v)-u*(m*b-g*x+p*v)}function eL(e,t,i){var r=t[0],a=t[1],s=t[2],n=t[3],o=t[4],l=t[5],c=t[6],h=t[7],d=t[8],u=t[9],m=t[10],g=t[11],p=t[12],f=t[13],v=t[14],x=t[15],b=i[0],y=i[1],w=i[2],j=i[3];return e[0]=b*r+y*o+w*d+j*p,e[1]=b*a+y*l+w*u+j*f,e[2]=b*s+y*c+w*m+j*v,e[3]=b*n+y*h+w*g+j*x,b=i[4],y=i[5],w=i[6],j=i[7],e[4]=b*r+y*o+w*d+j*p,e[5]=b*a+y*l+w*u+j*f,e[6]=b*s+y*c+w*m+j*v,e[7]=b*n+y*h+w*g+j*x,b=i[8],y=i[9],w=i[10],j=i[11],e[8]=b*r+y*o+w*d+j*p,e[9]=b*a+y*l+w*u+j*f,e[10]=b*s+y*c+w*m+j*v,e[11]=b*n+y*h+w*g+j*x,b=i[12],y=i[13],w=i[14],j=i[15],e[12]=b*r+y*o+w*d+j*p,e[13]=b*a+y*l+w*u+j*f,e[14]=b*s+y*c+w*m+j*v,e[15]=b*n+y*h+w*g+j*x,e}function eU(e,t,i){var r,a,s,n,o,l,c,h,d,u,m,g,p=i[0],f=i[1],v=i[2];return t===e?(e[12]=t[0]*p+t[4]*f+t[8]*v+t[12],e[13]=t[1]*p+t[5]*f+t[9]*v+t[13],e[14]=t[2]*p+t[6]*f+t[10]*v+t[14],e[15]=t[3]*p+t[7]*f+t[11]*v+t[15]):(r=t[0],a=t[1],s=t[2],n=t[3],o=t[4],l=t[5],c=t[6],h=t[7],d=t[8],u=t[9],m=t[10],g=t[11],e[0]=r,e[1]=a,e[2]=s,e[3]=n,e[4]=o,e[5]=l,e[6]=c,e[7]=h,e[8]=d,e[9]=u,e[10]=m,e[11]=g,e[12]=r*p+o*f+d*v+t[12],e[13]=a*p+l*f+u*v+t[13],e[14]=s*p+c*f+m*v+t[14],e[15]=n*p+h*f+g*v+t[15]),e}function eF(e,t,i){var r=i[0],a=i[1],s=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function eO(e,t,i,r){var a,s,n,o,l,c,h,d,u,m,g,p,f,v,x,b,y,w,j,M,N,E,_,A,T=r[0],S=r[1],C=r[2],P=Math.sqrt(T*T+S*S+C*C);return P<1e-6?null:(T*=P=1/P,S*=P,C*=P,a=Math.sin(i),n=1-(s=Math.cos(i)),o=t[0],l=t[1],c=t[2],h=t[3],d=t[4],u=t[5],m=t[6],g=t[7],p=t[8],f=t[9],v=t[10],x=t[11],b=T*T*n+s,y=S*T*n+C*a,w=C*T*n-S*a,j=T*S*n-C*a,M=S*S*n+s,N=C*S*n+T*a,E=T*C*n+S*a,_=S*C*n-T*a,A=C*C*n+s,e[0]=o*b+d*y+p*w,e[1]=l*b+u*y+f*w,e[2]=c*b+m*y+v*w,e[3]=h*b+g*y+x*w,e[4]=o*j+d*M+p*N,e[5]=l*j+u*M+f*N,e[6]=c*j+m*M+v*N,e[7]=h*j+g*M+x*N,e[8]=o*E+d*_+p*A,e[9]=l*E+u*_+f*A,e[10]=c*E+m*_+v*A,e[11]=h*E+g*_+x*A,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function ez(e,t,i){var r=Math.sin(i),a=Math.cos(i),s=t[4],n=t[5],o=t[6],l=t[7],c=t[8],h=t[9],d=t[10],u=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*a+c*r,e[5]=n*a+h*r,e[6]=o*a+d*r,e[7]=l*a+u*r,e[8]=c*a-s*r,e[9]=h*a-n*r,e[10]=d*a-o*r,e[11]=u*a-l*r,e}function eG(e,t,i){var r=Math.sin(i),a=Math.cos(i),s=t[0],n=t[1],o=t[2],l=t[3],c=t[8],h=t[9],d=t[10],u=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a-c*r,e[1]=n*a-h*r,e[2]=o*a-d*r,e[3]=l*a-u*r,e[8]=s*r+c*a,e[9]=n*r+h*a,e[10]=o*r+d*a,e[11]=l*r+u*a,e}function eV(e,t,i){var r=Math.sin(i),a=Math.cos(i),s=t[0],n=t[1],o=t[2],l=t[3],c=t[4],h=t[5],d=t[6],u=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a+c*r,e[1]=n*a+h*r,e[2]=o*a+d*r,e[3]=l*a+u*r,e[4]=c*a-s*r,e[5]=h*a-n*r,e[6]=d*a-o*r,e[7]=u*a-l*r,e}function eB(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function eq(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function eX(e,t,i){var r,a,s,n=i[0],o=i[1],l=i[2],c=Math.sqrt(n*n+o*o+l*l);return c<1e-6?null:(n*=c=1/c,o*=c,l*=c,r=Math.sin(t),s=1-(a=Math.cos(t)),e[0]=n*n*s+a,e[1]=o*n*s+l*r,e[2]=l*n*s-o*r,e[3]=0,e[4]=n*o*s-l*r,e[5]=o*o*s+a,e[6]=l*o*s+n*r,e[7]=0,e[8]=n*l*s+o*r,e[9]=o*l*s-n*r,e[10]=l*l*s+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function e$(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function eY(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function eW(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function eH(e,t,i){var r=t[0],a=t[1],s=t[2],n=t[3],o=r+r,l=a+a,c=s+s,h=r*o,d=r*l,u=r*c,m=a*l,g=a*c,p=s*c,f=n*o,v=n*l,x=n*c;return e[0]=1-(m+p),e[1]=d+x,e[2]=u-v,e[3]=0,e[4]=d-x,e[5]=1-(h+p),e[6]=g+f,e[7]=0,e[8]=u+v,e[9]=g-f,e[10]=1-(h+m),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function eQ(e,t){var i=new eM(3),r=-t[0],a=-t[1],s=-t[2],n=t[3],o=t[4],l=t[5],c=t[6],h=t[7],d=r*r+a*a+s*s+n*n;return d>0?(i[0]=(o*n+h*r+l*s-c*a)*2/d,i[1]=(l*n+h*a+c*r-o*s)*2/d,i[2]=(c*n+h*s+o*a-l*r)*2/d):(i[0]=(o*n+h*r+l*s-c*a)*2,i[1]=(l*n+h*a+c*r-o*s)*2,i[2]=(c*n+h*s+o*a-l*r)*2),eH(e,t,i),e}function eZ(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function eK(e,t){var i=t[0],r=t[1],a=t[2],s=t[4],n=t[5],o=t[6],l=t[8],c=t[9],h=t[10];return e[0]=Math.sqrt(i*i+r*r+a*a),e[1]=Math.sqrt(s*s+n*n+o*o),e[2]=Math.sqrt(l*l+c*c+h*h),e}function eJ(e,t){var i=new eM(3);eK(i,t);var r=1/i[0],a=1/i[1],s=1/i[2],n=t[0]*r,o=t[1]*a,l=t[2]*s,c=t[4]*r,h=t[5]*a,d=t[6]*s,u=t[8]*r,m=t[9]*a,g=t[10]*s,p=n+h+g,f=0;return p>0?(f=2*Math.sqrt(p+1),e[3]=.25*f,e[0]=(d-m)/f,e[1]=(u-l)/f,e[2]=(o-c)/f):n>h&&n>g?(f=2*Math.sqrt(1+n-h-g),e[3]=(d-m)/f,e[0]=.25*f,e[1]=(o+c)/f,e[2]=(u+l)/f):h>g?(f=2*Math.sqrt(1+h-n-g),e[3]=(u-l)/f,e[0]=(o+c)/f,e[1]=.25*f,e[2]=(d+m)/f):(f=2*Math.sqrt(1+g-n-h),e[3]=(o-c)/f,e[0]=(u+l)/f,e[1]=(d+m)/f,e[2]=.25*f),e}function e0(e,t,i,r){t[0]=r[12],t[1]=r[13],t[2]=r[14];var a=r[0],s=r[1],n=r[2],o=r[4],l=r[5],c=r[6],h=r[8],d=r[9],u=r[10];i[0]=Math.sqrt(a*a+s*s+n*n),i[1]=Math.sqrt(o*o+l*l+c*c),i[2]=Math.sqrt(h*h+d*d+u*u);var m=1/i[0],g=1/i[1],p=1/i[2],f=a*m,v=s*g,x=n*p,b=o*m,y=l*g,w=c*p,j=h*m,M=d*g,N=u*p,E=f+y+N,_=0;return E>0?(_=2*Math.sqrt(E+1),e[3]=.25*_,e[0]=(w-M)/_,e[1]=(j-x)/_,e[2]=(v-b)/_):f>y&&f>N?(_=2*Math.sqrt(1+f-y-N),e[3]=(w-M)/_,e[0]=.25*_,e[1]=(v+b)/_,e[2]=(j+x)/_):y>N?(_=2*Math.sqrt(1+y-f-N),e[3]=(j-x)/_,e[0]=(v+b)/_,e[1]=.25*_,e[2]=(w+M)/_):(_=2*Math.sqrt(1+N-f-y),e[3]=(v-b)/_,e[0]=(j+x)/_,e[1]=(w+M)/_,e[2]=.25*_),e}function e1(e,t,i,r){var a=t[0],s=t[1],n=t[2],o=t[3],l=a+a,c=s+s,h=n+n,d=a*l,u=a*c,m=a*h,g=s*c,p=s*h,f=n*h,v=o*l,x=o*c,b=o*h,y=r[0],w=r[1],j=r[2];return e[0]=(1-(g+f))*y,e[1]=(u+b)*y,e[2]=(m-x)*y,e[3]=0,e[4]=(u-b)*w,e[5]=(1-(d+f))*w,e[6]=(p+v)*w,e[7]=0,e[8]=(m+x)*j,e[9]=(p-v)*j,e[10]=(1-(d+g))*j,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function e2(e,t,i,r,a){var s=t[0],n=t[1],o=t[2],l=t[3],c=s+s,h=n+n,d=o+o,u=s*c,m=s*h,g=s*d,p=n*h,f=n*d,v=o*d,x=l*c,b=l*h,y=l*d,w=r[0],j=r[1],M=r[2],N=a[0],E=a[1],_=a[2],A=(1-(p+v))*w,T=(m+y)*w,S=(g-b)*w,C=(m-y)*j,P=(1-(u+v))*j,R=(f+x)*j,I=(g+b)*M,k=(f-x)*M,D=(1-(u+p))*M;return e[0]=A,e[1]=T,e[2]=S,e[3]=0,e[4]=C,e[5]=P,e[6]=R,e[7]=0,e[8]=I,e[9]=k,e[10]=D,e[11]=0,e[12]=i[0]+N-(A*N+C*E+I*_),e[13]=i[1]+E-(T*N+P*E+k*_),e[14]=i[2]+_-(S*N+R*E+D*_),e[15]=1,e}function e3(e,t){var i=t[0],r=t[1],a=t[2],s=t[3],n=i+i,o=r+r,l=a+a,c=i*n,h=r*n,d=r*o,u=a*n,m=a*o,g=a*l,p=s*n,f=s*o,v=s*l;return e[0]=1-d-g,e[1]=h+v,e[2]=u-f,e[3]=0,e[4]=h-v,e[5]=1-c-g,e[6]=m+p,e[7]=0,e[8]=u+f,e[9]=m-p,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function e5(e,t,i,r,a,s,n){var o=1/(i-t),l=1/(a-r),c=1/(s-n);return e[0]=2*s*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*l,e[6]=0,e[7]=0,e[8]=(i+t)*o,e[9]=(a+r)*l,e[10]=(n+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=n*s*2*c,e[15]=0,e}function e4(e,t,i,r,a){var s=1/Math.tan(t/2);if(e[0]=s/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0){var n=1/(r-a);e[10]=(a+r)*n,e[14]=2*a*r*n}else e[10]=-1,e[14]=-2*r;return e}function e6(e,t,i,r,a){var s=1/Math.tan(t/2);if(e[0]=s/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0){var n=1/(r-a);e[10]=a*n,e[14]=a*r*n}else e[10]=-1,e[14]=-r;return e}function e9(e,t,i,r){var a=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),n=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),l=2/(n+o),c=2/(a+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-((n-o)*l*.5),e[9]=(a-s)*c*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function e8(e,t,i,r,a,s,n){var o=1/(t-i),l=1/(r-a),c=1/(s-n);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*o,e[13]=(a+r)*l,e[14]=(n+s)*c,e[15]=1,e}function e7(e,t,i,r,a,s,n){var o=1/(t-i),l=1/(r-a),c=1/(s-n);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=c,e[11]=0,e[12]=(t+i)*o,e[13]=(a+r)*l,e[14]=s*c,e[15]=1,e}function te(e,t,i,r){var a,s,n,o,l,c,h,d,u,m,g=t[0],p=t[1],f=t[2],v=r[0],x=r[1],b=r[2],y=i[0],w=i[1],j=i[2];return 1e-6>Math.abs(g-y)&&1e-6>Math.abs(p-w)&&1e-6>Math.abs(f-j)?eP(e):(m=1/Math.sqrt((h=g-y)*h+(d=p-w)*d+(u=f-j)*u),h*=m,d*=m,u*=m,(m=Math.sqrt((a=x*u-b*d)*a+(s=b*h-v*u)*s+(n=v*d-x*h)*n))?(a*=m=1/m,s*=m,n*=m):(a=0,s=0,n=0),(m=Math.sqrt((o=d*n-u*s)*o+(l=u*a-h*n)*l+(c=h*s-d*a)*c))?(o*=m=1/m,l*=m,c*=m):(o=0,l=0,c=0),e[0]=a,e[1]=o,e[2]=h,e[3]=0,e[4]=s,e[5]=l,e[6]=d,e[7]=0,e[8]=n,e[9]=c,e[10]=u,e[11]=0,e[12]=-(a*g+s*p+n*f),e[13]=-(o*g+l*p+c*f),e[14]=-(h*g+d*p+u*f),e[15]=1,e)}function tt(e,t,i,r){var a=t[0],s=t[1],n=t[2],o=r[0],l=r[1],c=r[2],h=a-i[0],d=s-i[1],u=n-i[2],m=h*h+d*d+u*u;m>0&&(h*=m=1/Math.sqrt(m),d*=m,u*=m);var g=l*u-c*d,p=c*h-o*u,f=o*d-l*h;return(m=g*g+p*p+f*f)>0&&(g*=m=1/Math.sqrt(m),p*=m,f*=m),e[0]=g,e[1]=p,e[2]=f,e[3]=0,e[4]=d*f-u*p,e[5]=u*g-h*f,e[6]=h*p-d*g,e[7]=0,e[8]=h,e[9]=d,e[10]=u,e[11]=0,e[12]=a,e[13]=s,e[14]=n,e[15]=1,e}function ti(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function tr(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]+e[3]*e[3]+e[4]*e[4]+e[5]*e[5]+e[6]*e[6]+e[7]*e[7]+e[8]*e[8]+e[9]*e[9]+e[10]*e[10]+e[11]*e[11]+e[12]*e[12]+e[13]*e[13]+e[14]*e[14]+e[15]*e[15])}function ta(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function ts(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function tn(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function to(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function tl(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function tc(e,t){var i=e[0],r=e[1],a=e[2],s=e[3],n=e[4],o=e[5],l=e[6],c=e[7],h=e[8],d=e[9],u=e[10],m=e[11],g=e[12],p=e[13],f=e[14],v=e[15],x=t[0],b=t[1],y=t[2],w=t[3],j=t[4],M=t[5],N=t[6],E=t[7],_=t[8],A=t[9],T=t[10],S=t[11],C=t[12],P=t[13],R=t[14],I=t[15];return Math.abs(i-x)<=1e-6*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(r-b)<=1e-6*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(a-y)<=1e-6*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(s-w)<=1e-6*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(n-j)<=1e-6*Math.max(1,Math.abs(n),Math.abs(j))&&Math.abs(o-M)<=1e-6*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(l-N)<=1e-6*Math.max(1,Math.abs(l),Math.abs(N))&&Math.abs(c-E)<=1e-6*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(h-_)<=1e-6*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(d-A)<=1e-6*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(u-T)<=1e-6*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(m-S)<=1e-6*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(g-C)<=1e-6*Math.max(1,Math.abs(g),Math.abs(C))&&Math.abs(p-P)<=1e-6*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(f-R)<=1e-6*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(v-I)<=1e-6*Math.max(1,Math.abs(v),Math.abs(I))}e.s(["add",()=>ta,"adjoint",()=>ek,"clone",()=>eA,"copy",()=>eT,"create",()=>e_,"decompose",()=>e0,"determinant",()=>eD,"equals",()=>tc,"exactEquals",()=>tl,"frob",()=>tr,"fromQuat",()=>e3,"fromQuat2",()=>eQ,"fromRotation",()=>eX,"fromRotationTranslation",()=>eH,"fromRotationTranslationScale",()=>e1,"fromRotationTranslationScaleOrigin",()=>e2,"fromScaling",()=>eq,"fromTranslation",()=>eB,"fromValues",()=>eS,"fromXRotation",()=>e$,"fromYRotation",()=>eY,"fromZRotation",()=>eW,"frustum",()=>e5,"getRotation",()=>eJ,"getScaling",()=>eK,"getTranslation",()=>eZ,"identity",()=>eP,"invert",()=>eI,"lookAt",()=>te,"mul",()=>eL,"multiply",()=>eL,"multiplyScalar",()=>tn,"multiplyScalarAndAdd",()=>to,"ortho",()=>e8,"orthoNO",()=>e8,"orthoZO",()=>e7,"perspective",()=>e4,"perspectiveFromFieldOfView",()=>e9,"perspectiveNO",()=>e4,"perspectiveZO",()=>e6,"rotate",()=>eO,"rotateX",()=>ez,"rotateY",()=>eG,"rotateZ",()=>eV,"scale",()=>eF,"set",()=>eC,"str",()=>ti,"sub",()=>ts,"subtract",()=>ts,"targetTo",()=>tt,"translate",()=>eU,"transpose",()=>eR],71172);var th=e.i(71172),th=th;function td(){var e=new eM(3);return eM!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function tu(e){var t=new eM(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function tm(e){var t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function tg(e,t,i){var r=new eM(3);return r[0]=e,r[1]=t,r[2]=i,r}function tp(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function tf(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function tv(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function tx(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function tb(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function ty(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function tw(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function tj(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function tM(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function tN(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function tE(e,t){return e[0]=eE(t[0]),e[1]=eE(t[1]),e[2]=eE(t[2]),e}function t_(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function tA(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function tT(e,t){var i=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(i*i+r*r+a*a)}function tS(e,t){var i=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return i*i+r*r+a*a}function tC(e){var t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function tP(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function tR(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function tI(e,t){var i=t[0],r=t[1],a=t[2],s=i*i+r*r+a*a;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function tk(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function tD(e,t,i){var r=t[0],a=t[1],s=t[2],n=i[0],o=i[1],l=i[2];return e[0]=a*l-s*o,e[1]=s*n-r*l,e[2]=r*o-a*n,e}function tL(e,t,i,r){var a=t[0],s=t[1],n=t[2];return e[0]=a+r*(i[0]-a),e[1]=s+r*(i[1]-s),e[2]=n+r*(i[2]-n),e}function tU(e,t,i,r){var a=Math.acos(Math.min(Math.max(tk(t,i),-1),1)),s=Math.sin(a),n=Math.sin((1-r)*a)/s,o=Math.sin(r*a)/s;return e[0]=n*t[0]+o*i[0],e[1]=n*t[1]+o*i[1],e[2]=n*t[2]+o*i[2],e}function tF(e,t,i,r,a,s){var n=s*s,o=n*(2*s-3)+1,l=n*(s-2)+s,c=n*(s-1),h=n*(3-2*s);return e[0]=t[0]*o+i[0]*l+r[0]*c+a[0]*h,e[1]=t[1]*o+i[1]*l+r[1]*c+a[1]*h,e[2]=t[2]*o+i[2]*l+r[2]*c+a[2]*h,e}function tO(e,t,i,r,a,s){var n=1-s,o=n*n,l=s*s,c=o*n,h=3*s*o,d=3*l*n,u=l*s;return e[0]=t[0]*c+i[0]*h+r[0]*d+a[0]*u,e[1]=t[1]*c+i[1]*h+r[1]*d+a[1]*u,e[2]=t[2]*c+i[2]*h+r[2]*d+a[2]*u,e}function tz(e,t){t=void 0===t?1:t;var i=2*eN()*Math.PI,r=2*eN()-1,a=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(i)*a,e[1]=Math.sin(i)*a,e[2]=r*t,e}function tG(e,t,i){var r=t[0],a=t[1],s=t[2],n=i[3]*r+i[7]*a+i[11]*s+i[15];return n=n||1,e[0]=(i[0]*r+i[4]*a+i[8]*s+i[12])/n,e[1]=(i[1]*r+i[5]*a+i[9]*s+i[13])/n,e[2]=(i[2]*r+i[6]*a+i[10]*s+i[14])/n,e}function tV(e,t,i){var r=t[0],a=t[1],s=t[2];return e[0]=r*i[0]+a*i[3]+s*i[6],e[1]=r*i[1]+a*i[4]+s*i[7],e[2]=r*i[2]+a*i[5]+s*i[8],e}function tB(e,t,i){var r=i[0],a=i[1],s=i[2],n=i[3],o=t[0],l=t[1],c=t[2],h=a*c-s*l,d=s*o-r*c,u=r*l-a*o;return h+=h,d+=d,u+=u,e[0]=o+n*h+a*u-s*d,e[1]=l+n*d+s*h-r*u,e[2]=c+n*u+r*d-a*h,e}function tq(e,t,i,r){var a=[],s=[];return a[0]=t[0]-i[0],a[1]=t[1]-i[1],a[2]=t[2]-i[2],s[0]=a[0],s[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),s[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=s[0]+i[0],e[1]=s[1]+i[1],e[2]=s[2]+i[2],e}function tX(e,t,i,r){var a=[],s=[];return a[0]=t[0]-i[0],a[1]=t[1]-i[1],a[2]=t[2]-i[2],s[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),s[1]=a[1],s[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=s[0]+i[0],e[1]=s[1]+i[1],e[2]=s[2]+i[2],e}function t$(e,t,i,r){var a=[],s=[];return a[0]=t[0]-i[0],a[1]=t[1]-i[1],a[2]=t[2]-i[2],s[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),s[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),s[2]=a[2],e[0]=s[0]+i[0],e[1]=s[1]+i[1],e[2]=s[2]+i[2],e}function tY(e,t){var i=e[0],r=e[1],a=e[2],s=t[0],n=t[1],o=t[2],l=Math.sqrt((i*i+r*r+a*a)*(s*s+n*n+o*o));return Math.acos(Math.min(Math.max(l&&tk(e,t)/l,-1),1))}function tW(e){return e[0]=0,e[1]=0,e[2]=0,e}function tH(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function tQ(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function tZ(e,t){var i=e[0],r=e[1],a=e[2],s=t[0],n=t[1],o=t[2];return Math.abs(i-s)<=1e-6*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-n)<=1e-6*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(a-o)<=1e-6*Math.max(1,Math.abs(a),Math.abs(o))}var tK=(t=td(),function(e,i,r,a,s,n){var o,l;for(i||(i=3),r||(r=0),l=a?Math.min(a*i+r,e.length):e.length,o=r;o<l;o+=i)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],s(t,t,n),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e});function tJ(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function t0(){var e=new eM(4);return eM!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function t1(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function t2(e,t,i){var r=Math.sin(i*=.5);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(i),e}function t3(e,t){var i=2*Math.acos(t[3]),r=Math.sin(i/2);return r>1e-6?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),i}function t5(e,t){var i=ix(e,t);return Math.acos(2*i*i-1)}function t4(e,t,i){var r=t[0],a=t[1],s=t[2],n=t[3],o=i[0],l=i[1],c=i[2],h=i[3];return e[0]=r*h+n*o+a*c-s*l,e[1]=a*h+n*l+s*o-r*c,e[2]=s*h+n*c+r*l-a*o,e[3]=n*h-r*o-a*l-s*c,e}function t6(e,t,i){i*=.5;var r=t[0],a=t[1],s=t[2],n=t[3],o=Math.sin(i),l=Math.cos(i);return e[0]=r*l+n*o,e[1]=a*l+s*o,e[2]=s*l-a*o,e[3]=n*l-r*o,e}function t9(e,t,i){i*=.5;var r=t[0],a=t[1],s=t[2],n=t[3],o=Math.sin(i),l=Math.cos(i);return e[0]=r*l-s*o,e[1]=a*l+n*o,e[2]=s*l+r*o,e[3]=n*l-a*o,e}function t8(e,t,i){i*=.5;var r=t[0],a=t[1],s=t[2],n=t[3],o=Math.sin(i),l=Math.cos(i);return e[0]=r*l+a*o,e[1]=a*l-r*o,e[2]=s*l+n*o,e[3]=n*l-s*o,e}function t7(e,t){var i=t[0],r=t[1],a=t[2];return e[0]=i,e[1]=r,e[2]=a,e[3]=Math.sqrt(Math.abs(1-i*i-r*r-a*a)),e}function ie(e,t){var i=t[0],r=t[1],a=t[2],s=t[3],n=Math.sqrt(i*i+r*r+a*a),o=Math.exp(s),l=n>0?o*Math.sin(n)/n:0;return e[0]=i*l,e[1]=r*l,e[2]=a*l,e[3]=o*Math.cos(n),e}function it(e,t){var i=t[0],r=t[1],a=t[2],s=t[3],n=Math.sqrt(i*i+r*r+a*a),o=n>0?Math.atan2(n,s)/n:0;return e[0]=i*o,e[1]=r*o,e[2]=a*o,e[3]=.5*Math.log(i*i+r*r+a*a+s*s),e}function ii(e,t,i){return it(e,t),iv(e,e,i),ie(e,e),e}function ir(e,t,i,r){var a,s,n,o,l,c=t[0],h=t[1],d=t[2],u=t[3],m=i[0],g=i[1],p=i[2],f=i[3];return(s=c*m+h*g+d*p+u*f)<0&&(s=-s,m=-m,g=-g,p=-p,f=-f),1-s>1e-6?(n=Math.sin(a=Math.acos(s)),o=Math.sin((1-r)*a)/n,l=Math.sin(r*a)/n):(o=1-r,l=r),e[0]=o*c+l*m,e[1]=o*h+l*g,e[2]=o*d+l*p,e[3]=o*u+l*f,e}function ia(e){var t=eN(),i=eN(),r=eN(),a=Math.sqrt(1-t),s=Math.sqrt(t);return e[0]=a*Math.sin(2*Math.PI*i),e[1]=a*Math.cos(2*Math.PI*i),e[2]=s*Math.sin(2*Math.PI*r),e[3]=s*Math.cos(2*Math.PI*r),e}function is(e,t){var i=t[0],r=t[1],a=t[2],s=t[3],n=i*i+r*r+a*a+s*s,o=n?1/n:0;return e[0]=-i*o,e[1]=-r*o,e[2]=-a*o,e[3]=s*o,e}function io(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function il(e,t){var i,r=t[0]+t[4]+t[8];if(r>0)i=Math.sqrt(r+1),e[3]=.5*i,i=.5/i,e[0]=(t[5]-t[7])*i,e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i;else{var a=0;t[4]>t[0]&&(a=1),t[8]>t[3*a+a]&&(a=2);var s=(a+1)%3,n=(a+2)%3;i=Math.sqrt(t[3*a+a]-t[3*s+s]-t[3*n+n]+1),e[a]=.5*i,i=.5/i,e[3]=(t[3*s+n]-t[3*n+s])*i,e[s]=(t[3*s+a]+t[3*a+s])*i,e[n]=(t[3*n+a]+t[3*a+n])*i}return e}function ic(e,t,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"zyx",s=Math.PI/360;t*=s,r*=s;var n=Math.sin(t),o=Math.cos(t),l=Math.sin(i*=s),c=Math.cos(i),h=Math.sin(r),d=Math.cos(r);switch(a){case"xyz":e[0]=n*c*d+o*l*h,e[1]=o*l*d-n*c*h,e[2]=o*c*h+n*l*d,e[3]=o*c*d-n*l*h;break;case"xzy":e[0]=n*c*d-o*l*h,e[1]=o*l*d-n*c*h,e[2]=o*c*h+n*l*d,e[3]=o*c*d+n*l*h;break;case"yxz":e[0]=n*c*d+o*l*h,e[1]=o*l*d-n*c*h,e[2]=o*c*h-n*l*d,e[3]=o*c*d+n*l*h;break;case"yzx":e[0]=n*c*d+o*l*h,e[1]=o*l*d+n*c*h,e[2]=o*c*h-n*l*d,e[3]=o*c*d-n*l*h;break;case"zxy":e[0]=n*c*d-o*l*h,e[1]=o*l*d+n*c*h,e[2]=o*c*h+n*l*d,e[3]=o*c*d-n*l*h;break;case"zyx":e[0]=n*c*d-o*l*h,e[1]=o*l*d+n*c*h,e[2]=o*c*h-n*l*d,e[3]=o*c*d+n*l*h;break;default:throw Error("Unknown angle order "+a)}return e}function ih(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}e.s(["add",()=>tv,"angle",()=>tY,"bezier",()=>tO,"ceil",()=>tw,"clone",()=>tu,"copy",()=>tp,"create",()=>td,"cross",()=>tD,"dist",()=>tT,"distance",()=>tT,"div",()=>ty,"divide",()=>ty,"dot",()=>tk,"equals",()=>tZ,"exactEquals",()=>tQ,"floor",()=>tj,"forEach",()=>tK,"fromValues",()=>tg,"hermite",()=>tF,"inverse",()=>tR,"len",()=>tm,"length",()=>tm,"lerp",()=>tL,"max",()=>tN,"min",()=>tM,"mul",()=>tb,"multiply",()=>tb,"negate",()=>tP,"normalize",()=>tI,"random",()=>tz,"rotateX",()=>tq,"rotateY",()=>tX,"rotateZ",()=>t$,"round",()=>tE,"scale",()=>t_,"scaleAndAdd",()=>tA,"set",()=>tf,"slerp",()=>tU,"sqrDist",()=>tS,"sqrLen",()=>tC,"squaredDistance",()=>tS,"squaredLength",()=>tC,"str",()=>tH,"sub",()=>tx,"subtract",()=>tx,"transformMat3",()=>tV,"transformMat4",()=>tG,"transformQuat",()=>tB,"zero",()=>tW],26696),i=new eM(4),eM!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0,i[3]=0);var id=function(e){var t=new eM(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},iu=function(e,t,i,r){var a=new eM(4);return a[0]=e,a[1]=t,a[2]=i,a[3]=r,a},im=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},ig=function(e,t,i,r,a){return e[0]=t,e[1]=i,e[2]=r,e[3]=a,e},ip=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e},iv=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},ix=tJ,ib=function(e,t,i,r){var a=t[0],s=t[1],n=t[2],o=t[3];return e[0]=a+r*(i[0]-a),e[1]=s+r*(i[1]-s),e[2]=n+r*(i[2]-n),e[3]=o+r*(i[3]-o),e},iy=function(e){var t=e[0],i=e[1],r=e[2],a=e[3];return Math.sqrt(t*t+i*i+r*r+a*a)},iw=function(e){var t=e[0],i=e[1],r=e[2],a=e[3];return t*t+i*i+r*r+a*a},ij=function(e,t){var i=t[0],r=t[1],a=t[2],s=t[3],n=i*i+r*r+a*a+s*s;return n>0&&(n=1/Math.sqrt(n)),e[0]=i*n,e[1]=r*n,e[2]=a*n,e[3]=s*n,e},iM=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]};function iN(e,t){return Math.abs(tJ(e,t))>=.999999}var iE=(r=td(),a=tg(1,0,0),s=tg(0,1,0),function(e,t,i){var n=tk(t,i);return n<-.999999?(tD(r,a,t),1e-6>tm(r)&&tD(r,s,t),tI(r,r),t2(e,r,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(tD(r,t,i),e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=1+n,ij(e,e))}),i_=(n=t0(),o=t0(),function(e,t,i,r,a,s){return ir(n,t,a,s),ir(o,i,r,s),ir(e,n,o,2*s*(1-s)),e}),iA=(l=new eM(9),eM!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,c=l,function(e,t,i,r){return c[0]=i[0],c[3]=i[1],c[6]=i[2],c[1]=r[0],c[4]=r[1],c[7]=r[2],c[2]=-t[0],c[5]=-t[1],c[8]=-t[2],ij(e,il(e,c))});e.s(["add",()=>ip,"calculateW",()=>t7,"clone",()=>id,"conjugate",()=>io,"copy",()=>im,"create",()=>t0,"dot",()=>ix,"equals",()=>iN,"exactEquals",()=>iM,"exp",()=>ie,"fromEuler",()=>ic,"fromMat3",()=>il,"fromValues",()=>iu,"getAngle",()=>t5,"getAxisAngle",()=>t3,"identity",()=>t1,"invert",()=>is,"len",()=>iy,"length",()=>iy,"lerp",()=>ib,"ln",()=>it,"mul",()=>t4,"multiply",()=>t4,"normalize",()=>ij,"pow",()=>ii,"random",()=>ia,"rotateX",()=>t6,"rotateY",()=>t9,"rotateZ",()=>t8,"rotationTo",()=>iE,"scale",()=>iv,"set",()=>ig,"setAxes",()=>iA,"setAxisAngle",()=>t2,"slerp",()=>ir,"sqlerp",()=>i_,"sqrLen",()=>iw,"squaredLength",()=>iw,"str",()=>ih],31100);var iT=e.i(31100),iT=iT;function iS(){var e=new eM(2);return eM!=Float32Array&&(e[0]=0,e[1]=0),e}function iC(e){var t=new eM(2);return t[0]=e[0],t[1]=e[1],t}function iP(e,t){var i=new eM(2);return i[0]=e,i[1]=t,i}function iR(e,t){return e[0]=t[0],e[1]=t[1],e}function iI(e,t,i){return e[0]=t,e[1]=i,e}function ik(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function iD(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function iL(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function iU(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function iF(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function iO(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function iz(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function iG(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function iV(e,t){return e[0]=eE(t[0]),e[1]=eE(t[1]),e}function iB(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function iq(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function iX(e,t){var i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function i$(e,t){var i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function iY(e){var t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function iW(e){var t=e[0],i=e[1];return t*t+i*i}function iH(e,t){return e[0]=-t[0],e[1]=-t[1],e}function iQ(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function iZ(e,t){var i=t[0],r=t[1],a=i*i+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e}function iK(e,t){return e[0]*t[0]+e[1]*t[1]}function iJ(e,t,i){var r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function i0(e,t,i,r){var a=t[0],s=t[1];return e[0]=a+r*(i[0]-a),e[1]=s+r*(i[1]-s),e}function i1(e,t){t=void 0===t?1:t;var i=2*eN()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function i2(e,t,i){var r=t[0],a=t[1];return e[0]=i[0]*r+i[2]*a,e[1]=i[1]*r+i[3]*a,e}function i3(e,t,i){var r=t[0],a=t[1];return e[0]=i[0]*r+i[2]*a+i[4],e[1]=i[1]*r+i[3]*a+i[5],e}function i5(e,t,i){var r=t[0],a=t[1];return e[0]=i[0]*r+i[3]*a+i[6],e[1]=i[1]*r+i[4]*a+i[7],e}function i4(e,t,i){var r=t[0],a=t[1];return e[0]=i[0]*r+i[4]*a+i[12],e[1]=i[1]*r+i[5]*a+i[13],e}function i6(e,t,i,r){var a=t[0]-i[0],s=t[1]-i[1],n=Math.sin(r),o=Math.cos(r);return e[0]=a*o-s*n+i[0],e[1]=a*n+s*o+i[1],e}function i9(e,t){var i=e[0],r=e[1],a=t[0],s=t[1];return Math.abs(Math.atan2(r*a-i*s,i*a+r*s))}function i8(e,t){var i=e[0],r=e[1],a=t[0],s=t[1];return Math.atan2(i*s-r*a,i*a+r*s)}function i7(e){return e[0]=0,e[1]=0,e}function re(e){return"vec2("+e[0]+", "+e[1]+")"}function rt(e,t){return e[0]===t[0]&&e[1]===t[1]}function ri(e,t){var i=e[0],r=e[1],a=t[0],s=t[1];return Math.abs(i-a)<=1e-6*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-s)<=1e-6*Math.max(1,Math.abs(r),Math.abs(s))}var rr=(h=iS(),function(e,t,i,r,a,s){var n,o;for(t||(t=2),i||(i=0),o=r?Math.min(r*t+i,e.length):e.length,n=i;n<o;n+=t)h[0]=e[n],h[1]=e[n+1],a(h,h,s),e[n]=h[0],e[n+1]=h[1];return e});e.s(["add",()=>ik,"angle",()=>i9,"ceil",()=>iF,"clone",()=>iC,"copy",()=>iR,"create",()=>iS,"cross",()=>iJ,"dist",()=>iX,"distance",()=>iX,"div",()=>iU,"divide",()=>iU,"dot",()=>iK,"equals",()=>ri,"exactEquals",()=>rt,"floor",()=>iO,"forEach",()=>rr,"fromValues",()=>iP,"inverse",()=>iQ,"len",()=>iY,"length",()=>iY,"lerp",()=>i0,"max",()=>iG,"min",()=>iz,"mul",()=>iL,"multiply",()=>iL,"negate",()=>iH,"normalize",()=>iZ,"random",()=>i1,"rotate",()=>i6,"round",()=>iV,"scale",()=>iB,"scaleAndAdd",()=>iq,"set",()=>iI,"signedAngle",()=>i8,"sqrDist",()=>i$,"sqrLen",()=>iW,"squaredDistance",()=>i$,"squaredLength",()=>iW,"str",()=>re,"sub",()=>iD,"subtract",()=>iD,"transformMat2",()=>i2,"transformMat2d",()=>i3,"transformMat3",()=>i5,"transformMat4",()=>i4,"zero",()=>i7],51480);var ra=e.i(51480),ra=ra,rs=e.i(26696),rs=rs;let rn=`#version 300 es

uniform mat4 uWorldMatrix;
uniform mat4 uViewMatrix;
uniform mat4 uProjectionMatrix;
uniform vec3 uCameraPosition;
uniform vec4 uRotationAxisVelocity;

in vec3 aModelPosition;
in vec3 aModelNormal;
in vec2 aModelUvs;
in mat4 aInstanceMatrix;

out vec2 vUvs;
out float vAlpha;
flat out int vInstanceId;

#define PI 3.141593

void main() {
    vec4 worldPosition = uWorldMatrix * aInstanceMatrix * vec4(aModelPosition, 1.);

    vec3 centerPos = (uWorldMatrix * aInstanceMatrix * vec4(0., 0., 0., 1.)).xyz;
    float radius = length(centerPos.xyz);

    if (gl_VertexID > 0) {
        vec3 rotationAxis = uRotationAxisVelocity.xyz;
        float rotationVelocity = min(.15, uRotationAxisVelocity.w * 15.);
        vec3 stretchDir = normalize(cross(centerPos, rotationAxis));
        vec3 relativeVertexPos = normalize(worldPosition.xyz - centerPos);
        float strength = dot(stretchDir, relativeVertexPos);
        float invAbsStrength = min(0., abs(strength) - 1.);
        strength = rotationVelocity * sign(strength) * abs(invAbsStrength * invAbsStrength * invAbsStrength + 1.);
        worldPosition.xyz += stretchDir * strength;
    }

    worldPosition.xyz = radius * normalize(worldPosition.xyz);

    gl_Position = uProjectionMatrix * uViewMatrix * worldPosition;

    vAlpha = smoothstep(0.5, 1., normalize(worldPosition.xyz).z) * .9 + .1;
    vUvs = aModelUvs;
    vInstanceId = gl_InstanceID;
}
`,ro=`#version 300 es
precision highp float;

uniform sampler2D uTex;
uniform int uItemCount;
uniform int uAtlasSize;

out vec4 outColor;

in vec2 vUvs;
in float vAlpha;
flat in int vInstanceId;

void main() {
    int itemIndex = vInstanceId % uItemCount;
    int cellsPerRow = uAtlasSize;
    int cellX = itemIndex % cellsPerRow;
    int cellY = itemIndex / cellsPerRow;
    vec2 cellSize = vec2(1.0) / vec2(float(cellsPerRow));
    vec2 cellOffset = vec2(float(cellX), float(cellY)) * cellSize;

    ivec2 texSize = textureSize(uTex, 0);
    float imageAspect = float(texSize.x) / float(texSize.y);
    float containerAspect = 1.0;
    
    float scale = max(imageAspect / containerAspect, 
                     containerAspect / imageAspect);
    
    vec2 st = vec2(vUvs.x, 1.0 - vUvs.y);
    st = (st - 0.5) * scale + 0.5;
    
    st = clamp(st, 0.0, 1.0);
    
    st = st * cellSize + cellOffset;
    
    outColor = texture(uTex, st);
    outColor.a *= vAlpha;
}
`;class rl{constructor(e,t,i){this.a=e,this.b=t,this.c=i}a;b;c}class rc{constructor(e,t,i){this.position=rs.fromValues(e,t,i),this.normal=rs.create(),this.uv=ra.create()}position;normal;uv}class rh{constructor(){this.vertices=[],this.faces=[]}vertices;faces;addVertex(...e){for(let t=0;t<e.length;t+=3)this.vertices.push(new rc(e[t],e[t+1],e[t+2]));return this}addFace(...e){for(let t=0;t<e.length;t+=3)this.faces.push(new rl(e[t],e[t+1],e[t+2]));return this}get lastVertex(){return this.vertices[this.vertices.length-1]}subdivide(e=1){let t={},i=this.faces;for(let r=0;r<e;++r){let e=Array(4*i.length);i.forEach((i,r)=>{let a=this.getMidPoint(i.a,i.b,t),s=this.getMidPoint(i.b,i.c,t),n=this.getMidPoint(i.c,i.a,t),o=4*r;e[o+0]=new rl(i.a,a,n),e[o+1]=new rl(i.b,s,a),e[o+2]=new rl(i.c,n,s),e[o+3]=new rl(a,s,n)}),i=e}return this.faces=i,this}spherize(e=1){return this.vertices.forEach(t=>{rs.normalize(t.normal,t.position),rs.scale(t.position,t.normal,e)}),this}get data(){return{vertices:this.vertexData,indices:this.indexData,normals:this.normalData,uvs:this.uvData}}get vertexData(){return new Float32Array(this.vertices.flatMap(e=>Array.from(e.position)))}get normalData(){return new Float32Array(this.vertices.flatMap(e=>Array.from(e.normal)))}get uvData(){return new Float32Array(this.vertices.flatMap(e=>Array.from(e.uv)))}get indexData(){return new Uint16Array(this.faces.flatMap(e=>[e.a,e.b,e.c]))}getMidPoint(e,t,i){let r=e<t?`k_${t}_${e}`:`k_${e}_${t}`;if(Object.prototype.hasOwnProperty.call(i,r))return i[r];let a=this.vertices[e].position,s=this.vertices[t].position,n=this.vertices.length;return i[r]=n,this.addVertex((a[0]+s[0])*.5,(a[1]+s[1])*.5,(a[2]+s[2])*.5),n}}class rd extends rh{constructor(){super();const e=.5*Math.sqrt(5)+.5;this.addVertex(-1,e,0,1,e,0,-1,-e,0,1,-e,0,0,-1,e,0,1,e,0,-1,-e,0,1,-e,e,0,-1,e,0,1,-e,0,-1,-e,0,1).addFace(0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1)}}class ru extends rh{constructor(e=4,t=1){super();const i=2*Math.PI/(e=Math.max(4,e));this.addVertex(0,0,0),this.lastVertex.uv[0]=.5,this.lastVertex.uv[1]=.5;for(let r=0;r<e;++r){const e=Math.cos(i*r),a=Math.sin(i*r);this.addVertex(t*e,t*a,0),this.lastVertex.uv[0]=.5*e+.5,this.lastVertex.uv[1]=.5*a+.5,r>0&&this.addFace(0,r,r+1)}this.addFace(0,e,1)}}function rm(e,t,i){let r=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,t,i),e.bindBuffer(e.ARRAY_BUFFER,null),r}class rg{isPointerDown=!1;orientation=iT.create();pointerRotation=iT.create();rotationVelocity=0;rotationAxis=rs.fromValues(1,0,0);snapDirection=rs.fromValues(0,0,-1);snapTargetDirection;EPSILON=.1;IDENTITY_QUAT=iT.create();canvas;updateCallback;pointerPos=ra.create();previousPointerPos=ra.create();_rotationVelocity=0;_combinedQuat=iT.create();constructor(e,t){this.canvas=e,this.updateCallback=t||(()=>null),e.addEventListener("pointerdown",e=>{ra.set(this.pointerPos,e.clientX,e.clientY),ra.copy(this.previousPointerPos,this.pointerPos),this.isPointerDown=!0}),e.addEventListener("pointerup",()=>{this.isPointerDown=!1}),e.addEventListener("pointerleave",()=>{this.isPointerDown=!1}),e.addEventListener("pointermove",e=>{this.isPointerDown&&ra.set(this.pointerPos,e.clientX,e.clientY)}),e.style.touchAction="none"}update(e,t=16){let i=e/t+1e-5,r=i,a=iT.create();if(this.isPointerDown){let e=.3*i,t=ra.sub(ra.create(),this.pointerPos,this.previousPointerPos);if(ra.scale(t,t,e),ra.sqrLen(t)>this.EPSILON){ra.add(t,this.previousPointerPos,t);let e=this.#e(t),a=this.#e(this.previousPointerPos),s=rs.normalize(rs.create(),e),n=rs.normalize(rs.create(),a);ra.copy(this.previousPointerPos,t),r*=5/i,this.quatFromVectors(s,n,this.pointerRotation,r)}else iT.slerp(this.pointerRotation,this.pointerRotation,this.IDENTITY_QUAT,e)}else if(iT.slerp(this.pointerRotation,this.pointerRotation,this.IDENTITY_QUAT,.1*i),this.snapTargetDirection){let e=this.snapTargetDirection,t=this.snapDirection;r*=.2*Math.max(.1,1-10*rs.squaredDistance(e,t)),this.quatFromVectors(e,t,a,r)}let s=iT.multiply(iT.create(),a,this.pointerRotation);this.orientation=iT.multiply(iT.create(),s,this.orientation),iT.normalize(this.orientation,this.orientation),iT.slerp(this._combinedQuat,this._combinedQuat,s,.8*i),iT.normalize(this._combinedQuat,this._combinedQuat);let n=2*Math.acos(this._combinedQuat[3]),o=Math.sin(n/2),l=0;o>1e-6&&(l=n/(2*Math.PI),this.rotationAxis[0]=this._combinedQuat[0]/o,this.rotationAxis[1]=this._combinedQuat[1]/o,this.rotationAxis[2]=this._combinedQuat[2]/o),this._rotationVelocity+=(l-this._rotationVelocity)*(.5*i),this.rotationVelocity=this._rotationVelocity/i,this.updateCallback(e)}quatFromVectors(e,t,i,r=1){let a=rs.cross(rs.create(),e,t);rs.normalize(a,a);let s=Math.acos(Math.max(-1,Math.min(1,rs.dot(e,t))))*r;return iT.setAxisAngle(i,a,s),{q:i,axis:a,angle:s}}#e(e){let t=this.canvas.clientWidth,i=this.canvas.clientHeight,r=Math.max(t,i)-1,a=(2*e[0]-t-1)/r,s=(2*e[1]-i-1)/r,n=0,o=a*a+s*s;return n=o<=2?Math.sqrt(4-o):4/Math.sqrt(o),rs.fromValues(-a,s,n)}}class rp{TARGET_FRAME_DURATION=1e3/60;SPHERE_RADIUS=2;#t=0;#i=0;#r=0;#a=0;camera={matrix:th.create(),near:.1,far:40,fov:Math.PI/4,aspect:1,position:rs.fromValues(0,0,3),up:rs.fromValues(0,1,0),matrices:{view:th.create(),projection:th.create(),inversProjection:th.create()}};nearestVertexIndex=null;smoothRotationVelocity=0;scaleFactor=1;movementActive=!1;canvas;items;onActiveItemChange;onMovementChange;gl;viewportSize;drawBufferSize;discProgram;discLocations;discGeo;discBuffers;discVAO;icoGeo;instancePositions;DISC_INSTANCE_COUNT;worldMatrix;tex;atlasSize;discInstances;control;constructor(e,t,i,r,a){this.canvas=e,this.items=t||[],this.onActiveItemChange=i||(()=>{}),this.onMovementChange=r||(()=>{}),this.#s(a)}resize(){var e;let t,i,r,a;this.viewportSize=ra.set(this.viewportSize||ra.create(),this.canvas.clientWidth,this.canvas.clientHeight);let s=this.gl;e=this.canvas,t=Math.min(2,window.devicePixelRatio),i=Math.round(e.clientWidth*t),r=Math.round(e.clientHeight*t),(a=e.width!==i||e.height!==r)&&(e.width=i,e.height=r),a&&s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),this.#n(s)}run(e=0){this.#i=Math.min(32,e-this.#t),this.#t=e,this.#r=this.#i/this.TARGET_FRAME_DURATION,this.#a+=this.#r,this.#o(this.#i),this.#l(),requestAnimationFrame(e=>this.run(e))}#s(e){console.log("Initializing InfiniteGridMenu..."),this.gl=this.canvas.getContext("webgl2",{antialias:!0,alpha:!1});let t=this.gl;if(!t)throw console.error("WebGL2 not supported!"),Error("No WebGL 2 context!");if(console.log("WebGL2 context created successfully"),this.viewportSize=ra.fromValues(this.canvas.clientWidth,this.canvas.clientHeight),this.drawBufferSize=ra.clone(this.viewportSize),console.log("Creating shader program..."),this.discProgram=function(e,t,i,r){let a=e.createProgram();if(!a)return null;if([e.VERTEX_SHADER,e.FRAGMENT_SHADER].forEach((i,r)=>{var s;let n,o=(s=t[r],(n=e.createShader(i))?(e.shaderSource(n,s),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))?n:(console.error(e.getShaderInfoLog(n)),e.deleteShader(n),null):null);o&&e.attachShader(a,o)}),i&&e.transformFeedbackVaryings(a,i,e.SEPARATE_ATTRIBS),r)for(let t in r)e.bindAttribLocation(a,r[t],t);return(e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS))?a:(console.error(e.getProgramInfoLog(a)),e.deleteProgram(a),null)}(t,[rn,ro],void 0,{aModelPosition:0,aModelNormal:1,aModelUvs:2,aInstanceMatrix:3}),!this.discProgram)throw console.error("Failed to create shader program!"),Error("Failed to create shader program");console.log("Shader program created successfully"),this.discLocations={aModelPosition:t.getAttribLocation(this.discProgram,"aModelPosition"),aModelUvs:t.getAttribLocation(this.discProgram,"aModelUvs"),aInstanceMatrix:t.getAttribLocation(this.discProgram,"aInstanceMatrix"),uWorldMatrix:t.getUniformLocation(this.discProgram,"uWorldMatrix"),uViewMatrix:t.getUniformLocation(this.discProgram,"uViewMatrix"),uProjectionMatrix:t.getUniformLocation(this.discProgram,"uProjectionMatrix"),uCameraPosition:t.getUniformLocation(this.discProgram,"uCameraPosition"),uScaleFactor:t.getUniformLocation(this.discProgram,"uScaleFactor"),uRotationAxisVelocity:t.getUniformLocation(this.discProgram,"uRotationAxisVelocity"),uTex:t.getUniformLocation(this.discProgram,"uTex"),uFrames:t.getUniformLocation(this.discProgram,"uFrames"),uItemCount:t.getUniformLocation(this.discProgram,"uItemCount"),uAtlasSize:t.getUniformLocation(this.discProgram,"uAtlasSize")},this.discGeo=new ru(56,1),this.discBuffers=this.discGeo.data,this.discVAO=function(e,t,i){let r=e.createVertexArray();for(let[i,a,s]of(e.bindVertexArray(r),t))-1!==a&&(e.bindBuffer(e.ARRAY_BUFFER,i),e.enableVertexAttribArray(a),e.vertexAttribPointer(a,s,e.FLOAT,!1,0,0));if(i){let t=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.STATIC_DRAW)}return e.bindVertexArray(null),r}(t,[[rm(t,this.discBuffers.vertices,t.STATIC_DRAW),this.discLocations.aModelPosition,3],[rm(t,this.discBuffers.uvs,t.STATIC_DRAW),this.discLocations.aModelUvs,2]],Array.from(this.discBuffers.indices)),this.icoGeo=new rd,this.icoGeo.subdivide(1).spherize(this.SPHERE_RADIUS),this.instancePositions=this.icoGeo.vertices.map(e=>e.position),this.DISC_INSTANCE_COUNT=this.icoGeo.vertices.length,this.#c(this.DISC_INSTANCE_COUNT),this.worldMatrix=th.create(),this.#h(),this.control=new rg(this.canvas,e=>this.#d(e)),this.#u(),this.#n(t),this.resize(),e&&e(this)}#h(){var e,t,i,r;let a,s=this.gl;this.tex=(e=s.LINEAR,t=s.LINEAR,i=s.CLAMP_TO_EDGE,r=s.CLAMP_TO_EDGE,a=s.createTexture(),s.bindTexture(s.TEXTURE_2D,a),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,i),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,r),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,e),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,t),a);let n=Math.max(1,this.items.length);this.atlasSize=Math.ceil(Math.sqrt(n));let o=document.createElement("canvas"),l=o.getContext("2d");o.width=512*this.atlasSize,o.height=512*this.atlasSize,Promise.all(this.items.map(e=>new Promise(t=>{let i=new Image;i.crossOrigin="anonymous",i.onload=()=>t(i),i.src=e.image}))).then(e=>{e.forEach((e,t)=>{let i=t%this.atlasSize*512,r=512*Math.floor(t/this.atlasSize);l.drawImage(e,i,r,512,512)}),s.bindTexture(s.TEXTURE_2D,this.tex),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,o),s.generateMipmap(s.TEXTURE_2D)})}#c(e){let t=this.gl;this.discInstances={matricesArray:new Float32Array(16*e),matrices:[],buffer:t.createBuffer()};for(let t=0;t<e;++t){let e=new Float32Array(this.discInstances.matricesArray.buffer,16*t*4,16);e.set(th.create()),this.discInstances.matrices.push(e)}t.bindVertexArray(this.discVAO),t.bindBuffer(t.ARRAY_BUFFER,this.discInstances.buffer),t.bufferData(t.ARRAY_BUFFER,this.discInstances.matricesArray.byteLength,t.DYNAMIC_DRAW);for(let e=0;e<4;++e){let i=this.discLocations.aInstanceMatrix+e;t.enableVertexAttribArray(i),t.vertexAttribPointer(i,4,t.FLOAT,!1,64,4*e*4),t.vertexAttribDivisor(i,1)}t.bindBuffer(t.ARRAY_BUFFER,null),t.bindVertexArray(null)}#o(e){let t=this.gl;this.control.update(e,this.TARGET_FRAME_DURATION),this.instancePositions.map(e=>rs.transformQuat(rs.create(),e,this.control.orientation)).forEach((e,t)=>{let i=(Math.abs(e[2])/this.SPHERE_RADIUS*.6+.4)*.25,r=th.create();th.multiply(r,r,th.fromTranslation(th.create(),rs.negate(rs.create(),e))),th.multiply(r,r,th.targetTo(th.create(),[0,0,0],e,[0,1,0])),th.multiply(r,r,th.fromScaling(th.create(),[i,i,i])),th.multiply(r,r,th.fromTranslation(th.create(),[0,0,-this.SPHERE_RADIUS])),th.copy(this.discInstances.matrices[t],r)}),t.bindBuffer(t.ARRAY_BUFFER,this.discInstances.buffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.discInstances.matricesArray),t.bindBuffer(t.ARRAY_BUFFER,null),this.smoothRotationVelocity=this.control.rotationVelocity}#l(){let e=this.gl;e.useProgram(this.discProgram),e.enable(e.CULL_FACE),e.enable(e.DEPTH_TEST),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.uniformMatrix4fv(this.discLocations.uWorldMatrix,!1,this.worldMatrix),e.uniformMatrix4fv(this.discLocations.uViewMatrix,!1,this.camera.matrices.view),e.uniformMatrix4fv(this.discLocations.uProjectionMatrix,!1,this.camera.matrices.projection),e.uniform3f(this.discLocations.uCameraPosition,this.camera.position[0],this.camera.position[1],this.camera.position[2]),e.uniform4f(this.discLocations.uRotationAxisVelocity,this.control.rotationAxis[0],this.control.rotationAxis[1],this.control.rotationAxis[2],1.1*this.smoothRotationVelocity),e.uniform1i(this.discLocations.uItemCount,this.items.length),e.uniform1i(this.discLocations.uAtlasSize,this.atlasSize),e.uniform1f(this.discLocations.uFrames,this.#a),e.uniform1f(this.discLocations.uScaleFactor,this.scaleFactor),e.uniform1i(this.discLocations.uTex,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.tex),e.bindVertexArray(this.discVAO),e.drawElementsInstanced(e.TRIANGLES,this.discBuffers.indices.length,e.UNSIGNED_SHORT,0,this.DISC_INSTANCE_COUNT)}#u(){th.targetTo(this.camera.matrix,this.camera.position,[0,0,0],this.camera.up),th.invert(this.camera.matrices.view,this.camera.matrix)}#n(e){this.camera.aspect=this.canvas.clientWidth/this.canvas.clientHeight;let t=.35*this.SPHERE_RADIUS,i=this.camera.position[2];this.camera.aspect>1?this.camera.fov=2*Math.atan(t/i):this.camera.fov=2*Math.atan(t/this.camera.aspect/i),th.perspective(this.camera.matrices.projection,this.camera.fov,this.camera.aspect,this.camera.near,this.camera.far),th.invert(this.camera.matrices.inversProjection,this.camera.matrices.projection)}#d(e){let t=e/this.TARGET_FRAME_DURATION+1e-4,i=5/t,r=3,a=this.control.isPointerDown||Math.abs(this.smoothRotationVelocity)>.01;if(a!==this.movementActive&&(this.movementActive=a,this.onMovementChange(a)),this.control.isPointerDown)r+=80*this.control.rotationVelocity+2.5,i=7/t;else{let e=this.#m(),t=e%Math.max(1,this.items.length);this.onActiveItemChange(t);let i=rs.normalize(rs.create(),this.#g(e));this.control.snapTargetDirection=i}this.camera.position[2]+=(r-this.camera.position[2])/i,this.#u()}#m(){let e=this.control.snapDirection,t=iT.conjugate(iT.create(),this.control.orientation),i=rs.transformQuat(rs.create(),e,t),r=-1,a=0;for(let e=0;e<this.instancePositions.length;++e){let t=rs.dot(i,this.instancePositions[e]);t>r&&(r=t,a=e)}return a}#g(e){let t=this.instancePositions[e];return rs.transformQuat(rs.create(),t,this.control.orientation)}}let rf=[{image:"https://picsum.photos/900/900?grayscale",link:"https://google.com/",title:"Generate Images",description:"Create AI-powered visuals"},{image:"https://picsum.photos/901/900?grayscale",link:"https://google.com/",title:"Generate Videos",description:"AI video creation and editing"},{image:"https://picsum.photos/902/900?grayscale",link:"https://google.com/",title:"Generate Bots",description:"Build intelligent chatbots"},{image:"https://picsum.photos/903/900?grayscale",link:"https://percify.io/",title:"Generate Avatars",description:"Create digital personas with Percify"},{image:"https://picsum.photos/904/900?grayscale",link:"https://google.com/",title:"Generate Audio",description:"AI-powered sound creation"},{image:"https://picsum.photos/905/900?grayscale",link:"https://google.com/",title:"Generate Income",description:"AI monetization strategies"}];function rv({isVisible:e,onClose:t}){let i=(0,m.useRef)(null),[r,a]=(0,m.useState)(null),[s,n]=(0,m.useState)(!1);return((0,m.useEffect)(()=>{let t,r=i.current;if(r&&e){console.log("Creating InfiniteGridMenu with items:",(rf.length,rf));try{t=new rp(r,(rf.length,rf),e=>{let t=e%rf.length;a(rf[t])},n,e=>e.run()),console.log("InfiniteGridMenu created successfully")}catch(e){console.error("Error creating InfiniteGridMenu:",e)}}else console.log("Canvas or isVisible condition not met:",{canvas:!!r,isVisible:e});let s=()=>{t&&t.resize()};return window.addEventListener("resize",s),s(),()=>{window.removeEventListener("resize",s)}},[rf,e]),e)?(0,d.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4,background:"#000"},children:[(0,d.jsxs)("div",{style:{position:"absolute",top:"10px",left:"10px",color:"white",zIndex:10001,fontSize:"12px"},children:["Debug: InfiniteMenu Loaded - Items: ",rf.length," - Active: ",r?.title||"None"]}),(0,d.jsx)("button",{onClick:t,className:"infinite-menu-close","aria-label":"Close menu",children:"×"}),(0,d.jsx)("canvas",{id:"infinite-grid-menu-canvas",ref:i,style:{width:"100%",height:"100%",cursor:"grab"}}),r&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h2",{className:`face-title ${s?"inactive":"active"}`,children:r.title}),(0,d.jsxs)("p",{className:`face-description ${s?"inactive":"active"}`,children:[" ",r.description]}),(0,d.jsx)("div",{onClick:()=>{r?.link&&(console.log("Selected:",r.title,"Link:",r.link),r.link.startsWith("http")?window.open(r.link,"_blank"):console.log("Internal route:",r.link),t())},className:`action-button ${s?"inactive":"active"}`,children:(0,d.jsx)("p",{className:"action-button-icon",children:"↗"})})]})]}):null}let rx={patternScale:1,refraction:.07,edge:0,patternBlur:0,liquid:.75,speed:.39},rb=`#version 300 es
precision mediump float;

in vec2 a_position;
out vec2 vUv;

void main() {
    vUv = .5 * (a_position + 1.);
    gl_Position = vec4(a_position, 0.0, 1.0);
}`,ry=`#version 300 es
precision mediump float;

in vec2 vUv;
out vec4 fragColor;

uniform sampler2D u_image_texture;
uniform float u_time;
uniform float u_ratio;
uniform float u_img_ratio;
uniform float u_patternScale;
uniform float u_refraction;
uniform float u_edge;
uniform float u_patternBlur;
uniform float u_liquid;

#define TWO_PI 6.28318530718
#define PI 3.14159265358979323846

vec3 mod289(vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 permute(vec3 x) { return mod289(((x*34.)+1.)*x); }
float snoise(vec2 v) {
    const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439);
    vec2 i = floor(v + dot(v, C.yy));
    vec2 x0 = v - i + dot(i, C.xx);
    vec2 i1;
    i1 = (x0.x > x0.y) ? vec2(1., 0.) : vec2(0., 1.);
    vec4 x12 = x0.xyxy + C.xxzz;
    x12.xy -= i1;
    i = mod289(i);
    vec3 p = permute(permute(i.y + vec3(0., i1.y, 1.)) + i.x + vec3(0., i1.x, 1.));
    vec3 m = max(0.5 - vec3(dot(x0, x0), dot(x12.xy, x12.xy), dot(x12.zw, x12.zw)), 0.);
    m = m*m;
    m = m*m;
    vec3 x = 2. * fract(p * C.www) - 1.;
    vec3 h = abs(x) - 0.5;
    vec3 ox = floor(x + 0.5);
    vec3 a0 = x - ox;
    m *= 1.79284291400159 - 0.85373472095314 * (a0*a0 + h*h);
    vec3 g;
    g.x = a0.x * x0.x + h.x * x0.y;
    g.yz = a0.yz * x12.xz + h.yz * x12.yw;
    return 130. * dot(m, g);
}

vec2 get_img_uv() {
    vec2 img_uv = vUv;
    img_uv -= .5;
    if (u_ratio > u_img_ratio) {
        img_uv.x = img_uv.x * u_ratio / u_img_ratio;
    } else {
        img_uv.y = img_uv.y * u_img_ratio / u_ratio;
    }
    float scale_factor = 1.;
    img_uv *= scale_factor;
    img_uv += .5;
    img_uv.y = 1. - img_uv.y;
    return img_uv;
}
vec2 rotate(vec2 uv, float th) {
    return mat2(cos(th), sin(th), -sin(th), cos(th)) * uv;
}
float get_color_channel(float c1, float c2, float stripe_p, vec3 w, float extra_blur, float b) {
    float ch = c2;
    float border = 0.;
    float blur = u_patternBlur + extra_blur;
    ch = mix(ch, c1, smoothstep(.0, blur, stripe_p));
    border = w[0];
    ch = mix(ch, c2, smoothstep(border - blur, border + blur, stripe_p));
    b = smoothstep(.2, .8, b);
    border = w[0] + .4 * (1. - b) * w[1];
    ch = mix(ch, c1, smoothstep(border - blur, border + blur, stripe_p));
    border = w[0] + .5 * (1. - b) * w[1];
    ch = mix(ch, c2, smoothstep(border - blur, border + blur, stripe_p));
    border = w[0] + w[1];
    ch = mix(ch, c1, smoothstep(border - blur, border + blur, stripe_p));
    float gradient_t = (stripe_p - w[0] - w[1]) / w[2];
    float gradient = mix(c1, c2, smoothstep(0., 1., gradient_t));
    ch = mix(ch, gradient, smoothstep(border - blur, border + blur, stripe_p));
    return ch;
}
float get_img_frame_alpha(vec2 uv, float img_frame_width) {
    float img_frame_alpha = smoothstep(0., img_frame_width, uv.x) * smoothstep(1., 1. - img_frame_width, uv.x);
    img_frame_alpha *= smoothstep(0., img_frame_width, uv.y) * smoothstep(1., 1. - img_frame_width, uv.y);
    return img_frame_alpha;
}
void main() {
    vec2 uv = vUv;
    uv.y = 1. - uv.y;
    uv.x *= u_ratio;
    float diagonal = uv.x - uv.y;
    float t = .001 * u_time;
    vec2 img_uv = get_img_uv();
    vec4 img = texture(u_image_texture, img_uv);
    vec3 color = vec3(0.);
    float opacity = 1.;
    vec3 color1 = vec3(.98, 0.98, 1.);
    vec3 color2 = vec3(.1, .1, .1 + .1 * smoothstep(.7, 1.3, uv.x + uv.y));
    float edge = img.r;
    vec2 grad_uv = uv;
    grad_uv -= .5;
    float dist = length(grad_uv + vec2(0., .2 * diagonal));
    grad_uv = rotate(grad_uv, (.25 - .2 * diagonal) * PI);
    float bulge = pow(1.8 * dist, 1.2);
    bulge = 1. - bulge;
    bulge *= pow(uv.y, .3);
    float cycle_width = u_patternScale;
    float thin_strip_1_ratio = .12 / cycle_width * (1. - .4 * bulge);
    float thin_strip_2_ratio = .07 / cycle_width * (1. + .4 * bulge);
    float wide_strip_ratio = (1. - thin_strip_1_ratio - thin_strip_2_ratio);
    float thin_strip_1_width = cycle_width * thin_strip_1_ratio;
    float thin_strip_2_width = cycle_width * thin_strip_2_ratio;
    opacity = 1. - smoothstep(.9 - .5 * u_edge, 1. - .5 * u_edge, edge);
    opacity *= get_img_frame_alpha(img_uv, 0.01);
    float noise = snoise(uv - t);
    edge += (1. - edge) * u_liquid * noise;
    float refr = 0.;
    refr += (1. - bulge);
    refr = clamp(refr, 0., 1.);
    float dir = grad_uv.x;
    dir += diagonal;
    dir -= 2. * noise * diagonal * (smoothstep(0., 1., edge) * smoothstep(1., 0., edge));
    bulge *= clamp(pow(uv.y, .1), .3, 1.);
    dir *= (.1 + (1.1 - edge) * bulge);
    dir *= smoothstep(1., .7, edge);
    dir += .18 * (smoothstep(.1, .2, uv.y) * smoothstep(.4, .2, uv.y));
    dir += .03 * (smoothstep(.1, .2, 1. - uv.y) * smoothstep(.4, .2, 1. - uv.y));
    dir *= (.5 + .5 * pow(uv.y, 2.));
    dir *= cycle_width;
    dir -= t;
    float refr_r = refr;
    refr_r += .03 * bulge * noise;
    float refr_b = 1.3 * refr;
    refr_r += 5. * (smoothstep(-.1, .2, uv.y) * smoothstep(.5, .1, uv.y)) * (smoothstep(.4, .6, bulge) * smoothstep(1., .4, bulge));
    refr_r -= diagonal;
    refr_b += (smoothstep(0., .4, uv.y) * smoothstep(.8, .1, uv.y)) * (smoothstep(.4, .6, bulge) * smoothstep(.8, .4, bulge));
    refr_b -= .2 * edge;
    refr_r *= u_refraction;
    refr_b *= u_refraction;
    vec3 w = vec3(thin_strip_1_width, thin_strip_2_width, wide_strip_ratio);
    w[1] -= .02 * smoothstep(.0, 1., edge + bulge);
    float stripe_r = mod(dir + refr_r, 1.);
    float r = get_color_channel(color1.r, color2.r, stripe_r, w, 0.02 + .03 * u_refraction * bulge, bulge);
    float stripe_g = mod(dir, 1.);
    float g = get_color_channel(color1.g, color2.g, stripe_g, w, 0.01 / (1. - diagonal), bulge);
    float stripe_b = mod(dir - refr_b, 1.);
    float b = get_color_channel(color1.b, color2.b, stripe_b, w, .01, bulge);
    color = vec3(r, g, b);
    color *= opacity;
    fragColor = vec4(color, opacity);
}
`;function rw({imageData:e,params:t=rx}){let i=(0,m.useRef)(null),[r,a]=(0,m.useState)(null),[s,n]=(0,m.useState)({}),o=(0,m.useRef)(0),l=(0,m.useRef)(0);function c(){r&&s&&(r.uniform1f(s.u_edge,t.edge),r.uniform1f(s.u_patternBlur,t.patternBlur),r.uniform1f(s.u_time,0),r.uniform1f(s.u_patternScale,t.patternScale),r.uniform1f(s.u_refraction,t.refraction),r.uniform1f(s.u_liquid,t.liquid))}return(0,m.useEffect)(()=>{!function(){let e=i.current,t=e?.getContext("webgl2",{antialias:!0,alpha:!0});if(!e||!t)return;function r(e,t,i){let r=e.createShader(i);return r?(e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))?r:(console.error("An error occurred compiling the shaders: "+e.getShaderInfoLog(r)),e.deleteShader(r),null):null}let s=r(t,rb,t.VERTEX_SHADER),o=r(t,ry,t.FRAGMENT_SHADER),l=t.createProgram();if(!l||!s||!o)return;if(t.attachShader(l,s),t.attachShader(l,o),t.linkProgram(l),!t.getProgramParameter(l,t.LINK_STATUS))return console.error("Unable to initialize the shader program: "+t.getProgramInfoLog(l));n(function(e,t){let i={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let a=0;a<r;a++){let r=t.getActiveUniform(e,a)?.name;r&&(i[r]=t.getUniformLocation(e,r))}return i}(l,t));let c=new Float32Array([-1,-1,1,-1,-1,1,1,1]),h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,c,t.STATIC_DRAW),t.useProgram(l);let d=t.getAttribLocation(l,"a_position");t.enableVertexAttribArray(d),t.bindBuffer(t.ARRAY_BUFFER,h),t.vertexAttribPointer(d,2,t.FLOAT,!1,0,0),a(t)}(),c()},[]),(0,m.useEffect)(()=>{r&&s&&c()},[r,t,s]),(0,m.useEffect)(()=>{let e;if(r&&s)return l.current=performance.now(),e=requestAnimationFrame(function i(a){let n=a-l.current;l.current=a,o.current+=n*t.speed,r.uniform1f(s.u_time,o.current),r.drawArrays(r.TRIANGLE_STRIP,0,4),e=requestAnimationFrame(i)}),()=>{cancelAnimationFrame(e)}},[r,t.speed]),(0,m.useEffect)(()=>{let t=i.current;if(t&&r&&s)return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)};function a(){if(!t||!r||!s||!e)return;let i=e.width/e.height;r.uniform1f(s.u_img_ratio,i),t.width=1e3*devicePixelRatio,t.height=1e3*devicePixelRatio,r.viewport(0,0,t.height,t.height),r.uniform1f(s.u_ratio,1),r.uniform1f(s.u_img_ratio,i)}},[r,s,e]),(0,m.useEffect)(()=>{if(!r||!s)return;let t=r.getParameter(r.TEXTURE_BINDING_2D);t&&r.deleteTexture(t);let i=r.createTexture();r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.pixelStorei(r.UNPACK_ALIGNMENT,1);try{r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e?.width,e?.height,0,r.RGBA,r.UNSIGNED_BYTE,e?.data),r.uniform1i(s.u_image_texture,0)}catch(e){console.error("Error uploading texture:",e)}return()=>{i&&r.deleteTexture(i)}},[r,s,e]),(0,d.jsx)("canvas",{ref:i,className:"paint-container"})}function rj(){let[e,t]=(0,m.useState)(null);return((0,m.useEffect)(()=>{let e=document.createElement("canvas"),i=e.getContext("2d");if(i){e.width=800,e.height=800,i.fillStyle="white",i.fillRect(0,0,800,800);i.fillStyle="black",i.beginPath(),i.arc(400,400,280,0,2*Math.PI),i.fill(),i.fillStyle="white",i.beginPath(),i.arc(400,400,168,0,2*Math.PI),i.fill();for(let e=0;e<8;e++){let t=e/8*Math.PI*2,r=400+392*Math.cos(t),a=400+392*Math.sin(t);i.fillStyle="black",i.beginPath(),i.arc(r,a,22.400000000000002,0,2*Math.PI),i.fill()}t(i.getImageData(0,0,800,800))}},[]),e)?(0,d.jsx)(rw,{imageData:e,params:{patternScale:1,refraction:.07,edge:0,patternBlur:0,liquid:.75,speed:.39}}):null}let rM=({items:e,className:t="",radius:i=300,columns:r=3,rows:a=2,damping:s=.45,fadeOut:n=.6,ease:o="power3.out",onClose:l,onPersonaSelect:c,selectedPersona:h})=>{let u=(0,m.useRef)(null),g=(0,m.useRef)(null),p=(0,m.useRef)(null),f=(0,m.useRef)(null),v=(0,m.useRef)({x:0,y:0}),x=e?.length?e:[{image:"https://i.pravatar.cc/300?img=8",title:"The Teacher",subtitle:"Patient & Explanatory",handle:"@educator",borderColor:"#4F46E5",gradient:"linear-gradient(145deg, #4F46E5, #000)",url:"#"},{image:"https://i.pravatar.cc/300?img=11",title:"The Critic",subtitle:"Analytical & Direct",handle:"@analyst",borderColor:"#EF4444",gradient:"linear-gradient(210deg, #EF4444, #000)",url:"#"},{image:"https://i.pravatar.cc/300?img=3",title:"The Explorer",subtitle:"Curious & Adventurous",handle:"@wanderer",borderColor:"#F59E0B",gradient:"linear-gradient(165deg, #F59E0B, #000)",url:"#"},{image:"https://i.pravatar.cc/300?img=16",title:"The Poet",subtitle:"Creative & Eloquent",handle:"@wordsmith",borderColor:"#8B5CF6",gradient:"linear-gradient(195deg, #8B5CF6, #000)",url:"#"},{image:"/images/personas/scientist.jpg",title:"The Scientist",subtitle:"Logical & Precise",handle:"@researcher",borderColor:"#10B981",gradient:"linear-gradient(225deg, #10B981, #000)",url:"#"},{image:"https://i.pravatar.cc/300?img=60",title:"The Friend",subtitle:"Supportive & Empathetic",handle:"@companion",borderColor:"#06B6D4",gradient:"linear-gradient(135deg, #06B6D4, #000)",url:"#"}];(0,m.useEffect)(()=>{let e=u.current;if(!e)return;p.current=U.gsap.quickSetter(e,"--x","px"),f.current=U.gsap.quickSetter(e,"--y","px");let{width:t,height:i}=e.getBoundingClientRect();v.current={x:t/2,y:i/2},p.current&&p.current(v.current.x),f.current&&f.current(v.current.y)},[]),(0,m.useEffect)(()=>{let e=e=>{"Escape"===e.key&&l&&l()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[l]);let b=e=>{let t=e.currentTarget,i=t.getBoundingClientRect(),r=e.clientX-i.left,a=e.clientY-i.top;t.style.setProperty("--mouse-x",`${r}px`),t.style.setProperty("--mouse-y",`${a}px`)};return(0,d.jsx)("div",{className:`chroma-grid-container active ${t}`,children:(0,d.jsxs)("div",{ref:u,className:"chroma-grid",style:{"--r":`${i}px`,"--cols":r,"--rows":a},onPointerMove:e=>{var t,i;if(!u.current)return;let r=u.current.getBoundingClientRect();t=e.clientX-r.left,i=e.clientY-r.top,U.gsap.to(v.current,{x:t,y:i,duration:s,ease:o,onUpdate:()=>{p.current?.(v.current.x),f.current?.(v.current.y)},overwrite:!0}),U.gsap.to(g.current,{opacity:0,duration:.25,overwrite:!0})},onPointerLeave:()=>{U.gsap.to(g.current,{opacity:1,duration:n,overwrite:!0})},children:[(0,d.jsx)("div",{ref:g,className:"chroma-grid-fade"}),l&&(0,d.jsx)("button",{className:"chroma-grid-close",onClick:l,"aria-label":"Close personas",children:"×"}),(0,d.jsx)("div",{className:"chroma-grid-content",children:x.map((e,t)=>{let i=h===e.title;return(0,d.jsxs)("article",{className:`chroma-grid-card ${i?"selected":""}`,onMouseMove:b,onClick:()=>{e.url&&"#"!==e.url?window.open(e.url,"_blank","noopener,noreferrer"):c&&(c(e),console.log("Selected persona:",e.title))},style:{"--border-color":e.borderColor||"#e5e5e5","--card-gradient":e.gradient||"linear-gradient(135deg, #e5e5e5, #000)",cursor:e.url&&"#"!==e.url?"pointer":"default"},children:[i&&(0,d.jsx)("div",{className:"chroma-grid-selected-indicator",children:(0,d.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"11",fill:e.borderColor||"#e5e5e5"}),(0,d.jsx)("path",{d:"M7 12L10.5 15.5L17 9",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,d.jsx)("img",{src:e.image,alt:e.title,className:"chroma-grid-avatar",loading:"lazy"}),(0,d.jsx)("h3",{className:"chroma-grid-title",children:e.title}),(0,d.jsx)("p",{className:"chroma-grid-subtitle",children:e.subtitle}),e.handle&&(0,d.jsx)("span",{className:"chroma-grid-handle",children:e.handle})]},t)})})]})})};var rN=e.i(68274),rE=e.i(31381),r_=e.i(86463);let rA=new rE.Mat4,rT=new r_.Vec3,rS=new r_.Vec3;class rC extends rN.Transform{constructor(e,{near:t=.1,far:i=100,fov:r=45,aspect:a=1,left:s,right:n,bottom:o,top:l,zoom:c=1}={}){super(),Object.assign(this,{near:t,far:i,fov:r,aspect:a,left:s,right:n,bottom:o,top:l,zoom:c}),this.projectionMatrix=new rE.Mat4,this.viewMatrix=new rE.Mat4,this.projectionViewMatrix=new rE.Mat4,this.worldPosition=new r_.Vec3,this.type=s||n?"orthographic":"perspective","orthographic"===this.type?this.orthographic():this.perspective()}perspective({near:e=this.near,far:t=this.far,fov:i=this.fov,aspect:r=this.aspect}={}){return Object.assign(this,{near:e,far:t,fov:i,aspect:r}),this.projectionMatrix.fromPerspective({fov:Math.PI/180*i,aspect:r,near:e,far:t}),this.type="perspective",this}orthographic({near:e=this.near,far:t=this.far,left:i=this.left||-1,right:r=this.right||1,bottom:a=this.bottom||-1,top:s=this.top||1,zoom:n=this.zoom}={}){return Object.assign(this,{near:e,far:t,left:i,right:r,bottom:a,top:s,zoom:n}),i/=n,r/=n,a/=n,s/=n,this.projectionMatrix.fromOrthogonal({left:i,right:r,bottom:a,top:s,near:e,far:t}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}updateProjectionMatrix(){return"perspective"===this.type?this.perspective():this.orthographic()}lookAt(e){return super.lookAt(e,!0),this}project(e){return e.applyMatrix4(this.viewMatrix),e.applyMatrix4(this.projectionMatrix),this}unproject(e){return e.applyMatrix4(rA.inverse(this.projectionMatrix)),e.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new r_.Vec3,new r_.Vec3,new r_.Vec3,new r_.Vec3,new r_.Vec3,new r_.Vec3]);let e=this.projectionViewMatrix;this.frustum[0].set(e[3]-e[0],e[7]-e[4],e[11]-e[8]).constant=e[15]-e[12],this.frustum[1].set(e[3]+e[0],e[7]+e[4],e[11]+e[8]).constant=e[15]+e[12],this.frustum[2].set(e[3]+e[1],e[7]+e[5],e[11]+e[9]).constant=e[15]+e[13],this.frustum[3].set(e[3]-e[1],e[7]-e[5],e[11]-e[9]).constant=e[15]-e[13],this.frustum[4].set(e[3]-e[2],e[7]-e[6],e[11]-e[10]).constant=e[15]-e[14],this.frustum[5].set(e[3]+e[2],e[7]+e[6],e[11]+e[10]).constant=e[15]+e[14];for(let e=0;e<6;e++){let t=1/this.frustum[e].distance();this.frustum[e].multiply(t),this.frustum[e].constant*=t}}frustumIntersectsMesh(e,t=e.worldMatrix){if(!e.geometry.attributes.position||(e.geometry.bounds&&e.geometry.bounds.radius!==1/0||e.geometry.computeBoundingSphere(),!e.geometry.bounds))return!0;rT.copy(e.geometry.bounds.center),rT.applyMatrix4(t);let i=e.geometry.bounds.radius*t.getMaxScaleOnAxis();return this.frustumIntersectsSphere(rT,i)}frustumIntersectsSphere(e,t){for(let i=0;i<6;i++){let r=this.frustum[i];if(rS.copy(r).dot(e)+r.constant<-t)return!1}return!0}}var rP=e.i(72812),rR=e.i(74591);class rI extends rR.Geometry{constructor(e,{width:t=1,height:i=1,widthSegments:r=1,heightSegments:a=1,attributes:s={}}={}){const n=(r+1)*(a+1),o=r*a*6,l=new Float32Array(3*n),c=new Float32Array(3*n),h=new Float32Array(2*n),d=o>65536?new Uint32Array(o):new Uint16Array(o);rI.buildPlane(l,c,h,d,t,i,0,r,a),Object.assign(s,{position:{size:3,data:l},normal:{size:3,data:c},uv:{size:2,data:h},index:{data:d}}),super(e,s)}static buildPlane(e,t,i,r,a,s,n,o,l,c=0,h=1,d=2,u=1,m=-1,g=0,p=0){let f=g,v=a/o,x=s/l;for(let b=0;b<=l;b++){let y=b*x-s/2;for(let s=0;s<=o;s++,g++){let x=s*v-a/2;if(e[3*g+c]=x*u,e[3*g+h]=y*m,e[3*g+d]=n/2,t[3*g+c]=0,t[3*g+h]=0,t[3*g+d]=n>=0?1:-1,i[2*g]=s/o,i[2*g+1]=1-b/l,b===l||s===o)continue;let w=f+s+b*(o+1),j=f+s+(b+1)*(o+1),M=f+s+(b+1)*(o+1)+1,N=f+s+b*(o+1)+1;r[6*p]=w,r[6*p+1]=j,r[6*p+2]=N,r[6*p+3]=j,r[6*p+4]=M,r[6*p+5]=N,p++}}}}var rk=e.i(29226),rD=e.i(69196);let rL=new Uint8Array(4),rU=1;class rF{constructor(e,{image:t,target:i=e.TEXTURE_2D,type:r=e.UNSIGNED_BYTE,format:a=e.RGBA,internalFormat:s=a,wrapS:n=e.CLAMP_TO_EDGE,wrapT:o=e.CLAMP_TO_EDGE,wrapR:l=e.CLAMP_TO_EDGE,generateMipmaps:c=i===(e.TEXTURE_2D||e.TEXTURE_CUBE_MAP),minFilter:h=c?e.NEAREST_MIPMAP_LINEAR:e.LINEAR,magFilter:d=e.LINEAR,premultiplyAlpha:u=!1,unpackAlignment:m=4,flipY:g=i==(e.TEXTURE_2D||e.TEXTURE_3D),anisotropy:p=0,level:f=0,width:v,height:x=v,length:b=1}={}){this.gl=e,this.id=rU++,this.image=t,this.target=i,this.type=r,this.format=a,this.internalFormat=s,this.minFilter=h,this.magFilter=d,this.wrapS=n,this.wrapT=o,this.wrapR=l,this.generateMipmaps=c,this.premultiplyAlpha=u,this.unpackAlignment=m,this.flipY=g,this.anisotropy=Math.min(p,this.gl.renderer.parameters.maxAnisotropy),this.level=f,this.width=v,this.height=x,this.length=b,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0}bind(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}update(e=0){let t=!(this.image===this.store.image&&!this.needsUpdate);if((t||this.glState.textureUnits[e]!==this.id)&&(this.gl.renderer.activeTexture(e),this.bind()),t){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.wrapR!==this.state.wrapR&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_R,this.wrapR),this.state.wrapR=this.wrapR),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(let e=0;e<6;e++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+e,this.level,this.internalFormat,this.format,this.type,this.image[e]);else if(ArrayBuffer.isView(this.image))this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image):(this.target===this.gl.TEXTURE_2D_ARRAY||this.target===this.gl.TEXTURE_3D)&&this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(let e=0;e<this.image.length;e++)this.gl.compressedTexImage2D(this.target,e,this.internalFormat,this.image[e].width,this.image[e].height,0,this.image[e].data);else this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image):this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,this.image);if(this.generateMipmaps){var i,r;this.gl.renderer.isWebgl2||((i=this.image.width)&i-1)==0&&((r=this.image.height)&r-1)==0?this.gl.generateMipmap(this.target):(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR)}this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(let e=0;e<6;e++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,rL);else this.width?this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,rL);this.store.image=this.image}}}class rO{gl;plane;renderer;text;textColor;font;mesh;constructor({gl:e,plane:t,renderer:i,text:r,textColor:a="#545050",font:s="30px sans-serif"}){!function(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(t=>{"constructor"!==t&&"function"==typeof e[t]&&(e[t]=e[t].bind(e))})}(this),this.gl=e,this.plane=t,this.renderer=i,this.text=r,this.textColor=a,this.font=s,this.createMesh()}createMesh(){let{texture:e,width:t,height:i}=function(e,t,i="bold 30px monospace",r="black"){let a,s=document.createElement("canvas"),n=s.getContext("2d");if(!n)throw Error("Could not get 2d context");n.font=i;let o=Math.ceil(n.measureText(t).width),l=Math.ceil(1.2*((a=i.match(/(\d+)px/))?parseInt(a[1],10):30));s.width=o+20,s.height=l+20,n.font=i,n.fillStyle=r,n.textBaseline="middle",n.textAlign="center",n.clearRect(0,0,s.width,s.height),n.fillText(t,s.width/2,s.height/2);let c=new rF(e,{generateMipmaps:!1});return c.image=s,{texture:c,width:s.width,height:s.height}}(this.gl,this.text,this.font,this.textColor),r=new rI(this.gl),a=new rk.Program(this.gl,{vertex:`
        attribute vec3 position;
        attribute vec2 uv;
        uniform mat4 modelViewMatrix;
        uniform mat4 projectionMatrix;
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,fragment:`
        precision highp float;
        uniform sampler2D tMap;
        varying vec2 vUv;
        void main() {
          vec4 color = texture2D(tMap, vUv);
          if (color.a < 0.1) discard;
          gl_FragColor = color;
        }
      `,uniforms:{tMap:{value:e}},transparent:!0});this.mesh=new rP.Mesh(this.gl,{geometry:r,program:a});let s=.15*this.plane.scale.y;this.mesh.scale.set(t/i*s,s,1),this.mesh.position.y=-(.5*this.plane.scale.y)-.5*s-.05,this.mesh.setParent(this.plane)}}class rz{extra=0;geometry;gl;image;index;length;renderer;scene;screen;text;viewport;bend;textColor;borderRadius;font;program;plane;title;scale;padding;width;widthTotal;x;speed=0;isBefore=!1;isAfter=!1;constructor({geometry:e,gl:t,image:i,index:r,length:a,renderer:s,scene:n,screen:o,text:l,viewport:c,bend:h,textColor:d,borderRadius:u=0,font:m}){this.geometry=e,this.gl=t,this.image=i,this.index=r,this.length=a,this.renderer=s,this.scene=n,this.screen=o,this.text=l,this.viewport=c,this.bend=h,this.textColor=d,this.borderRadius=u,this.font=m,this.createShader(),this.createMesh(),this.createTitle(),this.onResize()}createShader(){let e=new rF(this.gl,{generateMipmaps:!0});this.program=new rk.Program(this.gl,{depthTest:!1,depthWrite:!1,vertex:`
        precision highp float;
        attribute vec3 position;
        attribute vec2 uv;
        uniform mat4 modelViewMatrix;
        uniform mat4 projectionMatrix;
        uniform float uTime;
        uniform float uSpeed;
        varying vec2 vUv;
        void main() {
          vUv = uv;
          vec3 p = position;
          p.z = (sin(p.x * 4.0 + uTime) * 1.5 + cos(p.y * 2.0 + uTime) * 1.5) * (0.1 + uSpeed * 0.5);
          gl_Position = projectionMatrix * modelViewMatrix * vec4(p, 1.0);
        }
      `,fragment:`
        precision highp float;
        uniform vec2 uImageSizes;
        uniform vec2 uPlaneSizes;
        uniform sampler2D tMap;
        uniform float uBorderRadius;
        varying vec2 vUv;
        
        float roundedBoxSDF(vec2 p, vec2 b, float r) {
          vec2 d = abs(p) - b;
          return length(max(d, vec2(0.0))) + min(max(d.x, d.y), 0.0) - r;
        }
        
        void main() {
          vec2 ratio = vec2(
            min((uPlaneSizes.x / uPlaneSizes.y) / (uImageSizes.x / uImageSizes.y), 1.0),
            min((uPlaneSizes.y / uPlaneSizes.x) / (uImageSizes.y / uImageSizes.x), 1.0)
          );
          vec2 uv = vec2(
            vUv.x * ratio.x + (1.0 - ratio.x) * 0.5,
            vUv.y * ratio.y + (1.0 - ratio.y) * 0.5
          );
          vec4 color = texture2D(tMap, uv);
          
          float d = roundedBoxSDF(vUv - 0.5, vec2(0.5 - uBorderRadius), uBorderRadius);
          
          float edgeSmooth = 0.002;
          float alpha = 1.0 - smoothstep(-edgeSmooth, edgeSmooth, d);
          
          gl_FragColor = vec4(color.rgb, alpha);
        }
      `,uniforms:{tMap:{value:e},uPlaneSizes:{value:[0,0]},uImageSizes:{value:[0,0]},uSpeed:{value:0},uTime:{value:100*Math.random()},uBorderRadius:{value:this.borderRadius}},transparent:!0});let t=new Image;t.crossOrigin="anonymous",t.src=this.image,t.onload=()=>{e.image=t,this.program.uniforms.uImageSizes.value=[t.naturalWidth,t.naturalHeight]}}createMesh(){this.plane=new rP.Mesh(this.gl,{geometry:this.geometry,program:this.program}),this.plane.setParent(this.scene)}createTitle(){this.title=new rO({gl:this.gl,plane:this.plane,renderer:this.renderer,text:this.text,textColor:this.textColor,font:this.font})}update(e,t){this.plane.position.x=this.x-e.current-this.extra;let i=this.plane.position.x,r=this.viewport.width/2;if(0===this.bend)this.plane.position.y=0,this.plane.rotation.z=0;else{let e=Math.abs(this.bend),t=(r*r+e*e)/(2*e),a=Math.min(Math.abs(i),r),s=t-Math.sqrt(t*t-a*a);this.bend>0?(this.plane.position.y=-s,this.plane.rotation.z=-Math.sign(i)*Math.asin(a/t)):(this.plane.position.y=s,this.plane.rotation.z=Math.sign(i)*Math.asin(a/t))}this.speed=e.current-e.last,this.program.uniforms.uTime.value+=.04,this.program.uniforms.uSpeed.value=this.speed;let a=this.plane.scale.x/2,s=this.viewport.width/2;this.isBefore=this.plane.position.x+a<-s,this.isAfter=this.plane.position.x-a>s,"right"===t&&this.isBefore&&(this.extra-=this.widthTotal,this.isBefore=this.isAfter=!1),"left"===t&&this.isAfter&&(this.extra+=this.widthTotal,this.isBefore=this.isAfter=!1)}onResize({screen:e,viewport:t}={}){e&&(this.screen=e),t&&(this.viewport=t,this.plane.program.uniforms.uViewportSizes&&(this.plane.program.uniforms.uViewportSizes.value=[this.viewport.width,this.viewport.height])),this.scale=this.screen.height/1500,this.plane.scale.y=this.viewport.height*(900*this.scale)/this.screen.height,this.plane.scale.x=this.viewport.width*(700*this.scale)/this.screen.width,this.plane.program.uniforms.uPlaneSizes.value=[this.plane.scale.x,this.plane.scale.y],this.padding=2,this.width=this.plane.scale.x+this.padding,this.widthTotal=this.width*this.length,this.x=this.width*this.index}}class rG{container;scrollSpeed;scroll;onCheckDebounce;renderer;gl;camera;scene;planeGeometry;medias=[];mediasImages=[];screen;viewport;raf=0;boundOnResize;boundOnWheel;boundOnTouchDown;boundOnTouchMove;boundOnTouchUp;isDown=!1;start=0;constructor(e,{items:t,bend:i=1,textColor:r="#ffffff",borderRadius:a=0,font:s="bold 30px Figtree",scrollSpeed:n=2,scrollEase:o=.05}){document.documentElement.classList.remove("no-js"),this.container=e,this.scrollSpeed=n,this.scroll={ease:o,current:0,target:0,last:0},this.onCheckDebounce=function(e,t){let i;return function(...t){window.clearTimeout(i),i=window.setTimeout(()=>e.apply(this,t),200)}}(this.onCheck.bind(this),0),this.createRenderer(),this.createCamera(),this.createScene(),this.onResize(),this.createGeometry(),this.createMedias(t,i,r,a,s),this.update(),this.addEventListeners()}createRenderer(){this.renderer=new rD.Renderer({alpha:!0,antialias:!0,dpr:Math.min(window.devicePixelRatio||1,2)}),this.gl=this.renderer.gl,this.gl.clearColor(0,0,0,0),this.container.appendChild(this.renderer.gl.canvas)}createCamera(){this.camera=new rC(this.gl),this.camera.fov=45,this.camera.position.z=20}createScene(){this.scene=new rN.Transform}createGeometry(){this.planeGeometry=new rI(this.gl,{heightSegments:50,widthSegments:100})}createMedias(e,t=1,i,r,a){let s=e&&e.length?e:[{image:"https://picsum.photos/seed/1/800/600?grayscale",text:"Bridge"},{image:"https://picsum.photos/seed/2/800/600?grayscale",text:"Desk Setup"},{image:"https://picsum.photos/seed/3/800/600?grayscale",text:"Waterfall"},{image:"https://picsum.photos/seed/4/800/600?grayscale",text:"Strawberries"},{image:"https://picsum.photos/seed/5/800/600?grayscale",text:"Deep Diving"},{image:"https://picsum.photos/seed/16/800/600?grayscale",text:"Train Track"},{image:"https://picsum.photos/seed/17/800/600?grayscale",text:"Santorini"},{image:"https://picsum.photos/seed/8/800/600?grayscale",text:"Blurry Lights"},{image:"https://picsum.photos/seed/9/800/600?grayscale",text:"New York"},{image:"https://picsum.photos/seed/10/800/600?grayscale",text:"Good Boy"},{image:"https://picsum.photos/seed/21/800/600?grayscale",text:"Coastline"},{image:"https://picsum.photos/seed/12/800/600?grayscale",text:"Palm Trees"}];this.mediasImages=s.concat(s),this.medias=this.mediasImages.map((e,s)=>new rz({geometry:this.planeGeometry,gl:this.gl,image:e.image,index:s,length:this.mediasImages.length,renderer:this.renderer,scene:this.scene,screen:this.screen,text:e.text,viewport:this.viewport,bend:t,textColor:i,borderRadius:r,font:a}))}onTouchDown(e){this.isDown=!0,this.scroll.position=this.scroll.current,this.start="touches"in e?e.touches[0].clientX:e.clientX}onTouchMove(e){if(!this.isDown)return;let t="touches"in e?e.touches[0].clientX:e.clientX,i=(this.start-t)*(.025*this.scrollSpeed);this.scroll.target=(this.scroll.position??0)+i}onTouchUp(){this.isDown=!1,this.onCheck()}onWheel(e){let t=e.deltaY||e.wheelDelta||e.detail;this.scroll.target+=(t>0?this.scrollSpeed:-this.scrollSpeed)*.2,this.onCheckDebounce()}onCheck(){if(!this.medias||!this.medias[0])return;let e=this.medias[0].width,t=Math.round(Math.abs(this.scroll.target)/e),i=e*t;this.scroll.target=this.scroll.target<0?-i:i}onResize(){this.screen={width:this.container.clientWidth,height:this.container.clientHeight},this.renderer.setSize(this.screen.width,this.screen.height),this.camera.perspective({aspect:this.screen.width/this.screen.height});let e=2*Math.tan(this.camera.fov*Math.PI/180/2)*this.camera.position.z,t=e*this.camera.aspect;this.viewport={width:t,height:e},this.medias&&this.medias.forEach(e=>e.onResize({screen:this.screen,viewport:this.viewport}))}update(){var e;this.scroll.current=(e=this.scroll.current,e+(this.scroll.target-e)*this.scroll.ease);let t=this.scroll.current>this.scroll.last?"right":"left";this.medias&&this.medias.forEach(e=>e.update(this.scroll,t)),this.renderer.render({scene:this.scene,camera:this.camera}),this.scroll.last=this.scroll.current,this.raf=window.requestAnimationFrame(this.update.bind(this))}addEventListeners(){this.boundOnResize=this.onResize.bind(this),this.boundOnWheel=this.onWheel.bind(this),this.boundOnTouchDown=this.onTouchDown.bind(this),this.boundOnTouchMove=this.onTouchMove.bind(this),this.boundOnTouchUp=this.onTouchUp.bind(this),window.addEventListener("resize",this.boundOnResize),window.addEventListener("mousewheel",this.boundOnWheel),window.addEventListener("wheel",this.boundOnWheel),window.addEventListener("mousedown",this.boundOnTouchDown),window.addEventListener("mousemove",this.boundOnTouchMove),window.addEventListener("mouseup",this.boundOnTouchUp),window.addEventListener("touchstart",this.boundOnTouchDown),window.addEventListener("touchmove",this.boundOnTouchMove),window.addEventListener("touchend",this.boundOnTouchUp)}destroy(){window.cancelAnimationFrame(this.raf),window.removeEventListener("resize",this.boundOnResize),window.removeEventListener("mousewheel",this.boundOnWheel),window.removeEventListener("wheel",this.boundOnWheel),window.removeEventListener("mousedown",this.boundOnTouchDown),window.removeEventListener("mousemove",this.boundOnTouchMove),window.removeEventListener("mouseup",this.boundOnTouchUp),window.removeEventListener("touchstart",this.boundOnTouchDown),window.removeEventListener("touchmove",this.boundOnTouchMove),window.removeEventListener("touchend",this.boundOnTouchUp),this.renderer&&this.renderer.gl&&this.renderer.gl.canvas.parentNode&&this.renderer.gl.canvas.parentNode.removeChild(this.renderer.gl.canvas)}}function rV({items:e,bend:t=3,textColor:i="#ffffff",borderRadius:r=.05,font:a="bold 30px Figtree",scrollSpeed:s=2,scrollEase:n=.02}){let o=(0,m.useRef)(null);return(0,m.useEffect)(()=>{if(!o.current)return;let l=new rG(o.current,{items:e,bend:t,textColor:i,borderRadius:r,font:a,scrollSpeed:s,scrollEase:n});return()=>{l.destroy()}},[e,t,i,r,a,s,n]),(0,d.jsx)("div",{className:"circular-gallery",ref:o})}function rB({conversations:e,currentConversationId:t,onSelectConversation:i,onNewConversation:r,onDeleteConversation:a,isOpen:s,onClose:n}){let[o,l]=(0,m.useState)(null);(0,m.useEffect)(()=>{let e=e=>{"Escape"===e.key&&s&&n()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s,n]);let c=async(e,t)=>{e.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&(l(t),await a(t),l(null))};return(0,d.jsxs)(d.Fragment,{children:[s&&(0,d.jsx)("div",{className:"sidebar-backdrop",onClick:n}),(0,d.jsxs)("div",{className:`conversation-sidebar ${s?"open":""}`,children:[(0,d.jsxs)("div",{className:"sidebar-header",children:[(0,d.jsx)("h2",{className:"sidebar-title",children:"Conversations"}),(0,d.jsx)("button",{className:"sidebar-close-btn",onClick:n,"aria-label":"Close sidebar",children:"✕"})]}),(0,d.jsxs)("button",{className:"new-conversation-btn",onClick:()=>{r(),n()},children:[(0,d.jsx)("span",{className:"new-conversation-icon",children:"+"}),"New Conversation"]}),(0,d.jsx)("div",{className:"conversations-list",children:0===e.length?(0,d.jsxs)("div",{className:"empty-state",children:[(0,d.jsx)("p",{children:"No conversations yet"}),(0,d.jsx)("p",{className:"empty-state-hint",children:"Start chatting to create one!"})]}):e.map(e=>{let r,a,s,l,h;return(0,d.jsxs)("div",{className:`conversation-item ${e.id===t?"active":""} ${o===e.id?"deleting":""}`,onClick:()=>{i(e.id),n()},children:[(0,d.jsxs)("div",{className:"conversation-info",children:[(0,d.jsx)("div",{className:"conversation-title",children:e.title}),(0,d.jsxs)("div",{className:"conversation-meta",children:[(0,d.jsx)("span",{className:"conversation-model",children:e.model}),(0,d.jsx)("span",{className:"conversation-date",children:(r=new Date(e.updated_at),s=Math.floor((a=new Date().getTime()-r.getTime())/6e4),l=Math.floor(a/36e5),h=Math.floor(a/864e5),s<1?"Just now":s<60?`${s}m ago`:l<24?`${l}h ago`:h<7?`${h}d ago`:r.toLocaleDateString())})]})]}),(0,d.jsx)("button",{className:"delete-conversation-btn",onClick:t=>c(t,e.id),"aria-label":"Delete conversation",disabled:o===e.id,children:o===e.id?"...":"🗑️"})]},e.id)})})]})]})}function rq(){let[e,t]=(0,m.useState)([]),i=(0,m.useRef)(null);(0,m.useEffect)(()=>{r();let e=setInterval(r,3e4);return()=>clearInterval(e)},[]);let r=()=>{let e=["Alex414","SamantaGlory","Pirateboy","tomandjarry","DataNinja","CodeWizard","AIEnthusiast","TechSavvy","PixelMaster","DevGuru","CloudRider","ByteHunter","CyberPhoenix","QuantumLeap","NeonDreamer","SyntaxKing","LogicLord","BinaryBoss","ScriptMage","DigitalDuke","AlgoAce","MatrixMind","VirtualVoyager","CryptoChamp","WebWarrior","CodeCrusader","TechTitan","PixelPirate","DataDragon","CloudChaser","ByteBender","CyberSamurai","QuantumQuest","NeonNinja","SyntaxSage","LogicLegend","BinaryBard","ScriptSensei","DigitalDynamo","AlgoArchitect","MatrixMaverick"],i=["just trained a Custom Omi","just chatted with Omi Chat","just generated a new image in the Media Studio","just Upgraded to the Pro Plan!","just created a new AI Workflow","just generated a stunning video","just completed a deep web search","just customized their AI assistant","just exported media from the gallery","just discovered a new feature","just integrated an API","just automated a complex task","just analyzed data with AI","just created research content","just generated code snippets","just trained a specialized model","just built a business workflow","just designed a creative project","just optimized their AI settings","just shared their Custom Omi","just completed an AI task","just explored the Command Hub","just unlocked advanced features","just personalized their workspace","just generated multiple images","just created AI-powered content","just enhanced their workflow","just automated data processing","just built an intelligent system","just mastered a new AI tool"],r=[];for(let t=0;t<40;t++){let t=e[Math.floor(Math.random()*e.length)],a=i[Math.floor(Math.random()*i.length)],s=Math.floor(60*Math.random())+1;r.push({username:t,action:a,timestamp:new Date(Date.now()-6e4*s).toISOString()})}t(r)};return 0===e.length?(0,d.jsx)("div",{className:"news-ticker",children:(0,d.jsxs)("div",{className:"news-ticker-container",children:[(0,d.jsxs)("div",{className:"news-ticker-label",children:[(0,d.jsx)("span",{className:"ticker-icon",children:"◈"}),(0,d.jsx)("span",{children:"LIVE ACTIVITY"})]}),(0,d.jsx)("div",{className:"news-ticker-content loading",children:(0,d.jsx)("span",{children:"Loading user activity..."})})]})}):(0,d.jsx)("div",{className:"news-ticker",children:(0,d.jsxs)("div",{className:"news-ticker-container",children:[(0,d.jsxs)("div",{className:"news-ticker-label",children:[(0,d.jsx)("span",{className:"ticker-icon",children:"◈"}),(0,d.jsx)("span",{children:"LIVE ACTIVITY"})]}),(0,d.jsx)("div",{className:"news-ticker-content",ref:i,children:(0,d.jsx)("div",{className:"news-ticker-track",children:[...e,...e].map((e,t)=>{let i,r,a,s;return(0,d.jsxs)("div",{className:"news-item",children:[(0,d.jsx)("span",{className:"news-bullet",children:"●"}),(0,d.jsx)("span",{className:"activity-username",children:e.username}),(0,d.jsx)("span",{className:"activity-action",children:e.action}),(0,d.jsx)("span",{className:"news-meta",children:(0,d.jsx)("span",{className:"news-time",children:(i=new Date(e.timestamp),s=Math.floor((a=Math.floor((r=Math.floor((new Date().getTime()-i.getTime())/6e4))/60))/24),r<1?"just now":r<60?`${r}m ago`:a<24?`${a}h ago`:`${s}d ago`)})})]},t)})})})]})})}var rX=e.i(52080);async function r$(e,t,i,r){try{let{error:a}=await rX.supabase.from("generated_media").insert([{user_id:e,type:t,url:i,prompt:r,created_at:new Date().toISOString()}]);if(a)return console.error("Error saving media:",a),!1;return!0}catch(e){return console.error("Error saving media:",e),!1}}async function rY(e){try{let{data:t,error:i}=await rX.supabase.from("generated_media").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(i)return console.error("Error fetching media:",i),[];return t||[]}catch(e){return console.error("Error fetching media:",e),[]}}async function rW(e){try{let{error:t}=await rX.supabase.from("generated_media").delete().eq("id",e);if(t)return console.error("Error deleting media:",t),!1;return!0}catch(e){return console.error("Error deleting media:",e),!1}}function rH({isOpen:e,onClose:t,userId:i}){let[r,a]=(0,m.useState)([]),[s,n]=(0,m.useState)(!0),[o,l]=(0,m.useState)("all"),[c,h]=(0,m.useState)(null);(0,m.useEffect)(()=>{e&&i&&(console.log("📥 Loading media for user:",i),u())},[e,i]),(0,m.useEffect)(()=>{e&&i&&u()},[e]);let u=async()=>{if(!i){console.warn("⚠️ No userId provided to MediaGallery"),n(!1);return}n(!0);let e=await rY(i);console.log("📸 Loaded media items:",e.length),a(e),n(!1)},g=async e=>{!confirm("Are you sure you want to delete this item?")||await rW(e)&&(a(r.filter(t=>t.id!==e)),c?.id===e&&h(null))},p="all"===o?r:r.filter(e=>e.type===o);return e?(0,d.jsx)("div",{className:"media-gallery-overlay",onClick:t,children:(0,d.jsxs)("div",{className:"media-gallery-modal",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"media-gallery-header",children:[(0,d.jsx)("h2",{children:"Your Generated Media"}),(0,d.jsx)("button",{className:"close-btn",onClick:t,children:"✕"})]}),(0,d.jsxs)("div",{className:"media-gallery-filters",children:[(0,d.jsxs)("button",{className:`filter-btn ${"all"===o?"active":""}`,onClick:()=>l("all"),children:["All (",r.length,")"]}),(0,d.jsxs)("button",{className:`filter-btn ${"image"===o?"active":""}`,onClick:()=>l("image"),children:["Images (",r.filter(e=>"image"===e.type).length,")"]}),(0,d.jsxs)("button",{className:`filter-btn ${"video"===o?"active":""}`,onClick:()=>l("video"),children:["Videos (",r.filter(e=>"video"===e.type).length,")"]})]}),(0,d.jsx)("div",{className:"media-gallery-content",children:s?(0,d.jsxs)("div",{className:"loading-state",children:[(0,d.jsx)("div",{className:"spinner"}),(0,d.jsx)("p",{children:"Loading your media..."})]}):0===p.length?(0,d.jsxs)("div",{className:"empty-state",children:[(0,d.jsx)("div",{className:"empty-icon",children:"📁"}),(0,d.jsxs)("p",{children:["No ","all"!==o?o+"s":"media"," yet"]}),(0,d.jsx)("p",{className:"empty-hint",children:"Generate images and videos in the AI Media Studio to see them here"})]}):(0,d.jsx)("div",{className:"media-grid",children:p.map(e=>(0,d.jsxs)("div",{className:"media-card",children:[(0,d.jsxs)("div",{className:"media-preview",onClick:()=>h(e),children:["image"===e.type?(0,d.jsx)("img",{src:e.url,alt:e.prompt,loading:"lazy",onError:t=>{console.error("Failed to load image:",e.url),t.currentTarget.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300"%3E%3Crect fill="%23111" width="400" height="300"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" fill="%23666" font-size="16"%3EImage unavailable%3C/text%3E%3C/svg%3E'}}):(0,d.jsx)("video",{src:e.url,onError:()=>{console.error("Failed to load video:",e.url)}}),(0,d.jsx)("div",{className:"media-overlay",children:(0,d.jsx)("span",{className:"media-type-badge",children:"image"===e.type?"🖼️":"🎬"})})]}),(0,d.jsxs)("div",{className:"media-card-footer",children:[(0,d.jsx)("p",{className:"media-prompt",title:e.prompt,children:e.prompt}),(0,d.jsxs)("div",{className:"media-card-actions",children:[(0,d.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"media-action-btn",title:"Open",children:"🔗"}),(0,d.jsx)("button",{className:"media-action-btn delete-btn",onClick:()=>g(e.id),title:"Delete",children:"🗑️"})]})]})]},e.id))})}),c&&(0,d.jsx)("div",{className:"media-lightbox",onClick:()=>h(null),children:(0,d.jsxs)("div",{className:"lightbox-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsx)("button",{className:"lightbox-close",onClick:()=>h(null),children:"✕"}),"image"===c.type?(0,d.jsx)("img",{src:c.url,alt:c.prompt,onError:e=>{console.error("Failed to load image in lightbox:",c.url),e.currentTarget.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600"%3E%3Crect fill="%23111" width="800" height="600"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" fill="%23666" font-size="24"%3EImage unavailable%3C/text%3E%3C/svg%3E'}}):(0,d.jsx)("video",{src:c.url,controls:!0,autoPlay:!0,onError:()=>{console.error("Failed to load video in lightbox:",c.url)}}),(0,d.jsxs)("div",{className:"lightbox-info",children:[(0,d.jsx)("p",{className:"lightbox-prompt",children:c.prompt}),(0,d.jsx)("p",{className:"lightbox-date",children:new Date(c.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})})]})}):null}function rQ({isOpen:e,onClose:t}){let[i,r]=(0,m.useState)(""),[a,s]=(0,m.useState)([]),[n,o]=(0,m.useState)(!1),l=(0,m.useRef)(null);(0,m.useEffect)(()=>{e&&l.current&&l.current.focus()},[e]),(0,m.useEffect)(()=>{let i=i=>{"Escape"===i.key&&e&&t()};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e,t]);let c=[{type:"feature",title:"Omi Chat",description:"Conversational AI with advanced reasoning",icon:"💬",onClick:()=>{console.log("Navigate to Omi Chat"),t()}},{type:"feature",title:"Web Search",description:"Search the web with AI-powered insights",icon:"🌐",onClick:()=>{console.log("Navigate to Web Search"),t()}},{type:"feature",title:"Image Generation",description:"Create stunning visuals with AI",icon:"🎨",onClick:()=>{console.log("Navigate to Image Generation"),t()}},{type:"feature",title:"Video Generation",description:"Transform ideas into motion",icon:"🎬",onClick:()=>{console.log("Navigate to Video Generation"),t()}},{type:"feature",title:"Media Gallery",description:"View all your generated images and videos",icon:"⊞",onClick:()=>{console.log("Navigate to Media Gallery"),t()}},{type:"feature",title:"Settings",description:"Configure your preferences",icon:"⚙",onClick:()=>{console.log("Navigate to Settings"),t()}},{type:"feature",title:"Command Hub",description:"Access all tools and features",icon:"◆",onClick:()=>{console.log("Navigate to Command Hub"),t()}}];return((0,m.useEffect)(()=>{if(!i.trim()){s([]),o(!1);return}o(!0);let e=i.toLowerCase(),t=c.filter(t=>t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)),r=setTimeout(()=>{s(t),o(!1)},150);return()=>clearTimeout(r)},[i]),e)?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"search-backdrop",onClick:t}),(0,d.jsxs)("div",{className:"search-modal",children:[(0,d.jsxs)("div",{className:"search-header",children:[(0,d.jsx)("div",{className:"search-icon",children:"🔍"}),(0,d.jsx)("input",{ref:l,type:"text",className:"search-input",placeholder:"Search features, conversations, or keywords...",value:i,onChange:e=>r(e.target.value),autoComplete:"off"}),(0,d.jsx)("button",{className:"search-close",onClick:t,children:"✕"})]}),(0,d.jsxs)("div",{className:"search-content",children:[!i&&(0,d.jsxs)("div",{className:"search-empty",children:[(0,d.jsx)("div",{className:"search-empty-icon",children:"🔎"}),(0,d.jsx)("p",{className:"search-empty-text",children:"Search across the entire app"}),(0,d.jsx)("p",{className:"search-empty-hint",children:"Try searching for features, conversations, or actions"})]}),n&&(0,d.jsxs)("div",{className:"search-loading",children:[(0,d.jsx)("div",{className:"search-spinner"}),(0,d.jsx)("p",{children:"Searching..."})]}),i&&!n&&0===a.length&&(0,d.jsxs)("div",{className:"search-no-results",children:[(0,d.jsx)("div",{className:"search-no-results-icon",children:"🔍"}),(0,d.jsx)("p",{className:"search-no-results-text",children:"No results found"}),(0,d.jsx)("p",{className:"search-no-results-hint",children:"Try a different search term"})]}),a.length>0&&(0,d.jsxs)("div",{className:"search-results",children:[(0,d.jsxs)("p",{className:"search-results-label",children:[a.length," result",1!==a.length?"s":""]}),a.map((e,t)=>(0,d.jsxs)("button",{className:"search-result-item",onClick:e.onClick,children:[(0,d.jsx)("div",{className:"search-result-icon",children:e.icon}),(0,d.jsxs)("div",{className:"search-result-content",children:[(0,d.jsx)("div",{className:"search-result-title",children:e.title}),(0,d.jsx)("div",{className:"search-result-description",children:e.description})]}),(0,d.jsx)("div",{className:"search-result-arrow",children:"→"})]},t))]})]}),(0,d.jsx)("div",{className:"search-footer",children:(0,d.jsxs)("div",{className:"search-shortcut",children:[(0,d.jsx)("kbd",{children:"ESC"})," to close"]})})]})]}):null}let rZ=({isVisible:e})=>{let[t,i]=(0,m.useState)(0),r=["/images/samples/ai.jpg","/images/samples/sample2.jpg","/images/samples/little guy.png","/images/samples/overl.png"];return((0,m.useEffect)(()=>{if(!e)return;let t=setInterval(()=>{i(e=>(e+1)%r.length)},1500);return()=>clearInterval(t)},[e,r.length]),e)?(0,d.jsxs)("div",{className:"image-preview-tooltip",children:[(0,d.jsxs)("div",{className:"preview-content",children:[(0,d.jsx)("div",{className:"preview-text",children:"Real-time AI image generation"}),(0,d.jsx)("div",{className:"preview-carousel",children:r.map((e,i)=>(0,d.jsx)("img",{src:e,alt:`Sample ${i+1}`,className:`preview-image ${i===t?"active":""}`},i))}),(0,d.jsx)("div",{className:"preview-caption",children:"Type a prompt to generate stunning images"})]}),(0,d.jsx)("div",{className:"tooltip-arrow"})]}):null},rK=({isVisible:e})=>{let[t,i]=(0,m.useState)(0),r=(0,m.useRef)(null),a=["/videos/vidpreview.mp4","/videos/dogclimb.mp4","/videos/matrixcode.mp4","/videos/rockbug.mp4"];return((0,m.useEffect)(()=>{if(!e){r.current&&r.current.pause();return}r.current&&r.current.play().catch(e=>{console.log("Video autoplay failed:",e)});let t=setInterval(()=>{i(e=>(e+1)%a.length)},4e3);return()=>clearInterval(t)},[e,a.length]),(0,m.useEffect)(()=>{if(r.current&&e){let e=r.current;console.log("Loading video:",a[t]);let i=()=>{console.log("Video can play:",a[t]),e.play().catch(e=>{console.log("Video autoplay failed:",e)})},s=()=>{console.error("Video load error:",a[t],e.error)};return e.addEventListener("canplay",i),e.addEventListener("error",s),e.load(),()=>{e.removeEventListener("canplay",i),e.removeEventListener("error",s)}}},[t,e,a]),e)?(0,d.jsxs)("div",{className:"video-preview-tooltip",children:[(0,d.jsxs)("div",{className:"preview-content",children:[(0,d.jsx)("div",{className:"preview-text",children:"Generate AI videos from text prompts"}),(0,d.jsxs)("div",{className:"preview-video-container",children:[(0,d.jsxs)("video",{ref:r,className:"preview-video",muted:!0,loop:!1,playsInline:!0,autoPlay:!0,preload:"auto",children:[(0,d.jsx)("source",{src:a[t],type:"video/mp4"}),"Your browser does not support the video tag."]},t),(0,d.jsx)("div",{className:"video-overlay-gradient"})]}),(0,d.jsx)("div",{className:"preview-caption",children:"Create stunning video content with AI"})]}),(0,d.jsx)("div",{className:"tooltip-arrow"})]}):null};var rJ=e.i(5531);async function r0(e,t="New Conversation",i="Gemini Pro"){try{let{data:r,error:a}=await rX.supabase.from("conversations").insert({user_id:e,title:t,model:i}).select().single();if(a)return console.error("Error creating conversation:",a),null;return r}catch(e){return console.error("Error creating conversation:",e),null}}async function r1(e){try{let{data:t,error:i}=await rX.supabase.from("conversations").select("*").eq("user_id",e).order("updated_at",{ascending:!1});if(i)return console.error("Error fetching conversations:",i),[];return t||[]}catch(e){return console.error("Error fetching conversations:",e),[]}}async function r2(e){try{let{data:t,error:i}=await rX.supabase.from("messages").select("*").eq("conversation_id",e).order("timestamp",{ascending:!0});if(i)return console.error("Error fetching messages:",i),[];return t||[]}catch(e){return console.error("Error fetching messages:",e),[]}}async function r3(e,t,i){try{let{data:r,error:a}=await rX.supabase.from("messages").insert({conversation_id:e,role:t,content:i}).select().single();if(a)return console.error("Error saving message:",a),null;return await rX.supabase.from("conversations").update({updated_at:new Date().toISOString()}).eq("id",e),r}catch(e){return console.error("Error saving message:",e),null}}async function r5(e){try{let{error:t}=await rX.supabase.from("conversations").delete().eq("id",e);if(t)return console.error("Error deleting conversation:",t),!1;return!0}catch(e){return console.error("Error deleting conversation:",e),!1}}let r4=({children:e,color:t="#5227FF",speed:i=1,chaos:r=1,thickness:a=2,className:s,style:n})=>{let o=(0,m.useId)().replace(/[:]/g,""),l=`turbulent-displace-${o}`,c=(0,m.useRef)(null),h=(0,m.useRef)(null),u=(0,m.useRef)(null),g=()=>{let e=c.current,t=h.current;if(!e||!t)return;u.current&&(u.current.style.filter=`url(#${l})`);let a=Math.max(1,Math.round(t.clientWidth||t.getBoundingClientRect().width||0)),s=Math.max(1,Math.round(t.clientHeight||t.getBoundingClientRect().height||0)),n=Array.from(e.querySelectorAll('feOffset > animate[attributeName="dy"]'));n.length>=2&&(n[0].setAttribute("values",`${s}; 0`),n[1].setAttribute("values",`0; -${s}`));let o=Array.from(e.querySelectorAll('feOffset > animate[attributeName="dx"]'));o.length>=2&&(o[0].setAttribute("values",`${a}; 0`),o[1].setAttribute("values",`0; -${a}`));let d=Math.max(.001,6/(i||1));[...n,...o].forEach(e=>e.setAttribute("dur",`${d}s`));let m=e.querySelector("feDisplacementMap");m&&m.setAttribute("scale",String(30*(r||1)));let g=e.querySelector(`#${CSS.escape(l)}`);g&&(g.setAttribute("x","-200%"),g.setAttribute("y","-200%"),g.setAttribute("width","500%"),g.setAttribute("height","500%")),requestAnimationFrame(()=>{[...n,...o].forEach(e=>{if("function"==typeof e.beginElement)try{e.beginElement()}catch{console.warn("ElectricBorder: beginElement failed, this may be due to a browser limitation.")}})})};(0,m.useEffect)(()=>{g()},[i,r]),(0,m.useLayoutEffect)(()=>{if(!h.current)return;let e=new ResizeObserver(()=>g());return e.observe(h.current),g(),()=>e.disconnect()},[]);let p={"--electric-border-color":t,"--eb-border-width":`${a}px`};return(0,d.jsxs)("div",{ref:h,className:`electric-border ${s??""}`,style:{...p,...n},children:[(0,d.jsx)("svg",{ref:c,className:"eb-svg","aria-hidden":!0,focusable:"false",children:(0,d.jsx)("defs",{children:(0,d.jsxs)("filter",{id:l,colorInterpolationFilters:"sRGB",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[(0,d.jsx)("feTurbulence",{type:"turbulence",baseFrequency:"0.02",numOctaves:10,result:"noise1",seed:"1"}),(0,d.jsx)("feOffset",{in:"noise1",dx:"0",dy:"0",result:"offsetNoise1",children:(0,d.jsx)("animate",{attributeName:"dy",values:"700; 0",dur:"6s",repeatCount:"indefinite",calcMode:"linear"})}),(0,d.jsx)("feTurbulence",{type:"turbulence",baseFrequency:"0.02",numOctaves:10,result:"noise2",seed:"1"}),(0,d.jsx)("feOffset",{in:"noise2",dx:"0",dy:"0",result:"offsetNoise2",children:(0,d.jsx)("animate",{attributeName:"dy",values:"0; -700",dur:"6s",repeatCount:"indefinite",calcMode:"linear"})}),(0,d.jsx)("feTurbulence",{type:"turbulence",baseFrequency:"0.02",numOctaves:10,result:"noise1",seed:"2"}),(0,d.jsx)("feOffset",{in:"noise1",dx:"0",dy:"0",result:"offsetNoise3",children:(0,d.jsx)("animate",{attributeName:"dx",values:"490; 0",dur:"6s",repeatCount:"indefinite",calcMode:"linear"})}),(0,d.jsx)("feTurbulence",{type:"turbulence",baseFrequency:"0.02",numOctaves:10,result:"noise2",seed:"2"}),(0,d.jsx)("feOffset",{in:"noise2",dx:"0",dy:"0",result:"offsetNoise4",children:(0,d.jsx)("animate",{attributeName:"dx",values:"0; -490",dur:"6s",repeatCount:"indefinite",calcMode:"linear"})}),(0,d.jsx)("feComposite",{in:"offsetNoise1",in2:"offsetNoise2",result:"part1"}),(0,d.jsx)("feComposite",{in:"offsetNoise3",in2:"offsetNoise4",result:"part2"}),(0,d.jsx)("feBlend",{in:"part1",in2:"part2",mode:"color-dodge",result:"combinedNoise"}),(0,d.jsx)("feDisplacementMap",{in:"SourceGraphic",in2:"combinedNoise",scale:"30",xChannelSelector:"R",yChannelSelector:"B"})]})})}),(0,d.jsxs)("div",{className:"eb-layers",children:[(0,d.jsx)("div",{ref:u,className:"eb-stroke"}),(0,d.jsx)("div",{className:"eb-glow-1"}),(0,d.jsx)("div",{className:"eb-glow-2"}),(0,d.jsx)("div",{className:"eb-background-glow"})]}),(0,d.jsx)("div",{className:"eb-content",children:e})]})},r6=(0,e.i(60217).getBrowserSupabaseClient)(),r9=({isOpen:e,onClose:t,limitType:i,currentUsage:r,usageLimit:a,resetAt:s})=>{if(!e)return null;let n=async e=>{try{if("ultra"===e){window.location.href="https://buy.stripe.com/fZu14ndCtdVZfvf4Y8dfG0g";return}let{data:{user:t}}=await r6.auth.getUser();if(!t)return void alert("Please log in to upgrade");let i=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.id,email:t.email,plan:e})}),r=await i.json();if(r.url)window.location.href=r.url;else throw Error("No checkout URL returned")}catch(e){console.error("Error creating checkout:",e),alert("Failed to start checkout. Please try again.")}};return(0,d.jsx)("div",{className:"paywall-overlay",onClick:t,children:(0,d.jsxs)("div",{className:"paywall-modal",onClick:e=>e.stopPropagation(),children:[(0,d.jsx)("button",{className:"paywall-close",onClick:t,children:"×"}),(0,d.jsxs)("div",{className:"paywall-content",children:[(0,d.jsx)("h2",{className:"plans-title",children:"Choose Your Plan"}),(0,d.jsxs)("div",{className:"plans-container",children:[(0,d.jsxs)("div",{className:"pro-plan-card",children:[(0,d.jsx)("div",{className:"card-glow"}),(0,d.jsx)("div",{className:"card-border"}),(0,d.jsxs)("div",{className:"plan-header",children:[(0,d.jsx)("div",{className:"plan-icon-badge",children:(0,d.jsx)("div",{className:"icon-inner",children:"⚡"})}),(0,d.jsxs)("div",{className:"plan-title-group",children:[(0,d.jsx)("h3",{className:"plan-name",children:"OMI PRO"}),(0,d.jsx)("p",{className:"plan-subtitle",children:"Essential AI power"})]})]}),(0,d.jsxs)("div",{className:"plan-pricing",children:[(0,d.jsxs)("div",{className:"price-wrapper",children:[(0,d.jsx)("span",{className:"currency",children:"$"}),(0,d.jsx)("span",{className:"amount",children:"4.99"})]}),(0,d.jsx)("p",{className:"billing-text",children:"per month"})]}),(0,d.jsxs)("div",{className:"features-list",children:[(0,d.jsxs)("div",{className:"feature-item",children:[(0,d.jsx)("div",{className:"feature-icon-box",children:(0,d.jsx)("span",{className:"icon",children:"∞"})}),(0,d.jsx)("span",{className:"feature-text",children:"Unlimited AI Conversations"})]}),(0,d.jsxs)("div",{className:"feature-item",children:[(0,d.jsx)("div",{className:"feature-icon-box",children:(0,d.jsx)("span",{className:"icon",children:"◈"})}),(0,d.jsx)("span",{className:"feature-text",children:"50 Images per day"})]}),(0,d.jsxs)("div",{className:"feature-item",children:[(0,d.jsx)("div",{className:"feature-icon-box",children:(0,d.jsx)("span",{className:"icon",children:"◇"})}),(0,d.jsx)("span",{className:"feature-text",children:"10 Videos per day"})]}),(0,d.jsxs)("div",{className:"feature-item",children:[(0,d.jsx)("div",{className:"feature-icon-box",children:(0,d.jsx)("span",{className:"icon",children:"⚡"})}),(0,d.jsx)("span",{className:"feature-text",children:"Standard Processing"})]})]}),(0,d.jsxs)("button",{className:"cta-button",onClick:()=>n("pro"),children:[(0,d.jsx)("div",{className:"button-glow"}),(0,d.jsx)("span",{className:"button-text",children:"Choose Pro"})]}),(0,d.jsxs)("div",{className:"secure-badge",children:[(0,d.jsx)("span",{className:"lock",children:"◆"}),(0,d.jsx)("span",{className:"text",children:"Secured by Stripe"})]})]}),(0,d.jsx)(r4,{color:"#C0C0C0",speed:1,chaos:.5,thickness:3.5,style:{borderRadius:20},children:(0,d.jsxs)("div",{className:"ultra-plan-card",children:[(0,d.jsx)("div",{className:"ultra-badge",children:"ULTRA"}),(0,d.jsxs)("div",{className:"plan-header",children:[(0,d.jsx)("div",{className:"plan-icon-badge ultra-icon",children:(0,d.jsx)("div",{className:"icon-inner",children:"✦"})}),(0,d.jsxs)("div",{className:"plan-title-group",children:[(0,d.jsx)("h3",{className:"plan-name ultra-name",children:"OMI ULTRA"}),(0,d.jsx)("p",{className:"plan-subtitle",children:"Maximum AI power"})]})]}),(0,d.jsxs)("div",{className:"plan-pricing",children:[(0,d.jsxs)("div",{className:"price-wrapper",children:[(0,d.jsx)("span",{className:"currency",children:"$"}),(0,d.jsx)("span",{className:"amount",children:"20"})]}),(0,d.jsx)("p",{className:"billing-text",children:"per month"})]}),(0,d.jsxs)("div",{className:"features-list",children:[(0,d.jsxs)("div",{className:"feature-item",children:[(0,d.jsx)("div",{className:"feature-icon-box ultra-feature",children:(0,d.jsx)("span",{className:"icon",children:"∞"})}),(0,d.jsx)("span",{className:"feature-text",children:"Unlimited Everything"})]}),(0,d.jsxs)("div",{className:"feature-item",children:[(0,d.jsx)("div",{className:"feature-icon-box ultra-feature",children:(0,d.jsx)("span",{className:"icon",children:"◈"})}),(0,d.jsx)("span",{className:"feature-text",children:"Unlimited Image Generation"})]}),(0,d.jsxs)("div",{className:"feature-item",children:[(0,d.jsx)("div",{className:"feature-icon-box ultra-feature",children:(0,d.jsx)("span",{className:"icon",children:"◇"})}),(0,d.jsx)("span",{className:"feature-text",children:"Unlimited Video Creation"})]}),(0,d.jsxs)("div",{className:"feature-item",children:[(0,d.jsx)("div",{className:"feature-icon-box ultra-feature",children:(0,d.jsx)("span",{className:"icon",children:"⚡"})}),(0,d.jsx)("span",{className:"feature-text",children:"Priority Processing Speed"})]}),(0,d.jsxs)("div",{className:"feature-item",children:[(0,d.jsx)("div",{className:"feature-icon-box ultra-feature",children:(0,d.jsx)("span",{className:"icon",children:"✦"})}),(0,d.jsx)("span",{className:"feature-text",children:"Early Access Features"})]})]}),(0,d.jsxs)("button",{className:"cta-button ultra-button",onClick:()=>n("ultra"),children:[(0,d.jsx)("div",{className:"button-glow"}),(0,d.jsx)("span",{className:"button-text",children:"Choose Ultra"})]}),(0,d.jsxs)("div",{className:"secure-badge",children:[(0,d.jsx)("span",{className:"lock",children:"◆"}),(0,d.jsx)("span",{className:"text",children:"Secured by Stripe"})]})]})})]})]})]})})};function r8({isOpen:e,onClose:t,user:i}){let[r,a]=(0,m.useState)(""),[s,n]=(0,m.useState)("free"),[o,l]=(0,m.useState)(!1),[c,h]=(0,m.useState)(!1);(0,m.useEffect)(()=>{i&&e&&u()},[i,e]);let u=async()=>{if(i){l(!0);try{console.log("Checking admin status for:",i.email),"andregreengp@gmail.com"===i.email?(h(!0),console.log("✅ Admin status confirmed!")):console.log("❌ Not admin account");let{data:e}=await rX.supabase.from("users").select("email, subscription_tier").eq("id",i.id).single();e&&(a(e.email||i.email),n(e.subscription_tier||"free"),console.log("User subscription tier:",e.subscription_tier))}catch(e){console.error("Error fetching user data:",e)}finally{l(!1)}}},g=async()=>{try{await rX.supabase.auth.signOut(),t(),window.location.reload()}catch(e){console.error("Error logging out:",e)}};return e?(0,d.jsx)("div",{className:"settings-modal-overlay",onClick:t,children:(0,d.jsxs)("div",{className:"settings-modal",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"settings-modal-header",children:[(0,d.jsx)("h2",{children:"⚙️ Account Settings"}),(0,d.jsx)("button",{className:"settings-close-btn",onClick:t,children:"✕"})]}),(0,d.jsx)("div",{className:"settings-modal-content",children:o?(0,d.jsxs)("div",{className:"settings-loading",children:[(0,d.jsx)("div",{className:"settings-spinner"}),(0,d.jsx)("p",{children:"Loading account data..."})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"settings-section",children:[(0,d.jsx)("h3",{className:"settings-section-title",children:"👤 Profile"}),(0,d.jsxs)("div",{className:"settings-info-card",children:[(0,d.jsxs)("div",{className:"settings-info-row",children:[(0,d.jsx)("span",{className:"settings-label",children:"Email:"}),(0,d.jsx)("span",{className:"settings-value",children:r||i?.email})]}),(0,d.jsxs)("div",{className:"settings-info-row",children:[(0,d.jsx)("span",{className:"settings-label",children:"User ID:"}),(0,d.jsxs)("span",{className:"settings-value settings-value-mono",children:[i?.id?.slice(0,8),"..."]})]})]})]}),(0,d.jsxs)("div",{className:"settings-section",children:[(0,d.jsx)("h3",{className:"settings-section-title",children:"💎 Subscription"}),(0,d.jsxs)("div",{className:"settings-info-card",children:[(0,d.jsx)("div",{className:"settings-subscription-badge",children:"pro"===s?(0,d.jsx)("span",{className:"settings-badge-pro",children:"✨ Omi Pro"}):(0,d.jsx)("span",{className:"settings-badge-free",children:"🆓 Free Plan"})}),"free"===s&&(0,d.jsx)("p",{className:"settings-upgrade-hint",children:"Upgrade to Omi Pro for unlimited access to all features"})]})]}),(0,d.jsxs)("div",{className:"settings-section",children:[(0,d.jsx)("h3",{className:"settings-section-title",children:"⚡ Actions"}),(0,d.jsxs)("div",{className:"settings-actions",children:[c&&(0,d.jsxs)("button",{className:"settings-action-btn settings-admin-btn",onClick:()=>{console.log("Admin button clicked! Navigating to /admin"),t(),window.location.href="/admin"},children:[(0,d.jsx)("span",{className:"settings-action-icon",children:"👑"}),(0,d.jsx)("span",{children:"Admin Dashboard"})]}),(0,d.jsxs)("button",{className:"settings-action-btn settings-logout-btn",onClick:g,children:[(0,d.jsx)("span",{className:"settings-action-icon",children:"🚪"}),(0,d.jsx)("span",{children:"Log Out"})]})]})]})]})}),(0,d.jsx)("div",{className:"settings-modal-footer",children:(0,d.jsx)("p",{className:"settings-footer-text",children:"Omi AI • Created by Drepheus"})})]})}):null}async function r7(e,t){try{let i=await fetch("/api/usage?action=check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,usageType:t})});if(!i.ok)throw Error("Failed to check usage limit");return await i.json()}catch(e){throw console.error("Error checking usage limit:",e),e}}async function ae(e,t){try{let i=await fetch("/api/usage?action=increment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,usageType:t})}),r=await i.json();if(403===i.status&&r.limitReached)return{success:!1,limitReached:!0};if(!i.ok)throw Error("Failed to increment usage");return r}catch(e){throw console.error("Error incrementing usage:",e),e}}function at(e){return e.content||""}let ai=function(){let{user:e}=(0,rJ.useAuth)(),t=(0,u.useRouter)(),[i,r]=(0,m.useState)(null),[a,s]=(0,m.useState)([]),[n,o]=(0,m.useState)(""),[l,c]=(0,m.useState)(!1),[h,g]=(0,m.useState)(!1),[p,f]=(0,m.useState)("Gemini Pro"),[x,b]=(0,m.useState)(null),[y,w]=(0,m.useState)([]),[j,M]=(0,m.useState)(!1),[N,E]=(0,m.useState)(null),[_,A]=(0,m.useState)([]),[T,S]=(0,m.useState)(!1),[C,P]=(0,m.useState)(!1),[R,I]=(0,m.useState)(null),[k,D]=(0,m.useState)(!1),[U,F]=(0,m.useState)(!1),[O,z]=(0,m.useState)(!1),[G,V]=(0,m.useState)(!1),[B,q]=(0,m.useState)(null),[X,$]=(0,m.useState)(!1),Y=(0,m.useRef)(null),[W,H]=(0,m.useState)(!1),[Q,Z]=(0,m.useState)(null),[K,J]=(0,m.useState)(!1),ee=(0,m.useRef)(null),[et,ei]=(0,m.useState)(!1),[er,ea]=(0,m.useState)(!1),[es,en]=(0,m.useState)(!1),[eo,el]=(0,m.useState)("chat"),[ec,eh]=(0,m.useState)({current:0,limit:15,resetAt:null}),[ed,eu]=(0,m.useState)([]),[em,eg]=(0,m.useState)(!1),[ep,ef]=(0,m.useState)(!1),[ev,ex]=(0,m.useState)(!1),[eb,ey]=(0,m.useState)(!1);(0,m.useEffect)(()=>{console.log("🎨 Media Gallery State:",ev)},[ev]);let[ew,eM]=(0,m.useState)("free"),eN=[{name:"Personas",icon:"◐",description:R?`Active: ${R}`:"Shift Omi's voice (teacher, critic, explorer, poet)",onClick:()=>{let e="Personas"!==x;b(e?"Personas":null),P(e),D(!1),console.log("Personas clicked - ChromaGrid",e?"activated":"deactivated")}},{name:"Create",icon:"◇",description:"Generate visuals, stories, or creative ideas",onClick:()=>{S(!0),P(!1),D(!1),console.log("Create clicked - showing infinite menu")}},{name:"Image Gen",icon:"🖼️",description:G?"Image generation active - type a prompt!":"Real-time AI image generation",onClick:()=>{let e="Image Gen"!==x;b(e?"Image Gen":null),V(e),P(!1),D(!1),F(!1),e||q(null),console.log("Image Gen mode",e?"activated":"deactivated")}},{name:"Compare",icon:"⚖",description:"Instantly query multiple LLMs side-by-side",onClick:()=>{let e="Compare"!==x;b(e?"Compare":null),M(e),P(!1),D(!1),e||(A([]),E(null)),console.log("Compare Minds clicked")}},{name:"Video Gen",icon:"🎬",description:"Generate AI videos from text prompts",onClick:()=>{let e="Video Gen"!==x;b(e?"Video Gen":null),H(e),P(!1),D(!1),F(!1),e||Z(null),console.log("Video Gen mode",e?"activated":"deactivated")}}],eE=async t=>{if(!e)return!0;try{let i=await r7(e.id,t);if(!i.canPerform)return el("chat"===t?"chat":"image_gen"===t?"image":"video"),eh({current:i.currentUsage,limit:i.usageLimit,resetAt:i.resetAt}),en(!0),!1;return!0}catch(e){return console.error("Error checking usage limit:",e),!0}};(0,m.useEffect)(()=>{let e=e=>{"Escape"===e.key&&O?z(!1):"Escape"===e.key&&h?g(!1):"Escape"===e.key&&T?S(!1):"Escape"===e.key&&U&&(F(!1),b(null))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[O,h,T,U]),(0,m.useEffect)(()=>{e&&(s([]),r(null),eA(),e_())},[e]);let e_=async()=>{if(e)try{let{data:t,error:i}=await rX.supabase.from("users").select("subscription_tier").eq("id",e.id).single();if(i)throw i;eM(t?.subscription_tier||"free")}catch(e){console.error("Error fetching subscription tier:",e),eM("free")}};(0,m.useEffect)(()=>{if(e&&i&&a.length>0){let e=a[a.length-1];if("user"===e.role||"assistant"===e.role){let t=at(e);r3(i,e.role,t)}}},[a,i,e]);let eA=async()=>{e&&eu(await r1(e.id))},eT=async e=>{r(e),s((await r2(e)).map(e=>({id:e.id||`msg-${Date.now()}-${Math.random()}`,role:e.role,content:e.content})))},eS=async()=>{if(!e){s([]),r(null);return}let t=await r0(e.id,"New Conversation",p);t&&(r(t.id),s([]),await eA())},eC=async e=>{await r5(e),e===i&&(r(null),s([])),await eA()},eP=async t=>{if(t.preventDefault(),console.log("handleSubmit called - Input:",n.trim(),"| isLoading:",l),console.log("Messages count:",a.length),!n.trim()||l||X||K)console.log("Submit blocked - Empty input or already loading");else{if(W){if(!await eE("video_gen"))return;console.log("Generating video with prompt:",n.trim()),J(!0),Z(null);try{let t=await fetch("/api/generate-video",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:n.trim()})}),i=await t.json();if(t.ok&&i.videoUrl){if(console.log("Video generated successfully:",i.videoUrl),Z(i.videoUrl),e)try{await r$(e.id,"video",i.videoUrl,n.trim()),console.log("Video saved to gallery")}catch(e){console.error("Failed to save video to gallery:",e)}e&&await ae(e.id,"video_gen"),setTimeout(()=>{ee.current?.scrollIntoView({behavior:"smooth",block:"start"})},100)}else console.error("Video generation failed:",i.error),alert("Failed to generate video: "+(i.error||"Unknown error"))}catch(e){console.error("Error generating video:",e),alert("Failed to generate video. Please try again.")}finally{J(!1),o("")}return}if(G){if(!await eE("image_gen"))return;console.log("Generating image with prompt:",n.trim()),$(!0),q(null);try{let t=await fetch("/api/generate-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:n.trim(),aspectRatio:"3:2"})}),i=await t.json();if(t.ok&&i.imageUrl){if(console.log("Image generated successfully:",i.imageUrl),q(i.imageUrl),e)try{await r$(e.id,"image",i.imageUrl,n.trim()),console.log("Image saved to gallery")}catch(e){console.error("Failed to save image to gallery:",e)}e&&await ae(e.id,"image_gen"),setTimeout(()=>{Y.current?.scrollIntoView({behavior:"smooth",block:"start"})},100)}else console.error("Image generation failed:",i.error),alert("Failed to generate image: "+(i.error||"Unknown error"))}catch(e){console.error("Error generating image:",e),alert("Failed to generate image. Please try again.")}finally{$(!1),o("")}return}if(console.log("Processing message submission..."),console.log("=== CURRENT STATE CHECK ==="),console.log("isVideoGenActive:",W),console.log("isInstantGenActive:",G),console.log("selectedFeature:",x),e&&!i&&0===a.length){var h;let t;console.log("Creating new conversation for logged-in user...");let i=(t=(h=n.trim()).split("\n")[0].slice(0,50)).length<h.length?`${t}...`:t,a=await r0(e.id,i,p);a&&(r(a.id),await eA())}else e||console.log("Guest mode - no conversation to create");try{c(!0),console.log("Sending message:",{text:n.trim()});let e={id:`user-${Date.now()}`,role:"user",content:n.trim()};s(t=>[...t,e]),o(""),w([]);let t=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[...a,e]})});if(!t.ok)throw Error("API call failed");let i=await t.json();console.log("API response:",i);let r={id:`assistant-${Date.now()}`,role:"assistant",content:i.message};s(e=>[...e,r]),c(!1)}catch(e){console.error("Error in sendMessage:",e),console.error("Error details:",{message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0}),c(!1)}}},eR=[{icon:"⌘",label:"Command",onClick:()=>{t.push("/command-hub")}},{icon:"⊞",label:"Gallery",onClick:()=>{console.log("Gallery button clicked!"),ex(!0)}},{icon:"◈",label:"Search",onClick:()=>{console.log("Search button clicked!"),ey(!0)}},{icon:"⚙",label:"AI News",onClick:()=>{console.log("Settings clicked - activating Pulse mode"),F(!U),P(!1),D(!1)}}],eI=["GPT","Claude","Gemini","Grok","DeepSeek","Perplexity","Qwen"].map(e=>({content:(0,d.jsx)("div",{className:"ai-model-card clickable",onClick:()=>{let t;return f(e),void((t=document.getElementById("ai-models-section"))&&t.classList.add("fade-out"),setTimeout(()=>{g(!1);let e=document.querySelector(".chat-interface");e&&e.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{t&&t.classList.remove("fade-out")},100)},300))},children:e})}));return(0,d.jsxs)(d.Fragment,{children:[e&&(0,d.jsx)(rB,{conversations:ed,currentConversationId:i,onSelectConversation:eT,onNewConversation:eS,onDeleteConversation:eC,isOpen:em,onClose:()=>eg(!1)}),(0,d.jsxs)("div",{className:"splash-page",children:[e&&(0,d.jsx)("button",{className:"conversations-btn",onClick:()=>eg(!0),title:"Conversations",children:"≡"}),(0,d.jsxs)("div",{className:"top-right-actions",children:[(0,d.jsxs)("button",{className:"header-action-btn new-conversation-btn",onClick:eS,title:"Start new conversation",children:[(0,d.jsx)("span",{className:"header-btn-icon",children:"✦"}),(0,d.jsx)("span",{className:"header-btn-text",children:"New Chat"})]}),e&&"free"===ew&&(0,d.jsxs)("button",{className:"header-action-btn upgrade-btn",onClick:()=>en(!0),title:"Upgrade to Pro",children:[(0,d.jsx)("span",{className:"header-btn-icon",children:"◈"}),(0,d.jsx)("span",{className:"header-btn-text",children:"Upgrade"})]}),e&&"pro"===ew&&(0,d.jsxs)("div",{className:"account-tier-badge pro-badge",children:[(0,d.jsx)("span",{className:"tier-icon",children:"◆"}),(0,d.jsx)("span",{className:"tier-text",children:"Pro Account"})]}),e?(0,d.jsxs)("button",{className:"header-action-btn account-btn",onClick:()=>ef(!0),title:"Account settings",children:[(0,d.jsx)("span",{className:"header-btn-icon",children:"◉"}),(0,d.jsx)("span",{className:"header-btn-text",children:e.email?.split("@")[0]||"Account"})]}):(0,d.jsx)("div",{className:"header-guest-indicator",children:(0,d.jsx)("span",{children:"◎ Guest Mode"})})]}),e&&"free"===ew&&(0,d.jsxs)("div",{className:"account-tier-badge-fixed",children:[(0,d.jsx)("span",{className:"tier-icon",children:"◎"}),(0,d.jsx)("span",{className:"tier-text",children:"Free Account"})]}),(0,d.jsxs)("div",{className:"chat-interface",children:[(0,d.jsx)("div",{className:"chat-header",children:(0,d.jsxs)("div",{className:"header-left",children:[(0,d.jsx)("h1",{className:"chat-title",children:"Omi AI"}),(0,d.jsxs)("div",{className:"selected-model",children:[(0,d.jsx)("span",{className:"model-label",children:"Active Model:"}),(0,d.jsx)("span",{className:"model-name",children:p}),(0,d.jsx)("button",{className:"model-change-btn",onClick:()=>g(!0),title:"Change AI model",children:"⚙️"})]})]})}),(0,d.jsx)("div",{className:"feature-buttons-horizontal",children:eN.map((e,t)=>{let i=x===e.name,r="Image Gen"===e.name,a="Video Gen"===e.name,s="Compare"===e.name||a;return(0,d.jsxs)("button",{className:`feature-button-horizontal ${i?"selected":"unselected"} ${s?"pro":""}`,onClick:e.onClick,onMouseEnter:()=>{r&&ei(!0),a&&ea(!0)},onMouseLeave:()=>{r&&ei(!1),a&&ea(!1)},style:{animationDelay:`${.1*t}s`},children:[(0,d.jsxs)("span",{className:i?"feature-button-selected-text":"feature-button-static-text",children:[e.icon," ",e.name,s&&(0,d.jsx)("span",{className:"pro-badge-inline",children:"PRO"})]}),r?(0,d.jsx)(rZ,{isVisible:et}):a?(0,d.jsx)(rK,{isVisible:er}):(0,d.jsx)("div",{className:"feature-button-tooltip",children:e.description})]},e.name)})}),(a.length>0||j)&&(0,d.jsxs)("div",{className:`chat-container ${j?"compare-mode":""} ${O?"fullscreen":""}`,children:[(0,d.jsxs)("div",{className:"chat-panel primary-panel",children:[(0,d.jsxs)("div",{className:"panel-header",children:[(0,d.jsx)("h3",{children:j?(0,d.jsxs)("select",{className:"model-selector",value:p,onChange:e=>f(e.target.value),children:[(0,d.jsx)("option",{value:"Gemini Pro",children:"Gemini Pro"}),(0,d.jsx)("option",{value:"Claude",children:"Claude"}),(0,d.jsx)("option",{value:"GPT-4",children:"GPT-4"}),(0,d.jsx)("option",{value:"Llama",children:"Llama"})]}):p||"Primary AI"}),(0,d.jsx)("button",{className:"fullscreen-toggle",onClick:()=>z(!O),title:O?"Exit Fullscreen (ESC)":"Fullscreen",children:O?"⤓":"⤢"})]}),(0,d.jsx)("div",{className:"chat-messages",children:0===a.length&&j?(0,d.jsx)("div",{className:"empty-chat-message",children:(0,d.jsx)("p",{children:"Compare mode activated. Start chatting to see responses from both models side-by-side."})}):(0,d.jsxs)(d.Fragment,{children:[a.map(e=>(0,d.jsx)("div",{className:`message ${e.role}`,children:(0,d.jsx)("div",{className:"message-content",children:"assistant"===e.role?(0,d.jsx)(v,{text:at(e),delay:.2}):at(e)})},e.id)),l&&(0,d.jsx)("div",{className:"message assistant loading",children:(0,d.jsx)("div",{className:"message-content",children:(0,d.jsxs)("div",{className:"typing-indicator",children:[(0,d.jsx)("span",{}),(0,d.jsx)("span",{}),(0,d.jsx)("span",{})]})})})]})})]}),j&&(0,d.jsxs)("div",{className:"chat-panel secondary-panel",children:[(0,d.jsx)("div",{className:"panel-header",children:(0,d.jsx)("h3",{children:N||(0,d.jsxs)("select",{className:"model-selector",value:N||"",onChange:e=>E(e.target.value),children:[(0,d.jsx)("option",{value:"",children:"Select Model"}),(0,d.jsx)("option",{value:"Claude",children:"Claude"}),(0,d.jsx)("option",{value:"GPT-4",children:"GPT-4"}),(0,d.jsx)("option",{value:"Gemini Pro",children:"Gemini Pro"}),(0,d.jsx)("option",{value:"Llama",children:"Llama"})]})})}),(0,d.jsx)("div",{className:"chat-messages",children:0===_.length?(0,d.jsx)("div",{className:"empty-chat-message",children:(0,d.jsx)("p",{children:"Select a model above to compare responses."})}):(0,d.jsx)(d.Fragment,{children:_.map((e,t)=>(0,d.jsxs)("div",{className:`message ${e.role}`,children:[(0,d.jsx)("div",{className:"message-content",children:"assistant"===e.role?(0,d.jsx)(v,{text:e.content,delay:.2}):e.content}),(0,d.jsx)("div",{className:"message-time",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},t))})})]})]}),(0,d.jsxs)("form",{className:"chat-form",onSubmit:eP,children:[y.length>0&&(0,d.jsx)("div",{className:"attached-files",children:y.map((e,t)=>(0,d.jsxs)("div",{className:"attached-file",children:[(0,d.jsx)("span",{className:"file-icon",children:e.type.startsWith("image/")?"🖼️":e.type.startsWith("video/")?"🎥":e.type.includes("pdf")?"📄":"📎"}),(0,d.jsx)("span",{className:"file-name",children:e.name}),(0,d.jsx)("button",{type:"button",className:"remove-file",onClick:()=>{w(e=>e.filter((e,i)=>i!==t))},title:"Remove file",children:"×"})]},t))}),G&&(0,d.jsxs)("div",{className:"instant-gen-indicator",children:[(0,d.jsx)("span",{className:"instant-gen-icon",children:"⚡"}),(0,d.jsx)("span",{className:"instant-gen-text",children:"Image Gen Mode Active - Describe the image you want to create"})]}),W&&(0,d.jsxs)("div",{className:"video-gen-indicator",children:[(0,d.jsx)("span",{className:"video-gen-icon",children:"🎬"}),(0,d.jsx)("span",{className:"video-gen-text",children:"Video Gen Mode Active - Describe the video scene you want to create"})]}),(0,d.jsxs)("div",{className:`chat-input-container ${k?"synthesize-active":""} ${G?"instant-gen-active":""} ${W?"video-gen-active":""}`,children:[(0,d.jsx)("input",{type:"file",id:"file-input",className:"file-input",onChange:e=>{let t=e.target.files;if(t){let e=Array.from(t);w(t=>[...t,...e])}e.target.value=""},multiple:!0,accept:"image/*,video/*,.pdf,.doc,.docx,.txt",style:{display:"none"}}),!G&&(0,d.jsx)("button",{type:"button",className:"attach-file-btn",onClick:()=>document.getElementById("file-input")?.click(),title:"Attach files",disabled:l,children:"📎"}),(0,d.jsx)("input",{type:"text",value:n,onChange:e=>{o(e.target.value)},placeholder:W?"🎬 Describe your video scene (e.g., 'a woman walking through Tokyo at night')...":G?"⚡ Describe your image (e.g., 'A sunset over mountains')...":k?"Type your message in Synthesize mode...":"Type your message...",className:"chat-input",autoFocus:!0,disabled:l||X||K}),(0,d.jsx)("button",{type:"submit",className:"chat-submit",disabled:!n.trim()||l||X||K,children:l?(0,d.jsx)("div",{className:"loading-spinner",children:(0,d.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",opacity:"0.3"}),(0,d.jsx)("path",{d:"M12 2A10 10 0 0 1 22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}):(0,d.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"M2 12L22 2L13 21L11 13L2 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),k&&(0,d.jsx)("div",{className:"electric-border-overlay",children:(0,d.jsxs)("svg",{className:"electric-border-svg",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,d.jsx)("defs",{children:(0,d.jsxs)("filter",{id:"electric-glow",children:[(0,d.jsx)("feTurbulence",{baseFrequency:"0.02",numOctaves:"3",result:"noise",seed:"1",children:(0,d.jsx)("animate",{attributeName:"seed",values:"1;5;1",dur:"3s",repeatCount:"indefinite"})}),(0,d.jsx)("feDisplacementMap",{in:"SourceGraphic",in2:"noise",scale:"2"}),(0,d.jsx)("feGaussianBlur",{stdDeviation:"0.5"}),(0,d.jsx)("feColorMatrix",{values:"0 0 0 0 0.9 0 0 0 0 0.9 0 0 0 0 0.9 0 0 0 1 0"})]})}),(0,d.jsx)("rect",{x:"1",y:"1",width:"98",height:"98",fill:"none",stroke:"#e5e5e5",strokeWidth:"0.5",filter:"url(#electric-glow)",rx:"3",ry:"3",children:(0,d.jsx)("animate",{attributeName:"stroke-opacity",values:"0.3;1;0.3",dur:"2s",repeatCount:"indefinite"})}),(0,d.jsx)("rect",{x:"0.5",y:"0.5",width:"99",height:"99",fill:"none",stroke:"#e5e5e5",strokeWidth:"0.3",rx:"3",ry:"3",opacity:"0.6",children:(0,d.jsx)("animate",{attributeName:"stroke-dasharray",values:"0,400;200,200;400,0;0,400",dur:"4s",repeatCount:"indefinite"})})]})})]})]}),G&&(0,d.jsx)("div",{className:"generated-image-container",ref:Y,children:X?(0,d.jsxs)("div",{className:"generating-indicator",children:[(0,d.jsx)("div",{className:"generating-spinner",children:(0,d.jsx)("div",{className:"metallic-paint-loader",children:(0,d.jsx)(rj,{})})}),(0,d.jsx)("p",{className:"generating-text",children:"Generating your image..."})]}):B?(0,d.jsxs)("div",{className:"generated-image-wrapper",children:[(0,d.jsxs)("div",{className:"generated-image-header",children:[(0,d.jsx)("h3",{children:"⚡ Generated Image"}),(0,d.jsxs)("div",{className:"generated-image-actions",children:[(0,d.jsx)("a",{href:"https://percify.io",target:"_blank",rel:"noopener noreferrer",className:"image-action-btn percify-btn",title:"Edit with Percify",children:"✨ Percify It"}),(0,d.jsx)("a",{href:B,target:"_blank",rel:"noopener noreferrer",className:"image-action-btn",title:"Open in new tab",children:"🔗 Open"}),(0,d.jsx)("button",{className:"image-action-btn",onClick:()=>q(null),title:"Clear image",children:"✕ Clear"})]})]}),(0,d.jsx)("img",{src:B,alt:"Generated",className:"generated-image"})]}):(0,d.jsxs)("div",{className:"instant-gen-placeholder",children:[(0,d.jsx)("div",{className:"placeholder-icon",children:"⚡"}),(0,d.jsx)("p",{className:"placeholder-text",children:"Enter a prompt above to generate an image"}),(0,d.jsx)("p",{className:"placeholder-subtext",children:"Describe what you want to see and press enter"})]})}),W&&(0,d.jsx)("div",{className:"generated-video-container",ref:ee,children:K?(0,d.jsxs)("div",{className:"generating-indicator",children:[(0,d.jsx)("div",{className:"generating-spinner",children:(0,d.jsx)("div",{className:"metallic-paint-loader",children:(0,d.jsx)(rj,{})})}),(0,d.jsx)("p",{className:"generating-text",children:"Generating your video... This may take 1-2 minutes"})]}):Q?(0,d.jsxs)("div",{className:"generated-video-wrapper",children:[(0,d.jsxs)("div",{className:"generated-video-header",children:[(0,d.jsx)("h3",{children:"🎬 Generated Video"}),(0,d.jsxs)("div",{className:"generated-video-actions",children:[(0,d.jsx)("a",{href:Q,target:"_blank",rel:"noopener noreferrer",className:"video-action-btn",title:"Open in new tab",children:"🔗 Open"}),(0,d.jsx)("a",{href:Q,download:"generated-video.mp4",className:"video-action-btn",title:"Download video",children:"⬇ Download"}),(0,d.jsx)("button",{className:"video-action-btn",onClick:()=>Z(null),title:"Clear video",children:"✕ Clear"})]})]}),(0,d.jsx)("video",{src:Q,controls:!0,className:"generated-video",autoPlay:!0,loop:!0})]}):(0,d.jsxs)("div",{className:"video-gen-placeholder",children:[(0,d.jsx)("div",{className:"placeholder-icon",children:"🎬"}),(0,d.jsx)("p",{className:"placeholder-text",children:"Enter a prompt above to generate a video"}),(0,d.jsx)("p",{className:"placeholder-subtext",children:"Describe the scene you want to create and press enter"})]})})]}),h&&(0,d.jsx)("div",{className:"ai-models-overlay",onClick:()=>g(!1),children:(0,d.jsxs)("div",{id:"ai-models-section",className:`ai-models-section ${h?"show":""}`,onClick:e=>e.stopPropagation(),children:[(0,d.jsx)("h2",{className:"ai-models-title",children:"Popular AI Models"}),(0,d.jsx)("div",{className:"ai-models-container",children:(0,d.jsx)(ej,{items:eI,width:"100%",maxHeight:"400px",itemMinHeight:120,isTilted:!0,tiltDirection:"left",autoplay:!0,autoplaySpeed:1,autoplayDirection:"up",pauseOnHover:!0})})]})})]}),C&&(0,d.jsx)(rM,{items:void 0,ease:"power2.out",damping:.75,fadeOut:.5,onClose:()=>P(!1),selectedPersona:R,onPersonaSelect:e=>{console.log("Persona selected in SplashPage:",e.title),R===e.title?(I(null),console.log("Persona deselected:",e.title)):(I(e.title),console.log("Persona selected:",e.title))}}),U&&(0,d.jsxs)("div",{style:{position:"fixed",inset:0,zIndex:9e3,background:"#000"},children:[(0,d.jsx)("button",{onClick:()=>{F(!1),b(null)},style:{position:"absolute",top:"2rem",right:"2rem",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"50%",width:"48px",height:"48px",color:"white",fontSize:"1.5rem",cursor:"pointer",zIndex:9001},children:"✕"}),(0,d.jsx)(rV,{bend:3,textColor:"#ffffff",borderRadius:.05,scrollEase:.02,items:[{link:"#",text:"Currently Trending",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/ChatGPT_logo.svg/1024px-ChatGPT_logo.svg.png"},{link:"#",text:"AI News",image:"https://www.gstatic.com/lamda/images/gemini_sparkle_v002_d4735304ff6292a690345.svg"},{link:"#",text:"LLM Updates",image:"https://companieslogo.com/img/orig/MSFT-a203b22d.png"},{link:"#",text:"AI Content",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Google_Gemini_logo.svg/1024px-Google_Gemini_logo.svg.png"},{link:"#",text:"Grok AI",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/57/X_logo_2023_%28white%29.png/1200px-X_logo_2023_%28white%29.png"},{link:"#",text:"Claude AI",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/13/ChatGPT-Logo.png/1200px-ChatGPT-Logo.png"},{link:"#",text:"Midjourney",image:"https://seeklogo.com/images/M/midjourney-logo-156382BA01-seeklogo.com.png"},{link:"#",text:"Perplexity AI",image:"https://uxwing.com/wp-content/themes/uxwing/download/brands-and-social-media/perplexity-ai-icon.png"}]})]}),(0,d.jsx)(L,{items:eR}),(0,d.jsx)(rv,{isVisible:T,onClose:()=>S(!1)}),(0,d.jsx)(r9,{isOpen:es,onClose:()=>en(!1),limitType:eo,currentUsage:ec.current,usageLimit:ec.limit,resetAt:ec.resetAt}),(0,d.jsx)(r8,{isOpen:ep,onClose:()=>ef(!1),user:e}),(0,d.jsx)(rH,{isOpen:ev,userId:e?.id||"",onClose:()=>ex(!1)}),(0,d.jsx)(rQ,{isOpen:eb,onClose:()=>ey(!1)}),(0,d.jsx)(rq,{})]})};function ar(){return(0,d.jsx)(ai,{})}e.s(["default",()=>ar],99861)}]);