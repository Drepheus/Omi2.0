module.exports=[647,a=>{"use strict";let b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;var E,F,G,H,I,J,K,L,M,N,O,P,Q=a.i(30703),R=a.i(23155),S=a.i(54445),T=a.i(41460);a.s([],13383),a.i(13383);let U=globalThis,V="10.25.0";function W(){return X(U),U}function X(a){let b=a.__SENTRY__=a.__SENTRY__||{};return b.version=b.version||V,b[V]=b[V]||{}}function Y(a,b,c=U){let d=c.__SENTRY__=c.__SENTRY__||{},e=d[V]=d[V]||{};return e[a]||(e[a]=b())}let Z="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,$=Object.prototype.toString;function _(a){switch($.call(a)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return aj(a,Error)}}function aa(a,b){return $.call(a)===`[object ${b}]`}function ab(a){return aa(a,"ErrorEvent")}function ac(a){return aa(a,"DOMError")}function ad(a){return aa(a,"String")}function ae(a){return"object"==typeof a&&null!==a&&"__sentry_template_string__"in a&&"__sentry_template_values__"in a}function af(a){return null===a||ae(a)||"object"!=typeof a&&"function"!=typeof a}function ag(a){return aa(a,"Object")}function ah(a){return"undefined"!=typeof Event&&aj(a,Event)}function ai(a){return!!(a?.then&&"function"==typeof a.then)}function aj(a,b){try{return a instanceof b}catch{return!1}}function ak(a){return!!("object"==typeof a&&null!==a&&(a.__isVue||a._isVue))}function al(a){return"undefined"!=typeof Request&&aj(a,Request)}function am(a,b={}){if(!a)return"<unknown>";try{let c,d=a,e=[],f=0,g=0,h=Array.isArray(b)?b:b.keyAttrs,i=!Array.isArray(b)&&b.maxStringLength||80;for(;d&&f++<5&&(c=function(a,b){let c=[];if(!a?.tagName)return"";if(U.HTMLElement&&a instanceof HTMLElement&&a.dataset){if(a.dataset.sentryComponent)return a.dataset.sentryComponent;if(a.dataset.sentryElement)return a.dataset.sentryElement}c.push(a.tagName.toLowerCase());let d=b?.length?b.filter(b=>a.getAttribute(b)).map(b=>[b,a.getAttribute(b)]):null;if(d?.length)d.forEach(a=>{c.push(`[${a[0]}="${a[1]}"]`)});else{a.id&&c.push(`#${a.id}`);let b=a.className;if(b&&ad(b))for(let a of b.split(/\s+/))c.push(`.${a}`)}for(let b of["aria-label","type","name","title","alt"]){let d=a.getAttribute(b);d&&c.push(`[${b}="${d}"]`)}return c.join("")}(d,h),"html"!==c&&(!(f>1)||!(g+3*e.length+c.length>=i)));)e.push(c),g+=c.length,d=d.parentNode;return e.reverse().join(" > ")}catch{return"<unknown>"}}function an(){try{return U.document.location.href}catch{return""}}function ao(a){if(!U.HTMLElement)return null;let b=a;for(let a=0;a<5&&b;a++){if(b instanceof HTMLElement){if(b.dataset.sentryComponent)return b.dataset.sentryComponent;if(b.dataset.sentryElement)return b.dataset.sentryElement}b=b.parentNode}return null}let ap=["debug","info","warn","error","log","assert","trace"],aq={};function ar(a){if(!("console"in U))return a();let b=U.console,c={},d=Object.keys(aq);d.forEach(a=>{let d=aq[a];c[a]=b[a],b[a]=d});try{return a()}finally{d.forEach(a=>{b[a]=c[a]})}}function as(){return au().enabled}function at(a,...b){Z&&as()&&ar(()=>{U.console[a](`Sentry Logger [${a}]:`,...b)})}function au(){return Z?Y("loggerSettings",()=>({enabled:!1})):{enabled:!1}}let av={enable:function(){au().enabled=!0},disable:function(){au().enabled=!1},isEnabled:as,log:function(...a){at("log",...a)},warn:function(...a){at("warn",...a)},error:function(...a){at("error",...a)}};function aw(a,b,c){if(!(b in a))return;let d=a[b];if("function"!=typeof d)return;let e=c(d);"function"==typeof e&&ay(e,d);try{a[b]=e}catch{Z&&av.log(`Failed to replace method "${b}" in object`,a)}}function ax(a,b,c){try{Object.defineProperty(a,b,{value:c,writable:!0,configurable:!0})}catch{Z&&av.log(`Failed to add non-enumerable property "${b}" to object`,a)}}function ay(a,b){try{let c=b.prototype||{};a.prototype=b.prototype=c,ax(a,"__sentry_original__",b)}catch{}}function az(a){return a.__sentry_original__}function aA(a){if(_(a))return{message:a.message,name:a.name,stack:a.stack,...aC(a)};if(!ah(a))return a;{let b={type:a.type,target:aB(a.target),currentTarget:aB(a.currentTarget),...aC(a)};return"undefined"!=typeof CustomEvent&&aj(a,CustomEvent)&&(b.detail=a.detail),b}}function aB(a){try{return"undefined"!=typeof Element&&aj(a,Element)?am(a):Object.prototype.toString.call(a)}catch{return"<unknown>"}}function aC(a){if("object"!=typeof a||null===a)return{};{let b={};for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b}}function aD(a,b=0){return"string"!=typeof a||0===b||a.length<=b?a:`${a.slice(0,b)}...`}function aE(a,b){let c=a,d=c.length;if(d<=150)return c;b>d&&(b=d);let e=Math.max(b-60,0);e<5&&(e=0);let f=Math.min(e+140,d);return f>d-5&&(f=d),f===d&&(e=Math.max(f-140,0)),c=c.slice(e,f),e>0&&(c=`'{snip} ${c}`),f<d&&(c+=" {snip}"),c}function aF(a,b){if(!Array.isArray(a))return"";let c=[];for(let b=0;b<a.length;b++){let d=a[b];try{ak(d)?c.push("[VueViewModel]"):c.push(String(d))}catch{c.push("[value cannot be serialized]")}}return c.join(b)}function aG(a,b,c=!1){return!!ad(a)&&(aa(b,"RegExp")?b.test(a):!!ad(b)&&(c?a===b:a.includes(b)))}function aH(a,b=[],c=!1){return b.some(b=>aG(a,b,c))}function aI(a=U.crypto||U.msCrypto){try{if(a?.randomUUID)return a.randomUUID().replace(/-/g,"")}catch{}return b||(b="10000000100040008000100000000000"),b.replace(/[018]/g,a=>(a^(15&16*Math.random())>>a/4).toString(16))}function aJ(a){return a.exception?.values?.[0]}function aK(a){let{message:b,event_id:c}=a;if(b)return b;let d=aJ(a);return d?d.type&&d.value?`${d.type}: ${d.value}`:d.type||d.value||c||"<unknown>":c||"<unknown>"}function aL(a,b,c){let d=a.exception=a.exception||{},e=d.values=d.values||[],f=e[0]=e[0]||{};f.value||(f.value=b||""),f.type||(f.type=c||"Error")}function aM(a,b){let c=aJ(a);if(!c)return;let d=c.mechanism;if(c.mechanism={type:"generic",handled:!0,...d,...b},b&&"data"in b){let a={...d?.data,...b.data};c.mechanism.data=a}}function aN(a){if(function(a){try{return a.__sentry_captured__}catch{}}(a))return!0;try{ax(a,"__sentry_captured__",!0)}catch{}return!1}function aO(){return Date.now()/1e3}function aP(){return(c??(c=function(){let{performance:a}=U;if(!a?.now||!a.timeOrigin)return aO;let b=a.timeOrigin;return()=>(b+a.now())/1e3}()))()}function aQ(){return d||(d=function(){let{performance:a}=U;if(!a?.now)return[void 0,"none"];let b=a.now(),c=Date.now(),d=a.timeOrigin?Math.abs(a.timeOrigin+b-c):36e5,e=a.timing?.navigationStart,f="number"==typeof e?Math.abs(e+b-c):36e5;if(d<36e5||f<36e5)if(d<=f)return[a.timeOrigin,"timeOrigin"];else return[e,"navigationStart"];return[c,"dateNow"]}()),d[0]}function aR(a,b={}){if(b.user&&(!a.ipAddress&&b.user.ip_address&&(a.ipAddress=b.user.ip_address),a.did||b.did||(a.did=b.user.id||b.user.email||b.user.username)),a.timestamp=b.timestamp||aP(),b.abnormal_mechanism&&(a.abnormal_mechanism=b.abnormal_mechanism),b.ignoreDuration&&(a.ignoreDuration=b.ignoreDuration),b.sid&&(a.sid=32===b.sid.length?b.sid:aI()),void 0!==b.init&&(a.init=b.init),!a.did&&b.did&&(a.did=`${b.did}`),"number"==typeof b.started&&(a.started=b.started),a.ignoreDuration)a.duration=void 0;else if("number"==typeof b.duration)a.duration=b.duration;else{let b=a.timestamp-a.started;a.duration=b>=0?b:0}b.release&&(a.release=b.release),b.environment&&(a.environment=b.environment),!a.ipAddress&&b.ipAddress&&(a.ipAddress=b.ipAddress),!a.userAgent&&b.userAgent&&(a.userAgent=b.userAgent),"number"==typeof b.errors&&(a.errors=b.errors),b.status&&(a.status=b.status)}function aS(a,b,c=2){if(!b||"object"!=typeof b||c<=0)return b;if(a&&0===Object.keys(b).length)return a;let d={...a};for(let a in b)Object.prototype.hasOwnProperty.call(b,a)&&(d[a]=aS(d[a],b[a],c-1));return d}function aT(){return aI().substring(16)}let aU="_sentrySpan";function aV(a,b){b?ax(a,aU,b):delete a[aU]}class aW{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:aI(),sampleRand:Math.random()}}clone(){let a=new aW;return a._breadcrumbs=[...this._breadcrumbs],a._tags={...this._tags},a._extra={...this._extra},a._contexts={...this._contexts},this._contexts.flags&&(a._contexts.flags={values:[...this._contexts.flags.values]}),a._user=this._user,a._level=this._level,a._session=this._session,a._transactionName=this._transactionName,a._fingerprint=this._fingerprint,a._eventProcessors=[...this._eventProcessors],a._attachments=[...this._attachments],a._sdkProcessingMetadata={...this._sdkProcessingMetadata},a._propagationContext={...this._propagationContext},a._client=this._client,a._lastEventId=this._lastEventId,aV(a,this[aU]),a}setClient(a){this._client=a}setLastEventId(a){this._lastEventId=a}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(a){this._scopeListeners.push(a)}addEventProcessor(a){return this._eventProcessors.push(a),this}setUser(a){return this._user=a||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&aR(this._session,{user:a}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(a){return this._tags={...this._tags,...a},this._notifyScopeListeners(),this}setTag(a,b){return this._tags={...this._tags,[a]:b},this._notifyScopeListeners(),this}setExtras(a){return this._extra={...this._extra,...a},this._notifyScopeListeners(),this}setExtra(a,b){return this._extra={...this._extra,[a]:b},this._notifyScopeListeners(),this}setFingerprint(a){return this._fingerprint=a,this._notifyScopeListeners(),this}setLevel(a){return this._level=a,this._notifyScopeListeners(),this}setTransactionName(a){return this._transactionName=a,this._notifyScopeListeners(),this}setContext(a,b){return null===b?delete this._contexts[a]:this._contexts[a]=b,this._notifyScopeListeners(),this}setSession(a){return a?this._session=a:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(a){if(!a)return this;let b="function"==typeof a?a(this):a,{tags:c,extra:d,user:e,contexts:f,level:g,fingerprint:h=[],propagationContext:i}=(b instanceof aW?b.getScopeData():ag(b)?a:void 0)||{};return this._tags={...this._tags,...c},this._extra={...this._extra,...d},this._contexts={...this._contexts,...f},e&&Object.keys(e).length&&(this._user=e),g&&(this._level=g),h.length&&(this._fingerprint=h),i&&(this._propagationContext=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,aV(this,void 0),this._attachments=[],this.setPropagationContext({traceId:aI(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(a,b){let c="number"==typeof b?b:100;if(c<=0)return this;let d={timestamp:aO(),...a,message:a.message?aD(a.message,2048):a.message};return this._breadcrumbs.push(d),this._breadcrumbs.length>c&&(this._breadcrumbs=this._breadcrumbs.slice(-c),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(a){return this._attachments.push(a),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:this[aU]}}setSDKProcessingMetadata(a){return this._sdkProcessingMetadata=aS(this._sdkProcessingMetadata,a,2),this}setPropagationContext(a){return this._propagationContext=a,this}getPropagationContext(){return this._propagationContext}captureException(a,b){let c=b?.event_id||aI();if(!this._client)return Z&&av.warn("No client configured on scope - will not capture exception!"),c;let d=Error("Sentry syntheticException");return this._client.captureException(a,{originalException:a,syntheticException:d,...b,event_id:c},this),c}captureMessage(a,b,c){let d=c?.event_id||aI();if(!this._client)return Z&&av.warn("No client configured on scope - will not capture message!"),d;let e=Error(a);return this._client.captureMessage(a,b,{originalException:a,syntheticException:e,...c,event_id:d},this),d}captureEvent(a,b){let c=b?.event_id||aI();return this._client?this._client.captureEvent(a,{...b,event_id:c},this):Z&&av.warn("No client configured on scope - will not capture event!"),c}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(a=>{a(this)}),this._notifyingListeners=!1)}}class aX{constructor(a,b){let c,d;c=a||new aW,d=b||new aW,this._stack=[{scope:c}],this._isolationScope=d}withScope(a){let b,c=this._pushScope();try{b=a(c)}catch(a){throw this._popScope(),a}return ai(b)?b.then(a=>(this._popScope(),a),a=>{throw this._popScope(),a}):(this._popScope(),b)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let a=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:a}),a}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function aY(){let a=X(W());return a.stack=a.stack||new aX(Y("defaultCurrentScope",()=>new aW),Y("defaultIsolationScope",()=>new aW))}function aZ(a){return aY().withScope(a)}function a$(a,b){let c=aY();return c.withScope(()=>(c.getStackTop().scope=a,b(a)))}function a_(a){return aY().withScope(()=>a(aY().getIsolationScope()))}function a0(a){let b=X(a);return b.acs?b.acs:{withIsolationScope:a_,withScope:aZ,withSetScope:a$,withSetIsolationScope:(a,b)=>a_(b),getCurrentScope:()=>aY().getScope(),getIsolationScope:()=>aY().getIsolationScope()}}function a1(){return a0(W()).getCurrentScope()}function a2(){return a0(W()).getIsolationScope()}function a3(){return Y("globalScope",()=>new aW)}function a4(...a){let b=a0(W());if(2===a.length){let[c,d]=a;return c?b.withSetScope(c,d):b.withScope(d)}return b.withScope(a[0])}function a5(...a){let b=a0(W());if(2===a.length){let[c,d]=a;return c?b.withSetIsolationScope(c,d):b.withIsolationScope(d)}return b.withIsolationScope(a[0])}function a6(){return a1().getClient()}function a7(a){let{traceId:b,parentSpanId:c,propagationSpanId:d}=a.getPropagationContext(),e={trace_id:b,span_id:d||aT()};return c&&(e.parent_span_id=c),e}function a8(a,b={},c=a1()){let{message:d,name:e,email:f,url:g,source:h,associatedEventId:i,tags:j}=a,k={contexts:{feedback:{contact_email:f,name:e,message:d,url:g,source:h,associated_event_id:i}},type:"feedback",level:"info",tags:j},l=c?.getClient()||a6();return l&&l.emit("beforeSendFeedback",k,b),c.captureEvent(k,b)}let a9=[];function ba(a,b){for(let c of b)c?.afterAllSetup&&c.afterAllSetup(a)}function bb(a,b,c){if(c[b.name]){Z&&av.log(`Integration skipped because it was already installed: ${b.name}`);return}if(c[b.name]=b,-1===a9.indexOf(b.name)&&"function"==typeof b.setupOnce&&(b.setupOnce(),a9.push(b.name)),b.setup&&"function"==typeof b.setup&&b.setup(a),"function"==typeof b.preprocessEvent){let c=b.preprocessEvent.bind(b);a.on("preprocessEvent",(b,d)=>c(b,d,a))}if("function"==typeof b.processEvent){let c=b.processEvent.bind(b),d=Object.assign((b,d)=>c(b,d,a),{id:b.name});a.addEventProcessor(d)}Z&&av.log(`Integration installed: ${b.name}`)}function bc(a){let b=a6();if(!b){Z&&av.warn(`Cannot add integration "${a.name}" because no SDK Client is available.`);return}b.addIntegration(a)}let bd=U.document,be=U.navigator,bf="Report a Bug",bg="Cancel",bh="Send Bug Report",bi="Confirm",bj="Report a Bug",bk="your.email@example.org",bl="Email",bm="What's the bug? What did you expect?",bn="Description",bo="Your Name",bp="Name",bq="Thank you for your report!",br="(required)",bs="Add a screenshot",bt="Remove screenshot",bu="Highlight",bv="Hide",bw="Remove",bx=(a,b={includeReplay:!0})=>{if(!a.message)throw Error("Unable to submit feedback with empty message");let c=a6();if(!c)throw Error("No client setup, cannot send feedback.");a.tags&&Object.keys(a.tags).length&&a1().setTags(a.tags);let d=a8({source:"api",url:an(),...a},b);return new Promise((a,b)=>{let e=setTimeout(()=>b("Unable to determine if Feedback was correctly sent."),3e4),f=c.on("afterSendEvent",(c,g)=>{if(c.event_id===d)return(clearTimeout(e),f(),g?.statusCode&&g.statusCode>=200&&g.statusCode<300)?a(d):g?.statusCode===403?b("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):b("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},by="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function bz(a,b){return{...a,...b,tags:{...a.tags,...b.tags},onFormOpen:()=>{b.onFormOpen?.(),a.onFormOpen?.()},onFormClose:()=>{b.onFormClose?.(),a.onFormClose?.()},onSubmitSuccess:(c,d)=>{b.onSubmitSuccess?.(c,d),a.onSubmitSuccess?.(c,d)},onSubmitError:c=>{b.onSubmitError?.(c),a.onSubmitError?.(c)},onFormSubmitted:()=>{b.onFormSubmitted?.(),a.onFormSubmitted?.()},themeDark:{...a.themeDark,...b.themeDark},themeLight:{...a.themeLight,...b.themeLight}}}function bA(a,b){return Object.entries(b).forEach(([b,c])=>{a.setAttributeNS(null,b,c)}),a}let bB="rgba(88, 74, 192, 1)",bC={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:bB,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},bD={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:bB,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function bE(a){return`
  --foreground: ${a.foreground};
  --background: ${a.background};
  --accent-foreground: ${a.accentForeground};
  --accent-background: ${a.accentBackground};
  --success-color: ${a.successColor};
  --error-color: ${a.errorColor};
  --border: ${a.border};
  --box-shadow: ${a.boxShadow};
  --outline: ${a.outline};
  --interactive-filter: ${a.interactiveFilter};
  `}let bF=({lazyLoadIntegration:a,getModalIntegration:b,getScreenshotIntegration:c})=>({id:d="sentry-feedback",autoInject:e=!0,showBranding:f=!0,isEmailRequired:g=!1,isNameRequired:h=!1,showEmail:i=!0,showName:j=!0,enableScreenshot:k=!0,useSentryUser:l={email:"email",name:"username"},tags:m,styleNonce:n,scriptNonce:o,colorScheme:p="system",themeLight:q={},themeDark:r={},addScreenshotButtonLabel:s=bs,cancelButtonLabel:t=bg,confirmButtonLabel:u=bi,emailLabel:v=bl,emailPlaceholder:w=bk,formTitle:x=bj,isRequiredLabel:y=br,messageLabel:z=bn,messagePlaceholder:A=bm,nameLabel:B=bp,namePlaceholder:C=bo,removeScreenshotButtonLabel:D=bt,submitButtonLabel:E=bh,successMessageText:F=bq,triggerLabel:G=bf,triggerAriaLabel:H="",highlightToolText:I=bu,hideToolText:J=bv,removeHighlightText:K=bw,onFormOpen:L,onFormClose:M,onSubmitSuccess:N,onSubmitError:O,onFormSubmitted:P}={})=>{let Q={id:d,autoInject:e,showBranding:f,isEmailRequired:g,isNameRequired:h,showEmail:i,showName:j,enableScreenshot:k,useSentryUser:l,tags:m,styleNonce:n,scriptNonce:o,colorScheme:p,themeDark:r,themeLight:q,triggerLabel:G,triggerAriaLabel:H,cancelButtonLabel:t,submitButtonLabel:E,confirmButtonLabel:u,formTitle:x,emailLabel:v,emailPlaceholder:w,messageLabel:z,messagePlaceholder:A,nameLabel:B,namePlaceholder:C,successMessageText:F,isRequiredLabel:y,addScreenshotButtonLabel:s,removeScreenshotButtonLabel:D,highlightToolText:I,hideToolText:J,removeHighlightText:K,onFormClose:M,onFormOpen:L,onSubmitError:O,onSubmitSuccess:N,onFormSubmitted:P},R=null,S=[],T=a=>{if(!R){let b=bd.createElement("div");b.id=String(a.id),bd.body.appendChild(b),(R=b.attachShadow({mode:"open"})).appendChild(function({colorScheme:a,themeDark:b,themeLight:c,styleNonce:d}){let e=bd.createElement("style");return e.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${"system"!==a?"color-scheme: only light;":""}

  ${bE("dark"===a?{...bD,...b}:{...bC,...c})}
}

${"system"===a?`
@media (prefers-color-scheme: dark) {
  :host {
    ${bE({...bD,...b})}
  }
}`:""}
}
`,d&&e.setAttribute("nonce",d),e}(a))}return R},V=async d=>{let e,f,g=d.enableScreenshot&&!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(be.userAgent)||/Macintosh/i.test(be.userAgent)&&be.maxTouchPoints&&be.maxTouchPoints>1)&&!!isSecureContext;try{e=(b?b():await a("feedbackModalIntegration",o))(),bc(e)}catch{throw by&&av.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),Error("[Feedback] Missing feedback modal integration!")}try{let b=g?c?c():await a("feedbackScreenshotIntegration",o):void 0;b&&(f=b(),bc(f))}catch{by&&av.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}let h=e.createDialog({options:{...d,onFormClose:()=>{h?.close(),d.onFormClose?.()},onFormSubmitted:()=>{h?.close(),d.onFormSubmitted?.()}},screenshotIntegration:f,sendFeedback:bx,shadow:T(d)});return h},W=(a,b={})=>{let c=bz(Q,b),d="string"==typeof a?bd.querySelector(a):"function"==typeof a.addEventListener?a:null;if(!d)throw by&&av.error("[Feedback] Unable to attach to target element"),Error("Unable to attach to target element");let e=null,f=async()=>{e||(e=await V({...c,onFormSubmitted:()=>{e?.removeFromDom(),c.onFormSubmitted?.()}})),e.appendToDom(),e.open()};d.addEventListener("click",f);let g=()=>{S=S.filter(a=>a!==g),e?.removeFromDom(),e=null,d.removeEventListener("click",f)};return S.push(g),g};return{name:"Feedback",setupOnce(){},attachTo:W,createWidget(a={}){let b=((a={})=>{let b=bz(Q,a),c=T(b),d=function({triggerLabel:a,triggerAriaLabel:b,shadow:c,styleNonce:d}){let e,f,g,h,i,j,k,l,m=bd.createElement("button");if(m.type="button",m.className="widget__actor",m.ariaHidden="false",m.ariaLabel=b||a||bf,m.appendChild((f=bA((e=a=>U.document.createElementNS("http://www.w3.org/2000/svg",a))("svg"),{width:"20",height:"20",viewBox:"0 0 20 20",fill:"var(--actor-color, var(--foreground))"}),g=bA(e("g"),{clipPath:"url(#clip0_57_80)"}),h=bA(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"}),f.appendChild(g).appendChild(h),i=e("defs"),j=bA(e("clipPath"),{id:"clip0_57_80"}),k=bA(e("rect"),{width:"20",height:"20",fill:"white"}),j.appendChild(k),i.appendChild(j),f.appendChild(i).appendChild(j).appendChild(k),f)),a){let b=bd.createElement("span");b.appendChild(bd.createTextNode(a)),m.appendChild(b)}let n=((l=bd.createElement("style")).textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,d&&l.setAttribute("nonce",d),l);return{el:m,appendToDom(){c.appendChild(n),c.appendChild(m)},removeFromDom(){m.remove(),n.remove()},show(){m.ariaHidden="false"},hide(){m.ariaHidden="true"}}}({triggerLabel:b.triggerLabel,triggerAriaLabel:b.triggerAriaLabel,shadow:c,styleNonce:n});return W(d.el,{...b,onFormOpen(){d.hide()},onFormClose(){d.show()},onFormSubmitted(){d.show()}}),d})(bz(Q,a));return b.appendToDom(),b},createForm:async(a={})=>V(bz(Q,a)),remove(){R&&(R.parentElement?.remove(),R=null),S.forEach(a=>a()),S=[]}}};function bG(){let a=a6();return a?.getIntegrationByName("Feedback")}var bH,bI,bJ,bK,bL,bM,bN,bO={},bP=[],bQ=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,bR=Array.isArray;function bS(a,b){for(var c in b)a[c]=b[c];return a}function bT(a){var b=a.parentNode;b&&b.removeChild(a)}function bU(a,b,c){var d,e,f,g={};for(f in b)"key"==f?d=b[f]:"ref"==f?e=b[f]:g[f]=b[f];if(arguments.length>2&&(g.children=arguments.length>3?bH.call(arguments,2):c),"function"==typeof a&&null!=a.defaultProps)for(f in a.defaultProps)void 0===g[f]&&(g[f]=a.defaultProps[f]);return bV(a,g,d,e,null)}function bV(a,b,c,d,e){var f={type:a,props:b,key:c,ref:d,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==e?++bJ:e,__i:-1,__u:0};return null==e&&null!=bI.vnode&&bI.vnode(f),f}function bW(a){return a.children}function bX(a,b){this.props=a,this.context=b}function bY(a,b){if(null==b)return a.__?bY(a.__,a.__i+1):null;for(var c;b<a.__k.length;b++)if(null!=(c=a.__k[b])&&null!=c.__e)return c.__e;return"function"==typeof a.type?bY(a):null}function bZ(a){(!a.__d&&(a.__d=!0)&&bK.push(a)&&!b$.__r++||bL!==bI.debounceRendering)&&((bL=bI.debounceRendering)||bM)(b$)}function b$(){var a,b,c,d=[],e=[];for(bK.sort(bN);a=bK.shift();)a.__d&&(c=bK.length,b=function(a,b,c){var d,e=a.__v,f=e.__e,g=a.__P;if(g)return(d=bS({},e)).__v=e.__v+1,bI.vnode&&bI.vnode(d),b4(g,d,e,a.__n,void 0!==g.ownerSVGElement,32&e.__u?[f]:null,b,null==f?bY(e):f,!!(32&e.__u),c),d.__.__k[d.__i]=d,d.__d=void 0,d.__e!=f&&function a(b){var c,d;if(null!=(b=b.__)&&null!=b.__c){for(b.__e=b.__c.base=null,c=0;c<b.__k.length;c++)if(null!=(d=b.__k[c])&&null!=d.__e){b.__e=b.__c.base=d.__e;break}return a(b)}}(d),d}(a,d,e)||b,0===c||bK.length>c?(b5(d,b,e),e.length=d.length=0,b=void 0,bK.sort(bN)):b&&bI.__c&&bI.__c(b,bP));b&&b5(d,b,e),b$.__r=0}function b_(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o,p,q=d&&d.__k||bP,r=b.length;for(c.__d=i,function(a,b,c){var d,e,f,g,h,i=b.length,j=c.length,k=j,l=0;for(a.__k=[],d=0;d<i;d++)null!=(e=a.__k[d]=null==(e=b[d])||"boolean"==typeof e||"function"==typeof e?null:"string"==typeof e||"number"==typeof e||"bigint"==typeof e||e.constructor==String?bV(null,e,null,null,e):bR(e)?bV(bW,{children:e},null,null,null):void 0===e.constructor&&e.__b>0?bV(e.type,e.props,e.key,e.ref?e.ref:null,e.__v):e)?(e.__=a,e.__b=a.__b+1,h=function(a,b,c,d){var e=a.key,f=a.type,g=c-1,h=c+1,i=b[c];if(null===i||i&&e==i.key&&f===i.type)return c;if(d>+(null!=i&&0==(131072&i.__u)))for(;g>=0||h<b.length;){if(g>=0){if((i=b[g])&&0==(131072&i.__u)&&e==i.key&&f===i.type)return g;g--}if(h<b.length){if((i=b[h])&&0==(131072&i.__u)&&e==i.key&&f===i.type)return h;h++}}return -1}(e,c,g=d+l,k),e.__i=h,f=null,-1!==h&&(k--,(f=c[h])&&(f.__u|=131072)),null==f||null===f.__v?(-1==h&&l--,"function"!=typeof e.type&&(e.__u|=65536)):h!==g&&(h===g+1?l++:h>g?k>i-g?l+=h-g:l--:l=h<g&&h==g-1?h-g:0,h!==d+l&&(e.__u|=65536))):(f=c[d])&&null==f.key&&f.__e&&(f.__e==a.__d&&(a.__d=bY(f)),b7(f,f,!1),c[d]=null,k--);if(k)for(d=0;d<j;d++)null!=(f=c[d])&&0==(131072&f.__u)&&(f.__e==a.__d&&(a.__d=bY(f)),b7(f,f))}(c,b,q),i=c.__d,l=0;l<r;l++)null!=(n=c.__k[l])&&"boolean"!=typeof n&&"function"!=typeof n&&(m=-1===n.__i?bO:q[n.__i]||bO,n.__i=l,b4(a,n,m,e,f,g,h,i,j,k),o=n.__e,n.ref&&m.ref!=n.ref&&(m.ref&&b6(m.ref,null,n),k.push(n.ref,n.__c||o,n)),null==p&&null!=o&&(p=o),65536&n.__u||m.__k===n.__k?i=function a(b,c,d){var e,f;if("function"==typeof b.type){for(e=b.__k,f=0;e&&f<e.length;f++)e[f]&&(e[f].__=b,c=a(e[f],c,d));return c}b.__e!=c&&(d.insertBefore(b.__e,c||null),c=b.__e);do c=c&&c.nextSibling;while(null!=c&&8===c.nodeType)return c}(n,i,a):"function"==typeof n.type&&void 0!==n.__d?i=n.__d:o&&(i=o.nextSibling),n.__d=void 0,n.__u&=-196609);c.__d=i,c.__e=p}function b0(a,b,c){"-"===b[0]?a.setProperty(b,null==c?"":c):a[b]=null==c?"":"number"!=typeof c||bQ.test(b)?c:c+"px"}function b1(a,b,c,d,e){var f;a:if("style"===b)if("string"==typeof c)a.style.cssText=c;else{if("string"==typeof d&&(a.style.cssText=d=""),d)for(b in d)c&&b in c||b0(a.style,b,"");if(c)for(b in c)d&&c[b]===d[b]||b0(a.style,b,c[b])}else if("o"===b[0]&&"n"===b[1])f=b!==(b=b.replace(/(PointerCapture)$|Capture$/i,"$1")),b=b.toLowerCase()in a?b.toLowerCase().slice(2):b.slice(2),a.l||(a.l={}),a.l[b+f]=c,c?d?c.u=d.u:(c.u=Date.now(),a.addEventListener(b,f?b3:b2,f)):a.removeEventListener(b,f?b3:b2,f);else{if(e)b=b.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==b&&"height"!==b&&"href"!==b&&"list"!==b&&"form"!==b&&"tabIndex"!==b&&"download"!==b&&"rowSpan"!==b&&"colSpan"!==b&&"role"!==b&&b in a)try{a[b]=null==c?"":c;break a}catch(a){}"function"==typeof c||(null==c||!1===c&&"-"!==b[4]?a.removeAttribute(b):a.setAttribute(b,c))}}function b2(a){if(this.l){var b=this.l[a.type+!1];if(a.t){if(a.t<=b.u)return}else a.t=Date.now();return b(bI.event?bI.event(a):a)}}function b3(a){if(this.l)return this.l[a.type+!0](bI.event?bI.event(a):a)}function b4(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=b.type;if(void 0!==b.constructor)return null;128&c.__u&&(i=!!(32&c.__u),f=[h=b.__e=c.__e]),(k=bI.__b)&&k(b);a:if("function"==typeof z)try{if(r=b.props,s=(k=z.contextType)&&d[k.__c],t=k?s?s.props.value:k.__:d,c.__c?q=(l=b.__c=c.__c).__=l.__E:("prototype"in z&&z.prototype.render?b.__c=l=new z(r,t):(b.__c=l=new bX(r,t),l.constructor=z,l.render=b8),s&&s.sub(l),l.props=r,l.state||(l.state={}),l.context=t,l.__n=d,m=l.__d=!0,l.__h=[],l._sb=[]),null==l.__s&&(l.__s=l.state),null!=z.getDerivedStateFromProps&&(l.__s==l.state&&(l.__s=bS({},l.__s)),bS(l.__s,z.getDerivedStateFromProps(r,l.__s))),n=l.props,o=l.state,l.__v=b,m)null==z.getDerivedStateFromProps&&null!=l.componentWillMount&&l.componentWillMount(),null!=l.componentDidMount&&l.__h.push(l.componentDidMount);else{if(null==z.getDerivedStateFromProps&&r!==n&&null!=l.componentWillReceiveProps&&l.componentWillReceiveProps(r,t),!l.__e&&(null!=l.shouldComponentUpdate&&!1===l.shouldComponentUpdate(r,l.__s,t)||b.__v===c.__v)){for(b.__v!==c.__v&&(l.props=r,l.state=l.__s,l.__d=!1),b.__e=c.__e,b.__k=c.__k,b.__k.forEach(function(a){a&&(a.__=b)}),u=0;u<l._sb.length;u++)l.__h.push(l._sb[u]);l._sb=[],l.__h.length&&g.push(l);break a}null!=l.componentWillUpdate&&l.componentWillUpdate(r,l.__s,t),null!=l.componentDidUpdate&&l.__h.push(function(){l.componentDidUpdate(n,o,p)})}if(l.context=t,l.props=r,l.__P=a,l.__e=!1,v=bI.__r,w=0,"prototype"in z&&z.prototype.render){for(l.state=l.__s,l.__d=!1,v&&v(b),k=l.render(l.props,l.state,l.context),x=0;x<l._sb.length;x++)l.__h.push(l._sb[x]);l._sb=[]}else do l.__d=!1,v&&v(b),k=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++w<25)l.state=l.__s,null!=l.getChildContext&&(d=bS(bS({},d),l.getChildContext())),m||null==l.getSnapshotBeforeUpdate||(p=l.getSnapshotBeforeUpdate(n,o)),b_(a,bR(y=null!=k&&k.type===bW&&null==k.key?k.props.children:k)?y:[y],b,c,d,e,f,g,h,i,j),l.base=b.__e,b.__u&=-161,l.__h.length&&g.push(l),q&&(l.__E=l.__=null)}catch(a){b.__v=null,i||null!=f?(b.__e=h,b.__u|=i?160:32,f[f.indexOf(h)]=null):(b.__e=c.__e,b.__k=c.__k),bI.__e(a,b,c)}else null==f&&b.__v===c.__v?(b.__k=c.__k,b.__e=c.__e):b.__e=function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q=c.props,r=b.props,s=b.type;if("svg"===s&&(e=!0),null!=f){for(j=0;j<f.length;j++)if((n=f[j])&&"setAttribute"in n==!!s&&(s?n.localName===s:3===n.nodeType)){a=n,f[j]=null;break}}if(null==a){if(null===s)return document.createTextNode(r);a=e?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s,r.is&&r),f=null,h=!1}if(null===s)q===r||h&&a.data===r||(a.data=r);else{if(f=f&&bH.call(a.childNodes),q=c.props||bO,!h&&null!=f)for(q={},j=0;j<a.attributes.length;j++)q[(n=a.attributes[j]).name]=n.value;for(j in q)n=q[j],"children"==j||("dangerouslySetInnerHTML"==j?l=n:"key"===j||j in r||b1(a,j,null,n,e));for(j in r)n=r[j],"children"==j?m=n:"dangerouslySetInnerHTML"==j?k=n:"value"==j?o=n:"checked"==j?p=n:"key"===j||h&&"function"!=typeof n||q[j]===n||b1(a,j,n,q[j],e);if(k)h||l&&(k.__html===l.__html||k.__html===a.innerHTML)||(a.innerHTML=k.__html),b.__k=[];else if(l&&(a.innerHTML=""),b_(a,bR(m)?m:[m],b,c,d,e&&"foreignObject"!==s,f,g,f?f[0]:c.__k&&bY(c,0),h,i),null!=f)for(j=f.length;j--;)null!=f[j]&&bT(f[j]);h||(j="value",void 0===o||o===a[j]&&("progress"!==s||o)&&("option"!==s||o===q[j])||b1(a,j,o,q[j],!1),j="checked",void 0!==p&&p!==a[j]&&b1(a,j,p,q[j],!1))}return a}(c.__e,b,c,d,e,f,g,i,j);(k=bI.diffed)&&k(b)}function b5(a,b,c){for(var d=0;d<c.length;d++)b6(c[d],c[++d],c[++d]);bI.__c&&bI.__c(b,a),a.some(function(b){try{a=b.__h,b.__h=[],a.some(function(a){a.call(b)})}catch(a){bI.__e(a,b.__v)}})}function b6(a,b,c){try{"function"==typeof a?a(b):a.current=b}catch(a){bI.__e(a,c)}}function b7(a,b,c){var d,e;if(bI.unmount&&bI.unmount(a),(d=a.ref)&&(d.current&&d.current!==a.__e||b6(d,null,b)),null!=(d=a.__c)){if(d.componentWillUnmount)try{d.componentWillUnmount()}catch(a){bI.__e(a,b)}d.base=d.__P=null,a.__c=void 0}if(d=a.__k)for(e=0;e<d.length;e++)d[e]&&b7(d[e],b,c||"function"!=typeof a.type);c||null==a.__e||bT(a.__e),a.__=a.__e=a.__d=void 0}function b8(a,b,c){return this.constructor(a,c)}bH=bP.slice,bI={__e:function(a,b,c,d){for(var e,f,g;b=b.__;)if((e=b.__c)&&!e.__)try{if((f=e.constructor)&&null!=f.getDerivedStateFromError&&(e.setState(f.getDerivedStateFromError(a)),g=e.__d),null!=e.componentDidCatch&&(e.componentDidCatch(a,d||{}),g=e.__d),g)return e.__E=e}catch(b){a=b}throw a}},bJ=0,bX.prototype.setState=function(a,b){var c;c=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=bS({},this.state),"function"==typeof a&&(a=a(bS({},c),this.props)),a&&bS(c,a),null!=a&&this.__v&&(b&&this._sb.push(b),bZ(this))},bX.prototype.forceUpdate=function(a){this.__v&&(this.__e=!0,a&&this.__h.push(a),bZ(this))},bX.prototype.render=bW,bK=[],bM="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,bN=function(a,b){return a.__v.__b-b.__v.__b},b$.__r=0;var b9,ca,cb,cc,cd=0,ce=[],cf=[],cg=bI,ch=cg.__b,ci=cg.__r,cj=cg.diffed,ck=cg.__c,cl=cg.unmount,cm=cg.__;function cn(a,b){cg.__h&&cg.__h(ca,a,cd||b),cd=0;var c=ca.__H||(ca.__H={__:[],__h:[]});return a>=c.__.length&&c.__.push({__V:cf}),c.__[a]}function co(a){return cd=1,cp(cy,a)}function cp(a,b,c){var d=cn(b9++,2);if(d.t=a,!d.__c&&(d.__=[c?c(b):cy(void 0,b),function(a){var b=d.__N?d.__N[0]:d.__[0],c=d.t(b,a);b!==c&&(d.__N=[c,d.__[1]],d.__c.setState({}))}],d.__c=ca,!ca.u)){var e=function(a,b,c){if(!d.__c.__H)return!0;var e=d.__c.__H.__.filter(function(a){return!!a.__c});if(e.every(function(a){return!a.__N}))return!f||f.call(this,a,b,c);var g=!1;return e.forEach(function(a){if(a.__N){var b=a.__[0];a.__=a.__N,a.__N=void 0,b!==a.__[0]&&(g=!0)}}),!(!g&&d.__c.props===a)&&(!f||f.call(this,a,b,c))};ca.u=!0;var f=ca.shouldComponentUpdate,g=ca.componentWillUpdate;ca.componentWillUpdate=function(a,b,c){if(this.__e){var d=f;f=void 0,e(a,b,c),f=d}g&&g.call(this,a,b,c)},ca.shouldComponentUpdate=e}return d.__N||d.__}function cq(a,b){var c=cn(b9++,4);!cg.__s&&cx(c.__H,b)&&(c.__=a,c.i=b,ca.__h.push(c))}function cr(a,b){var c=cn(b9++,7);return cx(c.__H,b)?(c.__V=a(),c.i=b,c.__h=a,c.__V):c.__}function cs(a,b){return cd=8,cr(function(){return a},b)}function ct(){for(var a;a=ce.shift();)if(a.__P&&a.__H)try{a.__H.__h.forEach(cv),a.__H.__h.forEach(cw),a.__H.__h=[]}catch(b){a.__H.__h=[],cg.__e(b,a.__v)}}cg.__b=function(a){ca=null,ch&&ch(a)},cg.__=function(a,b){b.__k&&b.__k.__m&&(a.__m=b.__k.__m),cm&&cm(a,b)},cg.__r=function(a){ci&&ci(a),b9=0;var b=(ca=a.__c).__H;b&&(cb===ca?(b.__h=[],ca.__h=[],b.__.forEach(function(a){a.__N&&(a.__=a.__N),a.__V=cf,a.__N=a.i=void 0})):(b.__h.forEach(cv),b.__h.forEach(cw),b.__h=[],b9=0)),cb=ca},cg.diffed=function(a){cj&&cj(a);var b=a.__c;b&&b.__H&&(b.__H.__h.length&&(1!==ce.push(b)&&cc===cg.requestAnimationFrame||((cc=cg.requestAnimationFrame)||function(a){var b,c=function(){clearTimeout(d),cu&&cancelAnimationFrame(b),setTimeout(a)},d=setTimeout(c,100);cu&&(b=requestAnimationFrame(c))})(ct)),b.__H.__.forEach(function(a){a.i&&(a.__H=a.i),a.__V!==cf&&(a.__=a.__V),a.i=void 0,a.__V=cf})),cb=ca=null},cg.__c=function(a,b){b.some(function(a){try{a.__h.forEach(cv),a.__h=a.__h.filter(function(a){return!a.__||cw(a)})}catch(c){b.some(function(a){a.__h&&(a.__h=[])}),b=[],cg.__e(c,a.__v)}}),ck&&ck(a,b)},cg.unmount=function(a){cl&&cl(a);var b,c=a.__c;c&&c.__H&&(c.__H.__.forEach(function(a){try{cv(a)}catch(a){b=a}}),c.__H=void 0,b&&cg.__e(b,c.__v))};var cu="function"==typeof requestAnimationFrame;function cv(a){var b=ca,c=a.__c;"function"==typeof c&&(a.__c=void 0,c()),ca=b}function cw(a){var b=ca;a.__c=a.__(),ca=b}function cx(a,b){return!a||a.length!==b.length||b.some(function(b,c){return b!==a[c]})}function cy(a,b){return"function"==typeof b?b(a):b}let cz=Object.defineProperty({__proto__:null,useCallback:cs,useContext:function(a){var b=ca.context[a.__c],c=cn(b9++,9);return c.c=a,b?(null==c.__&&(c.__=!0,b.sub(ca)),b.props.value):a.__},useDebugValue:function(a,b){cg.useDebugValue&&cg.useDebugValue(b?b(a):a)},useEffect:function(a,b){var c=cn(b9++,3);!cg.__s&&cx(c.__H,b)&&(c.__=a,c.i=b,ca.__H.__h.push(c))},useErrorBoundary:function(a){var b=cn(b9++,10),c=co();return b.__=a,ca.componentDidCatch||(ca.componentDidCatch=function(a,d){b.__&&b.__(a,d),c[1](a)}),[c[0],function(){c[1](void 0)}]},useId:function(){var a=cn(b9++,11);if(!a.__){for(var b=ca.__v;null!==b&&!b.__m&&null!==b.__;)b=b.__;var c=b.__m||(b.__m=[0,0]);a.__="P"+c[0]+"-"+c[1]++}return a.__},useImperativeHandle:function(a,b,c){cd=6,cq(function(){return"function"==typeof a?(a(b()),function(){return a(null)}):a?(a.current=b(),function(){return a.current=null}):void 0},null==c?c:c.concat(a))},useLayoutEffect:cq,useMemo:cr,useReducer:cp,useRef:function(a){return cd=5,cr(function(){return{current:a}},[])},useState:co},Symbol.toStringTag,{value:"Module"});function cA({options:a}){let b=cr(()=>{let a,b;return{__html:(a=bA(bd.createElementNS("http://www.w3.org/2000/svg","svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),b=bA(bd.createElementNS("http://www.w3.org/2000/svg","path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"}),a.appendChild(b),a).outerHTML}},[]);return bU("h2",{class:"dialog__header"},bU("span",{class:"dialog__title"},a.formTitle),a.showBranding?bU("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:b}):null)}function cB(a,b){let c=a.get(b);return"string"==typeof c?c.trim():""}function cC({options:a,defaultEmail:b,defaultName:c,onFormClose:d,onSubmit:e,onSubmitSuccess:f,onSubmitError:g,showEmail:h,showName:i,screenshotInput:j}){let{tags:k,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:m,cancelButtonLabel:n,emailLabel:o,emailPlaceholder:p,isEmailRequired:q,isNameRequired:r,messageLabel:s,messagePlaceholder:t,nameLabel:u,namePlaceholder:v,submitButtonLabel:w,isRequiredLabel:x}=a,[y,z]=co(!1),[A,B]=co(null),[C,D]=co(!1),E=j?.input,[F,G]=co(null),H=cs(a=>{G(a),D(!1)},[]),I=cs(a=>{var b;let c,d=(c=[],(b={emailLabel:o,isEmailRequired:q,isNameRequired:r,messageLabel:s,nameLabel:u}).isNameRequired&&!a.name&&c.push(b.nameLabel),b.isEmailRequired&&!a.email&&c.push(b.emailLabel),a.message||c.push(b.messageLabel),c);return d.length>0?B(`Please enter in the following required fields: ${d.join(", ")}`):B(null),0===d.length},[o,q,r,s,u]);return bU("form",{class:"form",onSubmit:cs(async a=>{z(!0);try{if(a.preventDefault(),!(a.target instanceof HTMLFormElement))return;let b=new FormData(a.target),c=await (j&&C?j.value():void 0),d={name:cB(b,"name"),email:cB(b,"email"),message:cB(b,"message"),attachments:c?[c]:void 0};if(!I(d))return;try{let a=await e({name:d.name,email:d.email,message:d.message,source:"widget",tags:k},{attachments:d.attachments});f(d,a)}catch(a){by&&av.error(a),B(a),g(a)}}finally{z(!1)}},[j&&C,f,g])},E&&C?bU(E,{onError:H}):null,bU("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:y},bU("div",{class:"form__top"},A?bU("div",{class:"form__error-container"},A):null,i?bU("label",{for:"name",class:"form__label"},bU(cD,{label:u,isRequiredLabel:x,isRequired:r}),bU("input",{class:"form__input",defaultValue:c,id:"name",name:"name",placeholder:v,required:r,type:"text"})):bU("input",{"aria-hidden":!0,value:c,name:"name",type:"hidden"}),h?bU("label",{for:"email",class:"form__label"},bU(cD,{label:o,isRequiredLabel:x,isRequired:q}),bU("input",{class:"form__input",defaultValue:b,id:"email",name:"email",placeholder:p,required:q,type:"email"})):bU("input",{"aria-hidden":!0,value:b,name:"email",type:"hidden"}),bU("label",{for:"message",class:"form__label"},bU(cD,{label:s,isRequiredLabel:x,isRequired:!0}),bU("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:t,required:!0,rows:5})),E?bU("label",{for:"screenshot",class:"form__label"},bU("button",{class:"btn btn--default",disabled:y,type:"button",onClick:()=>{G(null),D(a=>!a)}},C?m:l),F?bU("div",{class:"form__error-container"},F.message):null):null),bU("div",{class:"btn-group"},bU("button",{class:"btn btn--primary",disabled:y,type:"submit"},w),bU("button",{class:"btn btn--default",disabled:y,type:"button",onClick:d},n))))}function cD({label:a,isRequired:b,isRequiredLabel:c}){return bU("span",{class:"form__label__text"},a,b&&bU("span",{class:"form__label__text--required"},c))}function cE({open:a,onFormSubmitted:b,...c}){let d=c.options,e=cr(()=>{let a,b,c,d,e,f,g,h;return{__html:(b=bA((a=a=>U.document.createElementNS("http://www.w3.org/2000/svg",a))("svg"),{width:"16",height:"17",viewBox:"0 0 16 17",fill:"inherit"}),c=bA(a("g"),{clipPath:"url(#clip0_57_156)"}),d=bA(a("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),e=bA(a("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"}),b.appendChild(c).append(e,d),f=a("defs"),g=bA(a("clipPath"),{id:"clip0_57_156"}),h=bA(a("rect"),{width:"16",height:"16",fill:"white",transform:"translate(0 0.5)"}),g.appendChild(h),f.appendChild(g),b.appendChild(f).appendChild(g).appendChild(h),b).outerHTML}},[]),[f,g]=co(null),h=cs(()=>{f&&(clearTimeout(f),g(null)),b()},[f]),i=cs((a,d)=>{c.onSubmitSuccess(a,d),g(setTimeout(()=>{b(),g(null)},5e3))},[b]);return bU(bW,null,f?bU("div",{class:"success__position",onClick:h},bU("div",{class:"success__content"},d.successMessageText,bU("span",{class:"success__icon",dangerouslySetInnerHTML:e}))):bU("dialog",{class:"dialog",onClick:d.onFormClose,open:a},bU("div",{class:"dialog__position"},bU("div",{class:"dialog__content",onClick:a=>{a.stopPropagation()}},bU(cA,{options:d}),bU(cC,{...c,onSubmitSuccess:i})))))}let cF=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,cG=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,cH=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,cI=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,cJ=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`,cK=()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:a,screenshotIntegration:b,sendFeedback:c,shadow:d})=>{var e;let f,g,h,i,j=a.useSentryUser,k=(f=a1().getUser(),g=a2().getUser(),h=a3().getUser(),f&&Object.keys(f).length?f:g&&Object.keys(g).length?g:h),l=bd.createElement("div"),m=(e=a.styleNonce,(i=bd.createElement("style")).textContent=`
:host {
  --dialog-inset: var(--inset);
}

${cF}
${cG}
${cH}
${cI}
${cJ}
`,e&&i.setAttribute("nonce",e),i),n="",o={get el(){return l},appendToDom(){d.contains(m)||d.contains(l)||(d.appendChild(m),d.appendChild(l))},removeFromDom(){l.remove(),m.remove(),bd.body.style.overflow=n},open(){q(!0),a.onFormOpen?.(),a6()?.emit("openFeedbackWidget"),n=bd.body.style.overflow,bd.body.style.overflow="hidden"},close(){q(!1),bd.body.style.overflow=n}},p=b?.createInput({h:bU,hooks:cz,dialog:o,options:a}),q=b=>{var d,e,f,g,h;d=bU(cE,{options:a,screenshotInput:p,showName:a.showName||a.isNameRequired,showEmail:a.showEmail||a.isEmailRequired,defaultName:j&&k?.[j.name]||"",defaultEmail:j&&k?.[j.email]||"",onFormClose:()=>{q(!1),a.onFormClose?.()},onSubmit:c,onSubmitSuccess:(b,c)=>{q(!1),a.onSubmitSuccess?.(b,c)},onSubmitError:b=>{a.onSubmitError?.(b)},onFormSubmitted:()=>{a.onFormSubmitted?.()},open:b}),bI.__&&bI.__(d,l),f=l.__k,g=[],h=[],b4(l,d=l.__k=bU(bW,null,[d]),f||bO,bO,void 0!==l.ownerSVGElement,f?null:l.firstChild?bH.call(l.childNodes):null,g,f?f.__e:l.firstChild,e,h),d.__d=void 0,b5(g,d,h)};return o}});function cL(a,b,c){if(!a)return;let d=a.getContext("2d",b);d&&c(a,d)}function cM(a,b){cL(a,{alpha:!0},(a,c)=>{c.drawImage(b,0,0,b.width,b.height,0,0,a.width,a.height)})}function cN(a,b,c){cL(a,{alpha:!0},(a,d)=>{c.length&&(d.fillStyle="rgba(0, 0, 0, 0.25)",d.fillRect(0,0,a.width,a.height)),c.forEach(a=>{switch(a.type){case"highlight":d.shadowColor="rgba(0, 0, 0, 0.7)",d.shadowBlur=50,d.fillStyle=b,d.fillRect(a.x-1,a.y-1,a.w+2,a.h+2),d.clearRect(a.x,a.y,a.w,a.h);break;case"hide":d.fillStyle="rgb(0, 0, 0)",d.fillRect(a.x,a.y,a.w,a.h)}})})}let cO=()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:a,hooks:b,dialog:c,options:d})=>{let e=bd.createElement("canvas");return{input:function({h:a,hooks:b,outputBuffer:c,dialog:d,options:e}){var f;let g,h,i,j=function({hooks:a}){return function({onBeforeScreenshot:b,onScreenshot:c,onAfterScreenshot:d,onError:e}){let f=function(){let[b,c]=a.useState(U.devicePixelRatio??1);return a.useEffect(()=>{let a=()=>{c(U.devicePixelRatio)},b=matchMedia(`(resolution: ${U.devicePixelRatio}dppx)`);return b.addEventListener("change",a),()=>{b.removeEventListener("change",a)}},[]),b}();a.useEffect(()=>{(async()=>{b();let a=await be.mediaDevices.getDisplayMedia({video:{width:U.innerWidth*f,height:U.innerHeight*f},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),e=bd.createElement("video");await new Promise((b,d)=>{e.srcObject=a,e.onloadedmetadata=()=>{c(e,f),a.getTracks().forEach(a=>a.stop()),b()},e.play().catch(d)}),d()})().catch(e)},[])}}({hooks:b}),k=function({h:a}){return function({action:b,setAction:c,options:d}){return a("div",{class:"editor__tool-container"},a("div",{class:"editor__tool-bar"},a("button",{type:"button",class:`editor__tool ${"highlight"===b?"editor__tool--active":""}`,onClick:()=>{c("highlight"===b?"":"highlight")}},d.highlightToolText),a("button",{type:"button",class:`editor__tool ${"hide"===b?"editor__tool--active":""}`,onClick:()=>{c("hide"===b?"":"hide")}},d.hideToolText)))}}({h:a}),l=function({h:a}){return function(){return a("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},a("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),a("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),a("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),a("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}({h:a}),m={__html:(f=e.styleNonce,g=bd.createElement("style"),h="#1A141F",i="#302735",g.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${h};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${h} 8px,
      ${h} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${i} 15px,
      ${i} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,f&&g.setAttribute("nonce",f),g).innerText},n=d.el.style,o=({screenshot:d})=>{let[f,g]=b.useState("highlight"),[h,i]=b.useState([]),j=b.useRef(null),n=b.useRef(null),o=b.useRef(null),p=b.useRef(null),[q,r]=b.useState(1),s=b.useMemo(()=>{let a=bd.getElementById(e.id);if(!a)return"white";let b=getComputedStyle(a);return b.getPropertyValue("--button-primary-background")||b.getPropertyValue("--accent-background")},[e.id]);b.useLayoutEffect(()=>{let a=()=>{let b=j.current;b&&(cL(d.canvas,{alpha:!1},a=>{r(Math.min(b.clientWidth/a.width,b.clientHeight/a.height))}),(0===b.clientHeight||0===b.clientWidth)&&setTimeout(a,0))};return a(),U.addEventListener("resize",a),()=>{U.removeEventListener("resize",a)}},[d]);let t=b.useCallback((a,b)=>{cL(a,{alpha:!0},(a,c)=>{c.scale(b,b),a.width=d.canvas.width,a.height=d.canvas.height})},[d]);b.useEffect(()=>{t(n.current,d.dpi),cM(n.current,d.canvas)},[d]),b.useEffect(()=>{t(o.current,d.dpi),cL(o.current,{alpha:!0},(a,b)=>{b.clearRect(0,0,a.width,a.height)}),cN(o.current,s,h)},[h,s]),b.useEffect(()=>{t(c,d.dpi),cM(c,d.canvas),cL(bd.createElement("canvas"),{alpha:!0},(a,b)=>{b.scale(d.dpi,d.dpi),a.width=d.canvas.width,a.height=d.canvas.height,cN(a,s,h),cM(c,a)})},[h,d,s]);let u=b.useCallback(a=>b=>{b.preventDefault(),b.stopPropagation(),i(b=>{let c=[...b];return c.splice(a,1),c})},[]),v={width:`${d.canvas.width*q}px`,height:`${d.canvas.height*q}px`},w=a=>{a.stopPropagation()};return a("div",{class:"editor"},a("style",{nonce:e.styleNonce,dangerouslySetInnerHTML:m}),a("div",{class:"editor__image-container"},a("div",{class:"editor__canvas-container",ref:j},a("canvas",{ref:n,id:"background",style:v}),a("canvas",{ref:o,id:"foreground",style:v}),a("div",{ref:p,onMouseDown:a=>{if(!f||!p.current)return;let b=p.current.getBoundingClientRect(),c={type:f,x:a.offsetX/q,y:a.offsetY/q},d=(a,c)=>{let d=(c.clientX-b.x)/q,e=(c.clientY-b.y)/q;return{type:a.type,x:Math.min(a.x,d),y:Math.min(a.y,e),w:Math.abs(d-a.x),h:Math.abs(e-a.y)}},e=a=>{cL(o.current,{alpha:!0},(a,b)=>{b.clearRect(0,0,a.width,a.height)}),cN(o.current,s,[...h,d(c,a)])},g=a=>{let b=d(c,a);b.w*q>=1&&b.h*q>=1&&i(a=>[...a,b]),bd.removeEventListener("mousemove",e),bd.removeEventListener("mouseup",g)};bd.addEventListener("mousemove",e),bd.addEventListener("mouseup",g)},style:v},h.map((b,c)=>a("div",{key:c,class:"editor__rect",style:{top:`${b.y*q}px`,left:`${b.x*q}px`,width:`${b.w*q}px`,height:`${b.h*q}px`}},a("button",{"aria-label":e.removeHighlightText,onClick:u(c),onMouseDown:w,onMouseUp:w,type:"button"},a(l,null))))))),a(k,{options:e,action:f,setAction:g}))};return function({onError:d}){let[e,f]=b.useState();return(j({onBeforeScreenshot:b.useCallback(()=>{n.display="none"},[]),onScreenshot:b.useCallback((a,b)=>{cL(bd.createElement("canvas"),{alpha:!1},(c,d)=>{d.scale(b,b),c.width=a.videoWidth,c.height=a.videoHeight,d.drawImage(a,0,0,c.width,c.height),f({canvas:c,dpi:b})}),c.width=a.videoWidth,c.height=a.videoHeight},[]),onAfterScreenshot:b.useCallback(()=>{n.display="block"},[]),onError:b.useCallback(a=>{n.display="block",d(a)},[])}),e)?a(o,{screenshot:e}):a("div",null)}}({h:a,hooks:b,outputBuffer:e,dialog:c,options:d}),value:async()=>{let a=await new Promise(a=>{e.toBlob(a,"image/png")});if(a)return{data:new Uint8Array(await a.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}),cP="production";function cQ(a){return new cS(b=>{b(a)})}function cR(a){return new cS((b,c)=>{c(a)})}class cS{constructor(a){this._state=0,this._handlers=[],this._runExecutor(a)}then(a,b){return new cS((c,d)=>{this._handlers.push([!1,b=>{if(a)try{c(a(b))}catch(a){d(a)}else c(b)},a=>{if(b)try{c(b(a))}catch(a){d(a)}else d(a)}]),this._executeHandlers()})}catch(a){return this.then(a=>a,a)}finally(a){return new cS((b,c)=>{let d,e;return this.then(b=>{e=!1,d=b,a&&a()},b=>{e=!0,d=b,a&&a()}).then(()=>{e?c(d):b(d)})})}_executeHandlers(){if(0===this._state)return;let a=this._handlers.slice();this._handlers=[],a.forEach(a=>{a[0]||(1===this._state&&a[1](this._value),2===this._state&&a[2](this._value),a[0]=!0)})}_runExecutor(a){let b=(a,b)=>{if(0===this._state){if(ai(b))return void b.then(c,d);this._state=a,this._value=b,this._executeHandlers()}},c=a=>{b(1,a)},d=a=>{b(2,a)};try{a(c,d)}catch(a){d(a)}}}let cT="sentry.source",cU="sentry.sample_rate",cV="sentry.previous_trace_sample_rate",cW="sentry.op",cX="sentry.origin",cY="sentry.idle_span_finish_reason",cZ="sentry.measurement_unit",c$="sentry.measurement_value",c_="sentry.custom_span_name",c0="sentry.profile_id",c1="sentry.exclusive_time",c2="sentry-",c3=/^sentry-/;function c4(a){let b=function(a){if(a&&(ad(a)||Array.isArray(a)))return Array.isArray(a)?a.reduce((a,b)=>(Object.entries(c6(b)).forEach(([b,c])=>{a[b]=c}),a),{}):c6(a)}(a);if(!b)return;let c=Object.entries(b).reduce((a,[b,c])=>(b.match(c3)&&(a[b.slice(c2.length)]=c),a),{});return Object.keys(c).length>0?c:void 0}function c5(a){if(a){var b=Object.entries(a).reduce((a,[b,c])=>(c&&(a[`${c2}${b}`]=c),a),{});return 0!==Object.keys(b).length?Object.entries(b).reduce((a,[b,c],d)=>{let e=`${encodeURIComponent(b)}=${encodeURIComponent(c)}`,f=0===d?e:`${a},${e}`;return f.length>8192?(Z&&av.warn(`Not adding key: ${b} with val: ${c} to baggage header due to exceeding baggage size limits.`),a):f},""):void 0}}function c6(a){return a.split(",").map(a=>{let b=a.indexOf("=");return -1===b?[]:[a.slice(0,b),a.slice(b+1)].map(a=>{try{return decodeURIComponent(a.trim())}catch{return}})}).reduce((a,[b,c])=>(b&&c&&(a[b]=c),a),{})}let c7=/^o(\d+)\./,c8=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function c9(a,b=!1){let{host:c,path:d,pass:e,port:f,projectId:g,protocol:h,publicKey:i}=a;return`${h}://${i}${b&&e?`:${e}`:""}@${c}${f?`:${f}`:""}/${d?`${d}/`:d}${g}`}function da(a){let b=c8.exec(a);if(!b)return void ar(()=>{console.error(`Invalid Sentry Dsn: ${a}`)});let[c,d,e="",f="",g="",h=""]=b.slice(1),i="",j=h,k=j.split("/");if(k.length>1&&(i=k.slice(0,-1).join("/"),j=k.pop()),j){let a=j.match(/^\d+/);a&&(j=a[0])}return db({host:f,pass:e,path:i,projectId:j,port:g,protocol:c,publicKey:d})}function db(a){return{protocol:a.protocol,publicKey:a.publicKey||"",pass:a.pass||"",host:a.host,port:a.port||"",path:a.path||"",projectId:a.projectId}}function dc(a){let b,c=a.getOptions(),{host:d}=a.getDsn()||{};if(c.orgId)b=String(c.orgId);else{let a;d&&(a=d.match(c7),b=a?.[1])}return b}function dd(a){let b="string"==typeof a?da(a):db(a);if(b&&function(a){if(!Z)return!0;let{port:b,projectId:c,protocol:d}=a;return!["protocol","publicKey","host","projectId"].find(b=>!a[b]&&(av.error(`Invalid Sentry Dsn: ${b} missing`),!0))&&(c.match(/^\d+$/)?"http"!==d&&"https"!==d?(av.error(`Invalid Sentry Dsn: Invalid protocol ${d}`),!1):!(b&&isNaN(parseInt(b,10)))||(av.error(`Invalid Sentry Dsn: Invalid port ${b}`),!1):(av.error(`Invalid Sentry Dsn: Invalid projectId ${c}`),!1))}(b))return b}function de(a){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;let b=a||a6()?.getOptions();return!!b&&(null!=b.tracesSampleRate||!!b.tracesSampler)}function df(a){if(a<400&&a>=100)return{code:1};if(a>=400&&a<500)switch(a){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(a>=500&&a<600)switch(a){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"}}return{code:2,message:"internal_error"}}function dg(a,b){a.setAttribute("http.response.status_code",b);let c=df(b);"unknown_error"!==c.message&&a.setStatus(c)}let dh="_sentryScope",di="_sentryIsolationScope";function dj(a){return{scope:a[dh],isolationScope:function(a){if(a){if("object"==typeof a&&"deref"in a&&"function"==typeof a.deref)try{return a.deref()}catch{return}return a}}(a[di])}}function dk(a){if("boolean"==typeof a)return Number(a);let b="string"==typeof a?parseFloat(a):a;if(!("number"!=typeof b||isNaN(b))&&!(b<0)&&!(b>1))return b}let dl=RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function dm(a,b){let c=function(a){let b;if(!a)return;let c=a.match(dl);if(c)return"1"===c[3]?b=!0:"0"===c[3]&&(b=!1),{traceId:c[1],parentSampled:b,parentSpanId:c[2]}}(a),d=c4(b);if(!c?.traceId)return{traceId:aI(),sampleRand:Math.random()};let e=function(a,b){let c=dk(b?.sample_rand);if(void 0!==c)return c;let d=dk(b?.sample_rate);return d&&a?.parentSampled!==void 0?a.parentSampled?Math.random()*d:d+Math.random()*(1-d):Math.random()}(c,d);d&&(d.sample_rand=e.toString());let{traceId:f,parentSpanId:g,parentSampled:h}=c;return{traceId:f,parentSpanId:g,sampled:h,dsc:d||{},sampleRand:e}}function dn(a=aI(),b=aT(),c){let d="";return void 0!==c&&(d=c?"-1":"-0"),`${a}-${b}${d}`}function dp(a=aI(),b=aT(),c){return`00-${a}-${b}-${c?"01":"00"}`}let dq=!1;function dr(a){let{spanId:b,traceId:c,isRemote:d}=a.spanContext(),e=d?b:dw(a).parent_span_id,f=dj(a).scope;return{parent_span_id:e,span_id:d?f?.getPropagationContext().propagationSpanId||aT():b,trace_id:c}}function ds(a){let{traceId:b,spanId:c}=a.spanContext();return dn(b,c,dx(a))}function dt(a){return a&&a.length>0?a.map(({context:{spanId:a,traceId:b,traceFlags:c,...d},attributes:e})=>({span_id:a,trace_id:b,sampled:1===c,attributes:e,...d})):void 0}function du(a){return"number"==typeof a?dv(a):Array.isArray(a)?a[0]+a[1]/1e9:a instanceof Date?dv(a.getTime()):aP()}function dv(a){return a>0x2540be3ff?a/1e3:a}function dw(a){var b;if("function"==typeof a.getSpanJSON)return a.getSpanJSON();let{spanId:c,traceId:d}=a.spanContext();if((b=a).attributes&&b.startTime&&b.name&&b.endTime&&b.status){let{attributes:b,startTime:e,name:f,endTime:g,status:h,links:i}=a;return{span_id:c,trace_id:d,data:b,description:f,parent_span_id:"parentSpanId"in a?a.parentSpanId:"parentSpanContext"in a?a.parentSpanContext?.spanId:void 0,start_timestamp:du(e),timestamp:du(g)||void 0,status:dy(h),op:b[cW],origin:b[cX],links:dt(i)}}return{span_id:c,trace_id:d,start_timestamp:0,data:{}}}function dx(a){let{traceFlags:b}=a.spanContext();return 1===b}function dy(a){if(a&&0!==a.code)return 1===a.code?"ok":a.message||"internal_error"}let dz="_sentryChildSpans",dA="_sentryRootSpan";function dB(a,b){let c=a[dA]||a;ax(b,dA,c),a[dz]?a[dz].add(b):ax(a,dz,new Set([b]))}function dC(a){let b=new Set;return!function a(c){if(!b.has(c)&&dx(c))for(let d of(b.add(c),c[dz]?Array.from(c[dz]):[]))a(d)}(a),Array.from(b)}function dD(a){return a[dA]||a}function dE(){let a=a0(W());return a.getActiveSpan?a.getActiveSpan():a1()[aU]}function dF(){dq||(ar(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),dq=!0)}function dG(a,b){a.updateName(b),a.setAttributes({[cT]:"custom",[c_]:b})}let dH="_frozenDsc";function dI(a,b){let c=b.getOptions(),{publicKey:d}=b.getDsn()||{},e={environment:c.environment||cP,release:c.release,public_key:d,trace_id:a,org_id:dc(b)};return b.emit("createDsc",e),e}function dJ(a,b){let c=b.getPropagationContext();return c.dsc||dI(c.traceId,a)}function dK(a){let b=a6();if(!b)return{};let c=dD(a),d=dw(c),e=d.data,f=c.spanContext().traceState,g=f?.get("sentry.sample_rate")??e[cU]??e[cV];function h(a){return("number"==typeof g||"string"==typeof g)&&(a.sample_rate=`${g}`),a}let i=c[dH];if(i)return h(i);let j=f?.get("sentry.dsc"),k=j&&c4(j);if(k)return h(k);let l=dI(a.spanContext().traceId,b),m=e[cT],n=d.description;return"url"!==m&&n&&(l.transaction=n),de()&&(l.sampled=String(dx(c)),l.sample_rand=f?.get("sentry.sample_rand")??dj(c).scope?.getPropagationContext().sampleRand.toString()),h(l),b.emit("createDsc",l,c),l}function dL(a){return c5(dK(a))}function dM(a,b){let{extra:c,tags:d,user:e,contexts:f,level:g,sdkProcessingMetadata:h,breadcrumbs:i,fingerprint:j,eventProcessors:k,attachments:l,propagationContext:m,transactionName:n,span:o}=b;dN(a,"extra",c),dN(a,"tags",d),dN(a,"user",e),dN(a,"contexts",f),a.sdkProcessingMetadata=aS(a.sdkProcessingMetadata,h,2),g&&(a.level=g),n&&(a.transactionName=n),o&&(a.span=o),i.length&&(a.breadcrumbs=[...a.breadcrumbs,...i]),j.length&&(a.fingerprint=[...a.fingerprint,...j]),k.length&&(a.eventProcessors=[...a.eventProcessors,...k]),l.length&&(a.attachments=[...a.attachments,...l]),a.propagationContext={...a.propagationContext,...m}}function dN(a,b,c){a[b]=aS(a[b],c,1)}function dO(a){let b=U._sentryDebugIds,c=U._debugIds;if(!b&&!c)return{};let d=b?Object.keys(b):[],i=c?Object.keys(c):[];if(h&&d.length===f&&i.length===g)return h;f=d.length,g=i.length,h={},e||(e={});let j=(b,c)=>{for(let d of b){let b=c[d],f=e?.[d];if(f&&h&&b)h[f[0]]=b,e&&(e[d]=[f[0],b]);else if(b){let c=a(d);for(let a=c.length-1;a>=0;a--){let f=c[a],g=f?.filename;if(g&&h&&e){h[g]=b,e[d]=[g,b];break}}}}};return b&&j(d,b),c&&j(i,c),h}let dP=/\(error: (.*)\)/,dQ=/captureMessage|captureException/;function dR(...a){let b=a.sort((a,b)=>a[0]-b[0]).map(a=>a[1]);return(a,c=0,d=0)=>{let e=[],f=a.split("\n");for(let a=c;a<f.length;a++){let c=f[a];c.length>1024&&(c=c.slice(0,1024));let g=dP.test(c)?c.replace(dP,"$1"):c;if(!g.match(/\S*Error: /)){for(let a of b){let b=a(g);if(b){e.push(b);break}}if(e.length>=50+d)break}}var g=e.slice(d);if(!g.length)return[];let h=Array.from(g);return/sentryWrapped/.test(dS(h).function||"")&&h.pop(),h.reverse(),dQ.test(dS(h).function||"")&&(h.pop(),dQ.test(dS(h).function||"")&&h.pop()),h.slice(0,50).map(a=>({...a,filename:a.filename||dS(h).filename,function:a.function||"?"}))}}function dS(a){return a[a.length-1]||{}}let dT="<anonymous>";function dU(a){try{if(!a||"function"!=typeof a)return dT;return a.name||dT}catch{return dT}}function dV(a){let b=a.exception;if(b){let a=[];try{return b.values.forEach(b=>{b.stacktrace.frames&&a.push(...b.stacktrace.frames)}),a}catch{}}}function dW(b,c=100,d=Infinity){try{return function b(c,d,e=Infinity,f=Infinity,g=function(){let a=new WeakSet;return[function(b){return!!a.has(b)||(a.add(b),!1)},function(b){a.delete(b)}]}()){let[h,i]=g;if(null==d||["boolean","string"].includes(typeof d)||"number"==typeof d&&Number.isFinite(d))return d;let j=function(b,c){try{var d;let e;if("domain"===b&&c&&"object"==typeof c&&c._events)return"[Domain]";if("domainEmitter"===b)return"[DomainEmitter]";if(c===a.g)return"[Global]";if("undefined"!=typeof document&&c===document)return"[Document]";if(ak(c))return"[VueViewModel]";if(ag(c)&&"nativeEvent"in c&&"preventDefault"in c&&"stopPropagation"in c)return"[SyntheticEvent]";if("number"==typeof c&&!Number.isFinite(c))return`[${c}]`;if("function"==typeof c)return`[Function: ${dU(c)}]`;if("symbol"==typeof c)return`[${String(c)}]`;if("bigint"==typeof c)return`[BigInt: ${String(c)}]`;let f=(d=c,e=Object.getPrototypeOf(d),e?.constructor?e.constructor.name:"null prototype");if(/^HTML(\w*)Element$/.test(f))return`[HTMLElement: ${f}]`;return`[object ${f}]`}catch(a){return`**non-serializable** (${a})`}}(c,d);if(!j.startsWith("[object "))return j;if(d.__sentry_skip_normalization__)return d;let k="number"==typeof d.__sentry_override_normalization_depth__?d.__sentry_override_normalization_depth__:e;if(0===k)return j.replace("object ","");if(h(d))return"[Circular ~]";if(d&&"function"==typeof d.toJSON)try{let a=d.toJSON();return b("",a,k-1,f,g)}catch{}let l=Array.isArray(d)?[]:{},m=0,n=aA(d);for(let a in n){if(!Object.prototype.hasOwnProperty.call(n,a))continue;if(m>=f){l[a]="[MaxProperties ~]";break}let c=n[a];l[a]=b(a,c,k-1,f,g),m++}return i(d),l}("",b,c,d)}catch(a){return{ERROR:`**non-serializable** (${a})`}}}function dX(a,b,c,d,e,f){var g,h,i;let j,{normalizeDepth:k=3,normalizeMaxBreadth:l=1e3}=a,m={...b,event_id:b.event_id||c.event_id||aI(),timestamp:b.timestamp||aO()},n=c.integrations||a.integrations.map(a=>a.name);(function(a,b){let{environment:c,release:d,dist:e,maxValueLength:f}=b;a.environment=a.environment||c||cP,!a.release&&d&&(a.release=d),!a.dist&&e&&(a.dist=e);let g=a.request;g?.url&&(g.url=f?aD(g.url,f):g.url)})(m,a),g=m,(h=n).length>0&&(g.sdk=g.sdk||{},g.sdk.integrations=[...g.sdk.integrations||[],...h]),e&&e.emit("applyFrameMetadata",b),void 0===b.type&&(i=m,j=dO(a.stackParser),i.exception?.values?.forEach(a=>{a.stacktrace?.frames?.forEach(a=>{a.filename&&(a.debug_id=j[a.filename])})}));let o=function(a,b){if(!b)return a;let c=a?a.clone():new aW;return c.update(b),c}(d,c.captureContext);c.mechanism&&aM(m,c.mechanism);let p=e?e.getEventProcessors():[],q=a3().getScopeData();f&&dM(q,f.getScopeData()),o&&dM(q,o.getScopeData());let r=[...c.attachments||[],...q.attachments];return r.length&&(c.attachments=r),!function(a,b){var c,d,e,f,g,h,i,j;let k,l,{fingerprint:m,span:n,breadcrumbs:o,sdkProcessingMetadata:p}=b;(function(a,b){let{extra:c,tags:d,user:e,contexts:f,level:g,transactionName:h}=b;Object.keys(c).length&&(a.extra={...c,...a.extra}),Object.keys(d).length&&(a.tags={...d,...a.tags}),Object.keys(e).length&&(a.user={...e,...a.user}),Object.keys(f).length&&(a.contexts={...f,...a.contexts}),g&&(a.level=g),h&&"transaction"!==a.type&&(a.transaction=h)})(a,b),n&&((c=a).contexts={trace:dr(d=n),...c.contexts},c.sdkProcessingMetadata={dynamicSamplingContext:dK(d),...c.sdkProcessingMetadata},(k=dw(dD(d)).description)&&!c.transaction&&"transaction"===c.type&&(c.transaction=k)),e=a,f=m,e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],f&&(e.fingerprint=e.fingerprint.concat(f)),e.fingerprint.length||delete e.fingerprint,g=a,h=o,l=[...g.breadcrumbs||[],...h],g.breadcrumbs=l.length?l:void 0,i=a,j=p,i.sdkProcessingMetadata={...i.sdkProcessingMetadata,...j}}(m,q),(function(a,b,c,d=0){try{let e=function a(b,c,d,e){let f=d[e];if(!b||!f)return b;let g=f({...b},c);return(Z&&null===g&&av.log(`Event processor "${f.id||"?"}" dropped event`),ai(g))?g.then(b=>a(b,c,d,e+1)):a(g,c,d,e+1)}(b,c,a,d);return ai(e)?e:cQ(e)}catch(a){return cR(a)}})([...p,...q.eventProcessors],m,c).then(a=>(a&&function(a){let b={};if(a.exception?.values?.forEach(a=>{a.stacktrace?.frames?.forEach(a=>{a.debug_id&&(a.abs_path?b[a.abs_path]=a.debug_id:a.filename&&(b[a.filename]=a.debug_id),delete a.debug_id)})}),0===Object.keys(b).length)return;a.debug_meta=a.debug_meta||{},a.debug_meta.images=a.debug_meta.images||[];let c=a.debug_meta.images;Object.entries(b).forEach(([a,b])=>{c.push({type:"sourcemap",code_file:a,debug_id:b})})}(a),"number"==typeof k&&k>0)?function(a,b,c){if(!a)return null;let d={...a,...a.breadcrumbs&&{breadcrumbs:a.breadcrumbs.map(a=>({...a,...a.data&&{data:dW(a.data,b,c)}}))},...a.user&&{user:dW(a.user,b,c)},...a.contexts&&{contexts:dW(a.contexts,b,c)},...a.extra&&{extra:dW(a.extra,b,c)}};return a.contexts?.trace&&d.contexts&&(d.contexts.trace=a.contexts.trace,a.contexts.trace.data&&(d.contexts.trace.data=dW(a.contexts.trace.data,b,c))),a.spans&&(d.spans=a.spans.map(a=>({...a,...a.data&&{data:dW(a.data,b,c)}}))),a.contexts?.flags&&d.contexts&&(d.contexts.flags=dW(a.contexts.flags,3,c)),d}(a,k,l):a)}let dY=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function dZ(a,b){return a1().captureException(a,function(a){if(a){var b;return(b=a)instanceof aW||"function"==typeof b||Object.keys(a).some(a=>dY.includes(a))?{captureContext:a}:a}}(b))}function d$(a,b){let c="string"==typeof b?b:void 0,d="string"!=typeof b?{captureContext:b}:void 0;return a1().captureMessage(a,c,d)}function d_(a,b){return a1().captureEvent(a,b)}function d0(a,b){a2().setContext(a,b)}function d1(a){a2().setExtras(a)}function d2(a,b){a2().setExtra(a,b)}function d3(a){a2().setTags(a)}function d4(a,b){a2().setTag(a,b)}function d5(a){a2().setUser(a)}function d6(){return a2().lastEventId()}async function d7(a){let b=a6();return b?b.flush(a):(Z&&av.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function d8(a){let b=a6();return b?b.close(a):(Z&&av.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function d9(){return!!a6()}function ea(){let a=a6();return a?.getOptions().enabled!==!1&&!!a?.getTransport()}function eb(a){a2().addEventProcessor(a)}function ec(a){var b;let c,d,e=a2(),f=a1(),{userAgent:g}=U.navigator||{},h=(b={user:f.getUser()||e.getUser(),...g&&{userAgent:g},...a},c=aP(),d={sid:aI(),init:!0,timestamp:c,started:c,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>{var a;return a=d,{sid:`${a.sid}`,init:a.init,started:new Date(1e3*a.started).toISOString(),timestamp:new Date(1e3*a.timestamp).toISOString(),status:a.status,errors:a.errors,did:"number"==typeof a.did||"string"==typeof a.did?`${a.did}`:void 0,duration:a.duration,abnormal_mechanism:a.abnormal_mechanism,attrs:{release:a.release,environment:a.environment,ip_address:a.ipAddress,user_agent:a.userAgent}}}},b&&aR(d,b),d),i=e.getSession();return i?.status==="ok"&&aR(i,{status:"exited"}),ed(),e.setSession(h),h}function ed(){let a,b=a2(),c=a1().getSession()||b.getSession();c&&(a={},"ok"===c.status&&(a={status:"exited"}),aR(c,a)),ee(),b.setSession()}function ee(){let a=a2(),b=a6(),c=a.getSession();c&&b&&b.captureSession(c)}function ef(a=!1){a?ed():ee()}let eg=0;function eh(a,b={}){if("function"!=typeof a)return a;try{let b=a.__sentry_wrapped__;if(b)if("function"==typeof b)return b;else return a;if(az(a))return a}catch{return a}let c=function(...c){try{let d=c.map(a=>eh(a,b));return a.apply(this,d)}catch(a){throw eg++,setTimeout(()=>{eg--}),a4(d=>{d.addEventProcessor(a=>(b.mechanism&&(aL(a,void 0,void 0),aM(a,b.mechanism)),a.extra={...a.extra,arguments:c},a)),dZ(a)}),a}};try{for(let b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b])}catch{}ay(c,a),ax(a,"__sentry_wrapped__",c);try{Object.getOwnPropertyDescriptor(c,"name").configurable&&Object.defineProperty(c,"name",{get:()=>a.name})}catch{}return c}function ei(){let a=an(),{referrer:b}=U.document||{},{userAgent:c}=U.navigator||{};return{url:a,headers:{...b&&{Referer:b},...c&&{"User-Agent":c}}}}let ej={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient"};async function ek(a,b){var c;let d,e=ej[a],f=U.Sentry=U.Sentry||{};if(!e)throw Error(`Cannot lazy load integration: ${a}`);let g=f[a];if("function"==typeof g&&!("_isShim"in g))return g;let h=(c=e,d=a6(),new URL(`/${V}/${c}.min.js`,d?.getOptions()?.cdnBaseUrl||"https://browser.sentry-cdn.com").toString()),i=U.document.createElement("script");i.src=h,i.crossOrigin="anonymous",i.referrerPolicy="strict-origin",b&&i.setAttribute("nonce",b);let j=new Promise((a,b)=>{i.addEventListener("load",()=>a()),i.addEventListener("error",b)}),k=U.document.currentScript,l=U.document.body||U.document.head||k?.parentElement;if(l)l.appendChild(i);else throw Error(`Could not find parent element to insert lazy-loaded ${a} script`);try{await j}catch{throw Error(`Error when loading integration: ${a}`)}let m=f[a];if("function"!=typeof m)throw Error(`Could not load integration: ${a}`);return m}let el=bF({lazyLoadIntegration:ek}),em=bF({getModalIntegration:()=>cK,getScreenshotIntegration:()=>cO});function en(a,b){let c=a6(),d=a2();if(!c)return;let{beforeBreadcrumb:e=null,maxBreadcrumbs:f=100}=c.getOptions();if(f<=0)return;let g={timestamp:aO(),...a},h=e?ar(()=>e(g,b)):g;null!==h&&(c.emit&&c.emit("beforeAddBreadcrumb",h,b),d.addBreadcrumb(h,f))}let eo={},ep={};function eq(a,b){eo[a]=eo[a]||[],eo[a].push(b)}function er(a,b){if(!ep[a]){ep[a]=!0;try{b()}catch(b){Z&&av.error(`Error while instrumenting ${a}`,b)}}}function es(a,b){let c=a&&eo[a];if(c)for(let d of c)try{d(b)}catch(b){Z&&av.error(`Error while triggering instrumentation handler.
Type: ${a}
Name: ${dU(d)}
Error:`,b)}}function et(a){let b="console";eq(b,a),er(b,eu)}function eu(){"console"in U&&ap.forEach(function(a){a in U.console&&aw(U.console,a,function(b){return aq[a]=b,function(...b){es("console",{args:b,level:a});let c=aq[a];c?.apply(U.console,b)}})})}function ev(a){return"warn"===a?"warning":["fatal","error","warning","log","info","debug"].includes(a)?a:"log"}let ew=(a={})=>{let b=a.levels||ap,c=a.handled??!0;return{name:"CaptureConsole",setup(a){"console"in U&&et(({args:d,level:e})=>{var f,g,h;let i;a6()===a&&b.includes(e)&&(f=d,g=e,h=c,i={level:ev(g),extra:{arguments:f}},a4(a=>{if(a.addEventProcessor(a=>(a.logger="console",aM(a,{handled:h,type:"auto.core.capture_console"}),a)),"assert"===g){if(!f[0]){let b=`Assertion failed: ${aF(f.slice(1)," ")||"console.assert"}`;a.setExtra("arguments",f.slice(1)),d$(b,i)}return}let b=f.find(a=>a instanceof Error);b?dZ(b,i):d$(aF(f," "),i)}))})}}};function ex(a,b){return b?a4(b,()=>{let c=dE(),d=c?dr(c):a7(b);return[c?dK(c):dJ(a,b),d]}):[void 0,void 0]}let ey={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function ez(a,b=[]){return[a,b]}function eA(a,b){for(let c of a[1]){let a=c[0].type;if(b(c,a))return!0}return!1}function eB(a,b){return eA(a,(a,c)=>b.includes(c))}function eC(a){let b=X(U);return b.encodePolyfill?b.encodePolyfill(a):new TextEncoder().encode(a)}function eD(a){let[b,c]=a,d=JSON.stringify(b);function e(a){"string"==typeof d?d="string"==typeof a?d+a:[eC(d),a]:d.push("string"==typeof a?eC(a):a)}for(let a of c){let[b,c]=a;if(e(`
${JSON.stringify(b)}
`),"string"==typeof c||c instanceof Uint8Array)e(c);else{let a;try{a=JSON.stringify(c)}catch{a=JSON.stringify(dW(c))}e(a)}}return"string"==typeof d?d:function(a){let b=new Uint8Array(a.reduce((a,b)=>a+b.length,0)),c=0;for(let d of a)b.set(d,c),c+=d.length;return b}(d)}let eE={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function eF(a){if(!a?.sdk)return;let{name:b,version:c}=a.sdk;return{name:b,version:c}}function eG(a,b,c,d){let e=a.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:a.event_id,sent_at:new Date().toISOString(),...b&&{sdk:b},...!!c&&d&&{dsn:c9(d)},...e&&{trace:e}}}function eH(a,b,c,d=!0){c&&(!a[b]||d)&&(a[b]=c)}function eI(a,b){var c;let d=eL(),e=(c=a,eL().get(c));void 0===e?d.set(a,[b]):(d.set(a,[...e,b]),e.length>=100&&eK(a,e))}function eJ(a,b=a1(),c=eI){var d;let e,f=b?.getClient()??a6();if(!f){Z&&av.warn("No client available to capture log.");return}let{release:g,environment:h,enableLogs:i=!1,beforeSendLog:j}=f.getOptions();if(!i){Z&&av.warn("logging option not enabled, log will not be captured.");return}let[,k]=ex(f,b),l={...a.attributes},{user:{id:m,email:n,username:o}}=(d=b,dM(e=a3().getScopeData(),a2().getScopeData()),dM(e,d.getScopeData()),e);eH(l,"user.id",m,!1),eH(l,"user.email",n,!1),eH(l,"user.name",o,!1),eH(l,"sentry.release",g),eH(l,"sentry.environment",h);let{name:p,version:q}=f.getSdkMetadata()?.sdk??{};eH(l,"sentry.sdk.name",p),eH(l,"sentry.sdk.version",q);let r=f.getIntegrationByName("Replay"),s=r?.getReplayId(!0);eH(l,"sentry.replay_id",s),s&&r?.getRecordingMode()==="buffer"&&eH(l,"sentry._internal.replay_is_buffering",!0);let t=a.message;if(ae(t)){let{__sentry_template_string__:a,__sentry_template_values__:b=[]}=t;b?.length&&(l["sentry.message.template"]=a),b.forEach((a,b)=>{l[`sentry.message.parameter.${b}`]=a})}let u=b[aU];eH(l,"sentry.trace.parent_span_id",u?.spanContext().spanId);let v={...a,attributes:l};f.emit("beforeCaptureLog",v);let w=j?ar(()=>j(v)):v;if(!w){f.recordDroppedEvent("before_send","log_item",1),Z&&av.warn("beforeSendLog returned null, log will not be captured.");return}let{level:x,message:y,attributes:z={},severityNumber:A}=w;c(f,{timestamp:aP(),level:x,body:y,trace_id:k?.trace_id,severity_number:A??ey[x],attributes:Object.keys(z).reduce((a,b)=>(a[b]=function(a){switch(typeof a){case"number":if(Number.isInteger(a))return{value:a,type:"integer"};return{value:a,type:"double"};case"boolean":return{value:a,type:"boolean"};case"string":return{value:a,type:"string"};default:{let b="";try{b=JSON.stringify(a)??""}catch{}return{value:b,type:"string"}}}}(z[b]),a),{})}),f.emit("afterCaptureLog",w)}function eK(a,b){var c,d,e,f;let g,h=b??(f=a,eL().get(f))??[];if(0===h.length)return;let i=a.getOptions(),j=(c=i._metadata,d=i.tunnel,e=a.getDsn(),g={},c?.sdk&&(g.sdk={name:c.sdk.name,version:c.sdk.version}),d&&e&&(g.dsn=c9(e)),ez(g,[[{type:"log",item_count:h.length,content_type:"application/vnd.sentry.items.log+json"},{items:h}]]));eL().set(a,[]),a.emit("flushLogs"),a.sendEnvelope(j)}function eL(){return Y("clientToLogBufferMap",()=>new WeakMap)}function eM(a,b,c){var d,e,f;return"util"in U&&"function"==typeof U.util.format?U.util.format(...a):(d=a,e=b,f=c,d.map(a=>af(a)?String(a):JSON.stringify(dW(a,e,f))).join(" "))}let eN={[cX]:"auto.log.console"},eO=(a={})=>{let b=a.levels||ap;return{name:"ConsoleLogs",setup(a){let{enableLogs:c,normalizeDepth:d=3,normalizeMaxBreadth:e=1e3}=a.getOptions();if(!c){Z&&av.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}et(({args:c,level:f})=>{var g;let h,i;if(a6()!==a||!b.includes(f))return;let j=c[0],k=c.slice(1);if("assert"===f){j||eJ({level:"error",message:k.length>0?`Assertion failed: ${eM(k,d,e)}`:"Assertion failed",attributes:eN});return}let l="log"===f,m=c.length>1&&"string"==typeof c[0]&&(g=c[0],!/%[sdifocO]/.test(g)),n={...eN,...m?(h={},i=Array(k.length).fill("{}").join(" "),h["sentry.message.template"]=`${j} ${i}`,k.forEach((a,b)=>{h[`sentry.message.parameter.${b}`]=a}),h):{}};eJ({level:l?"info":f,message:eM(c,d,e),severityNumber:l?10:void 0,attributes:n})})}}};function eP(a,b,c=()=>{},d=()=>{}){var e,f,g,h;let i;try{i=a()}catch(a){throw b(a),c(),a}return e=i,f=b,g=c,h=d,ai(e)?e.then(a=>(g(),h(a),a),a=>{throw f(a),g(),a}):(g(),h(e),e)}class eQ{constructor(a={}){this._traceId=a.traceId||aI(),this._spanId=a.spanId||aT()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(a){}setAttribute(a,b){return this}setAttributes(a){return this}setStatus(a){return this}updateName(a){return this}isRecording(){return!1}addEvent(a,b,c){return this}addLink(a){return this}addLinks(a){return this}recordException(a,b){}}function eR(a){av.log(`Ignoring span ${a.op} - ${a.description} because it matches \`ignoreSpans\`.`)}function eS(a,b){if(!b?.length||!a.description)return!1;for(let d of b){var c;if("string"==typeof(c=d)||c instanceof RegExp){if(aG(a.description,d))return Z&&eR(a),!0;continue}if(!d.name&&!d.op)continue;let b=!d.name||aG(a.description,d.name),e=!d.op||a.op&&aG(a.op,d.op);if(b&&e)return Z&&eR(a),!0}return!1}function eT(a,b,c,d=dE()){let e=d&&dD(d);e&&(Z&&av.log(`[Measurement] Setting measurement on root span: ${a} = ${b} ${c}`),e.addEvent(a,{[c$]:b,[cZ]:c}))}function eU(a){if(!a||0===a.length)return;let b={};return a.forEach(a=>{let c=a.attributes||{},d=c[cZ],e=c[c$];"string"==typeof d&&"number"==typeof e&&(b[a.name]={value:e,unit:d})}),b}class eV{constructor(a={}){this._traceId=a.traceId||aI(),this._spanId=a.spanId||aT(),this._startTime=a.startTimestamp||aP(),this._links=a.links,this._attributes={},this.setAttributes({[cX]:"manual",[cW]:a.op,...a.attributes}),this._name=a.name,a.parentSpanId&&(this._parentSpanId=a.parentSpanId),"sampled"in a&&(this._sampled=a.sampled),a.endTimestamp&&(this._endTime=a.endTimestamp),this._events=[],this._isStandaloneSpan=a.isStandalone,this._endTime&&this._onSpanEnded()}addLink(a){return this._links?this._links.push(a):this._links=[a],this}addLinks(a){return this._links?this._links.push(...a):this._links=a,this}recordException(a,b){}spanContext(){let{_spanId:a,_traceId:b,_sampled:c}=this;return{spanId:a,traceId:b,traceFlags:+!!c}}setAttribute(a,b){return void 0===b?delete this._attributes[a]:this._attributes[a]=b,this}setAttributes(a){return Object.keys(a).forEach(b=>this.setAttribute(b,a[b])),this}updateStartTime(a){this._startTime=du(a)}setStatus(a){return this._status=a,this}updateName(a){return this._name=a,this.setAttribute(cT,"custom"),this}end(a){this._endTime||(this._endTime=du(a),function(a){if(!Z)return;let{description:b="< unknown name >",op:c="< unknown op >"}=dw(a),{spanId:d}=a.spanContext(),e=dD(a)===a,f=`[Tracing] Finishing "${c}" ${e?"root ":""}span "${b}" with ID ${d}`;av.log(f)}(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[cW],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:dy(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[cX],profile_id:this._attributes[c0],exclusive_time:this._attributes[c1],measurements:eU(this._events),is_segment:this._isStandaloneSpan&&dD(this)===this||void 0,segment_id:this._isStandaloneSpan?dD(this).spanContext().spanId:void 0,links:dt(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(a,b,c){Z&&av.log("[Tracing] Adding an event to span:",a);let d=eW(b)?b:c||aP(),e=eW(b)?{}:b||{},f={name:a,time:du(d),attributes:e};return this._events.push(f),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let a=a6();if(a&&a.emit("spanEnd",this),!(this._isStandaloneSpan||this===dD(this)))return;if(this._isStandaloneSpan)return void(this._sampled?function(a){let b=a6();if(!b)return;let c=a[1];c&&0!==c.length?b.sendEnvelope(a):b.recordDroppedEvent("before_send","span")}(function(a,b){let c=dK(a[0]),d=b?.getDsn(),e=b?.getOptions().tunnel,f={sent_at:new Date().toISOString(),...!!c.trace_id&&!!c.public_key&&{trace:c},...!!e&&d&&{dsn:c9(d)}},{beforeSendSpan:g,ignoreSpans:h}=b?.getOptions()||{},i=h?.length?a.filter(a=>!eS(dw(a),h)):a,j=a.length-i.length;j&&b?.recordDroppedEvent("before_send","span",j);let k=g?a=>{let b=dw(a),c=g(b);return c||(dF(),b)}:dw,l=[];for(let a of i){let b=k(a);b&&l.push([{type:"span"},b])}return ez(f,l)}([this],a)):(Z&&av.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),a&&a.recordDroppedEvent("sample_rate","span")));let b=this._convertSpanToTransaction();b&&(dj(this).scope||a1()).captureEvent(b)}_convertSpanToTransaction(){if(!eX(dw(this)))return;this._name||(Z&&av.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");let{scope:a,isolationScope:b}=dj(this),c=a?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(!0!==this._sampled)return;let d=dC(this).filter(a=>{var b;return a!==this&&!((b=a)instanceof eV&&b.isStandaloneSpan())}).map(a=>dw(a)).filter(eX),e=this._attributes[cT];delete this._attributes[c_],d.forEach(a=>{delete a.data[c_]});let f={contexts:{trace:function(a){let{spanId:b,traceId:c}=a.spanContext(),{data:d,op:e,parent_span_id:f,status:g,origin:h,links:i}=dw(a);return{parent_span_id:f,span_id:b,trace_id:c,data:d,op:e,status:g,origin:h,links:i}}(this)},spans:d.length>1e3?d.sort((a,b)=>a.start_timestamp-b.start_timestamp).slice(0,1e3):d,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:a,capturedSpanIsolationScope:b,dynamicSamplingContext:dK(this)},request:c,...e&&{transaction_info:{source:e}}},g=eU(this._events);return g&&Object.keys(g).length&&(Z&&av.log("[Measurements] Adding measurements to transaction event",JSON.stringify(g,void 0,2)),f.measurements=g),f}}function eW(a){return a&&"number"==typeof a||a instanceof Date||Array.isArray(a)}function eX(a){return!!a.start_timestamp&&!!a.timestamp&&!!a.span_id&&!!a.trace_id}let eY="__SENTRY_SUPPRESS_TRACING__";function eZ(a,b){let c=e6();if(c.startSpan)return c.startSpan(a,b);let d=e5(a),{forceTransaction:e,parentSpan:f,scope:g}=a;return a4(g?.clone(),()=>e9(f)(()=>{let c=a1(),g=e8(c,f),h=a.onlyIfParent&&!g?new eQ:e4({parentSpan:g,spanArguments:d,forceTransaction:e,scope:c});return aV(c,h),eP(()=>b(h),()=>{let{status:a}=dw(h);h.isRecording()&&(!a||"ok"===a)&&h.setStatus({code:2,message:"internal_error"})},()=>{h.end()})}))}function e$(a,b){let c=e6();if(c.startSpanManual)return c.startSpanManual(a,b);let d=e5(a),{forceTransaction:e,parentSpan:f,scope:g}=a;return a4(g?.clone(),()=>e9(f)(()=>{let c=a1(),g=e8(c,f),h=a.onlyIfParent&&!g?new eQ:e4({parentSpan:g,spanArguments:d,forceTransaction:e,scope:c});return aV(c,h),eP(()=>b(h,()=>h.end()),()=>{let{status:a}=dw(h);h.isRecording()&&(!a||"ok"===a)&&h.setStatus({code:2,message:"internal_error"})})}))}function e_(a){let b=e6();if(b.startInactiveSpan)return b.startInactiveSpan(a);let c=e5(a),{forceTransaction:d,parentSpan:e}=a;return(a.scope?b=>a4(a.scope,b):void 0!==e?a=>e1(e,a):a=>a())(()=>{let b=a1(),f=e8(b,e);return a.onlyIfParent&&!f?new eQ:e4({parentSpan:f,spanArguments:c,forceTransaction:d,scope:b})})}let e0=(a,b)=>{var c;let d,e=a0(W());if(e.continueTrace)return e.continueTrace(a,b);let{sentryTrace:f,baggage:g}=a,h=a6(),i=c4(g);return h&&(c=i?.org_id,d=dc(h),c&&d&&c!==d?(av.log(`Won't continue trace because org IDs don't match (incoming baggage: ${c}, SDK options: ${d})`),1):h.getOptions().strictTraceContinuation&&(c&&!d||!c&&d)&&(av.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${c}, Sentry client: ${d})`),1))?e3(b):a4(a=>{let c=dm(f,g);return a.setPropagationContext(c),b()})};function e1(a,b){let c=e6();return c.withActiveSpan?c.withActiveSpan(a,b):a4(c=>(aV(c,a||void 0),b(c)))}function e2(a){let b=e6();return b.suppressTracing?b.suppressTracing(a):a4(b=>{b.setSDKProcessingMetadata({[eY]:!0});let c=a();return b.setSDKProcessingMetadata({[eY]:void 0}),c})}function e3(a){return a4(b=>(b.setPropagationContext({traceId:aI(),sampleRand:Math.random()}),Z&&av.log(`Starting a new trace with id ${b.getPropagationContext().traceId}`),e1(null,a)))}function e4({parentSpan:a,spanArguments:b,forceTransaction:c,scope:d}){var e;let f;if(!de()){let d=new eQ;if(c||!a){let a={sampled:"false",sample_rate:"0",transaction:b.name,...dK(d)};ax(d,dH,a)}return d}let g=a2();if(a&&!c)f=function(a,b,c){let{spanId:d,traceId:e}=a.spanContext(),f=!b.getScopeData().sdkProcessingMetadata[eY]&&dx(a),g=f?new eV({...c,parentSpanId:d,traceId:e,sampled:f}):new eQ({traceId:e});dB(a,g);let h=a6();return h&&(h.emit("spanStart",g),c.endTimestamp&&h.emit("spanEnd",g)),g}(a,d,b),dB(a,f);else if(a){let c=dK(a),{traceId:e,spanId:g}=a.spanContext(),h=dx(a);ax(f=e7({traceId:e,parentSpanId:g,...b},d,h),dH,c)}else{let{traceId:a,dsc:c,parentSpanId:e,sampled:h}={...g.getPropagationContext(),...d.getPropagationContext()};f=e7({traceId:a,parentSpanId:e,...b},d,h),c&&ax(f,dH,c)}return!function(a){if(!Z)return;let{description:b="< unknown name >",op:c="< unknown op >",parent_span_id:d}=dw(a),{spanId:e}=a.spanContext(),f=dx(a),g=dD(a),h=g===a,i=`[Tracing] Starting ${f?"sampled":"unsampled"} ${h?"root ":""}span`,j=[`op: ${c}`,`name: ${b}`,`ID: ${e}`];if(d&&j.push(`parent ID: ${d}`),!h){let{op:a,description:b}=dw(g);j.push(`root ID: ${g.spanContext().spanId}`),a&&j.push(`root op: ${a}`),b&&j.push(`root description: ${b}`)}av.log(`${i}
  ${j.join("\n  ")}`)}(f),(e=f)&&(ax(e,di,function(a){try{let b=U.WeakRef;if("function"==typeof b)return new b(a)}catch{}return a}(g)),ax(e,dh,d)),f}function e5(a){let b={isStandalone:(a.experimental||{}).standalone,...a};if(a.startTime){let c={...b};return c.startTimestamp=du(a.startTime),delete c.startTime,c}return b}function e6(){return a0(W())}function e7(a,b,c){let d=a6(),e=d?.getOptions()||{},{name:f=""}=a,g={spanAttributes:{...a.attributes},spanName:f,parentSampled:c};d?.emit("beforeSampling",g,{decision:!1});let h=g.parentSampled??c,i=g.spanAttributes,j=b.getPropagationContext(),[k,l,m]=b.getScopeData().sdkProcessingMetadata[eY]?[!1]:function(a,b,c){let d,e;if(!de(a))return[!1];"function"==typeof a.tracesSampler?(d=a.tracesSampler({...b,inheritOrSampleWith:a=>"number"==typeof b.parentSampleRate?b.parentSampleRate:"boolean"==typeof b.parentSampled?Number(b.parentSampled):a}),e=!0):void 0!==b.parentSampled?d=b.parentSampled:void 0!==a.tracesSampleRate&&(d=a.tracesSampleRate,e=!0);let f=dk(d);if(void 0===f)return Z&&av.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(d)} of type ${JSON.stringify(typeof d)}.`),[!1];if(!f)return Z&&av.log(`[Tracing] Discarding transaction because ${"function"==typeof a.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,f,e];let g=c<f;return!g&&Z&&av.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(d)})`),[g,f,e]}(e,{name:f,parentSampled:h,attributes:i,parentSampleRate:dk(j.dsc?.sample_rate)},j.sampleRand),n=new eV({...a,attributes:{[cT]:"custom",[cU]:void 0!==l&&m?l:void 0,...i},sampled:k});return!k&&d&&(Z&&av.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),d.recordDroppedEvent("sample_rate","transaction")),d&&d.emit("spanStart",n),n}function e8(a,b){if(b)return b;if(null===b)return;let c=a[aU];if(!c)return;let d=a6();return(d?d.getOptions():{}).parentSpanIsAlwaysRootSpan?dD(c):c}function e9(a){return void 0!==a?b=>e1(a,b):a=>a()}let fa=["trace","debug","info","warn","error","fatal"];function fb(a={}){let b=new Set(a.levels??fa),c=a.client;return{log(a){let{type:d,level:e,message:f,args:g,tag:h,date:i,...j}=a,k=c||a6();if(!k)return;let l=function(a,b){if("verbose"===a)return"debug";if("silent"===a)return"trace";if(a){let b=fc[a];if(b)return b}if("number"==typeof b){let a=fd[b];if(a)return a}return"info"}(d,e);if(!b.has(l))return;let{normalizeDepth:m=3,normalizeMaxBreadth:n=1e3}=k.getOptions(),o=[];f&&o.push(f),g&&g.length>0&&o.push(eM(g,m,n));let p=o.join(" ");j["sentry.origin"]="auto.log.consola",h&&(j["consola.tag"]=h),d&&(j["consola.type"]=d),null!=e&&"number"==typeof e&&(j["consola.level"]=e),eJ({level:l,message:p,attributes:j})}}}let fc={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},fd={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"},fe=Symbol.for("SentryBufferFullError");function ff(a=100){let b=new Set;return{get $(){return Array.from(b)},add:function(c){if(!(b.size<a))return cR(fe);let d=c();return b.add(d),d.then(()=>{b.delete(d)},()=>{b.delete(d)}),d},drain:function(a){if(!b.size)return cQ(!0);let c=Promise.allSettled(Array.from(b)).then(()=>!0);return a?Promise.race([c,new Promise(b=>setTimeout(()=>b(!1),a))]):c}}}function fg(a,b=Date.now()){let c=parseInt(`${a}`,10);if(!isNaN(c))return 1e3*c;let d=Date.parse(`${a}`);return isNaN(d)?6e4:d-b}function fh(a,b,c=Date.now()){return(a[b]||a.all||0)>c}function fi(a,{statusCode:b,headers:c},d=Date.now()){let e={...a},f=c?.["x-sentry-rate-limits"],g=c?.["retry-after"];if(f)for(let a of f.trim().split(",")){let[b,c,,,f]=a.split(":",5),g=parseInt(b,10),h=(isNaN(g)?60:g)*1e3;if(c)for(let a of c.split(";"))"metric_bucket"===a?(!f||f.split(";").includes("custom"))&&(e[a]=d+h):e[a]=d+h;else e.all=d+h}else g?e.all=d+fg(g,d):429===b&&(e.all=d+6e4);return e}function fj(a,b,c=ff(a.bufferSize||64)){let d={};return{send:function(e){let f=[];if(eA(e,(b,c)=>{let e=eE[c];fh(d,e)?a.recordDroppedEvent("ratelimit_backoff",e):f.push(b)}),0===f.length)return Promise.resolve({});let g=ez(e[0],f),h=b=>{eA(g,(c,d)=>{a.recordDroppedEvent(b,eE[d])})};return c.add(()=>b({body:eD(g)}).then(a=>(void 0!==a.statusCode&&(a.statusCode<200||a.statusCode>=300)&&Z&&av.warn(`Sentry responded with status code ${a.statusCode} to sent event.`),d=fi(d,a),a),a=>{throw h("network_error"),Z&&av.error("Encountered error running transport request:",a),a})).then(a=>a,a=>{if(a===fe)return Z&&av.error("Skipped sending event because buffer is full."),h("queue_overflow"),Promise.resolve({});throw a})},flush:a=>c.drain(a)}}let fk=()=>{let a;return{name:"Dedupe",processEvent(b){if(b.type)return b;try{var c,d,e,f,g,h;let i,j,k,l;if(c=b,(d=a)&&(e=c,f=d,i=e.message,j=f.message,(i||j)&&(!i||j)&&(i||!j)&&i===j&&fm(e,f)&&fl(e,f)&&1||(g=c,h=d,k=fn(h),l=fn(g),k&&l&&k.type===l.type&&k.value===l.value&&fm(g,h)&&fl(g,h))))return Z&&av.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return a=b}}};function fl(a,b){let c=dV(a),d=dV(b);if(!c&&!d)return!0;if(c&&!d||!c&&d||d.length!==c.length)return!1;for(let a=0;a<d.length;a++){let b=d[a],e=c[a];if(b.filename!==e.filename||b.lineno!==e.lineno||b.colno!==e.colno||b.function!==e.function)return!1}return!0}function fm(a,b){let c=a.fingerprint,d=b.fingerprint;if(!c&&!d)return!0;if(c&&!d||!c&&d)return!1;try{return c.join("")===d.join("")}catch{return!1}}function fn(a){return a.exception?.values?.[0]}function fo(a){let b=[];a.message&&b.push(a.message);try{let c=a.exception.values[a.exception.values.length-1];c?.value&&(b.push(c.value),c.type&&b.push(`${c.type}: ${c.value}`))}catch{}return b}let fp=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],fq=(a={})=>{let b;return{name:"EventFilters",setup(c){b=fs(a,c.getOptions())},processEvent:(c,d,e)=>(b||(b=fs(a,e.getOptions())),!function(a,b){if(a.type){if("transaction"===a.type&&function(a,b){if(!b?.length)return!1;let c=a.transaction;return!!c&&aH(c,b)}(a,b.ignoreTransactions))return Z&&av.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${aK(a)}`),!0}else{var c,d,e;if(c=a,d=b.ignoreErrors,d?.length&&fo(c).some(a=>aH(a,d)))return Z&&av.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${aK(a)}`),!0;if(e=a,e.exception?.values?.length&&!e.message&&!e.exception.values.some(a=>a.stacktrace||a.type&&"Error"!==a.type||a.value))return Z&&av.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${aK(a)}`),!0;if(function(a,b){if(!b?.length)return!1;let c=ft(a);return!!c&&aH(c,b)}(a,b.denyUrls))return Z&&av.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${aK(a)}.
Url: ${ft(a)}`),!0;if(!function(a,b){if(!b?.length)return!0;let c=ft(a);return!c||aH(c,b)}(a,b.allowUrls))return Z&&av.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${aK(a)}.
Url: ${ft(a)}`),!0}return!1}(c,b)?c:null)}},fr=(a={})=>({...fq(a),name:"InboundFilters"});function fs(a={},b={}){return{allowUrls:[...a.allowUrls||[],...b.allowUrls||[]],denyUrls:[...a.denyUrls||[],...b.denyUrls||[]],ignoreErrors:[...a.ignoreErrors||[],...b.ignoreErrors||[],...a.disableErrorDefaults?[]:fp],ignoreTransactions:[...a.ignoreTransactions||[],...b.ignoreTransactions||[]]}}function ft(a){try{let b=[...a.exception?.values??[]].reverse().find(a=>a.mechanism?.parent_id===void 0&&a.stacktrace?.frames?.length),c=b?.stacktrace?.frames;return c?function(a=[]){for(let b=a.length-1;b>=0;b--){let c=a[b];if(c&&"<anonymous>"!==c.filename&&"[native code]"!==c.filename)return c.filename||null}return null}(c):null}catch{return Z&&av.error(`Cannot extract url for event ${aK(a)}`),null}}let fu=(a={})=>{let{depth:b=3,captureErrorCause:c=!0}=a;return{name:"ExtraErrorData",processEvent(a,d,e){let{maxValueLength:f}=e.getOptions();return function(a,b={},c,d,e){if(!b.originalException||!_(b.originalException))return a;let f=b.originalException.name||b.originalException.constructor.name,g=function a(b,c,d){try{let e=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],f={};for(let a of Object.keys(b)){if(-1!==e.indexOf(a))continue;let c=b[a];f[a]=_(c)||"string"==typeof c?d?aD(`${c}`,d):`${c}`:c}if(c&&void 0!==b.cause&&(_(b.cause)?f.cause={[b.cause.name||b.cause.constructor.name]:a(b.cause,!1,d)}:f.cause=b.cause),"function"==typeof b.toJSON){let a=b.toJSON();for(let b of Object.keys(a)){let c=a[b];f[b]=_(c)?c.toString():c}}return f}catch(a){Z&&av.error("Unable to extract extra data from the Error object:",a)}return null}(b.originalException,d,e);if(g){let b={...a.contexts},d=dW(g,c);return ag(d)&&(ax(d,"__sentry_skip_normalization__",!0),b[f]=d),{...a,contexts:b}}return a}(a,d,b,c,f)}}},fv="flag.evaluation.";function fw(a){let b=a1().getScopeData().contexts.flags,c=b?b.values:[];return c.length&&(void 0===a.contexts&&(a.contexts={}),a.contexts.flags={values:[...c]}),a}function fx(a,b,c=100){let d=a1().getScopeData().contexts;d.flags||(d.flags={values:[]}),function(a,b,c,d){if("boolean"!=typeof c)return;if(a.length>d){Z&&av.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${d}`);return}let e=a.findIndex(a=>a.flag===b);-1!==e&&a.splice(e,1),a.length===d&&a.shift(),a.push({flag:b,result:c})}(d.flags.values,a,b,c)}function fy(a,b,c=10){if("boolean"!=typeof b)return;let d=dE();if(!d)return;let e=dw(d).data;`${fv}${a}`in e?d.setAttribute(`${fv}${a}`,b):Object.keys(e).filter(a=>a.startsWith(fv)).length<c&&d.setAttribute(`${fv}${a}`,b)}let fz=()=>({name:"FeatureFlags",processEvent:(a,b,c)=>fw(a),addFeatureFlag(a,b){fx(a,b),fy(a,b)}}),fA=new WeakMap,fB=()=>({name:"FunctionToString",setupOnce(){i=Function.prototype.toString;try{Function.prototype.toString=function(...a){let b=az(this),c=fA.has(a6())&&void 0!==b?b:this;return i.apply(c,a)}}catch{}},setup(a){fA.set(a,!0)}});function fC(a={}){let b=a.client||a6();if(!ea()||!b)return{};let c=a0(W());if(c.getTraceData)return c.getTraceData(a);let d=a.scope||a1(),e=a.span||dE(),f=e?ds(e):function(a){let{traceId:b,sampled:c,propagationSpanId:d}=a.getPropagationContext();return dn(b,d,c)}(d),g=c5(e?dK(e):dJ(b,d));if(!dl.test(f))return av.warn("Invalid sentry-trace data. Cannot generate trace data"),{};let h={"sentry-trace":f,baggage:g};if(a.propagateTraceparent){let a=e?function(a){let{traceId:b,spanId:c}=a.spanContext();return dp(b,c,dx(a))}(e):function(a){let{traceId:b,sampled:c,propagationSpanId:d}=a.getPropagationContext();return dp(b,d,c)}(d);a&&(h.traceparent=a)}return h}let fD="gen_ai.system",fE="gen_ai.request.model",fF="gen_ai.request.stream",fG="gen_ai.request.temperature",fH="gen_ai.request.max_tokens",fI="gen_ai.request.frequency_penalty",fJ="gen_ai.request.presence_penalty",fK="gen_ai.request.top_p",fL="gen_ai.request.top_k",fM="gen_ai.response.finish_reasons",fN="gen_ai.response.model",fO="gen_ai.response.id",fP="gen_ai.usage.input_tokens",fQ="gen_ai.usage.output_tokens",fR="gen_ai.usage.total_tokens",fS="gen_ai.operation.name",fT="gen_ai.request.messages",fU="gen_ai.response.text",fV="gen_ai.request.available_tools",fW="gen_ai.response.streaming",fX="gen_ai.response.tool_calls",fY="anthropic.response.timestamp",fZ=a=>new TextEncoder().encode(a).length,f$=a=>fZ(JSON.stringify(a));function f_(a,b){if(fZ(a)<=b)return a;let c=0,d=a.length,e="";for(;c<=d;){let f=Math.floor((c+d)/2),g=a.slice(0,f);fZ(g)<=b?(e=g,c=f+1):d=f-1}return e}function f0(a,b){return"string"==typeof a?b:{...a,text:b}}function f1(a){return a.includes("messages")?"messages":a.includes("completions")?"completions":a.includes("models")?"models":a.includes("chat")?"chat":a.split(".").pop()||"unknown"}function f2(a){return`gen_ai.${f1(a)}`}function f3(a,b){return a?`${a}.${b}`:b}function f4(a,b,c,d,e){void 0!==b&&a.setAttributes({[fP]:b}),void 0!==c&&a.setAttributes({[fQ]:c}),(void 0!==b||void 0!==c||void 0!==d||void 0!==e)&&a.setAttributes({[fR]:(b??0)+(c??0)+(d??0)+(e??0)})}function f5(a){return"string"==typeof a?f_(a,2e4):Array.isArray(a)?JSON.stringify(function(a,b){if(!Array.isArray(a)||0===a.length||2e4>=f$(a))return a;let c=a.map(f$),d=0,e=a.length;for(let b=a.length-1;b>=0;b--){let a=c[b];if(a&&d+a>2e4)break;a&&(d+=a),e=b}return e===a.length?function(a,b){if(!a||"object"!=typeof a)return[];if(null!==a&&"object"==typeof a&&"content"in a&&"string"==typeof a.content){let b=2e4-f$({...a,content:""});if(b<=0)return[];let c=f_(a.content,b);return[{...a,content:c}]}return null!==a&&"object"==typeof a&&"parts"in a&&Array.isArray(a.parts)&&a.parts.length>0?function(a,b){let{parts:c}=a,d=c.map(a=>f0(a,"")),e=b-f$({...a,parts:d});if(e<=0)return[];let f=[];for(let a of c){let b="string"==typeof a?a:a.text,c=fZ(b);if(c<=e)f.push(a),e-=c;else if(0===f.length){let c=f_(b,e);c&&f.push(f0(a,c));break}else break}return f.length>0?[{...a,parts:f}]:[]}(a,2e4):[]}(a[a.length-1],2e4):a.slice(e)}(a,0)):JSON.stringify(a)}function f6(a,b,c,d){if(a&&"object"==typeof a&&(!("type"in a)||"string"!=typeof a.type||"error"!==a.type||(d.setStatus({code:2,message:a.error?.type??"internal_error"}),dZ(a.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),0))){if("message_delta"===a.type&&a.usage&&"output_tokens"in a.usage&&"number"==typeof a.usage.output_tokens&&(b.completionTokens=a.usage.output_tokens),a.message){let c=a.message;c.id&&(b.responseId=c.id),c.model&&(b.responseModel=c.model),c.stop_reason&&b.finishReasons.push(c.stop_reason),c.usage&&("number"==typeof c.usage.input_tokens&&(b.promptTokens=c.usage.input_tokens),"number"==typeof c.usage.cache_creation_input_tokens&&(b.cacheCreationInputTokens=c.usage.cache_creation_input_tokens),"number"==typeof c.usage.cache_read_input_tokens&&(b.cacheReadInputTokens=c.usage.cache_read_input_tokens))}"content_block_start"===a.type&&"number"==typeof a.index&&a.content_block&&("tool_use"===a.content_block.type||"server_tool_use"===a.content_block.type)&&(b.activeToolBlocks[a.index]={id:a.content_block.id,name:a.content_block.name,inputJsonParts:[]});if("content_block_delta"===a.type&&a.delta){if("number"==typeof a.index&&"partial_json"in a.delta&&"string"==typeof a.delta.partial_json){let c=b.activeToolBlocks[a.index];c&&c.inputJsonParts.push(a.delta.partial_json)}c&&"string"==typeof a.delta.text&&b.responseTexts.push(a.delta.text)}!function(a,b){let c;if("content_block_stop"!==a.type||"number"!=typeof a.index)return;let d=b.activeToolBlocks[a.index];if(!d)return;let e=d.inputJsonParts.join("");try{c=e?JSON.parse(e):{}}catch{c={__unparsed:e}}b.toolCalls.push({type:"tool_use",id:d.id,name:d.name,input:c}),delete b.activeToolBlocks[a.index]}(a,b)}}async function*f7(a,b,c){let d={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(let e of a)f6(e,d,c,b),yield e}finally{d.responseId&&b.setAttributes({[fO]:d.responseId}),d.responseModel&&b.setAttributes({[fN]:d.responseModel}),f4(b,d.promptTokens,d.completionTokens,d.cacheCreationInputTokens,d.cacheReadInputTokens),b.setAttributes({[fW]:!0}),d.finishReasons.length>0&&b.setAttributes({[fM]:JSON.stringify(d.finishReasons)}),c&&d.responseTexts.length>0&&b.setAttributes({[fU]:d.responseTexts.join("")}),c&&d.toolCalls.length>0&&b.setAttributes({[fX]:JSON.stringify(d.toolCalls)}),b.end()}}let f8=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function f9(a,b){if("messages"in b){let c=f5(b.messages);a.setAttributes({[fT]:c})}if("input"in b){let c=f5(b.input);a.setAttributes({[fT]:c})}"prompt"in b&&a.setAttributes({"gen_ai.prompt":JSON.stringify(b.prompt)})}function ga(a,b,c){throw dZ(a,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:c}}}),b.isRecording()&&(b.setStatus({code:2,message:"internal_error"}),b.end()),a}function gb(a,b){let c=!!a6()?.getOptions().sendDefaultPii;return function a(b,c="",d){return new Proxy(b,{get(b,e){let f=b[e],g=f3(c,String(e));return"function"==typeof f&&f8.includes(g)?new Proxy(f,{apply(a,c,e){let h=function(a,b){let c={[fD]:"anthropic",[fS]:f1(b),[cX]:"auto.ai.anthropic"};if(a.length>0&&"object"==typeof a[0]&&null!==a[0]){let b=a[0];b.tools&&Array.isArray(b.tools)&&(c[fV]=JSON.stringify(b.tools)),c[fE]=b.model??"unknown","temperature"in b&&(c[fG]=b.temperature),"top_p"in b&&(c[fK]=b.top_p),"stream"in b&&(c[fF]=b.stream),"top_k"in b&&(c[fL]=b.top_k),"frequency_penalty"in b&&(c[fI]=b.frequency_penalty),"max_tokens"in b&&(c[fH]=b.max_tokens)}else"models.retrieve"===b||"models.get"===b?c[fE]=a[0]:c[fE]="unknown";return c}(e,g),i=h[fE]??"unknown",j=f1(g),k="object"==typeof e[0]?e[0]:void 0,l=!!k?.stream,m="messages.stream"===g;if(l||m){let c,i;return c=h[fE]??"unknown",i={name:`${j} ${c} stream-response`,op:f2(g),attributes:h},l&&!m?e$(i,async a=>{try{d.recordInputs&&k&&f9(a,k);let c=await f.apply(b,e);return f7(c,a,d.recordOutputs??!1)}catch(b){return ga(b,a,g)}}):e$(i,c=>{try{var f,h;let g;return d.recordInputs&&k&&f9(c,k),f=a.apply(b,e),h=d.recordOutputs??!1,g={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}},f.on("streamEvent",a=>{f6(a,g,h,c)}),f.on("message",()=>{c.isRecording()&&(g.responseId&&c.setAttributes({[fO]:g.responseId}),g.responseModel&&c.setAttributes({[fN]:g.responseModel}),f4(c,g.promptTokens,g.completionTokens,g.cacheCreationInputTokens,g.cacheReadInputTokens),c.setAttributes({[fW]:!0}),g.finishReasons.length>0&&c.setAttributes({[fM]:JSON.stringify(g.finishReasons)}),h&&g.responseTexts.length>0&&c.setAttributes({[fU]:g.responseTexts.join("")}),h&&g.toolCalls.length>0&&c.setAttributes({[fX]:JSON.stringify(g.toolCalls)}),c.end())}),f.on("error",a=>{dZ(a,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),c.isRecording()&&(c.setStatus({code:2,message:"stream_error"}),c.end())}),f}catch(a){return ga(a,c,g)}})}return eZ({name:`${j} ${i}`,op:f2(g),attributes:h},c=>(d.recordInputs&&k&&f9(c,k),eP(()=>a.apply(b,e),a=>{dZ(a,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:g}}})},()=>{},a=>(function(a,b,c){if(b&&"object"==typeof b){if("type"in b&&"error"===b.type)return void(b.error&&(a.setStatus({code:2,message:b.error.type||"internal_error"}),dZ(b.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}})));c&&function(a,b){if("content"in b&&Array.isArray(b.content)){a.setAttributes({[fU]:b.content.map(a=>a.text).filter(a=>!!a).join("")});let c=[];for(let a of b.content)("tool_use"===a.type||"server_tool_use"===a.type)&&c.push(a);c.length>0&&a.setAttributes({[fX]:JSON.stringify(c)})}"completion"in b&&a.setAttributes({[fU]:b.completion}),"input_tokens"in b&&a.setAttributes({[fU]:JSON.stringify(b.input_tokens)})}(a,b),"id"in b&&"model"in b&&(a.setAttributes({[fO]:b.id,[fN]:b.model}),"created"in b&&"number"==typeof b.created&&a.setAttributes({[fY]:new Date(1e3*b.created).toISOString()}),"created_at"in b&&"number"==typeof b.created_at&&a.setAttributes({[fY]:new Date(1e3*b.created_at).toISOString()}),"usage"in b&&b.usage&&f4(a,b.usage.input_tokens,b.usage.output_tokens,b.usage.cache_creation_input_tokens,b.usage.cache_read_input_tokens))}})(c,a,d.recordOutputs))))}}):"function"==typeof f?f.bind(b):f&&"object"==typeof f?a(f,g,d):f}})}(a,"",{recordInputs:c,recordOutputs:c,...b})}let gc=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],gd="chats.create";async function*ge(a,b,c){let d={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(let e of a)!function(a,b,c,d){if(!(!a||function(a,b){let c=a?.promptFeedback;if(c?.blockReason){let a=c.blockReasonMessage??c.blockReason;return b.setStatus({code:2,message:`Content blocked: ${a}`}),dZ(`Content blocked: ${a}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}(a,d))){let d;for(let e of("string"==typeof a.responseId&&(b.responseId=a.responseId),"string"==typeof a.modelVersion&&(b.responseModel=a.modelVersion),(d=a.usageMetadata)&&("number"==typeof d.promptTokenCount&&(b.promptTokens=d.promptTokenCount),"number"==typeof d.candidatesTokenCount&&(b.completionTokens=d.candidatesTokenCount),"number"==typeof d.totalTokenCount&&(b.totalTokens=d.totalTokenCount)),Array.isArray(a.functionCalls)&&b.toolCalls.push(...a.functionCalls),a.candidates??[]))for(let a of(e?.finishReason&&!b.finishReasons.includes(e.finishReason)&&b.finishReasons.push(e.finishReason),e?.content?.parts??[]))c&&a.text&&b.responseTexts.push(a.text),a.functionCall&&b.toolCalls.push({type:"function",id:a.functionCall.id,name:a.functionCall.name,arguments:a.functionCall.args})}}(e,d,c,b),yield e}finally{let a={[fW]:!0};d.responseId&&(a[fO]=d.responseId),d.responseModel&&(a[fN]=d.responseModel),void 0!==d.promptTokens&&(a[fP]=d.promptTokens),void 0!==d.completionTokens&&(a[fQ]=d.completionTokens),void 0!==d.totalTokens&&(a[fR]=d.totalTokens),d.finishReasons.length&&(a[fM]=JSON.stringify(d.finishReasons)),c&&d.responseTexts.length&&(a[fU]=d.responseTexts.join("")),c&&d.toolCalls.length&&(a[fX]=JSON.stringify(d.toolCalls)),b.setAttributes(a),b.end()}}function gf(a,b){if("model"in a&&"string"==typeof a.model)return a.model;if(b&&"object"==typeof b){if("model"in b&&"string"==typeof b.model)return b.model;if("modelVersion"in b&&"string"==typeof b.modelVersion)return b.modelVersion}return"unknown"}function gg(a,b){if("contents"in b){let c=f5(b.contents);a.setAttributes({[fT]:c})}if("message"in b){let c=f5(b.message);a.setAttributes({[fT]:c})}if("history"in b){let c=f5(b.history);a.setAttributes({[fT]:c})}}function gh(a,b,c,d){let e=b===gd;return new Proxy(a,{apply(a,f,g){let h=g[0],i=function(a,b,c){let d={[fD]:"google_genai",[fS]:f1(a),[cX]:"auto.ai.google_genai"};if(b){if(d[fE]=gf(b,c),"config"in b&&"object"==typeof b.config&&b.config){let a,c=b.config;if(Object.assign(d,(a={},"temperature"in c&&"number"==typeof c.temperature&&(a[fG]=c.temperature),"topP"in c&&"number"==typeof c.topP&&(a[fK]=c.topP),"topK"in c&&"number"==typeof c.topK&&(a[fL]=c.topK),"maxOutputTokens"in c&&"number"==typeof c.maxOutputTokens&&(a[fH]=c.maxOutputTokens),"frequencyPenalty"in c&&"number"==typeof c.frequencyPenalty&&(a[fI]=c.frequencyPenalty),"presencePenalty"in c&&"number"==typeof c.presencePenalty&&(a[fJ]=c.presencePenalty),a)),"tools"in c&&Array.isArray(c.tools)){let a=c.tools.map(a=>a.functionDeclarations);d[fV]=JSON.stringify(a)}}}else d[fE]=gf({},c);return d}(b,h,c),j=i[fE]??"unknown",k=f1(b);return b.includes("Stream")||b.endsWith("generateContentStream")||b.endsWith("sendMessageStream")?e$({name:`${k} ${j} stream-response`,op:f2(b),attributes:i},async e=>{try{d.recordInputs&&h&&gg(e,h);let b=await a.apply(c,g);return ge(b,e,!!d.recordOutputs)}catch(a){throw e.setStatus({code:2,message:"internal_error"}),dZ(a,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:b}}}),e.end(),a}}):eZ({name:e?`${k} ${j} create`:`${k} ${j}`,op:f2(b),attributes:i},f=>(d.recordInputs&&h&&gg(f,h),eP(()=>a.apply(c,g),a=>{dZ(a,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:b}}})},()=>{},a=>{e||function(a,b,c){if(b&&"object"==typeof b){if(b.usageMetadata&&"object"==typeof b.usageMetadata){let c=b.usageMetadata;"number"==typeof c.promptTokenCount&&a.setAttributes({[fP]:c.promptTokenCount}),"number"==typeof c.candidatesTokenCount&&a.setAttributes({[fQ]:c.candidatesTokenCount}),"number"==typeof c.totalTokenCount&&a.setAttributes({[fR]:c.totalTokenCount})}if(c&&Array.isArray(b.candidates)&&b.candidates.length>0){let c=b.candidates.map(a=>a.content?.parts&&Array.isArray(a.content.parts)?a.content.parts.map(a=>"string"==typeof a.text?a.text:"").filter(a=>a.length>0).join(""):"").filter(a=>a.length>0);c.length>0&&a.setAttributes({[fU]:c.join("")})}if(c&&b.functionCalls){let c=b.functionCalls;Array.isArray(c)&&c.length>0&&a.setAttributes({[fX]:JSON.stringify(c)})}}}(f,a,d.recordOutputs)})))}})}function gi(a,b){let c=!!a6()?.getOptions().sendDefaultPii;return function a(b,c="",d){return new Proxy(b,{get:(b,e,f)=>{let g=Reflect.get(b,e,f),h=f3(c,String(e));if("function"==typeof g&&function(a){if(gc.includes(a))return!0;let b=a.split(".").pop();return gc.includes(b)}(h)){if(h===gd){let c=gh(g,h,b,d);return function(...b){let e=c(...b);return e&&"object"==typeof e?a(e,"chat",d):e}}return gh(g,h,b,d)}return"function"==typeof g?g.bind(b):g&&"object"==typeof g?a(g,h,d):g}})}(a,"",{recordInputs:c,recordOutputs:c,...b})}let gj=["responses.create","chat.completions.create"],gk=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta","response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"];function gl(a){return a.includes("chat.completions")?"chat":a.includes("responses")?"responses":a.split(".").pop()||"unknown"}function gm(a){return`gen_ai.${gl(a)}`}function gn(a,b,c,d){void 0!==b&&a.setAttributes({"openai.usage.prompt_tokens":b,[fP]:b}),void 0!==c&&a.setAttributes({"openai.usage.completion_tokens":c,[fQ]:c}),void 0!==d&&a.setAttributes({[fR]:d})}function go(a,b,c,d){a.setAttributes({"openai.response.id":b,[fO]:b}),a.setAttributes({"openai.response.model":c,[fN]:c}),a.setAttributes({"openai.response.timestamp":new Date(1e3*d).toISOString()})}async function*gp(a,b,c){let d={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(let e of a){if(null!==e&&"object"==typeof e&&"object"in e&&"chat.completion.chunk"===e.object){for(let a of(d.responseId=e.id??d.responseId,d.responseModel=e.model??d.responseModel,d.responseTimestamp=e.created??d.responseTimestamp,e.usage&&(d.promptTokens=e.usage.prompt_tokens,d.completionTokens=e.usage.completion_tokens,d.totalTokens=e.usage.total_tokens),e.choices??[]))c&&(a.delta?.content&&d.responseTexts.push(a.delta.content),a.delta?.tool_calls&&function(a,b){for(let c of a){let a=c.index;if(void 0!==a&&c.function)if(a in b.chatCompletionToolCalls){let d=b.chatCompletionToolCalls[a];c.function.arguments&&d?.function&&(d.function.arguments+=c.function.arguments)}else b.chatCompletionToolCalls[a]={...c,function:{name:c.function.name,arguments:c.function.arguments||""}}}}(a.delta.tool_calls,d)),a.finish_reason&&d.finishReasons.push(a.finish_reason)}else null!==e&&"object"==typeof e&&"type"in e&&"string"==typeof e.type&&e.type.startsWith("response.")&&function(a,b,c,d){if(!(a&&"object"==typeof a))return b.eventTypes.push("unknown:non-object");if(a instanceof Error){d.setStatus({code:2,message:"internal_error"}),dZ(a,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if("type"in a){if(!gk.includes(a.type))return b.eventTypes.push(a.type);if(c&&("response.output_item.done"===a.type&&"item"in a&&b.responsesApiToolCalls.push(a.item),"response.output_text.delta"===a.type&&"delta"in a&&a.delta))return b.responseTexts.push(a.delta);if("response"in a){let{response:d}=a;b.responseId=d.id??b.responseId,b.responseModel=d.model??b.responseModel,b.responseTimestamp=d.created_at??b.responseTimestamp,d.usage&&(b.promptTokens=d.usage.input_tokens,b.completionTokens=d.usage.output_tokens,b.totalTokens=d.usage.total_tokens),d.status&&b.finishReasons.push(d.status),c&&d.output_text&&b.responseTexts.push(d.output_text)}}}(e,d,c,b);yield e}}finally{go(b,d.responseId,d.responseModel,d.responseTimestamp),gn(b,d.promptTokens,d.completionTokens,d.totalTokens),b.setAttributes({[fW]:!0}),d.finishReasons.length&&b.setAttributes({[fM]:JSON.stringify(d.finishReasons)}),c&&d.responseTexts.length&&b.setAttributes({[fU]:d.responseTexts.join("")});let a=[...Object.values(d.chatCompletionToolCalls),...d.responsesApiToolCalls];a.length>0&&b.setAttributes({[fX]:JSON.stringify(a)}),b.end()}}function gq(a,b){if("messages"in b){let c=f5(b.messages);a.setAttributes({[fT]:c})}if("input"in b){let c=f5(b.input);a.setAttributes({[fT]:c})}}function gr(a,b){return function a(b,c="",d){return new Proxy(b,{get(b,e){var f;let g=b[e],h=(f=String(e),c?`${c}.${f}`:f);return"function"==typeof g&&gj.includes(h)?async function(...a){let c,e,f,i=d||(c=a1().getClient(),f=!!(e=c?.getIntegrationByName("OpenAI"))&&!!c?.getOptions().sendDefaultPii,{recordInputs:e?.options?.recordInputs??f,recordOutputs:e?.options?.recordOutputs??f}),j=function(a,b){let c={[fD]:"openai",[fS]:gl(b),[cX]:"auto.ai.openai"};if(a.length>0&&"object"==typeof a[0]&&null!==a[0]){let b=a[0],d=[...Array.isArray(b.tools)?b.tools:[],...b.web_search_options&&"object"==typeof b.web_search_options?[{type:"web_search_options",...b.web_search_options}]:[]];d.length>0&&(c[fV]=JSON.stringify(d))}if(a.length>0&&"object"==typeof a[0]&&null!==a[0]){let b=a[0];c[fE]=b.model??"unknown","temperature"in b&&(c[fG]=b.temperature),"top_p"in b&&(c[fK]=b.top_p),"frequency_penalty"in b&&(c[fI]=b.frequency_penalty),"presence_penalty"in b&&(c[fJ]=b.presence_penalty),"stream"in b&&(c[fF]=b.stream)}else c[fE]="unknown";return c}(a,h),k=j[fE]||"unknown",l=gl(h),m=a[0];return m&&"object"==typeof m&&!0===m.stream?e$({name:`${l} ${k} stream-response`,op:gm(h),attributes:j},async c=>{try{i.recordInputs&&a[0]&&"object"==typeof a[0]&&gq(c,a[0]);let d=await g.apply(b,a);return gp(d,c,i.recordOutputs??!1)}catch(a){throw c.setStatus({code:2,message:"internal_error"}),dZ(a,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:h}}}),c.end(),a}}):eZ({name:`${l} ${k}`,op:gm(h),attributes:j},async c=>{try{i.recordInputs&&a[0]&&"object"==typeof a[0]&&gq(c,a[0]);let d=await g.apply(b,a);return!function(a,b,c){if(b&&"object"==typeof b){if(null!==b&&"object"==typeof b&&"object"in b&&"chat.completion"===b.object){if(go(a,b.id,b.model,b.created),b.usage&&gn(a,b.usage.prompt_tokens,b.usage.completion_tokens,b.usage.total_tokens),Array.isArray(b.choices)){let d=b.choices.map(a=>a.finish_reason).filter(a=>null!==a);if(d.length>0&&a.setAttributes({[fM]:JSON.stringify(d)}),c){let c=b.choices.map(a=>a.message?.tool_calls).filter(a=>Array.isArray(a)&&a.length>0).flat();c.length>0&&a.setAttributes({[fX]:JSON.stringify(c)})}}if(c&&b.choices?.length){let c=b.choices.map(a=>a.message?.content||"");a.setAttributes({[fU]:JSON.stringify(c)})}}else if(null!==b&&"object"==typeof b&&"object"in b&&"response"===b.object){if(go(a,b.id,b.model,b.created_at),b.status&&a.setAttributes({[fM]:JSON.stringify([b.status])}),b.usage&&gn(a,b.usage.input_tokens,b.usage.output_tokens,b.usage.total_tokens),c&&Array.isArray(b.output)&&b.output.length>0){let c=b.output.filter(a=>"object"==typeof a&&null!==a&&"function_call"===a.type);c.length>0&&a.setAttributes({[fX]:JSON.stringify(c)})}c&&b.output_text&&a.setAttributes({[fU]:b.output_text})}}}(c,d,i.recordOutputs),d}catch(a){throw dZ(a,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:h}}}),a}})}:"function"==typeof g?g.bind(b):g&&"object"==typeof g?a(g,h,d):g}})}(a,"",b)}let gs=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],gt=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],gu={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},gv=["select","insert","upsert","update","delete"];function gw(a){try{a.__SENTRY_INSTRUMENTED__=!0}catch{}}function gx(a){try{return a.__SENTRY_INSTRUMENTED__}catch{return!1}}function gy(a,b=!1){return new Proxy(a,{apply:(c,d,e)=>eZ({name:`auth ${b?"(admin) ":""}${a.name}`,attributes:{[cX]:"auto.db.supabase",[cW]:"db","db.system":"postgresql","db.operation":`auth.${b?"admin.":""}${a.name}`}},a=>Reflect.apply(c,d,e).then(b=>(b&&"object"==typeof b&&"error"in b&&b.error?(a.setStatus({code:2}),dZ(b.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):a.setStatus({code:1}),a.end(),b)).catch(b=>{throw a.setStatus({code:2}),a.end(),dZ(b,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),b}).then(...e))})}let gz=a=>{var b;if(!a){Z&&av.warn("Supabase integration was not installed because no Supabase client was provided.");return}gx((b=a.constructor===Function?a:a.constructor).prototype.from)||(b.prototype.from=new Proxy(b.prototype.from,{apply(a,b,c){let d=Reflect.apply(a,b,c);return function(a){for(let b of gv)gx(a.prototype[b])||(a.prototype[b]=new Proxy(a.prototype[b],{apply(a,c,d){let e=Reflect.apply(a,c,d),f=e.constructor;return Z&&av.log(`Instrumenting ${b} operation's PostgRESTFilterBuilder`),gx(f.prototype.then)||(f.prototype.then=new Proxy(f.prototype.then,{apply(a,b,c){let d=function(a,b={}){switch(a){case"GET":return"select";case"POST":if(b.Prefer?.includes("resolution="))return"upsert";return"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}(b.method,b.headers);if(!gv.includes(d)||!b?.url?.pathname||"string"!=typeof b.url.pathname)return Reflect.apply(a,b,c);let e=b.url.pathname.split("/"),f=e.length>0?e[e.length-1]:"",g=[];for(let[a,c]of b.url.searchParams.entries())g.push(function(a,b){let c;if(""===b||"*"===b)return"select(*)";if("select"===a)return`select(${b})`;if("or"===a||a.endsWith(".or"))return`${a}${b}`;let[d,...e]=b.split(".");return c=d?.startsWith("fts")?"textSearch":d?.startsWith("plfts")?"textSearch[plain]":d?.startsWith("phfts")?"textSearch[phrase]":d?.startsWith("wfts")?"textSearch[websearch]":d&&gu[d]||"filter",`${c}(${a}, ${e.join(".")})`}(a,c));let h=Object.create(null);if(ag(b.body))for(let[a,c]of Object.entries(b.body))h[a]=c;let i=`${"select"===d?"":`${d}${h?"(...) ":""}`}${g.join(" ")} from(${f})`,j={"db.table":f,"db.schema":b.schema,"db.url":b.url.origin,"db.sdk":b.headers["X-Client-Info"],"db.system":"postgresql","db.operation":d,[cX]:"auto.db.supabase",[cW]:"db"};return g.length&&(j["db.query"]=g),Object.keys(h).length&&(j["db.body"]=h),eZ({name:i,attributes:j},e=>Reflect.apply(a,b,[]).then(a=>{if(e&&(a&&"object"==typeof a&&"status"in a&&dg(e,a.status||500),e.end()),a.error){let b=Error(a.error.message);a.error.code&&(b.code=a.error.code),a.error.details&&(b.details=a.error.details);let c={};g.length&&(c.query=g),Object.keys(h).length&&(c.body=h),dZ(b,a=>(a.addEventProcessor(a=>(aM(a,{handled:!1,type:"auto.db.supabase.postgres"}),a)),a.setContext("supabase",c),a))}let b={type:"supabase",category:`db.${d}`,message:i},c={};return g.length&&(c.query=g),Object.keys(h).length&&(c.body=h),Object.keys(c).length&&(b.data=c),en(b),a},a=>{throw e&&(dg(e,500),e.end()),a}).then(...c))}}),gw(f.prototype.then)),e}}),gw(a.prototype[b]))}(d.constructor),d}}),gw(b.prototype.from));let c=a.auth;if(!(!c||gx(a.auth))){for(let b of gs){let d=c[b];d&&"function"==typeof a.auth[b]&&(a.auth[b]=gy(d))}for(let b of gt){let d=c.admin[b];d&&"function"==typeof a.auth.admin[b]&&(a.auth.admin[b]=gy(d,!0))}gw(a.auth)}},gA=a=>{let b;return b=a.supabaseClient,{setupOnce(){gz(b)},name:"Supabase"}};function gB(a,b,c,d,e){eJ({level:a,message:b,attributes:c,severityNumber:e},d)}function gC(a,b,{scope:c}={}){gB("trace",a,b,c)}function gD(a,b,{scope:c}={}){gB("debug",a,b,c)}function gE(a,b,{scope:c}={}){gB("info",a,b,c)}function gF(a,b,{scope:c}={}){gB("warn",a,b,c)}function gG(a,b,{scope:c}={}){gB("error",a,b,c)}function gH(a,b,{scope:c}={}){gB("fatal",a,b,c)}function gI(a,...b){let c=new String(String.raw(a,...b));return c.__sentry_template_string__=a.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),c.__sentry_template_values__=b,c}a.s(["debug",()=>gD,"error",()=>gG,"fatal",()=>gH,"info",()=>gE,"trace",()=>gC,"warn",()=>gF],555),a.i(555),a.s(["debug",()=>gD,"error",()=>gG,"fatal",()=>gH,"fmt",()=>gI,"info",()=>gE,"trace",()=>gC,"warn",()=>gF],59108);var gJ=a.i(59108),gJ=gJ;function gK(a){let b=a.protocol?`${a.protocol}:`:"",c=a.port?`:${a.port}`:"";return`${b}//${a.host}${c}${a.path?`/${a.path}`:""}/api/`}function gL(a,b,c){let d;return b||`${gK(a)}${a.projectId}/envelope/?${d={sentry_version:"7"},a.publicKey&&(d.sentry_key=a.publicKey),c&&(d.sentry_client=`${c.name}/${c.version}`),new URLSearchParams(d).toString()}`}function gM(a,b){let c;return eA(a,(a,d)=>(b.includes(d)&&(c=Array.isArray(a)?a[1]:void 0),!!c)),c}function gN(a,b){return c=>{let d=a(c),e=new Map;function f(b,d){let f=d?`${b}:${d}`:b,g=e.get(f);if(!g){let h=da(b);if(!h)return;let i=gL(h,c.tunnel);g=d?(b=>{let c=a(b);return{...c,send:async a=>{let b=gM(a,["event","transaction","profile","replay_event"]);return b&&(b.release=d),c.send(a)}}})({...c,url:i}):a({...c,url:i}),e.set(f,g)}return[b,g]}return{send:async function(a){let c=b({envelope:a,getEvent:function(b){return gM(a,b?.length?b:["event"])}}).map(a=>"string"==typeof a?f(a,void 0):f(a.dsn,a.release)).filter(a=>!!a),e=c.length?c:[["",d]];return(await Promise.all(e.map(([b,c])=>c.send(ez(b?{...a[0],dsn:b}:a[0],a[1])))))[0]},flush:async function(a){let b=[...e.values(),d];return(await Promise.all(b.map(b=>b.flush(a)))).every(a=>a)}}}}function gO(a,b,c,d=!0){!c||!d&&b in a||(a[b]=c)}function gP(a,b){var c;let d=gR(),e=(c=a,gR().get(c));void 0===e?d.set(a,[b]):(d.set(a,[...e,b]),e.length>=1e3&&gQ(a,e))}function gQ(a,b){var c,d,e,f;let g,h=b??(f=a,gR().get(f))??[];if(0===h.length)return;let i=a.getOptions(),j=(c=i._metadata,d=i.tunnel,e=a.getDsn(),g={},c?.sdk&&(g.sdk={name:c.sdk.name,version:c.sdk.version}),d&&e&&(g.dsn=c9(e)),ez(g,[[{type:"trace_metric",item_count:h.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:h}]]));gR().set(a,[]),a.emit("flushMetrics"),a.sendEnvelope(j)}function gR(){return Y("clientToMetricBufferMap",()=>new WeakMap)}function gS(a,b,c,d){!function(a,b){let c=b?.scope??a1(),d=b?.captureSerializedMetric??gP,e=c?.getClient()??a6();if(!e){Z&&av.warn("No client available to capture metric.");return}let{_experiments:f,enableMetrics:g,beforeSendMetric:h}=e.getOptions();if(!(g??f?.enableMetrics??!0)){Z&&av.warn("metrics option not enabled, metric will not be captured.");return}let i=function(a,b,c){var d;let e,{release:f,environment:g}=b.getOptions(),h={...a.attributes},{user:{id:i,email:j,username:k}}=(d=c,dM(e=a3().getScopeData(),a2().getScopeData()),dM(e,d.getScopeData()),e);gO(h,"user.id",i,!1),gO(h,"user.email",j,!1),gO(h,"user.name",k,!1),gO(h,"sentry.release",f),gO(h,"sentry.environment",g);let{name:l,version:m}=b.getSdkMetadata()?.sdk??{};gO(h,"sentry.sdk.name",l),gO(h,"sentry.sdk.version",m);let n=b.getIntegrationByName("Replay"),o=n?.getReplayId(!0);return gO(h,"sentry.replay_id",o),o&&n?.getRecordingMode()==="buffer"&&gO(h,"sentry._internal.replay_is_buffering",!0),{...a,attributes:h}}(a,e,c),j=h||f?.beforeSendMetric,k=j?j(i):i;if(!k){Z&&av.log("`beforeSendMetric` returned `null`, will not send metric.");return}let l=function(a,b,c){let d={};for(let b in a.attributes)void 0!==a.attributes[b]&&(d[b]=function(a){switch(typeof a){case"number":if(Number.isInteger(a))return{value:a,type:"integer"};return{value:a,type:"double"};case"boolean":return{value:a,type:"boolean"};case"string":return{value:a,type:"string"};default:{let b="";try{b=JSON.stringify(a)??""}catch{}return{value:b,type:"string"}}}}(a.attributes[b]));let[,e]=ex(b,c),f=c[aU],g=f?f.spanContext().traceId:e?.trace_id,h=f?f.spanContext().spanId:void 0;return{timestamp:aP(),trace_id:g??"",span_id:h,name:a.name,type:a.type,unit:a.unit,value:a.value,attributes:d}}(k,e,c);Z&&av.log("[Metric]",l),d(e,l),e.emit("afterCaptureMetric",i)}({type:a,name:b,value:c,unit:d?.unit,attributes:d?.attributes},{scope:d?.scope})}function gT(a,b=1,c){gS("counter",a,b,c)}function gU(a,b,c){gS("gauge",a,b,c)}function gV(a,b,c){gS("distribution",a,b,c)}a.s(["count",()=>gT,"distribution",()=>gV,"gauge",()=>gU],37967);var gW=a.i(37967),gW=gW;let gX=new Map,gY=new Set;function gZ(a,b){b.exception?.values?.forEach(b=>{b.stacktrace?.frames?.forEach(b=>{if(!b.filename||b.module_metadata)return;let c=function(a,b){if(U._sentryModuleMetadata)for(let b of Object.keys(U._sentryModuleMetadata)){let c=U._sentryModuleMetadata[b];if(!gY.has(b)){for(let d of(gY.add(b),a(b).reverse()))if(d.filename){gX.set(d.filename,c);break}}}return gX.get(b)}(a,b.filename);c&&(b.module_metadata=c)})})}function g$(a){a.exception?.values?.forEach(a=>{a.stacktrace?.frames?.forEach(a=>{delete a.module_metadata})})}let g_=()=>({name:"ModuleMetadata",setup(a){a.on("beforeEnvelope",a=>{eA(a,(a,b)=>{if("event"===b){let b=Array.isArray(a)?a[1]:void 0;b&&(g$(b),a[1]=b)}})}),a.on("applyFrameMetadata",b=>{b.type||gZ(a.getOptions().stackParser,b)})}}),g0=null;function g1(a){let b="error";eq(b,a),er(b,g2)}function g2(){g0=U.onerror,U.onerror=function(a,b,c,d,e){return es("error",{column:d,error:e,line:c,msg:a,url:b}),!!g0&&g0.apply(this,arguments)},U.onerror.__SENTRY_INSTRUMENTED__=!0}let g3=null;function g4(a){let b="unhandledrejection";eq(b,a),er(b,g5)}function g5(){g3=U.onunhandledrejection,U.onunhandledrejection=function(a){return es("unhandledrejection",a),!g3||g3.apply(this,arguments)},U.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}let g6=!1;function g7(){g6||(a.tag="sentry_tracingErrorCallback",g6=!0,g1(a),g4(a));function a(){let a=dE(),b=a&&dD(a);if(b){let a="internal_error";Z&&av.log(`[Tracing] Root span: ${a} -> Global error occurred`),b.setStatus({code:2,message:a})}}}let g8=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function g9(...a){let b="",c=!1;for(let d=a.length-1;d>=-1&&!c;d--){let e=d>=0?a[d]:"/";e&&(b=`${e}/${b}`,c="/"===e.charAt(0))}return b=(function(a,b){let c=0;for(let b=a.length-1;b>=0;b--){let d=a[b];"."===d?a.splice(b,1):".."===d?(a.splice(b,1),c++):c&&(a.splice(b,1),c--)}if(b)for(;c--;)a.unshift("..");return a})(b.split("/").filter(a=>!!a),!c).join("/"),(c?"/":"")+b||"."}function ha(a){let b=0;for(;b<a.length&&""===a[b];b++);let c=a.length-1;for(;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}let hb=(a={})=>{let b=a.root,c=a.prefix||"app:///",d="window"in U&&!!U.window,e=a.iteratee||function({isBrowser:a,root:b,prefix:c}){return d=>{if(!d.filename)return d;let e=/^[a-zA-Z]:\\/.test(d.filename)||d.filename.includes("\\")&&!d.filename.includes("/"),f=/^\//.test(d.filename);if(a){if(b){let a=d.filename;0===a.indexOf(b)&&(d.filename=a.replace(b,c))}}else if(e||f){let a,f,g=e?d.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):d.filename,h=b?function(a,b){a=g9(a).slice(1),b=g9(b).slice(1);let c=ha(a.split("/")),d=ha(b.split("/")),e=Math.min(c.length,d.length),f=e;for(let a=0;a<e;a++)if(c[a]!==d[a]){f=a;break}let g=[];for(let a=f;a<c.length;a++)g.push("..");return(g=g.concat(d.slice(f))).join("/")}(b,g):(a=g.length>1024?`<truncated>${g.slice(-1024)}`:g,(f=g8.exec(a))?f.slice(1):[])[2]||"";d.filename=`${c}${h}`}return d}}({isBrowser:d,root:b,prefix:c});return{name:"RewriteFrames",processEvent(a){let b=a;return a.exception&&Array.isArray(a.exception.values)&&(b=function(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(a=>{var b;return{...a,...a.stacktrace&&{stacktrace:{...b=a.stacktrace,frames:b?.frames?.map(a=>e(a))}}}})}}}catch{return a}}(b)),b}}};function hc(a){a1().setClient(a)}let hd=a=>({name:"ThirdPartyErrorsFilter",setup(a){a.on("beforeEnvelope",a=>{eA(a,(a,b)=>{if("event"===b){let b=Array.isArray(a)?a[1]:void 0;b&&(g$(b),a[1]=b)}})}),a.on("applyFrameMetadata",b=>{b.type||gZ(a.getOptions().stackParser,b)})},processEvent(b){let c=function(a){let b=dV(a);if(b)return b.filter(a=>!!a.filename&&(a.lineno??a.colno)!=null).map(a=>a.module_metadata?Object.keys(a.module_metadata).filter(a=>a.startsWith(he)).map(a=>a.slice(he.length)):[])}(b);if(c&&c["drop-error-if-contains-third-party-frames"===a.behaviour||"apply-tag-if-contains-third-party-frames"===a.behaviour?"some":"every"](b=>!b.some(b=>a.filterKeys.includes(b)))){if("drop-error-if-contains-third-party-frames"===a.behaviour||"drop-error-if-exclusively-contains-third-party-frames"===a.behaviour)return null;b.tags={...b.tags,third_party_code:!0}}return b}}),he="_sentryBundlerPluginAppKey:";function hf(a){return{...a,path:"path"in a&&Array.isArray(a.path)?a.path.join("."):void 0,keys:"keys"in a?JSON.stringify(a.keys):void 0,unionErrors:"unionErrors"in a?JSON.stringify(a.unionErrors):void 0}}let hg=(a={})=>{let b=a.limit??10;return{name:"ZodErrors",processEvent:(c,d)=>(function(a,b=!1,c,d){var e;if(!c.exception?.values||!d.originalException||!(_(e=d.originalException)&&"ZodError"===e.name&&Array.isArray(e.issues))||0===d.originalException.issues.length)return c;try{let e=(b?d.originalException.issues:d.originalException.issues.slice(0,a)).map(hf);return b&&(Array.isArray(d.attachments)||(d.attachments=[]),d.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:e})})),{...c,exception:{...c.exception,values:[{...c.exception.values[0],value:function(a){let b=new Set;for(let c of a.issues){let a=c.path.map(a=>"number"==typeof a?"<array>":a).join(".");a.length>0&&b.add(a)}let c=Array.from(b);if(0===c.length){let b="variable";if(a.issues.length>0){let c=a.issues[0];void 0!==c&&"expected"in c&&"string"==typeof c.expected&&(b=c.expected)}return`Failed to validate ${b}`}return`Failed to validate keys: ${aD(c.join(", "),100)}`}(d.originalException)},...c.exception.values.slice(1)]},extra:{...c.extra,"zoderror.issues":e.slice(0,a)}}}catch(a){return{...c,extra:{...c.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:a instanceof Error?`${a.name}: ${a.message}
${a.stack}`:"unknown"}}}}})(b,a.saveZodIssuesAsAttachment,c,d)}},hh="Not capturing exception because it's already been captured.",hi="Discarded session because of missing or non-string release",hj=Symbol.for("SentryInternalError"),hk=Symbol.for("SentryDoNotSendEventError");function hl(a){return{message:a,[hj]:!0}}function hm(a){return{message:a,[hk]:!0}}function hn(a){return!!a&&"object"==typeof a&&hj in a}function ho(a){return!!a&&"object"==typeof a&&hk in a}function hp(a,b,c,d,e){let f,g=0;a.on(c,()=>{g=0,clearTimeout(f)}),a.on(b,b=>{(g+=d(b))>=8e5?e(a):(clearTimeout(f),f=setTimeout(()=>{e(a)},5e3))}),a.on("flush",()=>{e(a)})}class hq{constructor(a){if(this._options=a,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],a.dsn?this._dsn=dd(a.dsn):Z&&av.warn("No DSN provided, client will not send events."),this._dsn){const b=gL(this._dsn,a.tunnel,a._metadata?a._metadata.sdk:void 0);this._transport=a.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...a.transportOptions,url:b})}this._options.enableLogs&&hp(this,"afterCaptureLog","flushLogs",hu,eK),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&hp(this,"afterCaptureMetric","flushMetrics",ht,gQ)}captureException(a,b,c){let d=aI();if(aN(a))return Z&&av.log(hh),d;let e={event_id:d,...b};return this._process(this.eventFromException(a,e).then(a=>this._captureEvent(a,e,c))),e.event_id}captureMessage(a,b,c,d){let e={event_id:aI(),...c},f=ae(a)?a:String(a),g=af(a)?this.eventFromMessage(f,b,e):this.eventFromException(a,e);return this._process(g.then(a=>this._captureEvent(a,e,d))),e.event_id}captureEvent(a,b,c){let d=aI();if(b?.originalException&&aN(b.originalException))return Z&&av.log(hh),d;let e={event_id:d,...b},f=a.sdkProcessingMetadata||{},g=f.capturedSpanScope,h=f.capturedSpanIsolationScope;return this._process(this._captureEvent(a,e,g||c,h)),e.event_id}captureSession(a){this.sendSession(a),aR(a,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(a){let b=this._transport;if(!b)return!0;this.emit("flush");let c=await this._isClientDoneProcessing(a),d=await b.flush(a);return c&&d}async close(a){let b=await this.flush(a);return this.getOptions().enabled=!1,this.emit("close"),b}getEventProcessors(){return this._eventProcessors}addEventProcessor(a){this._eventProcessors.push(a)}init(){(this._isEnabled()||this._options.integrations.some(({name:a})=>a.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(a){return this._integrations[a]}addIntegration(a){let b=this._integrations[a.name];bb(this,a,this._integrations),b||ba(this,[a])}sendEvent(a,b={}){var c,d,e;let f,g,h;this.emit("beforeSendEvent",a,b);let i=(c=this._dsn,d=this._options._metadata,e=this._options.tunnel,f=eF(d),g=a.type&&"replay_event"!==a.type?a.type:"event",!function(a,b){if(!b)return;let c=a.sdk||{};a.sdk={...c,name:c.name||b.name,version:c.version||b.version,integrations:[...a.sdk?.integrations||[],...b.integrations||[]],packages:[...a.sdk?.packages||[],...b.packages||[]],settings:a.sdk?.settings||b.settings?{...a.sdk?.settings,...b.settings}:void 0}}(a,d?.sdk),h=eG(a,f,e,c),delete a.sdkProcessingMetadata,ez(h,[[{type:g},a]]));for(let a of b.attachments||[])i=function(a,b){let[c,d]=a;return[c,[...d,b]]}(i,function(a){let b="string"==typeof a.data?eC(a.data):a.data;return[{type:"attachment",length:b.length,filename:a.filename,content_type:a.contentType,attachment_type:a.attachmentType},b]}(a));this.sendEnvelope(i).then(b=>this.emit("afterSendEvent",a,b))}sendSession(a){var b,c,d;let e,{release:f,environment:g=cP}=this._options;if("aggregates"in a){let b=a.attrs||{};if(!b.release&&!f){Z&&av.warn(hi);return}b.release=b.release||f,b.environment=b.environment||g,a.attrs=b}else{if(!a.release&&!f){Z&&av.warn(hi);return}a.release=a.release||f,a.environment=a.environment||g}this.emit("beforeSendSession",a);let h=(b=this._dsn,c=this._options._metadata,d=this._options.tunnel,e=eF(c),ez({sent_at:new Date().toISOString(),...e&&{sdk:e},...!!d&&b&&{dsn:c9(b)}},["aggregates"in a?[{type:"sessions"},a]:[{type:"session"},a.toJSON()]]));this.sendEnvelope(h)}recordDroppedEvent(a,b,c=1){if(this._options.sendClientReports){let d=`${a}:${b}`;Z&&av.log(`Recording outcome: "${d}"${c>1?` (${c} times)`:""}`),this._outcomes[d]=(this._outcomes[d]||0)+c}}on(a,b){let c=this._hooks[a]=this._hooks[a]||new Set,d=(...a)=>b(...a);return c.add(d),()=>{c.delete(d)}}emit(a,...b){let c=this._hooks[a];c&&c.forEach(a=>a(...b))}async sendEnvelope(a){if(this.emit("beforeEnvelope",a),this._isEnabled()&&this._transport)try{return await this._transport.send(a)}catch(a){return Z&&av.error("Error while sending envelope:",a),{}}return Z&&av.error("Transport disabled"),{}}_setupIntegrations(){var a;let b,{integrations:c}=this._options;this._integrations=(a=this,b={},c.forEach(c=>{c&&bb(a,c,b)}),b),ba(this,c)}_updateSessionFromEvent(a,b){let c="fatal"===b.level,d=!1,e=b.exception?.values;if(e){for(let a of(d=!0,c=!1,e))if(a.mechanism?.handled===!1){c=!0;break}}let f="ok"===a.status;(f&&0===a.errors||f&&c)&&(aR(a,{...c&&{status:"crashed"},errors:a.errors||Number(d||c)}),this.captureSession(a))}async _isClientDoneProcessing(a){let b=0;for(;!a||b<a;){if(await new Promise(a=>setTimeout(a,1)),!this._numProcessing)return!0;b++}return!1}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(a,b,c,d){let e=this.getOptions(),f=Object.keys(this._integrations);return!b.integrations&&f?.length&&(b.integrations=f),this.emit("preprocessEvent",a,b),a.type||d.setLastEventId(a.event_id||b.event_id),dX(e,a,b,c,this,d).then(a=>(null===a||(this.emit("postprocessEvent",a,b),a.contexts={trace:a7(c),...a.contexts},a.sdkProcessingMetadata={dynamicSamplingContext:dJ(this,c),...a.sdkProcessingMetadata}),a))}_captureEvent(a,b={},c=a1(),d=a2()){return Z&&hr(a)&&av.log(`Captured error event \`${fo(a)[0]||"<unknown>"}\``),this._processEvent(a,b,c,d).then(a=>a.event_id,a=>{Z&&(ho(a)?av.log(a.message):hn(a)?av.warn(a.message):av.warn(a))})}_processEvent(a,b,c,d){let e=this.getOptions(),{sampleRate:f}=e,g=hs(a),h=hr(a),i=a.type||"error",j=`before send for type \`${i}\``,k=void 0===f?void 0:dk(f);if(h&&"number"==typeof k&&Math.random()>k)return this.recordDroppedEvent("sample_rate","error"),cR(hm(`Discarding event because it's not included in the random sample (sampling rate = ${f})`));let l="replay_event"===i?"replay":i;return this._prepareEvent(a,b,c,d).then(a=>{if(null===a)throw this.recordDroppedEvent("event_processor",l),hm("An event processor returned `null`, will not send event.");return b.data&&!0===b.data.__sentry__?a:function(a,b){let c=`${b} must return \`null\` or a valid event.`;if(ai(a))return a.then(a=>{if(!ag(a)&&null!==a)throw hl(c);return a},a=>{throw hl(`${b} rejected with ${a}`)});if(!ag(a)&&null!==a)throw hl(c);return a}(function(a,b,c,d){let{beforeSend:e,beforeSendTransaction:f,beforeSendSpan:g,ignoreSpans:h}=b,i=c;if(hr(i)&&e)return e(i,d);if(hs(i)){if(g||h){let b=function(a){let{trace_id:b,parent_span_id:c,span_id:d,status:e,origin:f,data:g,op:h}=a.contexts?.trace??{};return{data:g??{},description:a.transaction,op:h,parent_span_id:c,span_id:d??"",start_timestamp:a.start_timestamp??0,status:e,timestamp:a.timestamp,trace_id:b??"",origin:f,profile_id:g?.[c0],exclusive_time:g?.[c1],measurements:a.measurements,is_segment:!0}}(i);if(h?.length&&eS(b,h))return null;if(g){let a=g(b);if(a)i=aS(c,{type:"transaction",timestamp:a.timestamp,start_timestamp:a.start_timestamp,transaction:a.description,contexts:{trace:{trace_id:a.trace_id,span_id:a.span_id,parent_span_id:a.parent_span_id,op:a.op,status:a.status,origin:a.origin,data:{...a.data,...a.profile_id&&{[c0]:a.profile_id},...a.exclusive_time&&{[c1]:a.exclusive_time}}}},measurements:a.measurements});else dF()}if(i.spans){let b=[],c=i.spans;for(let a of c){if(h?.length&&eS(a,h)){!function(a,b){let c=b.parent_span_id,d=b.span_id;if(c)for(let b of a)b.parent_span_id===d&&(b.parent_span_id=c)}(c,a);continue}if(g){let c=g(a);c?b.push(c):(dF(),b.push(a))}else b.push(a)}let d=i.spans.length-b.length;d&&a.recordDroppedEvent("before_send","span",d),i.spans=b}}if(f){if(i.spans){let a=i.spans.length;i.sdkProcessingMetadata={...c.sdkProcessingMetadata,spanCountBeforeProcessing:a}}return f(i,d)}}return i}(this,e,a,b),j)}).then(e=>{if(null===e){if(this.recordDroppedEvent("before_send",l),g){let b=1+(a.spans||[]).length;this.recordDroppedEvent("before_send","span",b)}throw hm(`${j} returned \`null\`, will not send event.`)}let f=c.getSession()||d.getSession();if(h&&f&&this._updateSessionFromEvent(f,e),g){let a=(e.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(e.spans?e.spans.length:0);a>0&&this.recordDroppedEvent("before_send","span",a)}let i=e.transaction_info;return g&&i&&e.transaction!==a.transaction&&(e.transaction_info={...i,source:"custom"}),this.sendEvent(e,b),e}).then(null,a=>{if(ho(a)||hn(a))throw a;throw this.captureException(a,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:a}),hl(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${a}`)})}_process(a){this._numProcessing++,a.then(a=>(this._numProcessing--,a),a=>(this._numProcessing--,a))}_clearOutcomes(){let a=this._outcomes;return this._outcomes={},Object.entries(a).map(([a,b])=>{let[c,d]=a.split(":");return{reason:c,category:d,quantity:b}})}_flushOutcomes(){var a;Z&&av.log("Flushing outcomes...");let b=this._clearOutcomes();if(0===b.length){Z&&av.log("No outcomes to send");return}if(!this._dsn){Z&&av.log("No dsn provided, will not send outcomes");return}Z&&av.log("Sending outcomes:",b);let c=ez((a=this._options.tunnel&&c9(this._dsn))?{dsn:a}:{},[[{type:"client_report"},{timestamp:aO(),discarded_events:b}]]);this.sendEnvelope(c)}}function hr(a){return void 0===a.type}function hs(a){return"transaction"===a.type}function ht(a){let b=0;return a.name&&(b+=2*a.name.length),(b+=8)+hv(a.attributes)}function hu(a){let b=0;return a.message&&(b+=2*a.message.length),b+hv(a.attributes)}function hv(a){if(!a)return 0;let b=0;return Object.values(a).forEach(a=>{Array.isArray(a)?b+=a.length*hw(a[0]):af(a)?b+=hw(a):b+=100}),b}function hw(a){return"string"==typeof a?2*a.length:"number"==typeof a?8:4*("boolean"==typeof a)}function hx(a){"aggregates"in a?a.attrs?.ip_address===void 0&&(a.attrs={...a.attrs,ip_address:"{{auto}}"}):void 0===a.ipAddress&&(a.ipAddress="{{auto}}")}function hy(a,b){var c,d;let e,f,g=hA(a,b),h={type:(c=b,!(e=c?.name)&&hC(c)?c.message&&Array.isArray(c.message)&&2==c.message.length?c.message[0]:"WebAssembly.Exception":e),value:(d=b,f=d?.message,hC(d)?Array.isArray(d.message)&&2==d.message.length?d.message[1]:"wasm exception":f?f.error&&"string"==typeof f.error.message?f.error.message:f:"No error message")};return g.length&&(h.stacktrace={frames:g}),void 0===h.type&&""===h.value&&(h.value="Unrecoverable error caught"),h}function hz(a,b){return{exception:{values:[hy(a,b)]}}}function hA(a,b){var c,d;let e=b.stacktrace||b.stack||"",f=(c=b)&&hB.test(c.message)?1:0,g="number"==typeof(d=b).framesToPop?d.framesToPop:0;try{return a(e,f,g)}catch{}return[]}let hB=/Minified React error #\d+;/i;function hC(a){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&a instanceof WebAssembly.Exception}function hD(a,b,c,d){let e=hF(a,b,c?.syntheticException||void 0,d);return aM(e),e.level="error",c?.event_id&&(e.event_id=c.event_id),cQ(e)}function hE(a,b,c="info",d,e){let f=hG(a,b,d?.syntheticException||void 0,e);return f.level=c,d?.event_id&&(f.event_id=d.event_id),cQ(f)}function hF(a,b,c,d,e){let f;if(ab(b)&&b.error)return hz(a,b.error);if(ac(b)||aa(b,"DOMException")){if("stack"in b)f=hz(a,b);else{let e=b.name||(ac(b)?"DOMError":"DOMException"),g=b.message?`${e}: ${b.message}`:e;aL(f=hG(a,g,c,d),g)}return"code"in b&&(f.tags={...f.tags,"DOMException.code":`${b.code}`}),f}return _(b)?hz(a,b):(ag(b)||ah(b)?aM(f=function(a,b,c,d){let e=a6(),f=e?.getOptions().normalizeDepth,g=function(a){for(let b in a)if(Object.prototype.hasOwnProperty.call(a,b)){let c=a[b];if(c instanceof Error)return c}}(b),h={__serialized__:function a(b,c=3,d=102400){let e=dW(b,c);return~-encodeURI(JSON.stringify(e)).split(/%..|./).length>d?a(b,c-1,d):e}(b,f)};if(g)return{exception:{values:[hy(a,g)]},extra:h};let i={exception:{values:[{type:ah(b)?b.constructor.name:d?"UnhandledRejection":"Error",value:function(a,{isUnhandledRejection:b}){let c,d=((c=Object.keys(aA(a))).sort(),c[0]?c.join(", "):"[object has no keys]"),e=b?"promise rejection":"exception";if(ab(a))return`Event \`ErrorEvent\` captured as ${e} with message \`${a.message}\``;if(ah(a)){let b=function(a){try{let b=Object.getPrototypeOf(a);return b?b.constructor.name:void 0}catch{}}(a);return`Event \`${b}\` (type=${a.type}) captured as ${e}`}return`Object captured as ${e} with keys: ${d}`}(b,{isUnhandledRejection:d})}]},extra:h};if(c){let b=hA(a,c);b.length&&(i.exception.values[0].stacktrace={frames:b})}return i}(a,b,c,e),{synthetic:!0}):(aL(f=hG(a,b,c,d),`${b}`,void 0),aM(f,{synthetic:!0})),f)}function hG(a,b,c,d){let e={};if(d&&c){let d=hA(a,c);d.length&&(e.exception={values:[{value:b,stacktrace:{frames:d}}]}),aM(e,{synthetic:!0})}if(ae(b)){let{__sentry_template_string__:a,__sentry_template_values__:c}=b;return e.logentry={message:a,params:c},e}return e.message=b,e}class hH extends hq{constructor(a){var b;const c=(b=a,{release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:U.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...b});!function(a,b,c=[b],d="npm"){let e=a._metadata||{};e.sdk||(e.sdk={name:`sentry.javascript.${b}`,packages:c.map(a=>({name:`${d}:@sentry/${a}`,version:V})),version:V}),a._metadata=e}(c,"browser",["browser"],U.SENTRY_SDK_SOURCE||"npm"),c._metadata?.sdk&&(c._metadata.sdk.settings={infer_ip:c.sendDefaultPii?"auto":"never",...c._metadata.sdk.settings}),super(c);const{sendDefaultPii:d,sendClientReports:e,enableLogs:f,_experiments:g,enableMetrics:h}=this._options,i=h??g?.enableMetrics??!0;U.document&&(e||f||i)&&U.document.addEventListener("visibilitychange",()=>{"hidden"===U.document.visibilityState&&(e&&this._flushOutcomes(),f&&eK(this),i&&gQ(this))}),d&&this.on("beforeSendSession",hx)}eventFromException(a,b){return hD(this._options.stackParser,a,b,this._options.attachStacktrace)}eventFromMessage(a,b="info",c){return hE(this._options.stackParser,a,b,c,this._options.attachStacktrace)}_prepareEvent(a,b,c,d){return a.platform=a.platform||"javascript",super._prepareEvent(a,b,c,d)}}function hI(a){return a&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(a.toString())}function hJ(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in U))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(hI(U.fetch))return!0;let a=!1,b=U.document;if(b&&"function"==typeof b.createElement)try{let c=b.createElement("iframe");c.hidden=!0,b.head.appendChild(c),c.contentWindow?.fetch&&(a=hI(c.contentWindow.fetch)),b.head.removeChild(c)}catch(a){Z&&av.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",a)}return a}let hK="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,hL={};function hM(a){let b=hL[a];if(b)return b;let c=U[a];if(hI(c))return hL[a]=c.bind(U);let d=U.document;if(d&&"function"==typeof d.createElement)try{let b=d.createElement("iframe");b.hidden=!0,d.head.appendChild(b);let e=b.contentWindow;e?.[a]&&(c=e[a]),d.head.removeChild(b)}catch(b){hK&&av.warn(`Could not create sandbox iframe for ${a} check, bailing to window.${a}: `,b)}return c?hL[a]=c.bind(U):c}function hN(...a){return hM("setTimeout")(...a)}function hO(a,b=hM("fetch")){let c=0,d=0;async function e(e){let f=e.body.length;c+=f,d++;let g={body:e.body,method:"POST",referrerPolicy:"strict-origin",headers:a.headers,keepalive:c<=6e4&&d<15,...a.fetchOptions};try{let c=await b(a.url,g);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(a){throw hL.fetch=void 0,a}finally{c-=f,d--}}return fj(a,e,ff(a.bufferSize||40))}function hP(a,b,c,d){let e={filename:a,function:"<anonymous>"===b?"?":b,in_app:!0};return void 0!==c&&(e.lineno=c),void 0!==d&&(e.colno=d),e}let hQ=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,hR=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,hS=/\((\S*)(?::(\d+))(?::(\d+))\)/,hT=/at (.+?) ?\(data:(.+?),/,hU=[30,a=>{let b=a.match(hT);if(b)return{filename:`<data:${b[2]}>`,function:b[1]};let c=hQ.exec(a);if(c){let[,a,b,d]=c;return hP(a,"?",+b,+d)}let d=hR.exec(a);if(d){if(d[2]&&0===d[2].indexOf("eval")){let a=hS.exec(d[2]);a&&(d[2]=a[1],d[3]=a[2],d[4]=a[3])}let[a,b]=h4(d[1]||"?",d[2]);return hP(b,a,d[3]?+d[3]:void 0,d[4]?+d[4]:void 0)}}],hV=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,hW=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,hX=[50,a=>{let b=hV.exec(a);if(b){if(b[3]&&b[3].indexOf(" > eval")>-1){let a=hW.exec(b[3]);a&&(b[1]=b[1]||"eval",b[3]=a[1],b[4]=a[2],b[5]="")}let a=b[3],c=b[1]||"?";return[c,a]=h4(c,a),hP(a,c,b[4]?+b[4]:void 0,b[5]?+b[5]:void 0)}}],hY=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,hZ=[40,a=>{let b=hY.exec(a);return b?hP(b[2],b[1]||"?",+b[3],b[4]?+b[4]:void 0):void 0}],h$=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,h_=[10,a=>{let b=h$.exec(a);return b?hP(b[2],b[3]||"?",+b[1]):void 0}],h0=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,h1=[20,a=>{let b=h0.exec(a);return b?hP(b[5],b[3]||b[4]||"?",+b[1],+b[2]):void 0}],h2=[hU,hX],h3=dR(...h2),h4=(a,b)=>{let c=-1!==a.indexOf("safari-extension"),d=-1!==a.indexOf("safari-web-extension");return c||d?[-1!==a.indexOf("@")?a.split("@")[0]:"?",c?`safari-extension:${b}`:`safari-web-extension:${b}`]:[a,b]};function h5(a,{metadata:b,tunnel:c,dsn:d}){return ez({event_id:a.event_id,sent_at:new Date().toISOString(),...b?.sdk&&{sdk:{name:b.sdk.name,version:b.sdk.version}},...!!c&&!!d&&{dsn:c9(d)}},[[{type:"user_report"},a]])}function h6(a,b){let c="fetch";eq(c,a),er(c,()=>h7(void 0,b))}function h7(a,b=!1){(!b||hJ())&&aw(U,"fetch",function(b){return function(...c){let d=Error(),{method:e,url:f}=function(a){if(0===a.length)return{method:"GET",url:""};if(2===a.length){let[b,c]=a;return{url:ib(b),method:ia(c,"method")?String(c.method).toUpperCase():"GET"}}let b=a[0];return{url:ib(b),method:ia(b,"method")?String(b.method).toUpperCase():"GET"}}(c),g={args:c,fetchData:{method:e,url:f},startTimestamp:1e3*aP(),virtualError:d,headers:function(a){let[b,c]=a;try{if("object"==typeof c&&null!==c&&"headers"in c&&c.headers)return new Headers(c.headers);if(al(b))return new Headers(b.headers)}catch{}}(c)};return a||es("fetch",{...g}),b.apply(U,c).then(async b=>(a?a(b):es("fetch",{...g,endTimestamp:1e3*aP(),response:b}),b),a=>{if(es("fetch",{...g,endTimestamp:1e3*aP(),error:a}),_(a)&&void 0===a.stack&&(a.stack=d.stack,ax(a,"framesToPop",1)),a instanceof TypeError&&("Failed to fetch"===a.message||"Load failed"===a.message||"NetworkError when attempting to fetch resource."===a.message))try{let b=new URL(g.fetchData.url);a.message=`${a.message} (${b.host})`}catch{}throw a})}})}async function h8(a,b){if(a?.body){let c=a.body,d=c.getReader(),e=setTimeout(()=>{c.cancel().then(null,()=>{})},9e4),f=!0;for(;f;){let a;try{a=setTimeout(()=>{c.cancel().then(null,()=>{})},5e3);let{done:e}=await d.read();clearTimeout(a),e&&(b(),f=!1)}catch{f=!1}finally{clearTimeout(a)}}clearTimeout(e),d.releaseLock(),c.cancel().then(null,()=>{})}}function h9(a){let b;try{b=a.clone()}catch{return}h8(b,()=>{es("fetch-body-resolved",{endTimestamp:1e3*aP(),response:a})})}function ia(a,b){return!!a&&"object"==typeof a&&!!a[b]}function ib(a){return"string"==typeof a?a:a?ia(a,"url")?a.url:a.toString?a.toString():"":""}function ic(a){if(void 0!==a)return a>=400&&a<500?"warning":a>=500?"error":void 0}function id(a){return"isRelative"in a}function ie(a,b){let c=0>=a.indexOf("://")&&0!==a.indexOf("//"),d=b??(c?"thismessage:/":void 0);try{if("canParse"in URL&&!URL.canParse(a,d))return;let b=new URL(a,d);if(c)return{isRelative:c,pathname:b.pathname,search:b.search,hash:b.hash};return b}catch{}}function ig(a){if(!a)return{};let b=a.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!b)return{};let c=b[6]||"",d=b[8]||"";return{host:b[4],path:b[5],protocol:b[2],search:c,hash:d,relative:b[5]+c+d}}function ih(a){return a.split(/[?#]/,1)[0]}function ii(a){eq("dom",a),er("dom",ij)}function ij(){if(!U.document)return;let a=es.bind(null,"dom"),b=ik(a,!0);U.document.addEventListener("click",b,!1),U.document.addEventListener("keypress",b,!1),["EventTarget","Node"].forEach(b=>{let c=U[b]?.prototype;c?.hasOwnProperty?.("addEventListener")&&(aw(c,"addEventListener",function(b){return function(c,d,e){if("click"===c||"keypress"==c)try{let d=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=d[c]=d[c]||{refCount:0};if(!f.handler){let d=ik(a);f.handler=d,b.call(this,c,d,e)}f.refCount++}catch{}return b.call(this,c,d,e)}}),aw(c,"removeEventListener",function(a){return function(b,c,d){if("click"===b||"keypress"==b)try{let c=this.__sentry_instrumentation_handlers__||{},e=c[b];e&&(e.refCount--,e.refCount<=0&&(a.call(this,b,e.handler,d),e.handler=void 0,delete c[b]),0===Object.keys(c).length&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,b,c,d)}}))})}function ik(a,b=!1){return c=>{var d;if(!c||c._sentryCaptured)return;let e=function(a){try{return a.target}catch{return null}}(c);if(d=c.type,"keypress"===d&&(!e?.tagName||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&!e.isContentEditable&&1))return;ax(c,"_sentryCaptured",!0),e&&!e._sentryId&&ax(e,"_sentryId",aI());let f="keypress"===c.type?"input":c.type;!function(a){if(a.type!==k)return!1;try{if(!a.target||a.target._sentryId!==l)return!1}catch{}return!0}(c)&&(a({event:c,name:f,global:b}),k=c.type,l=e?e._sentryId:void 0),clearTimeout(j),j=U.setTimeout(()=>{l=void 0,k=void 0},1e3)}}let il="__sentry_xhr_v3__";function im(a){eq("xhr",a),er("xhr",io)}function io(){if(!U.XMLHttpRequest)return;let a=XMLHttpRequest.prototype;a.open=new Proxy(a.open,{apply(a,b,c){let d=Error(),e=1e3*aP(),f=ad(c[0])?c[0].toUpperCase():void 0,g=function(a){if(ad(a))return a;try{return a.toString()}catch{}}(c[1]);if(!f||!g)return a.apply(b,c);b[il]={method:f,url:g,request_headers:{}},"POST"===f&&g.match(/sentry_key/)&&(b.__sentry_own_request__=!0);let h=()=>{let a=b[il];if(a&&4===b.readyState){try{a.status_code=b.status}catch{}es("xhr",{endTimestamp:1e3*aP(),startTimestamp:e,xhr:b,virtualError:d})}};return"onreadystatechange"in b&&"function"==typeof b.onreadystatechange?b.onreadystatechange=new Proxy(b.onreadystatechange,{apply:(a,b,c)=>(h(),a.apply(b,c))}):b.addEventListener("readystatechange",h),b.setRequestHeader=new Proxy(b.setRequestHeader,{apply(a,b,c){let[d,e]=c,f=b[il];return f&&ad(d)&&ad(e)&&(f.request_headers[d.toLowerCase()]=e),a.apply(b,c)}}),a.apply(b,c)}}),a.send=new Proxy(a.send,{apply(a,b,c){let d=b[il];return d&&(void 0!==c[0]&&(d.body=c[0]),es("xhr",{startTimestamp:1e3*aP(),xhr:b})),a.apply(b,c)}})}function ip(a){let b="history";eq(b,a),er(b,iq)}function iq(){function a(a){return function(...b){let c=b.length>2?b[2]:void 0;if(c){let d=m,e=function(a){try{return new URL(a,U.location.origin).toString()}catch{return a}}(String(c));if(m=e,d===e)return a.apply(this,b);es("history",{from:d,to:e})}return a.apply(this,b)}}U.addEventListener("popstate",()=>{let a=U.location.href,b=m;m=a,b===a||es("history",{from:b,to:a})}),"history"in U&&U.history&&(aw(U.history,"pushState",a),aw(U.history,"replaceState",a))}let ir="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,is=(a={})=>{let b={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...a};return{name:"Breadcrumbs",setup(a){var c,d,e,f,g,h,i;b.console&&et((c=a,function(a){if(a6()!==c)return;let b={category:"console",data:{arguments:a.args,logger:"console"},level:ev(a.level),message:aF(a.args," ")};if("assert"===a.level)if(!1!==a.args[0])return;else b.message=`Assertion failed: ${aF(a.args.slice(1)," ")||"console.assert"}`,b.data.arguments=a.args.slice(1);en(b,{input:a.args,level:a.level})})),b.dom&&ii((d=a,e=b.dom,function(a){let b,c;if(a6()!==d)return;let f="object"==typeof e?e.serializeAttribute:void 0,g="object"==typeof e&&"number"==typeof e.maxStringLength?e.maxStringLength:void 0;g&&g>1024&&(ir&&av.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${g} was configured. Sentry will use 1024 instead.`),g=1024),"string"==typeof f&&(f=[f]);try{var h;let d=a.event,e=(h=d)&&h.target?d.target:d;b=am(e,{keyAttrs:f,maxStringLength:g}),c=ao(e)}catch{b="<unknown>"}if(0===b.length)return;let i={category:`ui.${a.name}`,message:b};c&&(i.data={"ui.component_name":c}),en(i,{event:a.event,name:a.name,global:a.global})})),b.xhr&&im((f=a,function(a){if(a6()!==f)return;let{startTimestamp:b,endTimestamp:c}=a,d=a.xhr[il];if(!b||!c||!d)return;let{method:e,url:g,status_code:h,body:i}=d,j={xhr:a.xhr,input:i,startTimestamp:b,endTimestamp:c},k={category:"xhr",data:{method:e,url:g,status_code:h},type:"http",level:ic(h)};f.emit("beforeOutgoingRequestBreadcrumb",k,j),en(k,j)})),b.fetch&&h6((g=a,function(a){if(a6()!==g)return;let{startTimestamp:b,endTimestamp:c}=a;if(c&&(!a.fetchData.url.match(/sentry_key/)||"POST"!==a.fetchData.method))if(a.fetchData.method,a.fetchData.url,a.error){let d=a.fetchData,e={data:a.error,input:a.args,startTimestamp:b,endTimestamp:c},f={category:"fetch",data:d,level:"error",type:"http"};g.emit("beforeOutgoingRequestBreadcrumb",f,e),en(f,e)}else{let d=a.response,e={...a.fetchData,status_code:d?.status};a.fetchData.request_body_size,a.fetchData.response_body_size,d?.status;let f={input:a.args,response:d,startTimestamp:b,endTimestamp:c},h={category:"fetch",data:e,type:"http",level:ic(e.status_code)};g.emit("beforeOutgoingRequestBreadcrumb",h,f),en(h,f)}})),b.history&&ip((h=a,function(a){if(a6()!==h)return;let b=a.from,c=a.to,d=ig(U.location.href),e=b?ig(b):void 0,f=ig(c);e?.path||(e=d),d.protocol===f.protocol&&d.host===f.host&&(c=f.relative),d.protocol===e.protocol&&d.host===e.host&&(b=e.relative),en({category:"navigation",data:{from:b,to:c}})})),b.sentry&&a.on("beforeSendEvent",(i=a,function(a){a6()===i&&en({category:`sentry.${"transaction"===a.type?"transaction":"event"}`,event_id:a.event_id,level:a.level,message:aK(a)},{event:a})}))}}},it=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],iu=(a={})=>{let b={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...a};return{name:"BrowserApiErrors",setupOnce(){b.setTimeout&&aw(U,"setTimeout",iv),b.setInterval&&aw(U,"setInterval",iv),b.requestAnimationFrame&&aw(U,"requestAnimationFrame",iw),b.XMLHttpRequest&&"XMLHttpRequest"in U&&aw(XMLHttpRequest.prototype,"send",ix);let a=b.eventTarget;a&&(Array.isArray(a)?a:it).forEach(a=>{var c,d;let e;return c=a,d=b,e=U[c]?.prototype,void(e?.hasOwnProperty?.("addEventListener")&&(aw(e,"addEventListener",function(a){return function(b,e,f){var g,h,i,j;try{g=e,"function"==typeof g.handleEvent&&(e.handleEvent=eh(e.handleEvent,{mechanism:{data:{handler:dU(e),target:c},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return d.unregisterOriginalCallbacks&&(h=this,i=b,j=e,h&&"object"==typeof h&&"removeEventListener"in h&&"function"==typeof h.removeEventListener&&h.removeEventListener(i,j)),a.apply(this,[b,eh(e,{mechanism:{data:{handler:dU(e),target:c},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),f])}}),aw(e,"removeEventListener",function(a){return function(b,c,d){try{let e=c.__sentry_wrapped__;e&&a.call(this,b,e,d)}catch{}return a.call(this,b,c,d)}})))})}}};function iv(a){return function(...b){let c=b[0];return b[0]=eh(c,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${dU(a)}`}}),a.apply(this,b)}}function iw(a){return function(b){return a.apply(this,[eh(b,{mechanism:{data:{handler:dU(a)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function ix(a){return function(...b){let c=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(a=>{a in c&&"function"==typeof c[a]&&aw(c,a,function(b){let c={mechanism:{data:{handler:dU(b)},handled:!1,type:`auto.browser.browserapierrors.xhr.${a}`}},d=az(b);return d&&(c.mechanism.data.handler=dU(d)),eh(b,c)})}),a.apply(this,b)}}let iy=()=>({name:"BrowserSession",setupOnce(){if(void 0===U.document){ir&&av.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}ec({ignoreDuration:!0}),ef(),ip(({from:a,to:b})=>{void 0!==a&&a!==b&&(ec({ignoreDuration:!0}),ef())})}}),iz=(a={})=>{let b={onerror:!0,onunhandledrejection:!0,...a};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(a){var c,d;b.onerror&&(c=a,g1(a=>{var b,d,e,f;let g,h,i,j,k,l,{stackParser:m,attachStacktrace:n}=iD();if(a6()!==c||eg>0)return;let{msg:o,url:p,line:q,column:r,error:s}=a,t=(b=hF(m,s||o,void 0,n,!1),d=p,e=q,f=r,k=(j=(i=(h=(g=b.exception=b.exception||{}).values=g.values||[])[0]=h[0]||{}).stacktrace=i.stacktrace||{}).frames=j.frames||[],l=function(a){if(ad(a)&&0!==a.length){if(a.startsWith("data:")){let b=a.match(/^data:([^;]+)/),c=b?b[1]:"text/javascript",d=a.includes("base64,");return`<data:${c}${d?",base64":""}>`}return a}}(d)??an(),0===k.length&&k.push({colno:f,filename:l,function:"?",in_app:!0,lineno:e}),b);t.level="error",d_(t,{originalException:s,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})}),iC("onerror")),b.onunhandledrejection&&(d=a,g4(a=>{let{stackParser:b,attachStacktrace:c}=iD();if(a6()!==d||eg>0)return;let e=iA(a),f=af(e)?iB(e):hF(b,e,void 0,c,!0);f.level="error",d_(f,{originalException:e,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})}),iC("onunhandledrejection"))}}};function iA(a){if(af(a))return a;try{if("reason"in a)return a.reason;if("detail"in a&&"reason"in a.detail)return a.detail.reason}catch{}return a}function iB(a){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(a)}`}]}}}function iC(a){ir&&av.log(`Global Handler attached: ${a}`)}function iD(){let a=a6();return a?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}let iE=()=>({name:"HttpContext",preprocessEvent(a){if(!U.navigator&&!U.location&&!U.document)return;let b=ei(),c={...b.headers,...a.request?.headers};a.request={...b,...a.request,headers:c}}});function iF(a,b){a.mechanism={handled:!0,type:"auto.core.linked_errors",...a.mechanism,..."AggregateError"===a.type&&{is_exception_group:!0},exception_id:b}}function iG(a,b,c,d){a.mechanism={handled:!0,...a.mechanism,type:"chained",source:b,exception_id:c,parent_id:d}}let iH=(a={})=>{let b=a.limit||5,c=a.key||"cause";return{name:"LinkedErrors",preprocessEvent(a,d,e){!function(a,b,c,d,e,f){if(!e.exception?.values||!f||!aj(f.originalException,Error))return;let g=e.exception.values.length>0?e.exception.values[e.exception.values.length-1]:void 0;g&&(e.exception.values=function a(b,c,d,e,f,g,h,i){if(g.length>=d+1)return g;let j=[...g];if(aj(e[f],Error)){iF(h,i);let g=b(c,e[f]),k=j.length;iG(g,f,k,i),j=a(b,c,d,e[f],f,[g,...j],g,k)}return Array.isArray(e.errors)&&e.errors.forEach((e,g)=>{if(aj(e,Error)){iF(h,i);let k=b(c,e),l=j.length;iG(k,`errors[${g}]`,l,i),j=a(b,c,d,e,f,[k,...j],k,l)}}),j}(a,b,d,f.originalException,c,e.exception.values,g,0))}(hy,e.getOptions().stackParser,c,b,a,d)}}};function iI(a){return[fr(),fB(),iu(),is(),iz(),iH(),fk(),iE(),iy()]}function iJ(a={}){var b;let c,d=!a.skipBrowserExtensionCheck&&!!function(){if(void 0===U.window||U.nw)return!1;let a=U.chrome||U.browser;if(!a?.runtime?.id)return!1;let b=an();return!(U===U.top&&["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"].some(a=>b.startsWith(`${a}://`)))}()&&(ir&&ar(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0),e=null==a.defaultIntegrations?iI():a.defaultIntegrations,f={...a,enabled:!d&&a.enabled,stackParser:Array.isArray(b=a.stackParser||h3)?dR(...b):b,integrations:function(a){let b,c,d=a.defaultIntegrations||[],e=a.integrations;if(d.forEach(a=>{a.isDefaultInstance=!0}),Array.isArray(e))b=[...d,...e];else if("function"==typeof e){let a=e(d);b=Array.isArray(a)?a:[a]}else b=d;return c={},b.forEach(a=>{let{name:b}=a,d=c[b];d&&!d.isDefaultInstance&&a.isDefaultInstance||(c[b]=a)}),Object.values(c)}({integrations:a.integrations,defaultIntegrations:e}),transport:a.transport||hO};return!0===f.debug&&(Z?av.enable():ar(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),a1().update(f.initialScope),hc(c=new hH(f)),c.init(),c}function iK(){}function iL(a){a()}function iM(a={}){let b=U.document,c=b?.head||b?.body;if(!c){ir&&av.error("[showReportDialog] Global document not defined");return}let d=a1(),e=a6(),f=e?.getDsn();if(!f){ir&&av.error("[showReportDialog] DSN not configured");return}let g={...a,user:{...d.getUser(),...a.user},eventId:a.eventId||d6()},h=U.document.createElement("script");h.async=!0,h.crossOrigin="anonymous",h.src=function(a,b){let c=dd(a);if(!c)return"";let d=`${gK(c)}embed/error-page/`,e=`dsn=${c9(c)}`;for(let a in b)if("dsn"!==a&&"onClose"!==a)if("user"===a){let a=b.user;if(!a)continue;a.name&&(e+=`&name=${encodeURIComponent(a.name)}`),a.email&&(e+=`&email=${encodeURIComponent(a.email)}`)}else e+=`&${encodeURIComponent(a)}=${encodeURIComponent(b[a])}`;return`${d}?${e}`}(f,g);let{onLoad:i,onClose:j}=g;if(i&&(h.onload=i),j){let a=b=>{if("__sentry_reportdialog_closed__"===b.data)try{j()}finally{U.removeEventListener("message",a)}};U.addEventListener("message",a)}c.appendChild(h)}let iN=new WeakMap,iO=(a={})=>{let b=a.types||["crash","deprecation","intervention"];function c(a){if(iN.has(a6()))for(let b of a)a4(a=>{a.setExtra("url",b.url);let c=`ReportingObserver [${b.type}]`,d="No details available";if(b.body){let c={};for(let a in b.body)c[a]=b.body[a];if(a.setExtra("body",c),"crash"===b.type){let a=b.body;d=[a.crashId||"",a.reason||""].join(" ").trim()||d}else d=b.body.message||d}d$(`${c}: ${d}`)})}return{name:"ReportingObserver",setupOnce(){"ReportingObserver"in U&&new U.ReportingObserver(c,{buffered:!0,types:b}).observe()},setup(a){iN.set(a,!0)}}};function iP(a,b){var c,d,e,f;let g,h=b?.getDsn(),i=b?.getOptions().tunnel;return c=a,d=h,!(!(g=ie(c))||id(g))&&!!d&&g.host.includes(d.host)&&/(^|&|\?)sentry_key=/.test(g.search)||(e=a,!!(f=i)&&iQ(e)===iQ(f))}function iQ(a){return"/"===a[a.length-1]?a.slice(0,-1):a}let iR=(a={})=>{let b={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...a};return{name:"HttpClient",setup(a){var c,d,e,f;c=a,d=b,hJ()&&h6(a=>{if(a6()!==c)return;let{response:b,args:e,error:f,virtualError:g}=a,[h,i]=e;b&&function(a,b,c,d,e){if(iU(a,c.status,c.url)){var f,g;let a,h,i,j,k=(f=b,!(g=d)&&f instanceof Request||f instanceof Request&&f.bodyUsed?f:new Request(f,g));iW()&&([a,i]=iS("Cookie",k),[h,j]=iS("Set-Cookie",c)),d_(iV({url:k.url,method:k.method,status:c.status,requestHeaders:a,responseHeaders:h,requestCookies:i,responseCookies:j,error:e,type:"fetch"}))}}(d,h,b,i,f||g)},!1),e=a,f=b,"XMLHttpRequest"in U&&im(a=>{if(a6()!==e)return;let{error:b,virtualError:c}=a,d=a.xhr,g=d[il];if(!g)return;let{method:h,request_headers:i}=g;try{!function(a,b,c,d,e){if(iU(a,b.status,b.responseURL)){let a,f,g;if(iW()){try{let a=b.getResponseHeader("Set-Cookie")||b.getResponseHeader("set-cookie")||void 0;a&&(f=iT(a))}catch{}try{let a;g=(a=b.getAllResponseHeaders())?a.split("\r\n").reduce((a,b)=>{let[c,d]=b.split(": ");return c&&d&&(a[c]=d),a},{}):{}}catch{}a=d}d_(iV({url:b.responseURL,method:c,status:b.status,requestHeaders:a,responseHeaders:g,responseCookies:f,error:e,type:"xhr"}))}}(f,d,h,i,b||c)}catch(a){ir&&av.warn("Error while extracting response event form XHR response",a)}})}}};function iS(a,b){var c;let d,e,f=(c=b.headers,d={},c.forEach((a,b)=>{d[b]=a}),d);try{let b=f[a]||f[a.toLowerCase()]||void 0;b&&(e=iT(b))}catch{}return[f,e]}function iT(a){return a.split("; ").reduce((a,b)=>{let[c,d]=b.split("=");return c&&d&&(a[c]=d),a},{})}function iU(a,b,c){var d,e;return d=a.failedRequestStatusCodes,d.some(a=>"number"==typeof a?a===b:b>=a[0]&&b<=a[1])&&(e=a.failedRequestTargets,e.some(a=>"string"==typeof a?c.includes(a):a.test(c)))&&!iP(c,a6())}function iV(a){let b=a6(),c=b&&a.error&&a.error instanceof Error?a.error.stack:void 0,d=c&&b?b.getOptions().stackParser(c,0,1):void 0,e=`HTTP Client Error with status code: ${a.status}`,f={message:e,exception:{values:[{type:"Error",value:e,stacktrace:d?{frames:d}:void 0}]},request:{url:a.url,method:a.method,headers:a.requestHeaders,cookies:a.requestCookies},contexts:{response:{status_code:a.status,headers:a.responseHeaders,cookies:a.responseCookies,body_size:function(a){if(a){let b=a["Content-Length"]||a["content-length"];if(b)return parseInt(b,10)}}(a.responseHeaders)}}};return aM(f,{type:`auto.http.client.${a.type}`,handled:!1}),f}function iW(){let a=a6();return!!a&&!!a.getOptions().sendDefaultPii}let iX=(a={})=>{let b=null!=a.frameContextLines?a.frameContextLines:7;return{name:"ContextLines",processEvent:a=>(function(a,b){let c=U.document,d=U.location&&ih(U.location.href);if(!c||!d)return a;let e=a.exception?.values;if(!e?.length)return a;let f=c.documentElement.innerHTML;if(!f)return a;let g=["<!DOCTYPE html>","<html>",...f.split("\n"),"</html>"];return e.forEach(a=>{let c=a.stacktrace;c?.frames&&(c.frames=c.frames.map(a=>{var c,e,f,h;return c=a,e=g,f=d,h=b,c.filename===f&&c.lineno&&e.length&&!function(a,b,c=5){if(void 0===b.lineno)return;let d=a.length,e=Math.max(Math.min(d-1,b.lineno-1),0);b.pre_context=a.slice(Math.max(0,e-c),e).map(a=>aE(a,0)),b.context_line=aE(a[Math.min(d-1,e)],b.colno||0),b.post_context=a.slice(Math.min(e+1,d),e+1+c).map(a=>aE(a,0))}(e,c,h),c}))}),a})(a,b)}};function iY(a){return new URLSearchParams(a).toString()}function iZ(a,b=av){try{if("string"==typeof a)return[a];if(a instanceof URLSearchParams)return[a.toString()];if(a instanceof FormData)return[iY(a)];if(!a)return[void 0]}catch(c){return hK&&b.error(c,"Failed to serialize body",a),[void 0,"BODY_PARSE_ERROR"]}return hK&&b.log("Skipping network body because of body type",a),[void 0,"UNPARSEABLE_BODY_TYPE"]}function i$(a=[]){if(2===a.length&&"object"==typeof a[1])return a[1].body}function i_(a){let b;try{b=a.getAllResponseHeaders()}catch(b){return hK&&av.error(b,"Failed to get xhr response headers",a),{}}return b?b.split("\r\n").reduce((a,b)=>{let[c,d]=b.split(": ");return d&&(a[c.toLowerCase()]=d),a},{}):{}}function i0(a){let{query:b,operationName:c}=a,{operationName:d=c,operationType:e}=function(a){let b=a.match(/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/);if(b)return{operationType:b[1],operationName:b[2]};let c=a.match(/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/);return c?{operationType:c[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}(b);return d?`${e} ${d}`:`${e}`}function i1(a){let b;if("xhr"in a){let c=a.xhr[il];b=c&&iZ(c.body)[0]}else b=iZ(i$(a.input))[0];return b}function i2(a){let b;try{let c=JSON.parse(a);c.query&&(b=c)}finally{return b}}let i3=a=>({name:"GraphQLClient",setup(b){var c,d,e,f;c=b,d=a,c.on("beforeOutgoingRequestSpan",(a,b)=>{let c=dw(a).data||{};if("http.client"!==c[cW])return;let e=c["url.full"]||c["http.url"],f=c["http.request.method"]||c["http.method"];if(!ad(e)||!ad(f))return;let{endpoints:g}=d,h=aH(e,g),i=i1(b);if(h&&i){let b=i2(i);if(b){let c=i0(b);a.updateName(`${f} ${e} (${c})`),a.setAttribute("graphql.document",i)}}}),e=b,f=a,e.on("beforeOutgoingRequestBreadcrumb",(a,b)=>{let{category:c,type:d,data:e}=a;if("http"===d&&("fetch"===c||"xhr"===c)){let a=e?.url,{endpoints:c}=f,d=aH(a,c),g=i1(b);if(d&&e&&g){let a=i2(g);if(!e.graphql&&a){let b=i0(a);e["graphql.document"]=a.query,e["graphql.operation"]=b}}}})}}),i4=(a,b,c,d)=>{let e,f;return g=>{if(b.value>=0&&(g||d)&&((f=b.value-(e??0))||void 0===e)){var h;e=b.value,b.delta=f,h=b.value,b.rating=h>c[1]?"poor":h>c[0]?"needs-improvement":"good",a(b)}}},i5=(a=!0)=>{let b=U.performance?.getEntriesByType?.("navigation")[0];if(!a||b&&b.responseStart>0&&b.responseStart<performance.now())return b},i6=()=>{let a=i5();return a?.activationStart??0},i7=(a,b=-1)=>{let c=i5(),d="navigate";return c&&(U.document?.prerendering||i6()>0?d="prerender":U.document?.wasDiscarded?d="restore":c.type&&(d=c.type.replace(/_/g,"-"))),{name:a,value:b,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,navigationType:d}},i8=new WeakMap;function i9(a,b){return i8.get(a)||i8.set(a,new b),i8.get(a)}class ja{constructor(){ja.prototype.__init.call(this),ja.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(a){if(a.hadRecentInput)return;let b=this._sessionEntries[0],c=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&b&&c&&a.startTime-c.startTime<1e3&&a.startTime-b.startTime<5e3?(this._sessionValue+=a.value,this._sessionEntries.push(a)):(this._sessionValue=a.value,this._sessionEntries=[a]),this._onAfterProcessingUnexpectedShift?.(a)}}let jb=(a,b,c={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(a)){let d=new PerformanceObserver(a=>{Promise.resolve().then(()=>{b(a.getEntries())})});return d.observe({type:a,buffered:!0,...c}),d}}catch{}},jc=a=>{let b=!1;return()=>{b||(a(),b=!0)}},jd=-1,je=a=>{"hidden"===U.document.visibilityState&&jd>-1&&(jd="visibilitychange"===a.type?a.timeStamp:0,jf())},jf=()=>{removeEventListener("visibilitychange",je,!0),removeEventListener("prerenderingchange",je,!0)},jg=()=>{if(U.document&&jd<0){let a=i6();jd=(U.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(b=>"hidden"===b.name&&b.startTime>a)[0]?.startTime)??(U.document?.visibilityState!=="hidden"||U.document?.prerendering?1/0:0),addEventListener("visibilitychange",je,!0),addEventListener("prerenderingchange",je,!0)}return{get firstHiddenTime(){return jd}}},jh=a=>{U.document?.prerendering?addEventListener("prerenderingchange",()=>a(),!0):a()},ji=[1800,3e3],jj=[.1,.25],jk=0,jl=1/0,jm=0,jn=a=>{a.forEach(a=>{a.interactionId&&(jl=Math.min(jl,a.interactionId),jk=(jm=Math.max(jm,a.interactionId))?(jm-jl)/7+1:0)})},jo=()=>n?jk:performance.interactionCount||0,jp=0;class jq{constructor(){jq.prototype.__init.call(this),jq.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){jp=jo(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){let a=Math.min(this._longestInteractionList.length-1,Math.floor((jo()-jp)/50));return this._longestInteractionList[a]}_processEntry(a){if(this._onBeforeProcessingEntry?.(a),!(a.interactionId||"first-input"===a.entryType))return;let b=this._longestInteractionList.at(-1),c=this._longestInteractionMap.get(a.interactionId);if(c||this._longestInteractionList.length<10||a.duration>b._latency){if(c?a.duration>c._latency?(c.entries=[a],c._latency=a.duration):a.duration===c._latency&&a.startTime===c.entries[0].startTime&&c.entries.push(a):(c={id:a.interactionId,entries:[a],_latency:a.duration},this._longestInteractionMap.set(c.id,c),this._longestInteractionList.push(c)),this._longestInteractionList.sort((a,b)=>b._latency-a._latency),this._longestInteractionList.length>10)for(let a of this._longestInteractionList.splice(10))this._longestInteractionMap.delete(a.id);this._onAfterProcessingINPCandidate?.(c)}}}let jr=a=>{let b=b=>{("pagehide"===b.type||U.document?.visibilityState==="hidden")&&a(b)};U.document&&(addEventListener("visibilitychange",b,!0),addEventListener("pagehide",b,!0))},js=a=>{let b=U.requestIdleCallback||U.setTimeout;U.document?.visibilityState==="hidden"?a():(b(a=jc(a)),jr(a))},jt=[200,500];class ju{_processEntry(a){this._onBeforeProcessingEntry?.(a)}}let jv=[2500,4e3],jw=[800,1800],jx=a=>{U.document?.prerendering?jh(()=>jx(a)):U.document?.readyState!=="complete"?addEventListener("load",()=>jx(a),!0):setTimeout(a)},jy={},jz={};function jA(a,b=!1){return jJ("cls",a,jF,o,b)}function jB(a,b=!1){return jJ("lcp",a,jG,p,b)}function jC(a){return jJ("inp",a,jI,r)}function jD(a,b){var c;let d;return jK(a,b),jz[a]||(d={},"event"===(c=a)&&(d.durationThreshold=0),jb(c,a=>{jE(c,{entries:a})},d),jz[a]=!0),jL(a,b)}function jE(a,b){let c=jy[a];if(c?.length)for(let d of c)try{d(b)}catch(b){hK&&av.error(`Error while triggering instrumentation handler.
Type: ${a}
Name: ${dU(d)}
Error:`,b)}}function jF(){return((a,b={})=>{((a,b={})=>{jh(()=>{let c,d=jg(),e=i7("FCP"),f=jb("paint",a=>{for(let b of a)"first-contentful-paint"===b.name&&(f.disconnect(),b.startTime<d.firstHiddenTime&&(e.value=Math.max(b.startTime-i6(),0),e.entries.push(b),c(!0)))});f&&(c=i4(a,e,ji,b.reportAllChanges))})})(jc(()=>{let c,d=i7("CLS",0),e=i9(b,ja),f=a=>{for(let b of a)e._processEntry(b);e._sessionValue>d.value&&(d.value=e._sessionValue,d.entries=e._sessionEntries,c())},g=jb("layout-shift",f);g&&(c=i4(a,d,jj,b.reportAllChanges),U.document?.addEventListener("visibilitychange",()=>{U.document?.visibilityState==="hidden"&&(f(g.takeRecords()),c(!0))}),U?.setTimeout?.(c))}))})(a=>{jE("cls",{metric:a}),o=a},{reportAllChanges:!0})}function jG(){return((a,b={})=>{jh(()=>{let c,d=jg(),e=i7("LCP"),f=i9(b,ju),g=a=>{for(let g of(b.reportAllChanges||(a=a.slice(-1)),a))f._processEntry(g),g.startTime<d.firstHiddenTime&&(e.value=Math.max(g.startTime-i6(),0),e.entries=[g],c())},h=jb("largest-contentful-paint",g);if(h){c=i4(a,e,jv,b.reportAllChanges);let d=jc(()=>{g(h.takeRecords()),h.disconnect(),c(!0)});for(let a of["keydown","click","visibilitychange"])U.document&&addEventListener(a,()=>js(d),{capture:!0,once:!0})}})})(a=>{jE("lcp",{metric:a}),p=a},{reportAllChanges:!0})}function jH(){return((a,b={})=>{let c=i7("TTFB"),d=i4(a,c,jw,b.reportAllChanges);jx(()=>{let a=i5();a&&(c.value=Math.max(a.responseStart-i6(),0),c.entries=[a],d(!0))})})(a=>{jE("ttfb",{metric:a}),q=a})}function jI(){return((a,b={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&jh(()=>{let c;"interactionCount"in performance||n||(n=jb("event",jn,{type:"event",buffered:!0,durationThreshold:0}));let d=i7("INP"),e=i9(b,jq),f=a=>{js(()=>{for(let b of a)e._processEntry(b);let b=e._estimateP98LongestInteraction();b&&b._latency!==d.value&&(d.value=b._latency,d.entries=b.entries,c())})},g=jb("event",f,{durationThreshold:b.durationThreshold??40});c=i4(a,d,jt,b.reportAllChanges),g&&(g.observe({type:"first-input",buffered:!0}),jr(()=>{f(g.takeRecords()),c(!0)}))})})(a=>{jE("inp",{metric:a}),r=a})}function jJ(a,b,c,d,e=!1){let f;return jK(a,b),jz[a]||(f=c(),jz[a]=!0),d&&b({metric:d}),jL(a,b,e?f:void 0)}function jK(a,b){jy[a]=jy[a]||[],jy[a].push(b)}function jL(a,b,c){return()=>{c&&c();let d=jy[a];if(!d)return;let e=d.indexOf(b);-1!==e&&d.splice(e,1)}}let jM="sentryReplaySession",jN="Unable to send Replay";var jO=Object.defineProperty,jP=(a,b,c)=>{let d;return(d="symbol"!=typeof b?b+"":b)in a?jO(a,d,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[d]=c},jQ=((E=jQ||{})[E.Document=0]="Document",E[E.DocumentType=1]="DocumentType",E[E.Element=2]="Element",E[E.Text=3]="Text",E[E.CDATA=4]="CDATA",E[E.Comment=5]="Comment",E);function jR(a){let b=a?.host;return b?.shadowRoot===a}function jS(a){return"[object ShadowRoot]"===Object.prototype.toString.call(a)}function jT(a){try{var b;let c=a.rules||a.cssRules;return c?((b=Array.from(c,jU).join("")).includes(" background-clip: text;")&&!b.includes(" -webkit-background-clip: text;")&&(b=b.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),b):null}catch(a){return null}}function jU(a){let b;if("styleSheet"in a)try{b=jT(a.styleSheet)||function(a){let{cssText:b}=a;if(b.split('"').length<3)return b;let c=["@import",`url(${JSON.stringify(a.href)})`];return""===a.layerName?c.push("layer"):a.layerName&&c.push(`layer(${a.layerName})`),a.supportsText&&c.push(`supports(${a.supportsText})`),a.media.length&&c.push(a.media.mediaText),c.join(" ")+";"}(a)}catch(a){}else if("selectorText"in a){let b=a.cssText,c=a.selectorText.includes(":"),d="string"==typeof a.style.all&&a.style.all;if(d&&(b=function(a){let b="";for(let c=0;c<a.style.length;c++){let d=a.style,e=d[c],f=d.getPropertyPriority(e);b+=`${e}:${d.getPropertyValue(e)}${f?" !important":""};`}return`${a.selectorText} { ${b} }`}(a)),c&&(b=b.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2")),c||d)return b}return b||a.cssText}class jV{constructor(){jP(this,"idNodeMap",new Map),jP(this,"nodeMetaMap",new WeakMap)}getId(a){return a?this.getMeta(a)?.id??-1:-1}getNode(a){return this.idNodeMap.get(a)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(a){return this.nodeMetaMap.get(a)||null}removeNodeFromMap(a){let b=this.getId(a);this.idNodeMap.delete(b),a.childNodes&&a.childNodes.forEach(a=>this.removeNodeFromMap(a))}has(a){return this.idNodeMap.has(a)}hasNode(a){return this.nodeMetaMap.has(a)}add(a,b){let c=b.id;this.idNodeMap.set(c,a),this.nodeMetaMap.set(a,b)}replace(a,b){let c=this.getNode(a);if(c){let a=this.nodeMetaMap.get(c);a&&this.nodeMetaMap.set(b,a)}this.idNodeMap.set(a,b)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function jW({maskInputOptions:a,tagName:b,type:c}){return"OPTION"===b&&(b="SELECT"),!!(a[b.toLowerCase()]||c&&a[c]||"password"===c||"INPUT"===b&&!c&&a.text)}function jX({isMasked:a,element:b,value:c,maskInputFn:d}){let e=c||"";return a?(d&&(e=d(e,b)),"*".repeat(e.length)):e}function jY(a){return a.toLowerCase()}function jZ(a){return a.toUpperCase()}let j$="__rrweb_original__";function j_(a){let b=a.type;return a.hasAttribute("data-rr-is-password")?"password":b?jY(b):null}function j0(a,b,c){return"INPUT"===b&&("radio"===c||"checkbox"===c)?a.getAttribute("value")||"":a.value}function j1(a,b){let c;try{c=new URL(a,b??window.location.href)}catch(a){return null}let d=c.pathname.match(/\.([0-9a-z]+)(?:$)/i);return d?.[1]??null}let j2={};function j3(a){let b=j2[a];if(b)return b;let c=window.document,d=window[a];if(c&&"function"==typeof c.createElement)try{let b=c.createElement("iframe");b.hidden=!0,c.head.appendChild(b);let e=b.contentWindow;e&&e[a]&&(d=e[a]),c.head.removeChild(b)}catch(a){}return j2[a]=d.bind(window)}function j4(...a){return j3("setTimeout")(...a)}function j5(...a){return j3("clearTimeout")(...a)}function j6(a){try{return a.contentDocument}catch(a){}}let j7=1,j8=RegExp("[^a-z0-9-_:]");function j9(){return j7++}let ka=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,kb=/^(?:[a-z+]+:)?\/\//i,kc=/^www\..*/i,kd=/^(data:)([^,]*),(.*)/i;function ke(a,b){return(a||"").replace(ka,(a,c,d,e,f,g)=>{let h=d||f||g,i=c||e||"";if(!h)return a;if(kb.test(h)||kc.test(h)||kd.test(h))return`url(${i}${h}${i})`;if("/"===h[0])return`url(${i}${(b.indexOf("//")>-1?b.split("/").slice(0,3).join("/"):b.split("/")[0]).split("?")[0]+h}${i})`;let j=b.split("/"),k=h.split("/");for(let a of(j.pop(),k))if("."===a)continue;else".."===a?j.pop():j.push(a);return`url(${i}${j.join("/")}${i})`})}let kf=/^[^ \t\n\r\u000c]+/,kg=/^[, \t\n\r\u000c]+/,kh=new WeakMap;function ki(a,b){return b&&""!==b.trim()?kj(a,b):b}function kj(a,b){let c=kh.get(a);if(c||(c=a.createElement("a"),kh.set(a,c)),b){if(b.startsWith("blob:")||b.startsWith("data:"))return b}else b="";return c.setAttribute("href",b),c.href}function kk(a,b,c,d,e,f,g){if(!d)return d;if("src"===c||"href"===c&&("use"!==b||"#"!==d[0])||"xlink:href"===c&&"#"!==d[0])return ki(a,d);if("background"===c&&("table"===b||"td"===b||"th"===b))return ki(a,d);if("srcset"===c)return function(a,b){if(""===b.trim())return b;let c=0;function d(a){let d,e=a.exec(b.substring(c));return e?(d=e[0],c+=d.length,d):""}let e=[];for(;d(kg),!(c>=b.length);){let f=d(kf);if(","===f.slice(-1))f=ki(a,f.substring(0,f.length-1)),e.push(f);else{let d="";f=ki(a,f);let g=!1;for(;;){let a=b.charAt(c);if(""===a){e.push((f+d).trim());break}if(g)")"===a&&(g=!1);else if(","===a){c+=1,e.push((f+d).trim());break}else"("===a&&(g=!0);d+=a,c+=1}}}return e.join(", ")}(a,d);if("style"===c){let b=ke(d,kj(a));return g&&g.size>0&&(b=function(a,b){if(!a||0===b.size)return a;try{let c=a.split(";"),d=[];for(let a of c){if(!(a=a.trim()))continue;let c=a.indexOf(":");if(-1===c){d.push(a);continue}let e=a.slice(0,c).trim();b.has(e)||d.push(a)}return d.join("; ")+(d.length>0&&a.endsWith(";")?";":"")}catch(b){return console.warn("Error filtering CSS properties:",b),a}}(b,g)),b}else if("object"===b&&"data"===c)return ki(a,d);return"function"==typeof f?f(c,d,e):d}function kl(a,b,c){return("video"===a||"audio"===a)&&"autoplay"===b}function km(a,b,c=1/0,d=0){return!a||a.nodeType!==a.ELEMENT_NODE||d>c?-1:b(a)?d:km(a.parentNode,b,c,d+1)}function kn(a,b){return c=>{if(null===c)return!1;try{if(a){if("string"==typeof a){if(c.matches(`.${a}`))return!0}else if(function(a,b){for(let c=a.classList.length;c--;){let d=a.classList[c];if(b.test(d))return!0}return!1}(c,a))return!0}if(b&&c.matches(b))return!0;return!1}catch{return!1}}}function ko(a,b,c,d,e,f){try{let g=a.nodeType===a.ELEMENT_NODE?a:a.parentElement;if(null===g)return!1;if("INPUT"===g.tagName){let a=g.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(a))return!0}let h=-1,i=-1;if(f){if((i=km(g,kn(d,e)))<0)return!0;h=km(g,kn(b,c),i>=0?i:1/0)}else{if((h=km(g,kn(b,c)))<0)return!1;i=km(g,kn(d,e),h>=0?h:1/0)}return h>=0?!(i>=0)||h<=i:!(i>=0)&&!!f}catch(a){}return!!f}function kp(a){return null==a?"":a.toLowerCase()}function kq(a,b){let c,{doc:d,mirror:e,blockClass:f,blockSelector:g,unblockSelector:h,maskAllText:i,maskTextClass:j,unmaskTextClass:k,maskTextSelector:l,unmaskTextSelector:m,skipChild:n=!1,inlineStylesheet:o=!0,maskInputOptions:p={},maskAttributeFn:q,maskTextFn:r,maskInputFn:u,slimDOMOptions:v,dataURLOptions:w={},inlineImages:x=!1,recordCanvas:y=!1,onSerialize:z,onIframeLoad:A,iframeLoadTimeout:B=5e3,onBlockedImageLoad:C,onStylesheetLoad:D,stylesheetLoadTimeout:E=5e3,keepIframeSrcFn:F=()=>!1,newlyAddedElement:G=!1,ignoreCSSAttributes:H}=b,{preserveWhiteSpace:I=!0}=b,J=function(a,b){let{doc:c,mirror:d,blockClass:e,blockSelector:f,unblockSelector:g,maskAllText:h,maskAttributeFn:i,maskTextClass:j,unmaskTextClass:k,maskTextSelector:l,unmaskTextSelector:m,inlineStylesheet:n,maskInputOptions:o={},maskTextFn:p,maskInputFn:q,dataURLOptions:r={},inlineImages:u,recordCanvas:v,keepIframeSrcFn:w,newlyAddedElement:x=!1,ignoreCSSAttributes:y}=b,z=function(a,b){if(!b.hasNode(a))return;let c=b.getId(a);return 1===c?void 0:c}(c,d);switch(a.nodeType){case a.DOCUMENT_NODE:if("CSS1Compat"!==a.compatMode)return{type:jQ.Document,childNodes:[],compatMode:a.compatMode};return{type:jQ.Document,childNodes:[]};case a.DOCUMENT_TYPE_NODE:return{type:jQ.DocumentType,name:a.name,publicId:a.publicId,systemId:a.systemId,rootId:z};case a.ELEMENT_NODE:return function(a,b){let c,{doc:d,blockClass:e,blockSelector:f,unblockSelector:g,inlineStylesheet:h,maskInputOptions:i={},maskAttributeFn:j,maskInputFn:k,dataURLOptions:l={},inlineImages:m,recordCanvas:n,keepIframeSrcFn:o,newlyAddedElement:p=!1,rootId:q,maskTextClass:r,unmaskTextClass:u,maskTextSelector:v,unmaskTextSelector:w,ignoreCSSAttributes:x}=b,y=function(a,b,c,d){try{if(d&&a.matches(d))return!1;if("string"==typeof b){if(a.classList.contains(b))return!0}else for(let c=a.classList.length;c--;){let d=a.classList[c];if(b.test(d))return!0}if(c)return a.matches(c)}catch(a){}return!1}(a,e,f,g),z=function(a){if(a instanceof HTMLFormElement)return"form";let b=jY(a.tagName);return j8.test(b)?"div":b}(a),A={},B=a.attributes.length;for(let b=0;b<B;b++){let c=a.attributes[b];c.name&&!kl(z,c.name,c.value)&&(A[c.name]=kk(d,z,jY(c.name),c.value,a,j,x))}if("link"===z&&h){let b=Array.from(d.styleSheets).find(b=>b.href===a.href),c=null;b&&(c=jT(b)),c&&(A.rel=null,A.href=null,A.crossorigin=null,A._cssText=ke(c,b.href))}if("style"===z&&a.sheet&&!(a.innerText||a.textContent||"").trim().length){let b=jT(a.sheet);b&&(A._cssText=ke(b,kj(d)))}if("input"===z||"textarea"===z||"select"===z||"option"===z){let b=j_(a),c=j0(a,jZ(z),b),d=a.checked;if("submit"!==b&&"button"!==b&&c){let d=ko(a,r,v,u,w,jW({type:b,tagName:jZ(z),maskInputOptions:i}));A.value=jX({isMasked:d,element:a,value:c,maskInputFn:k})}d&&(A.checked=d)}if("option"===z&&(a.selected&&!i.select?A.selected=!0:delete A.selected),"canvas"===z&&n){if("2d"===a.__context)!function(a){let b=a.getContext("2d");if(!b)return!0;for(let c=0;c<a.width;c+=50)for(let d=0;d<a.height;d+=50){let e=b.getImageData;if(new Uint32Array((j$ in e?e[j$]:e).call(b,c,d,Math.min(50,a.width-c),Math.min(50,a.height-d)).data.buffer).some(a=>0!==a))return!1}return!0}(a)&&(A.rr_dataURL=a.toDataURL(l.type,l.quality));else if(!("__context"in a)){let b=a.toDataURL(l.type,l.quality),c=d.createElement("canvas");c.width=a.width,c.height=a.height,b!==c.toDataURL(l.type,l.quality)&&(A.rr_dataURL=b)}}if("img"===z&&m){s||(t=(s=d.createElement("canvas")).getContext("2d"));let b=a.currentSrc||a.getAttribute("src")||"<unknown-src>",c=a.crossOrigin,e=()=>{a.removeEventListener("load",e);try{s.width=a.naturalWidth,s.height=a.naturalHeight,t.drawImage(a,0,0),A.rr_dataURL=s.toDataURL(l.type,l.quality)}catch(c){if("anonymous"!==a.crossOrigin){a.crossOrigin="anonymous",a.complete&&0!==a.naturalWidth?e():a.addEventListener("load",e);return}console.warn(`Cannot inline img src=${b}! Error: ${c}`)}"anonymous"===a.crossOrigin&&(c?A.crossOrigin=c:a.removeAttribute("crossorigin"))};a.complete&&0!==a.naturalWidth?e():a.addEventListener("load",e)}if(("audio"===z||"video"===z)&&(A.rr_mediaState=a.paused?"paused":"played",A.rr_mediaCurrentTime=a.currentTime),!p&&(a.scrollLeft&&(A.rr_scrollLeft=a.scrollLeft),a.scrollTop&&(A.rr_scrollTop=a.scrollTop)),y){let{width:b,height:c}=a.getBoundingClientRect();A={class:A.class,rr_width:`${b}px`,rr_height:`${c}px`}}"iframe"!==z||o(A.src)||(y||j6(a)||(A.rr_src=A.src),delete A.src);try{customElements.get(z)&&(c=!0)}catch(a){}return{type:jQ.Element,tagName:z,attributes:A,childNodes:[],isSVG:!!("svg"===a.tagName||a.ownerSVGElement)||void 0,needBlock:y,rootId:q,isCustom:c}}(a,{doc:c,blockClass:e,blockSelector:f,unblockSelector:g,inlineStylesheet:n,maskAttributeFn:i,maskInputOptions:o,maskInputFn:q,dataURLOptions:r,inlineImages:u,recordCanvas:v,keepIframeSrcFn:w,newlyAddedElement:x,rootId:z,maskTextClass:j,unmaskTextClass:k,maskTextSelector:l,unmaskTextSelector:m,ignoreCSSAttributes:y});case a.TEXT_NODE:return function(a,b){let{maskAllText:c,maskTextClass:d,unmaskTextClass:e,maskTextSelector:f,unmaskTextSelector:g,maskTextFn:h,maskInputOptions:i,maskInputFn:j,rootId:k}=b,l=a.parentNode&&a.parentNode.tagName,m=a.textContent,n="STYLE"===l||void 0,o="SCRIPT"===l||void 0,p="TEXTAREA"===l||void 0;if(n&&m){try{a.nextSibling||a.previousSibling||a.parentNode.sheet?.cssRules&&(m=jT(a.parentNode.sheet))}catch(b){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${b}`,a)}m=ke(m,kj(b.doc))}o&&(m="SCRIPT_PLACEHOLDER");let q=ko(a,d,f,e,g,c);return n||o||p||!m||!q||(m=h?h(m,a.parentElement):m.replace(/[\S]/g,"*")),p&&m&&(i.textarea||q)&&(m=j?j(m,a.parentNode):m.replace(/[\S]/g,"*")),"OPTION"===l&&m&&(m=jX({isMasked:ko(a,d,f,e,g,jW({type:null,tagName:l,maskInputOptions:i})),element:a,value:m,maskInputFn:j})),{type:jQ.Text,textContent:m||"",isStyle:n,rootId:k}}(a,{doc:c,maskAllText:h,maskTextClass:j,unmaskTextClass:k,maskTextSelector:l,unmaskTextSelector:m,maskTextFn:p,maskInputOptions:o,maskInputFn:q,rootId:z});case a.CDATA_SECTION_NODE:return{type:jQ.CDATA,textContent:"",rootId:z};case a.COMMENT_NODE:return{type:jQ.Comment,textContent:a.textContent||"",rootId:z};default:return!1}}(a,{doc:d,mirror:e,blockClass:f,blockSelector:g,maskAllText:i,unblockSelector:h,maskTextClass:j,unmaskTextClass:k,maskTextSelector:l,unmaskTextSelector:m,inlineStylesheet:o,maskInputOptions:p,maskAttributeFn:q,maskTextFn:r,maskInputFn:u,dataURLOptions:w,inlineImages:x,recordCanvas:y,keepIframeSrcFn:F,newlyAddedElement:G,ignoreCSSAttributes:H});if(!J)return console.warn(a,"not serialized"),null;c=e.hasNode(a)?e.getId(a):!function(a,b){if(b.comment&&a.type===jQ.Comment)return!0;if(a.type===jQ.Element){if(b.script&&("script"===a.tagName||"link"===a.tagName&&("preload"===a.attributes.rel||"modulepreload"===a.attributes.rel)||"link"===a.tagName&&"prefetch"===a.attributes.rel&&"string"==typeof a.attributes.href&&"js"===j1(a.attributes.href)))return!0;else if(b.headFavicon&&("link"===a.tagName&&"shortcut icon"===a.attributes.rel||"meta"===a.tagName&&(kp(a.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===kp(a.attributes.name)||"icon"===kp(a.attributes.rel)||"apple-touch-icon"===kp(a.attributes.rel)||"shortcut icon"===kp(a.attributes.rel))))return!0;else if("meta"===a.tagName){if(b.headMetaDescKeywords&&kp(a.attributes.name).match(/^description|keywords$/))return!0;else if(b.headMetaSocial&&(kp(a.attributes.property).match(/^(og|twitter|fb):/)||kp(a.attributes.name).match(/^(og|twitter):/)||"pinterest"===kp(a.attributes.name)))return!0;else if(b.headMetaRobots&&("robots"===kp(a.attributes.name)||"googlebot"===kp(a.attributes.name)||"bingbot"===kp(a.attributes.name)))return!0;else if(b.headMetaHttpEquiv&&void 0!==a.attributes["http-equiv"])return!0;else if(b.headMetaAuthorship&&("author"===kp(a.attributes.name)||"generator"===kp(a.attributes.name)||"framework"===kp(a.attributes.name)||"publisher"===kp(a.attributes.name)||"progid"===kp(a.attributes.name)||kp(a.attributes.property).match(/^article:/)||kp(a.attributes.property).match(/^product:/)))return!0;else if(b.headMetaVerification&&("google-site-verification"===kp(a.attributes.name)||"yandex-verification"===kp(a.attributes.name)||"csrf-token"===kp(a.attributes.name)||"p:domain_verify"===kp(a.attributes.name)||"verify-v1"===kp(a.attributes.name)||"verification"===kp(a.attributes.name)||"shopify-checkout-api-token"===kp(a.attributes.name)))return!0}}return!1}(J,v)&&(I||J.type!==jQ.Text||J.isStyle||J.textContent.replace(/^\s+|\s+$/gm,"").length)?j9():-2;let K=Object.assign(J,{id:c});if(e.add(a,K),-2===c)return null;z&&z(a);let L=!n;if(K.type===jQ.Element){L=L&&!K.needBlock;let b=a.shadowRoot;b&&jS(b)&&(K.isShadowHost=!0)}if((K.type===jQ.Document||K.type===jQ.Element)&&L){v.headWhitespace&&K.type===jQ.Element&&"head"===K.tagName&&(I=!1);let b={doc:d,mirror:e,blockClass:f,blockSelector:g,maskAllText:i,unblockSelector:h,maskTextClass:j,unmaskTextClass:k,maskTextSelector:l,unmaskTextSelector:m,skipChild:n,inlineStylesheet:o,maskInputOptions:p,maskAttributeFn:q,maskTextFn:r,maskInputFn:u,slimDOMOptions:v,dataURLOptions:w,inlineImages:x,recordCanvas:y,preserveWhiteSpace:I,onSerialize:z,onIframeLoad:A,iframeLoadTimeout:B,onBlockedImageLoad:C,onStylesheetLoad:D,stylesheetLoadTimeout:E,keepIframeSrcFn:F,ignoreCSSAttributes:H};for(let c of a.childNodes?Array.from(a.childNodes):[]){let a=kq(c,b);a&&K.childNodes.push(a)}if(a.nodeType===a.ELEMENT_NODE&&a.shadowRoot)for(let c of Array.from(a.shadowRoot.childNodes)){let d=kq(c,b);d&&(jS(a.shadowRoot)&&(d.isShadow=!0),K.childNodes.push(d))}}if(a.parentNode&&jR(a.parentNode)&&jS(a.parentNode)&&(K.isShadow=!0),K.type!==jQ.Element||"iframe"!==K.tagName||K.needBlock||function(a,b,c){let d,e=a.contentWindow;if(!e)return;let f=!1;try{d=e.document.readyState}catch(a){return}if("complete"!==d){let d=j4(()=>{f||(b(),f=!0)},c);a.addEventListener("load",()=>{j5(d),f=!0,b()});return}let g="about:blank";if(e.location.href!==g||a.src===g||""===a.src)return j4(b,0),a.addEventListener("load",b);a.addEventListener("load",b)}(a,()=>{let b=j6(a);if(b&&A){let c=kq(b,{doc:b,mirror:e,blockClass:f,blockSelector:g,unblockSelector:h,maskAllText:i,maskTextClass:j,unmaskTextClass:k,maskTextSelector:l,unmaskTextSelector:m,skipChild:!1,inlineStylesheet:o,maskInputOptions:p,maskAttributeFn:q,maskTextFn:r,maskInputFn:u,slimDOMOptions:v,dataURLOptions:w,inlineImages:x,recordCanvas:y,preserveWhiteSpace:I,onSerialize:z,onIframeLoad:A,iframeLoadTimeout:B,onStylesheetLoad:D,stylesheetLoadTimeout:E,keepIframeSrcFn:F,ignoreCSSAttributes:H});c&&A(a,c)}},B),K.type===jQ.Element&&"img"===K.tagName&&!a.complete&&K.needBlock){let b=()=>{if(a.isConnected&&!a.complete&&C)try{let b=a.getBoundingClientRect();b.width>0&&b.height>0&&C(a,K,b)}catch(a){}a.removeEventListener("load",b)};a.isConnected&&a.addEventListener("load",b)}return K.type===jQ.Element&&"link"===K.tagName&&"string"==typeof K.attributes.rel&&("stylesheet"===K.attributes.rel||"preload"===K.attributes.rel&&"string"==typeof K.attributes.href&&"css"===j1(K.attributes.href))&&function(a,b,c){let d,e=!1;try{d=a.sheet}catch(a){return}if(d)return;let f=j4(()=>{e||(b(),e=!0)},c);a.addEventListener("load",()=>{j5(f),e=!0,b()})}(a,()=>{if(D){let b=kq(a,{doc:d,mirror:e,blockClass:f,blockSelector:g,unblockSelector:h,maskAllText:i,maskTextClass:j,unmaskTextClass:k,maskTextSelector:l,unmaskTextSelector:m,skipChild:!1,inlineStylesheet:o,maskInputOptions:p,maskAttributeFn:q,maskTextFn:r,maskInputFn:u,slimDOMOptions:v,dataURLOptions:w,inlineImages:x,recordCanvas:y,preserveWhiteSpace:I,onSerialize:z,onIframeLoad:A,iframeLoadTimeout:B,onStylesheetLoad:D,stylesheetLoadTimeout:E,keepIframeSrcFn:F,ignoreCSSAttributes:H});b&&D(a,b)}},E),K.type===jQ.Element&&delete K.needBlock,K}function kr(a,b,c=document){let d={capture:!0,passive:!0};return c.addEventListener(a,b,d),()=>c.removeEventListener(a,b,d)}function ks(a,b,c={}){let d=null,e=0;return function(...f){let g=Date.now();e||!1!==c.leading||(e=g);let h=b-(g-e),i=this;h<=0||h>b?(d&&(function(...a){kJ("clearTimeout")(...a)}(d),d=null),e=g,a.apply(i,f)):d||!1===c.trailing||(d=kK(()=>{e=!1===c.leading?0:Date.now(),d=null,a.apply(i,f)},h))}}function kt(a,b,c){try{if(!(b in a))return()=>{};let d=a[b],e=c(d);return"function"==typeof e&&(e.prototype=e.prototype||{},Object.defineProperties(e,{__rrweb_original__:{enumerable:!1,value:d}})),a[b]=e,()=>{a[b]=d}}catch{return()=>{}}}let ku=Date.now;function kv(a){let b=a.document;return{left:b.scrollingElement?b.scrollingElement.scrollLeft:void 0!==a.pageXOffset?a.pageXOffset:b?.documentElement.scrollLeft||b?.body?.parentElement?.scrollLeft||b?.body?.scrollLeft||0,top:b.scrollingElement?b.scrollingElement.scrollTop:void 0!==a.pageYOffset?a.pageYOffset:b?.documentElement.scrollTop||b?.body?.parentElement?.scrollTop||b?.body?.scrollTop||0}}function kw(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function kx(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ky(a){if(!a)return null;try{return a.nodeType===a.ELEMENT_NODE?a:a.parentElement}catch(a){return null}}function kz(a,b,c,d,e){if(!a)return!1;let f=ky(a);if(!f)return!1;let g=kn(b,c);if(!e){let a=d&&f.matches(d);return g(f)&&!a}let h=km(f,g),i=-1;return!(h<0)&&(d&&(i=km(f,kn(null,d))),h>-1&&i<0||h<i)}function kA(a,b){return -2===b.getId(a)}function kB(a){return!!a.changedTouches}function kC(a,b){return!!("IFRAME"===a.nodeName&&b.getMeta(a))}function kD(a,b){return!!("LINK"===a.nodeName&&a.nodeType===a.ELEMENT_NODE&&a.getAttribute&&"stylesheet"===a.getAttribute("rel")&&b.getMeta(a))}function kE(a){return!!a?.shadowRoot}/[1-9][0-9]{12}/.test(Date.now().toString())||(ku=()=>new Date().getTime());class kF{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(a){return this.styleIDMap.get(a)??-1}has(a){return this.styleIDMap.has(a)}add(a,b){let c;return this.has(a)?this.getId(a):(c=void 0===b?this.id++:b,this.styleIDMap.set(a,c),this.idStyleMap.set(c,a),c)}getStyle(a){return this.idStyleMap.get(a)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function kG(a){let b=null;return a.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&a.getRootNode().host&&(b=a.getRootNode().host),b}function kH(a){let b=a.ownerDocument;return!!b&&(b.contains(a)||function(a){let b=a.ownerDocument;if(!b)return!1;let c=function(a){let b,c=a;for(;b=kG(c);)c=b;return c}(a);return b.contains(c)}(a))}let kI={};function kJ(a){let b=kI[a];if(b)return b;let c=window.document,d=window[a];if(c&&"function"==typeof c.createElement)try{let b=c.createElement("iframe");b.hidden=!0,c.head.appendChild(b);let e=b.contentWindow;e&&e[a]&&(d=e[a]),c.head.removeChild(b)}catch(a){}return kI[a]=d.bind(window)}function kK(...a){return kJ("setTimeout")(...a)}var kL=((F=kL||{})[F.DomContentLoaded=0]="DomContentLoaded",F[F.Load=1]="Load",F[F.FullSnapshot=2]="FullSnapshot",F[F.IncrementalSnapshot=3]="IncrementalSnapshot",F[F.Meta=4]="Meta",F[F.Custom=5]="Custom",F[F.Plugin=6]="Plugin",F),kM=((G=kM||{})[G.Mutation=0]="Mutation",G[G.MouseMove=1]="MouseMove",G[G.MouseInteraction=2]="MouseInteraction",G[G.Scroll=3]="Scroll",G[G.ViewportResize=4]="ViewportResize",G[G.Input=5]="Input",G[G.TouchMove=6]="TouchMove",G[G.MediaInteraction=7]="MediaInteraction",G[G.StyleSheetRule=8]="StyleSheetRule",G[G.CanvasMutation=9]="CanvasMutation",G[G.Font=10]="Font",G[G.Log=11]="Log",G[G.Drag=12]="Drag",G[G.StyleDeclaration=13]="StyleDeclaration",G[G.Selection=14]="Selection",G[G.AdoptedStyleSheet=15]="AdoptedStyleSheet",G[G.CustomElement=16]="CustomElement",G),kN=((H=kN||{})[H.MouseUp=0]="MouseUp",H[H.MouseDown=1]="MouseDown",H[H.Click=2]="Click",H[H.ContextMenu=3]="ContextMenu",H[H.DblClick=4]="DblClick",H[H.Focus=5]="Focus",H[H.Blur=6]="Blur",H[H.TouchStart=7]="TouchStart",H[H.TouchMove_Departed=8]="TouchMove_Departed",H[H.TouchEnd=9]="TouchEnd",H[H.TouchCancel=10]="TouchCancel",H),kO=((I=kO||{})[I.Mouse=0]="Mouse",I[I.Pen=1]="Pen",I[I.Touch=2]="Touch",I),kP=((J=kP||{})[J.Play=0]="Play",J[J.Pause=1]="Pause",J[J.Seeked=2]="Seeked",J[J.VolumeChange=3]="VolumeChange",J[J.RateChange=4]="RateChange",J);function kQ(a){try{return a.contentDocument}catch(a){}}class kR{constructor(){this.length=0,this.head=null,this.tail=null}get(a){if(a>=this.length)throw Error("Position outside of list range");let b=this.head;for(let c=0;c<a;c++)b=b?.next||null;return b}addNode(a){let b={value:a,previous:null,next:null};if(a.__ln=b,a.previousSibling&&"__ln"in a.previousSibling){let c=a.previousSibling.__ln.next;b.next=c,b.previous=a.previousSibling.__ln,a.previousSibling.__ln.next=b,c&&(c.previous=b)}else if(a.nextSibling&&"__ln"in a.nextSibling&&a.nextSibling.__ln.previous){let c=a.nextSibling.__ln.previous;b.previous=c,b.next=a.nextSibling.__ln,a.nextSibling.__ln.previous=b,c&&(c.next=b)}else this.head&&(this.head.previous=b),b.next=this.head,this.head=b;null===b.next&&(this.tail=b),this.length++}removeNode(a){let b=a.__ln;this.head&&(b.previous?(b.previous.next=b.next,b.next?b.next.previous=b.previous:this.tail=b.previous):(this.head=b.next,this.head?this.head.previous=null:this.tail=null),a.__ln&&delete a.__ln,this.length--)}}let kS=(a,b)=>`${a}@${b}`;class kT{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=a=>{a.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let a=[],b=new Set,c=new kR,d=a=>{let b=a,c=-2;for(;-2===c;)c=(b=b&&b.nextSibling)&&this.mirror.getId(b);return c},e=e=>{if(!e.parentNode||!kH(e))return;let f=jR(e.parentNode)?this.mirror.getId(kG(e)):this.mirror.getId(e.parentNode),g=d(e);if(-1===f||-1===g)return c.addNode(e);let h=kq(e,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:a=>{kC(a,this.mirror)&&!kz(a,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(a),kD(a,this.mirror)&&this.stylesheetManager.trackLinkElement(a),kE(e)&&this.shadowDomManager.addShadowRoot(e.shadowRoot,this.doc)},onIframeLoad:(a,b)=>{kz(a,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(a,b),a.contentWindow&&this.canvasManager.addWindow(a.contentWindow),this.shadowDomManager.observeAttachShadow(a))},onStylesheetLoad:(a,b)=>{this.stylesheetManager.attachLinkElement(a,b)},onBlockedImageLoad:(a,b,{width:c,height:d})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:b.id,attributes:{style:{width:`${c}px`,height:`${d}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});h&&(a.push({parentId:f,nextId:g,node:h}),b.add(h.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let a of this.movedSet)(!kV(this.removes,a,this.mirror)||this.movedSet.has(a.parentNode))&&e(a);for(let a of this.addedSet)kW(this.droppedSet,a)||kV(this.removes,a,this.mirror)?kW(this.movedSet,a)?e(a):this.droppedSet.add(a):e(a);let f=null;for(;c.length;){let a=null;if(f){let b=this.mirror.getId(f.value.parentNode),c=d(f.value);-1!==b&&-1!==c&&(a=f)}if(!a){let b=c.tail;for(;b;){let c=b;if(b=b.previous,c){let b=this.mirror.getId(c.value.parentNode);if(-1===d(c.value))continue;if(-1!==b){a=c;break}{let b=c.value;if(b.parentNode&&b.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let d=b.parentNode.host;if(-1!==this.mirror.getId(d)){a=c;break}}}}}}if(!a){for(;c.head;)c.removeNode(c.head.value);break}f=a.previous,c.removeNode(a.value),e(a.value)}let g={texts:this.texts.map(a=>({id:this.mirror.getId(a.node),value:a.value})).filter(a=>!b.has(a.id)).filter(a=>this.mirror.has(a.id)),attributes:this.attributes.map(a=>{let{attributes:b}=a;if("string"==typeof b.style){let c=JSON.stringify(a.styleDiff),d=JSON.stringify(a._unchangedStyles);c.length<b.style.length&&(c+d).split("var(").length===b.style.split("var(").length&&(b.style=a.styleDiff)}return{id:this.mirror.getId(a.node),attributes:b}}).filter(a=>!b.has(a.id)).filter(a=>this.mirror.has(a.id)),removes:this.removes,adds:a};(g.texts.length||g.attributes.length||g.removes.length||g.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(g))},this.processMutation=a=>{if(!kA(a.target,this.mirror))switch(a.type){case"characterData":{let b=a.target.textContent;kz(a.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||b===a.oldValue||this.texts.push({value:ko(a.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&b?this.maskTextFn?this.maskTextFn(b,ky(a.target)):b.replace(/[\S]/g,"*"):b,node:a.target});break}case"attributes":{let b=a.target,c=a.attributeName,d=a.target.getAttribute(c);if("value"===c){let c=j_(b),e=b.tagName;d=j0(b,e,c);let f=jW({maskInputOptions:this.maskInputOptions,tagName:e,type:c});d=jX({isMasked:ko(a.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,f),element:b,value:d,maskInputFn:this.maskInputFn})}if(kz(a.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||d===a.oldValue)return;let e=this.attributeMap.get(a.target);if("IFRAME"===b.tagName&&"src"===c&&!this.keepIframeSrcFn(d)){if(kQ(b))return;c="rr_src"}if(e||(e={node:a.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(e),this.attributeMap.set(a.target,e)),"type"===c&&"INPUT"===b.tagName&&"password"===(a.oldValue||"").toLowerCase()&&b.setAttribute("data-rr-is-password","true"),!kl(b.tagName,c)&&(e.attributes[c]=kk(this.doc,jY(b.tagName),jY(c),d,b,this.maskAttributeFn),"style"===c)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(a){this.unattachedDoc=this.doc}let c=this.unattachedDoc.createElement("span");for(let d of(a.oldValue&&c.setAttribute("style",a.oldValue),Array.from(b.style))){let a=b.style.getPropertyValue(d),f=b.style.getPropertyPriority(d);a!==c.style.getPropertyValue(d)||f!==c.style.getPropertyPriority(d)?""===f?e.styleDiff[d]=a:e.styleDiff[d]=[a,f]:e._unchangedStyles[d]=[a,f]}for(let a of Array.from(c.style))""===b.style.getPropertyValue(a)&&(e.styleDiff[a]=!1)}break}case"childList":if(kz(a.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;a.addedNodes.forEach(b=>this.genAdds(b,a.target)),a.removedNodes.forEach(b=>{let c=this.mirror.getId(b),d=jR(a.target)?this.mirror.getId(a.target.host):this.mirror.getId(a.target);kz(a.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||kA(b,this.mirror)||-1===this.mirror.getId(b)||(this.addedSet.has(b)?(kU(this.addedSet,b),this.droppedSet.add(b)):this.addedSet.has(a.target)&&-1===c||function a(b,c){if(jR(b))return!1;let d=c.getId(b);return!c.has(d)||(!b.parentNode||b.parentNode.nodeType!==b.DOCUMENT_NODE)&&(!b.parentNode||a(b.parentNode,c))}(a.target,this.mirror)||(this.movedSet.has(b)&&this.movedMap[kS(c,d)]?kU(this.movedSet,b):this.removes.push({parentId:d,id:c,isShadow:!!(jR(a.target)&&jS(a.target))||void 0})),this.mapRemoves.push(b))})}},this.genAdds=(a,b)=>{if(!this.processedNodeManager.inOtherBuffer(a,this)&&!(this.addedSet.has(a)||this.movedSet.has(a))){if(this.mirror.hasNode(a)){if(kA(a,this.mirror))return;this.movedSet.add(a);let c=null;b&&this.mirror.hasNode(b)&&(c=this.mirror.getId(b)),c&&-1!==c&&(this.movedMap[kS(this.mirror.getId(a),c)]=!0)}else this.addedSet.add(a),this.droppedSet.delete(a);!kz(a,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&(a.childNodes&&a.childNodes.forEach(a=>this.genAdds(a)),kE(a)&&a.shadowRoot.childNodes.forEach(b=>{this.processedNodeManager.add(b,this),this.genAdds(b,a)}))}}}init(a){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach(b=>{this[b]=a[b]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function kU(a,b){a.delete(b),b.childNodes?.forEach(b=>kU(a,b))}function kV(a,b,c){return 0!==a.length&&function(a,b,c){let d=b.parentNode;for(;d;){let b=c.getId(d);if(a.some(a=>a.id===b))return!0;d=d.parentNode}return!1}(a,b,c)}function kW(a,b){return 0!==a.size&&function a(b,c){let{parentNode:d}=c;return!!d&&(!!b.has(d)||a(b,d))}(a,b)}let kX=a=>u?(...b)=>{try{return a(...b)}catch(a){if(u&&!0===u(a))return()=>{};throw a}}:a,kY=[];function kZ(a){try{if("composedPath"in a){let b=a.composedPath();if(b.length)return b[0]}else if("path"in a&&a.path.length)return a.path[0]}catch{}return a&&a.target}function k$(a,b){let c=new kT;kY.push(c),c.init(a);let d=window.MutationObserver||window.__rrMutationObserver,e=window?.Zone?.__symbol__?.("MutationObserver");e&&window[e]&&(d=window[e]);let f=new d(kX(b=>{a.onMutation&&!1===a.onMutation(b)||c.processMutations.bind(c)(b)}));return f.observe(b,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),f}function k_({scrollCb:a,doc:b,mirror:c,blockClass:d,blockSelector:e,unblockSelector:f,sampling:g}){return kr("scroll",kX(ks(kX(g=>{let h=kZ(g);if(!h||kz(h,d,e,f,!0))return;let i=c.getId(h);if(h===b&&b.defaultView){let c=kv(b.defaultView);a({id:i,x:c.left,y:c.top})}else a({id:i,x:h.scrollLeft,y:h.scrollTop})}),g.scroll||100)),b)}let k0=["INPUT","TEXTAREA","SELECT"],k1=new WeakMap;function k2(a){var b=[];if(k6("CSSGroupingRule")&&a.parentRule instanceof CSSGroupingRule||k6("CSSMediaRule")&&a.parentRule instanceof CSSMediaRule||k6("CSSSupportsRule")&&a.parentRule instanceof CSSSupportsRule||k6("CSSConditionRule")&&a.parentRule instanceof CSSConditionRule){let c=Array.from(a.parentRule.cssRules).indexOf(a);b.unshift(c)}else if(a.parentStyleSheet){let c=Array.from(a.parentStyleSheet.cssRules).indexOf(a);b.unshift(c)}return b}function k3(a,b,c){let d,e;return a?(a.ownerNode?d=b.getId(a.ownerNode):e=c.getId(a),{styleId:e,id:d}):{}}function k4({mirror:a,stylesheetManager:b},c){let d=null;d="#document"===c.nodeName?a.getId(c):a.getId(c.host);let e="#document"===c.nodeName?c.defaultView?.Document:c.ownerDocument?.defaultView?.ShadowRoot,f=e?.prototype?Object.getOwnPropertyDescriptor(e?.prototype,"adoptedStyleSheets"):void 0;return null!==d&&-1!==d&&e&&f?(Object.defineProperty(c,"adoptedStyleSheets",{configurable:f.configurable,enumerable:f.enumerable,get(){return f.get?.call(this)},set(a){let c=f.set?.call(this,a);if(null!==d&&-1!==d)try{b.adoptStyleSheets(a,d)}catch(a){}return c}}),kX(()=>{Object.defineProperty(c,"adoptedStyleSheets",{configurable:f.configurable,enumerable:f.enumerable,get:f.get,set:f.set})})):()=>{}}function k5(a,b={}){let c,d=a.doc.defaultView;if(!d)return()=>{};a.recordDOM&&(c=k$(a,a.doc));let e=function({mousemoveCb:a,sampling:b,doc:c,mirror:d}){let e;if(!1===b.mousemove)return()=>{};let f="number"==typeof b.mousemove?b.mousemove:50,g="number"==typeof b.mousemoveCallback?b.mousemoveCallback:500,h=[],i=ks(kX(b=>{let c=Date.now()-e;a(h.map(a=>(a.timeOffset-=c,a)),b),h=[],e=null}),g),j=kX(ks(kX(a=>{let b=kZ(a),{clientX:c,clientY:f}=kB(a)?a.changedTouches[0]:a;e||(e=ku()),h.push({x:c,y:f,id:d.getId(b),timeOffset:ku()-e}),i("undefined"!=typeof DragEvent&&a instanceof DragEvent?kM.Drag:a instanceof MouseEvent?kM.MouseMove:kM.TouchMove)}),f,{trailing:!1})),k=[kr("mousemove",j,c),kr("touchmove",j,c),kr("drag",j,c)];return kX(()=>{k.forEach(a=>a())})}(a),f=function({mouseInteractionCb:a,doc:b,mirror:c,blockClass:d,blockSelector:e,unblockSelector:f,sampling:g}){if(!1===g.mouseInteraction)return()=>{};let h=!0===g.mouseInteraction||void 0===g.mouseInteraction?{}:g.mouseInteraction,i=[],j=null;return Object.keys(kN).filter(a=>Number.isNaN(Number(a))&&!a.endsWith("_Departed")&&!1!==h[a]).forEach(g=>{let h=jY(g),k=b=>{let h=kZ(b);if(kz(h,d,e,f,!0))return;let i=null,k=g;if("pointerType"in b){switch(b.pointerType){case"mouse":i=kO.Mouse;break;case"touch":i=kO.Touch;break;case"pen":i=kO.Pen}i===kO.Touch?kN[g]===kN.MouseDown?k="TouchStart":kN[g]===kN.MouseUp&&(k="TouchEnd"):kO.Pen}else kB(b)&&(i=kO.Touch);null!==i?(j=i,(k.startsWith("Touch")&&i===kO.Touch||k.startsWith("Mouse")&&i===kO.Mouse)&&(i=null)):kN[g]===kN.Click&&(i=j,j=null);let l=kB(b)?b.changedTouches[0]:b;if(!l)return;let m=c.getId(h),{clientX:n,clientY:o}=l;kX(a)({type:kN[k],id:m,x:n,y:o,...null!==i&&{pointerType:i}})};if(window.PointerEvent)switch(kN[g]){case kN.MouseDown:case kN.MouseUp:h=h.replace("mouse","pointer");break;case kN.TouchStart:case kN.TouchEnd:return}i.push(kr(h,k,b))}),kX(()=>{i.forEach(a=>a())})}(a),g=k_(a),h=function({viewportResizeCb:a},{win:b}){let c=-1,d=-1;return kr("resize",kX(ks(kX(()=>{let b=kw(),e=kx();(c!==b||d!==e)&&(a({width:Number(e),height:Number(b)}),c=b,d=e)}),200)),b)}(a,{win:d}),i=function({inputCb:a,doc:b,mirror:c,blockClass:d,blockSelector:e,unblockSelector:f,ignoreClass:g,ignoreSelector:h,maskInputOptions:i,maskInputFn:j,sampling:k,userTriggeredOnInput:l,maskTextClass:m,unmaskTextClass:n,maskTextSelector:o,unmaskTextSelector:p}){function q(a){let c=kZ(a),k=a.isTrusted,q=c&&jZ(c.tagName);if("OPTION"===q&&(c=c.parentElement),!c||!q||0>k0.indexOf(q)||kz(c,d,e,f,!0))return;let s=c;if(s.classList.contains(g)||h&&s.matches(h))return;let t=j_(c),u=j0(s,q,t),v=!1,w=jW({maskInputOptions:i,tagName:q,type:t}),x=ko(c,m,o,n,p,w);("radio"===t||"checkbox"===t)&&(v=c.checked),u=jX({isMasked:x,element:c,value:u,maskInputFn:j}),r(c,l?{text:u,isChecked:v,userTriggered:k}:{text:u,isChecked:v});let y=c.name;"radio"===t&&y&&v&&b.querySelectorAll(`input[type="radio"][name="${y}"]`).forEach(a=>{if(a!==c){let b=jX({isMasked:x,element:a,value:j0(a,q,t),maskInputFn:j});r(a,l?{text:b,isChecked:!v,userTriggered:!1}:{text:b,isChecked:!v})}})}function r(b,d){let e=k1.get(b);if(!e||e.text!==d.text||e.isChecked!==d.isChecked){k1.set(b,d);let e=c.getId(b);kX(a)({...d,id:e})}}let s=("last"===k.input?["change"]:["input","change"]).map(a=>kr(a,kX(q),b)),t=b.defaultView;if(!t)return()=>{s.forEach(a=>a())};let u=t.Object.getOwnPropertyDescriptor(t.HTMLInputElement.prototype,"value"),v=[[t.HTMLInputElement.prototype,"value"],[t.HTMLInputElement.prototype,"checked"],[t.HTMLSelectElement.prototype,"value"],[t.HTMLTextAreaElement.prototype,"value"],[t.HTMLSelectElement.prototype,"selectedIndex"],[t.HTMLOptionElement.prototype,"selected"]];return u&&u.set&&s.push(...v.map(a=>(function a(b,c,d,e,f=window){let g=f.Object.getOwnPropertyDescriptor(b,c);return f.Object.defineProperty(b,c,e?d:{set(a){kK(()=>{d.set.call(this,a)},0),g&&g.set&&g.set.call(this,a)}}),()=>a(b,c,g||{},!0)})(a[0],a[1],{set(){kX(q)({target:this,isTrusted:!1})}},!1,t))),kX(()=>{s.forEach(a=>a())})}(a),j=function({mediaInteractionCb:a,blockClass:b,blockSelector:c,unblockSelector:d,mirror:e,sampling:f,doc:g}){let h=kX(g=>ks(kX(f=>{let h=kZ(f);if(!h||kz(h,b,c,d,!0))return;let{currentTime:i,volume:j,muted:k,playbackRate:l}=h;a({type:g,id:e.getId(h),currentTime:i,volume:j,muted:k,playbackRate:l})}),f.media||500)),i=[kr("play",h(kP.Play),g),kr("pause",h(kP.Pause),g),kr("seeked",h(kP.Seeked),g),kr("volumechange",h(kP.VolumeChange),g),kr("ratechange",h(kP.RateChange),g)];return kX(()=>{i.forEach(a=>a())})}(a),k=()=>{},l=()=>{},m=()=>{},n=()=>{};a.recordDOM&&(k=function({styleSheetRuleCb:a,mirror:b,stylesheetManager:c},{win:d}){let e,f;if(!d.CSSStyleSheet||!d.CSSStyleSheet.prototype)return()=>{};let g=d.CSSStyleSheet.prototype.insertRule;d.CSSStyleSheet.prototype.insertRule=new Proxy(g,{apply:kX((d,e,f)=>{let[g,h]=f,{id:i,styleId:j}=k3(e,b,c.styleMirror);return(i&&-1!==i||j&&-1!==j)&&a({id:i,styleId:j,adds:[{rule:g,index:h}]}),d.apply(e,f)})});let h=d.CSSStyleSheet.prototype.deleteRule;d.CSSStyleSheet.prototype.deleteRule=new Proxy(h,{apply:kX((d,e,f)=>{let[g]=f,{id:h,styleId:i}=k3(e,b,c.styleMirror);return(h&&-1!==h||i&&-1!==i)&&a({id:h,styleId:i,removes:[{index:g}]}),d.apply(e,f)})}),d.CSSStyleSheet.prototype.replace&&(e=d.CSSStyleSheet.prototype.replace,d.CSSStyleSheet.prototype.replace=new Proxy(e,{apply:kX((d,e,f)=>{let[g]=f,{id:h,styleId:i}=k3(e,b,c.styleMirror);return(h&&-1!==h||i&&-1!==i)&&a({id:h,styleId:i,replace:g}),d.apply(e,f)})})),d.CSSStyleSheet.prototype.replaceSync&&(f=d.CSSStyleSheet.prototype.replaceSync,d.CSSStyleSheet.prototype.replaceSync=new Proxy(f,{apply:kX((d,e,f)=>{let[g]=f,{id:h,styleId:i}=k3(e,b,c.styleMirror);return(h&&-1!==h||i&&-1!==i)&&a({id:h,styleId:i,replaceSync:g}),d.apply(e,f)})}));let i={};k7("CSSGroupingRule")?i.CSSGroupingRule=d.CSSGroupingRule:(k7("CSSMediaRule")&&(i.CSSMediaRule=d.CSSMediaRule),k7("CSSConditionRule")&&(i.CSSConditionRule=d.CSSConditionRule),k7("CSSSupportsRule")&&(i.CSSSupportsRule=d.CSSSupportsRule));let j={};return Object.entries(i).forEach(([d,e])=>{j[d]={insertRule:e.prototype.insertRule,deleteRule:e.prototype.deleteRule},e.prototype.insertRule=new Proxy(j[d].insertRule,{apply:kX((d,e,f)=>{let[g,h]=f,{id:i,styleId:j}=k3(e.parentStyleSheet,b,c.styleMirror);return(i&&-1!==i||j&&-1!==j)&&a({id:i,styleId:j,adds:[{rule:g,index:[...k2(e),h||0]}]}),d.apply(e,f)})}),e.prototype.deleteRule=new Proxy(j[d].deleteRule,{apply:kX((d,e,f)=>{let[g]=f,{id:h,styleId:i}=k3(e.parentStyleSheet,b,c.styleMirror);return(h&&-1!==h||i&&-1!==i)&&a({id:h,styleId:i,removes:[{index:[...k2(e),g]}]}),d.apply(e,f)})})}),kX(()=>{d.CSSStyleSheet.prototype.insertRule=g,d.CSSStyleSheet.prototype.deleteRule=h,e&&(d.CSSStyleSheet.prototype.replace=e),f&&(d.CSSStyleSheet.prototype.replaceSync=f),Object.entries(i).forEach(([a,b])=>{b.prototype.insertRule=j[a].insertRule,b.prototype.deleteRule=j[a].deleteRule})})}(a,{win:d}),l=k4(a,a.doc),m=function({styleDeclarationCb:a,mirror:b,ignoreCSSAttributes:c,stylesheetManager:d},{win:e}){let f=e.CSSStyleDeclaration.prototype.setProperty;e.CSSStyleDeclaration.prototype.setProperty=new Proxy(f,{apply:kX((e,g,h)=>{let[i,j,k]=h;if(c.has(i))return f.apply(g,[i,j,k]);let{id:l,styleId:m}=k3(g.parentRule?.parentStyleSheet,b,d.styleMirror);return(l&&-1!==l||m&&-1!==m)&&a({id:l,styleId:m,set:{property:i,value:j,priority:k},index:k2(g.parentRule)}),e.apply(g,h)})});let g=e.CSSStyleDeclaration.prototype.removeProperty;return e.CSSStyleDeclaration.prototype.removeProperty=new Proxy(g,{apply:kX((e,f,h)=>{let[i]=h;if(c.has(i))return g.apply(f,[i]);let{id:j,styleId:k}=k3(f.parentRule?.parentStyleSheet,b,d.styleMirror);return(j&&-1!==j||k&&-1!==k)&&a({id:j,styleId:k,remove:{property:i},index:k2(f.parentRule)}),e.apply(f,h)})}),kX(()=>{e.CSSStyleDeclaration.prototype.setProperty=f,e.CSSStyleDeclaration.prototype.removeProperty=g})}(a,{win:d}),a.collectFonts&&(n=function({fontCb:a,doc:b}){let c=b.defaultView;if(!c)return()=>{};let d=[],e=new WeakMap,f=c.FontFace;c.FontFace=function(a,b,c){let d=new f(a,b,c);return e.set(d,{family:a,buffer:"string"!=typeof b,descriptors:c,fontSource:"string"==typeof b?b:JSON.stringify(Array.from(new Uint8Array(b)))}),d};let g=kt(b.fonts,"add",function(b){return function(c){return kK(kX(()=>{let b=e.get(c);b&&(a(b),e.delete(c))}),0),b.apply(this,[c])}});return d.push(()=>{c.FontFace=f}),d.push(g),kX(()=>{d.forEach(a=>a())})}(a)));let o=function(a){let{doc:b,mirror:c,blockClass:d,blockSelector:e,unblockSelector:f,selectionCb:g}=a,h=!0,i=kX(()=>{let a=b.getSelection();if(!a||h&&a?.isCollapsed)return;h=a.isCollapsed||!1;let i=[],j=a.rangeCount||0;for(let b=0;b<j;b++){let{startContainer:g,startOffset:h,endContainer:j,endOffset:k}=a.getRangeAt(b);kz(g,d,e,f,!0)||kz(j,d,e,f,!0)||i.push({start:c.getId(g),startOffset:h,end:c.getId(j),endOffset:k})}g({ranges:i})});return i(),kr("selectionchange",i)}(a),p=function({doc:a,customElementCb:b}){let c=a.defaultView;return c&&c.customElements?kt(c.customElements,"define",function(a){return function(c,d,e){try{b({define:{name:c}})}catch(a){}return a.apply(this,[c,d,e])}}):()=>{}}(a),q=[];for(let b of a.plugins)q.push(b.observer(b.callback,d,b.options));return kX(()=>{kY.forEach(a=>a.reset()),c?.disconnect(),e(),f(),g(),h(),i(),j(),k(),l(),m(),n(),o(),p(),q.forEach(a=>a())})}function k6(a){return void 0!==window[a]}function k7(a){return!!(void 0!==window[a]&&window[a].prototype&&"insertRule"in window[a].prototype&&"deleteRule"in window[a].prototype)}class k8{constructor(a){this.generateIdFn=a,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(a,b,c,d){let e=c||this.getIdToRemoteIdMap(a),f=d||this.getRemoteIdToIdMap(a),g=e.get(b);return g||(g=this.generateIdFn(),e.set(b,g),f.set(g,b)),g}getIds(a,b){let c=this.getIdToRemoteIdMap(a),d=this.getRemoteIdToIdMap(a);return b.map(b=>this.getId(a,b,c,d))}getRemoteId(a,b,c){let d=c||this.getRemoteIdToIdMap(a);if("number"!=typeof b)return b;let e=d.get(b);return e||-1}getRemoteIds(a,b){let c=this.getRemoteIdToIdMap(a);return b.map(b=>this.getRemoteId(a,b,c))}reset(a){if(!a){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(a),this.iframeRemoteIdToIdMap.delete(a)}getIdToRemoteIdMap(a){let b=this.iframeIdToRemoteIdMap.get(a);return b||(b=new Map,this.iframeIdToRemoteIdMap.set(a,b)),b}getRemoteIdToIdMap(a){let b=this.iframeRemoteIdToIdMap.get(a);return b||(b=new Map,this.iframeRemoteIdToIdMap.set(a,b)),b}}class k9{constructor(){this.crossOriginIframeMirror=new k8(j9),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class la{constructor(a){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new k8(j9),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=a.mutationCb,this.wrappedEmit=a.wrappedEmit,this.stylesheetManager=a.stylesheetManager,this.recordCrossOriginIframes=a.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new k8(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=a.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(a){this.iframes.set(a,!0),a.contentWindow&&this.crossOriginIframeMap.set(a.contentWindow,a)}addLoadListener(a){this.loadListener=a}attachIframe(a,b){this.mutationCb({adds:[{parentId:this.mirror.getId(a),nextId:null,node:b}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&a.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(a);let c=kQ(a);c&&c.adoptedStyleSheets&&c.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(c.adoptedStyleSheets,this.mirror.getId(c))}handleMessage(a){if("rrweb"!==a.data.type||a.origin!==a.data.origin||!a.source)return;let b=this.crossOriginIframeMap.get(a.source);if(!b)return;let c=this.transformCrossOriginEvent(b,a.data.event);c&&this.wrappedEmit(c,a.data.isCheckout)}transformCrossOriginEvent(a,b){switch(b.type){case kL.FullSnapshot:{this.crossOriginIframeMirror.reset(a),this.crossOriginIframeStyleMirror.reset(a),this.replaceIdOnNode(b.data.node,a);let c=b.data.node.id;return this.crossOriginIframeRootIdMap.set(a,c),this.patchRootIdOnNode(b.data.node,c),{timestamp:b.timestamp,type:kL.IncrementalSnapshot,data:{source:kM.Mutation,adds:[{parentId:this.mirror.getId(a),nextId:null,node:b.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case kL.Meta:case kL.Load:case kL.DomContentLoaded:break;case kL.Plugin:return b;case kL.Custom:return this.replaceIds(b.data.payload,a,["id","parentId","previousId","nextId"]),b;case kL.IncrementalSnapshot:switch(b.data.source){case kM.Mutation:return b.data.adds.forEach(b=>{this.replaceIds(b,a,["parentId","nextId","previousId"]),this.replaceIdOnNode(b.node,a);let c=this.crossOriginIframeRootIdMap.get(a);c&&this.patchRootIdOnNode(b.node,c)}),b.data.removes.forEach(b=>{this.replaceIds(b,a,["parentId","id"])}),b.data.attributes.forEach(b=>{this.replaceIds(b,a,["id"])}),b.data.texts.forEach(b=>{this.replaceIds(b,a,["id"])}),b;case kM.Drag:case kM.TouchMove:case kM.MouseMove:return b.data.positions.forEach(b=>{this.replaceIds(b,a,["id"])}),b;case kM.ViewportResize:return!1;case kM.MediaInteraction:case kM.MouseInteraction:case kM.Scroll:case kM.CanvasMutation:case kM.Input:return this.replaceIds(b.data,a,["id"]),b;case kM.StyleSheetRule:case kM.StyleDeclaration:return this.replaceIds(b.data,a,["id"]),this.replaceStyleIds(b.data,a,["styleId"]),b;case kM.Font:return b;case kM.Selection:return b.data.ranges.forEach(b=>{this.replaceIds(b,a,["start","end"])}),b;case kM.AdoptedStyleSheet:return this.replaceIds(b.data,a,["id"]),this.replaceStyleIds(b.data,a,["styleIds"]),b.data.styles?.forEach(b=>{this.replaceStyleIds(b,a,["styleId"])}),b}}return!1}replace(a,b,c,d){for(let e of d)(Array.isArray(b[e])||"number"==typeof b[e])&&(Array.isArray(b[e])?b[e]=a.getIds(c,b[e]):b[e]=a.getId(c,b[e]));return b}replaceIds(a,b,c){return this.replace(this.crossOriginIframeMirror,a,b,c)}replaceStyleIds(a,b,c){return this.replace(this.crossOriginIframeStyleMirror,a,b,c)}replaceIdOnNode(a,b){this.replaceIds(a,b,["id","rootId"]),"childNodes"in a&&a.childNodes.forEach(a=>{this.replaceIdOnNode(a,b)})}patchRootIdOnNode(a,b){a.type===jQ.Document||a.rootId||(a.rootId=b),"childNodes"in a&&a.childNodes.forEach(a=>{this.patchRootIdOnNode(a,b)})}}class lb{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class lc{constructor(a){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=a.mutationCb,this.scrollCb=a.scrollCb,this.bypassOptions=a.bypassOptions,this.mirror=a.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(a,b){if(!jS(a)||this.shadowDoms.has(a))return;this.shadowDoms.add(a),this.bypassOptions.canvasManager.addShadowRoot(a);let c=k$({...this.bypassOptions,doc:b,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},a);this.restoreHandlers.push(()=>c.disconnect()),this.restoreHandlers.push(k_({...this.bypassOptions,scrollCb:this.scrollCb,doc:a,mirror:this.mirror})),kK(()=>{a.adoptedStyleSheets&&a.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(a.adoptedStyleSheets,this.mirror.getId(a.host)),this.restoreHandlers.push(k4({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},a))},0)}observeAttachShadow(a){let b=kQ(a),c=function(a){try{return a.contentWindow}catch(a){}}(a);b&&c&&this.patchAttachShadow(c.Element,b)}patchAttachShadow(a,b){let c=this;this.restoreHandlers.push(kt(a.prototype,"attachShadow",function(a){return function(d){let e=a.call(this,d);return this.shadowRoot&&kH(this)&&c.addShadowRoot(this.shadowRoot,b),e}}))}reset(){this.restoreHandlers.forEach(a=>{try{a()}catch(a){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}for(var ld="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",le="undefined"==typeof Uint8Array?[]:new Uint8Array(256),lf=0;lf<ld.length;lf++)le[ld.charCodeAt(lf)]=lf;class lg{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class lh{constructor(a){this.trackedLinkElements=new WeakSet,this.styleMirror=new kF,this.mutationCb=a.mutationCb,this.adoptedStyleSheetCb=a.adoptedStyleSheetCb}attachLinkElement(a,b){"_cssText"in b.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:b.id,attributes:b.attributes}]}),this.trackLinkElement(a)}trackLinkElement(a){this.trackedLinkElements.has(a)||(this.trackedLinkElements.add(a),this.trackStylesheetInLinkElement(a))}adoptStyleSheets(a,b){if(0===a.length)return;let c={id:b,styleIds:[]},d=[];for(let b of a){let a;this.styleMirror.has(b)?a=this.styleMirror.getId(b):(a=this.styleMirror.add(b),d.push({styleId:a,rules:Array.from(b.rules||CSSRule,(a,b)=>({rule:jU(a),index:b}))})),c.styleIds.push(a)}d.length>0&&(c.styles=d),this.adoptedStyleSheetCb(c)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(a){}}class li{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(a,b){let c=this.nodeMap.get(a);return c&&Array.from(c).some(a=>a!==b)}add(a,b){this.active||(this.active=!0,function(...a){kJ("requestAnimationFrame")(...a)}(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(a,(this.nodeMap.get(a)||new Set).add(b))}destroy(){}}try{if(2!==Array.from([1],a=>2*a)[0]){let a=document.createElement("iframe");document.body.appendChild(a),Array.from=a.contentWindow?.Array.from||Array.from,document.body.removeChild(a)}}catch(a){console.debug("Unable to override Array.from",a)}let lj=new jV;function lk(a={}){let b,{emit:c,checkoutEveryNms:d,checkoutEveryNth:e,blockClass:f="rr-block",blockSelector:g=null,unblockSelector:h=null,ignoreClass:i="rr-ignore",ignoreSelector:j=null,maskAllText:k=!1,maskTextClass:l="rr-mask",unmaskTextClass:m=null,maskTextSelector:n=null,unmaskTextSelector:o=null,inlineStylesheet:p=!0,maskAllInputs:q,maskInputOptions:r,slimDOMOptions:s,maskAttributeFn:t,maskInputFn:x,maskTextFn:y,maxCanvasSize:z=null,packFn:A,sampling:B={},dataURLOptions:C={},mousemoveWait:D,recordDOM:E=!0,recordCanvas:F=!1,recordCrossOriginIframes:G=!1,recordAfter:H="DOMContentLoaded"===a.recordAfter?a.recordAfter:"load",userTriggeredOnInput:I=!1,collectFonts:J=!1,inlineImages:K=!1,plugins:L,keepIframeSrcFn:M=()=>!1,ignoreCSSAttributes:N=new Set([]),errorHandler:O,onMutation:P,getCanvasManager:Q}=a;u=O;let R=!G||window.parent===window,S=!1;if(!R)try{window.parent.document&&(S=!1)}catch(a){S=!0}if(R&&!c)throw Error("emit function is required");if(!R&&!S)return()=>{};void 0!==D&&void 0===B.mousemove&&(B.mousemove=D),lj.reset();let T=!0===q?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==r?r:{},U=!0===s||"all"===s?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===s,headMetaDescKeywords:"all"===s}:s||{};!function(a=window){"NodeList"in a&&!a.NodeList.prototype.forEach&&(a.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in a&&!a.DOMTokenList.prototype.forEach&&(a.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...a)=>{let b=a[0];if(!(0 in a))throw TypeError("1 argument is required");do if(this===b)return!0;while(b=b&&b.parentNode)return!1})}();let V=0,W=a=>{for(let b of L||[])b.eventProcessor&&(a=b.eventProcessor(a));return A&&!S&&(a=A(a)),a};v=(a,f)=>{if(a.timestamp=ku(),kY[0]?.isFrozen()&&a.type!==kL.FullSnapshot&&(a.type!==kL.IncrementalSnapshot||a.data.source!==kM.Mutation)&&kY.forEach(a=>a.unfreeze()),R)c?.(W(a),f);else if(S){let b={type:"rrweb",event:W(a),origin:window.location.origin,isCheckout:f};window.parent.postMessage(b,"*")}if(a.type===kL.FullSnapshot)b=a,V=0;else if(a.type===kL.IncrementalSnapshot){if(a.data.source===kM.Mutation&&a.data.isAttachIframe)return;V++;let c=e&&V>=e,f=d&&b&&a.timestamp-b.timestamp>d;(c||f)&&ad(!0)}};let X=a=>{v({type:kL.IncrementalSnapshot,data:{source:kM.Mutation,...a}})},Y=a=>v({type:kL.IncrementalSnapshot,data:{source:kM.Scroll,...a}}),Z=a=>v({type:kL.IncrementalSnapshot,data:{source:kM.CanvasMutation,...a}}),$=new lh({mutationCb:X,adoptedStyleSheetCb:a=>v({type:kL.IncrementalSnapshot,data:{source:kM.AdoptedStyleSheet,...a}})}),_="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new k9:new la({mirror:lj,mutationCb:X,stylesheetManager:$,recordCrossOriginIframes:G,wrappedEmit:v});for(let a of L||[])a.getMirror&&a.getMirror({nodeMirror:lj,crossOriginIframeMirror:_.crossOriginIframeMirror,crossOriginIframeStyleMirror:_.crossOriginIframeStyleMirror});let aa=new li,ab=function(a,b){try{return a?a(b):new lg}catch{return console.warn("Unable to initialize CanvasManager"),new lg}}(Q,{mirror:lj,win:window,mutationCb:a=>v({type:kL.IncrementalSnapshot,data:{source:kM.CanvasMutation,...a}}),recordCanvas:F,blockClass:f,blockSelector:g,unblockSelector:h,maxCanvasSize:z,sampling:B.canvas,dataURLOptions:C,errorHandler:O}),ac="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new lb:new lc({mutationCb:X,scrollCb:Y,bypassOptions:{onMutation:P,blockClass:f,blockSelector:g,unblockSelector:h,maskAllText:k,maskTextClass:l,unmaskTextClass:m,maskTextSelector:n,unmaskTextSelector:o,inlineStylesheet:p,maskInputOptions:T,dataURLOptions:C,maskAttributeFn:t,maskTextFn:y,maskInputFn:x,recordCanvas:F,inlineImages:K,sampling:B,slimDOMOptions:U,iframeManager:_,stylesheetManager:$,canvasManager:ab,keepIframeSrcFn:M,processedNodeManager:aa,ignoreCSSAttributes:N},mirror:lj}),ad=(a=!1)=>{if(!E)return;v({type:kL.Meta,data:{href:window.location.href,width:kx(),height:kw()}},a),$.reset(),ac.init(),kY.forEach(a=>a.lock());let b=function(a,b){let{mirror:c=new jV,blockClass:d="rr-block",blockSelector:e=null,unblockSelector:f=null,maskAllText:g=!1,maskTextClass:h="rr-mask",unmaskTextClass:i=null,maskTextSelector:j=null,unmaskTextSelector:k=null,inlineStylesheet:l=!0,inlineImages:m=!1,recordCanvas:n=!1,maskAllInputs:o=!1,maskAttributeFn:p,maskTextFn:q,maskInputFn:r,slimDOM:s=!1,dataURLOptions:t,preserveWhiteSpace:u,onSerialize:v,onIframeLoad:w,iframeLoadTimeout:x,onBlockedImageLoad:y,onStylesheetLoad:z,stylesheetLoadTimeout:A,keepIframeSrcFn:B=()=>!1,ignoreCSSAttributes:C=new Set([])}=b||{};return kq(a,{doc:a,mirror:c,blockClass:d,blockSelector:e,unblockSelector:f,maskAllText:g,maskTextClass:h,unmaskTextClass:i,maskTextSelector:j,unmaskTextSelector:k,skipChild:!1,inlineStylesheet:l,maskInputOptions:!0===o?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===o?{}:o,maskAttributeFn:p,maskTextFn:q,maskInputFn:r,slimDOMOptions:!0===s||"all"===s?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===s,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===s?{}:s,dataURLOptions:t,inlineImages:m,recordCanvas:n,preserveWhiteSpace:u,onSerialize:v,onIframeLoad:w,iframeLoadTimeout:x,onBlockedImageLoad:y,onStylesheetLoad:z,stylesheetLoadTimeout:A,keepIframeSrcFn:B,newlyAddedElement:!1,ignoreCSSAttributes:C})}(document,{mirror:lj,blockClass:f,blockSelector:g,unblockSelector:h,maskAllText:k,maskTextClass:l,unmaskTextClass:m,maskTextSelector:n,unmaskTextSelector:o,inlineStylesheet:p,maskAllInputs:T,maskAttributeFn:t,maskInputFn:x,maskTextFn:y,slimDOM:U,dataURLOptions:C,recordCanvas:F,inlineImages:K,onSerialize:a=>{kC(a,lj)&&_.addIframe(a),kD(a,lj)&&$.trackLinkElement(a),kE(a)&&ac.addShadowRoot(a.shadowRoot,document)},onIframeLoad:(a,b)=>{_.attachIframe(a,b),a.contentWindow&&ab.addWindow(a.contentWindow),ac.observeAttachShadow(a)},onStylesheetLoad:(a,b)=>{$.attachLinkElement(a,b)},onBlockedImageLoad:(a,b,{width:c,height:d})=>{X({adds:[],removes:[],texts:[],attributes:[{id:b.id,attributes:{style:{width:`${c}px`,height:`${d}px`}}}]})},keepIframeSrcFn:M,ignoreCSSAttributes:N});if(!b)return console.warn("Failed to snapshot the document");v({type:kL.FullSnapshot,data:{node:b,initialOffset:kv(window)}}),kY.forEach(a=>a.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&$.adoptStyleSheets(document.adoptedStyleSheets,lj.getId(document))};w=ad;try{let a=[],b=a=>kX(k5)({onMutation:P,mutationCb:X,mousemoveCb:(a,b)=>v({type:kL.IncrementalSnapshot,data:{source:b,positions:a}}),mouseInteractionCb:a=>v({type:kL.IncrementalSnapshot,data:{source:kM.MouseInteraction,...a}}),scrollCb:Y,viewportResizeCb:a=>v({type:kL.IncrementalSnapshot,data:{source:kM.ViewportResize,...a}}),inputCb:a=>v({type:kL.IncrementalSnapshot,data:{source:kM.Input,...a}}),mediaInteractionCb:a=>v({type:kL.IncrementalSnapshot,data:{source:kM.MediaInteraction,...a}}),styleSheetRuleCb:a=>v({type:kL.IncrementalSnapshot,data:{source:kM.StyleSheetRule,...a}}),styleDeclarationCb:a=>v({type:kL.IncrementalSnapshot,data:{source:kM.StyleDeclaration,...a}}),canvasMutationCb:Z,fontCb:a=>v({type:kL.IncrementalSnapshot,data:{source:kM.Font,...a}}),selectionCb:a=>{v({type:kL.IncrementalSnapshot,data:{source:kM.Selection,...a}})},customElementCb:a=>{v({type:kL.IncrementalSnapshot,data:{source:kM.CustomElement,...a}})},blockClass:f,ignoreClass:i,ignoreSelector:j,maskAllText:k,maskTextClass:l,unmaskTextClass:m,maskTextSelector:n,unmaskTextSelector:o,maskInputOptions:T,inlineStylesheet:p,sampling:B,recordDOM:E,recordCanvas:F,inlineImages:K,userTriggeredOnInput:I,collectFonts:J,doc:a,maskAttributeFn:t,maskInputFn:x,maskTextFn:y,keepIframeSrcFn:M,blockSelector:g,unblockSelector:h,slimDOMOptions:U,dataURLOptions:C,mirror:lj,iframeManager:_,stylesheetManager:$,shadowDomManager:ac,processedNodeManager:aa,canvasManager:ab,ignoreCSSAttributes:N,plugins:L?.filter(a=>a.observer)?.map(a=>({observer:a.observer,options:a.options,callback:b=>v({type:kL.Plugin,data:{plugin:a.name,payload:b}})}))||[]},{});_.addLoadListener(c=>{try{a.push(b(c.contentDocument))}catch(a){console.warn(a)}});let c=()=>{ad(),a.push(b(document))};return"interactive"===document.readyState||"complete"===document.readyState?c():(a.push(kr("DOMContentLoaded",()=>{v({type:kL.DomContentLoaded,data:{}}),"DOMContentLoaded"===H&&c()})),a.push(kr("load",()=>{v({type:kL.Load,data:{}}),"load"===H&&c()},window))),()=>{a.forEach(a=>a()),aa.destroy(),w=void 0,u=void 0}}catch(a){console.warn(a)}}function ll(a){return a>0x2540be3ff?a:1e3*a}function lm(a){return a>0x2540be3ff?a/1e3:a}function ln(a,b){"sentry.transaction"!==b.category&&(["ui.click","ui.input"].includes(b.category)?a.triggerUserActivity():a.checkAndHandleExpiredSession(),a.addUpdate(()=>(a.throttledAddEvent({type:kL.Custom,timestamp:1e3*(b.timestamp||0),data:{tag:"breadcrumb",payload:dW(b,10,1e3)}}),"console"===b.category)))}function lo(a){return a.closest("button,a")||a}function lp(a){let b=lq(a);return b&&b instanceof Element?lo(b):b}function lq(a){var b;return"object"==typeof(b=a)&&b&&"target"in b?a.target:a}lk.mirror=lj,lk.takeFullSnapshot=function(a){if(!w)throw Error("please take full snapshot after start recording");w(a)},(K=O||(O={}))[K.NotStarted=0]="NotStarted",K[K.Running=1]="Running",K[K.Stopped=2]="Stopped";let lr=new Set([kM.Mutation,kM.StyleSheetRule,kM.StyleDeclaration,kM.AdoptedStyleSheet,kM.CanvasMutation,kM.Selection,kM.MediaInteraction]);class ls{constructor(a,b,c=ln){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=b.timeout/1e3,this._threshold=b.threshold/1e3,this._scrollTimeout=b.scrollTimeout/1e3,this._replay=a,this._ignoreSelector=b.ignoreSelector,this._addBreadcrumbEvent=c}addListeners(){var a;let b=(a=()=>{this._lastMutation=lu()},x||(x=[],aw(U,"open",function(a){return function(...b){if(x)try{x.forEach(a=>a())}catch{}return a.apply(U,b)}})),x.push(a),()=>{let b=x?x.indexOf(a):-1;b>-1&&x.splice(b,1)});this._teardown=()=>{b(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(a,b){var c,d,e;if(c=b,d=this._ignoreSelector,!lt.includes(c.tagName)||"INPUT"===c.tagName&&!["submit","button"].includes(c.getAttribute("type")||"")||"A"===c.tagName&&(c.hasAttribute("download")||c.hasAttribute("target")&&"_self"!==c.getAttribute("target"))||d&&c.matches(d)||!((e=a).data&&"number"==typeof e.data.nodeId&&e.timestamp))return;let f={timestamp:lm(a.timestamp),clickBreadcrumb:a,clickCount:0,node:b};this._clicks.some(a=>a.node===f.node&&1>Math.abs(a.timestamp-f.timestamp))||(this._clicks.push(f),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(a=Date.now()){this._lastMutation=lm(a)}registerScroll(a=Date.now()){this._lastScroll=lm(a)}registerClick(a){let b=lo(a);this._handleMultiClick(b)}_handleMultiClick(a){this._getClicks(a).forEach(a=>{a.clickCount++})}_getClicks(a){return this._clicks.filter(b=>b.node===a)}_checkClicks(){let a=[],b=lu();for(let c of(this._clicks.forEach(c=>{!c.mutationAfter&&this._lastMutation&&(c.mutationAfter=c.timestamp<=this._lastMutation?this._lastMutation-c.timestamp:void 0),!c.scrollAfter&&this._lastScroll&&(c.scrollAfter=c.timestamp<=this._lastScroll?this._lastScroll-c.timestamp:void 0),c.timestamp+this._timeout<=b&&a.push(c)}),a)){let a=this._clicks.indexOf(c);a>-1&&(this._generateBreadcrumbs(c),this._clicks.splice(a,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(a){let b=this._replay,c=a.scrollAfter&&a.scrollAfter<=this._scrollTimeout,d=a.mutationAfter&&a.mutationAfter<=this._threshold,{clickCount:e,clickBreadcrumb:f}=a;if(!c&&!d){let c=1e3*Math.min(a.mutationAfter||this._timeout,this._timeout),d=c<1e3*this._timeout?"mutation":"timeout",g={type:"default",message:f.message,timestamp:f.timestamp,category:"ui.slowClickDetected",data:{...f.data,url:U.location.href,route:b.getCurrentRoute(),timeAfterClickMs:c,endReason:d,clickCount:e||1}};this._addBreadcrumbEvent(b,g);return}if(e>1){let a={type:"default",message:f.message,timestamp:f.timestamp,category:"ui.multiClick",data:{...f.data,url:U.location.href,route:b.getCurrentRoute(),clickCount:e,metric:!0}};this._addBreadcrumbEvent(b,a)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=hN(()=>this._checkClicks(),1e3)}}let lt=["A","BUTTON","INPUT"];function lu(){return Date.now()/1e3}function lv(a){return{timestamp:Date.now()/1e3,type:"default",...a}}var lw=((L=lw||{})[L.Document=0]="Document",L[L.DocumentType=1]="DocumentType",L[L.Element=2]="Element",L[L.Text=3]="Text",L[L.CDATA=4]="CDATA",L[L.Comment=5]="Comment",L);let lx=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function ly(a,b){let c=lk.mirror.getId(a),d=c&&lk.mirror.getNode(c),e=d&&lk.mirror.getMeta(d),f=e&&e.type===lw.Element?e:null;return{message:b,data:f?{nodeId:c,node:{id:c,tagName:f.tagName,textContent:Array.from(f.childNodes).map(a=>a.type===lw.Text&&a.textContent).filter(Boolean).map(a=>a.trim()).join(""),attributes:function(a){let b={};for(let c in!a["data-sentry-component"]&&a["data-sentry-element"]&&(a["data-sentry-component"]=a["data-sentry-element"]),a)if(lx.has(c)){let d=c;("data-testid"===c||"data-test-id"===c)&&(d="testId"),b[d]=a[c]}return b}(f.attributes)}}:{}}}let lz={resource:function(a){let{entryType:b,initiatorType:c,name:d,responseEnd:e,startTime:f,decodedBodySize:g,encodedBodySize:h,responseStatus:i,transferSize:j}=a;return["fetch","xmlhttprequest"].includes(c)?null:{type:`${b}.${c}`,start:lC(f),end:lC(e),name:d,data:{size:j,statusCode:i,decodedBodySize:g,encodedBodySize:h}}},paint:function(a){let{duration:b,entryType:c,name:d,startTime:e}=a,f=lC(e);return{type:c,name:d,start:f,end:f+b,data:void 0}},navigation:function(a){let{entryType:b,name:c,decodedBodySize:d,duration:e,domComplete:f,encodedBodySize:g,domContentLoadedEventStart:h,domContentLoadedEventEnd:i,domInteractive:j,loadEventStart:k,loadEventEnd:l,redirectCount:m,startTime:n,transferSize:o,type:p}=a;return 0===e?null:{type:`${b}.${p}`,start:lC(n),end:lC(f),name:c,data:{size:o,decodedBodySize:d,encodedBodySize:g,duration:e,domInteractive:j,domContentLoadedEventStart:h,domContentLoadedEventEnd:i,loadEventStart:k,loadEventEnd:l,domComplete:f,redirectCount:m}}}};function lA(a,b){return({metric:c})=>void b.replayPerformanceEntries.push(a(c))}function lB(a){let b=lz[a.entryType];return b?b(a):null}function lC(a){return((aQ()||U.performance.timeOrigin)+a)/1e3}function lD(a){let b=a.entries[a.entries.length-1];return lG(a,"largest-contentful-paint",b?.element?[b.element]:void 0)}function lE(a){let b=[],c=[];for(let d of a.entries)if(void 0!==d.sources){let a=[];for(let b of d.sources)if(b.node){c.push(b.node);let d=lk.mirror.getId(b.node);d&&a.push(d)}b.push({value:d.value,nodeIds:a.length?a:void 0})}return lG(a,"cumulative-layout-shift",c,b)}function lF(a){let b=a.entries[a.entries.length-1];return lG(a,"interaction-to-next-paint",b?.target?[b.target]:void 0)}function lG(a,b,c,d){let e=a.value,f=a.rating,g=lC(e);return{type:"web-vital",name:b,start:g,end:g,data:{value:e,size:e,rating:f,nodeIds:c?c.map(a=>lk.mirror.getId(a)):void 0,attributions:d}}}let lH="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,lI=["log","warn","error"],lJ="[Replay] ";function lK(a,b="info"){en({category:"console",data:{logger:"replay"},level:b,message:`${lJ}${a}`},{level:b})}let lL=(B=!1,C=!1,D={exception:()=>void 0,infoTick:()=>void 0,setConfig:a=>{B=!!a.captureExceptions,C=!!a.traceInternals}},lH?(lI.forEach(a=>{D[a]=(...b)=>{av[a](lJ,...b),C&&lK(b.join(""),ev(a))}}),D.exception=(a,...b)=>{b.length&&D.error&&D.error(...b),av.error(lJ,a),B?dZ(a,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):C&&lK(a,"error")},D.infoTick=(...a)=>{av.log(lJ,...a),C&&setTimeout(()=>lK(a[0]),0)}):lI.forEach(a=>{D[a]=()=>void 0}),D);class lM extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class lN{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(a){let b=JSON.stringify(a).length;if(this._totalSize+=b,this._totalSize>2e7)throw new lM;this.events.push(a)}finish(){return new Promise(a=>{let b=this.events;this.clear(),a(JSON.stringify(b))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){let a=this.events.map(a=>a.timestamp).sort()[0];return a?ll(a):null}}class lO{constructor(a){this._worker=a,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise((a,b)=>{this._worker.addEventListener("message",({data:c})=>{c.success?a():b()},{once:!0}),this._worker.addEventListener("error",a=>{b(a)},{once:!0})})),this._ensureReadyPromise}destroy(){lH&&lL.log("Destroying compression worker"),this._worker.terminate()}postMessage(a,b){let c=this._getAndIncrementId();return new Promise((d,e)=>{let f=({data:b})=>{if(b.method===a&&b.id===c){if(this._worker.removeEventListener("message",f),!b.success){lH&&lL.error("Error in compression worker: ",b.response),e(Error("Error in compression worker"));return}d(b.response)}};this._worker.addEventListener("message",f),this._worker.postMessage({id:c,method:a,arg:b})})}_getAndIncrementId(){return this._id++}}class lP{constructor(a){this._worker=new lO(a),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(a){let b=ll(a.timestamp);(!this._earliestTimestamp||b<this._earliestTimestamp)&&(this._earliestTimestamp=b);let c=JSON.stringify(a);return(this._totalSize+=c.length,this._totalSize>2e7)?Promise.reject(new lM):this._sendEventToWorker(c)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,a=>{lH&&lL.exception(a,'Sending "clear" message to worker failed',a)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(a){return this._worker.postMessage("addEvent",a)}async _finishRequest(){let a=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,a}}class lQ{constructor(a){this._fallback=new lN,this._compression=new lP(a),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(a){this._used.hasCheckout=a}set waitForCheckout(a){this._used.waitForCheckout=a}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(a){return this._used.addEvent(a)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(a){lH&&lL.exception(a,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){let{events:a,hasCheckout:b,waitForCheckout:c}=this._fallback,d=[];for(let b of a)d.push(this._compression.addEvent(b));this._compression.hasCheckout=b,this._compression.waitForCheckout=c,this._used=this._compression;try{await Promise.all(d),this._fallback.clear()}catch(a){lH&&lL.exception(a,"Failed to add events when switching buffers.")}}}function lR(){try{return"sessionStorage"in U&&!!U.sessionStorage}catch{return!1}}function lS(a){return void 0!==a&&Math.random()<a}function lT(a){if(lR())try{U.sessionStorage.setItem(jM,JSON.stringify(a))}catch{}}function lU(a){let b=Date.now(),c=a.id||aI(),d=a.started||b,e=a.lastActivity||b,f=a.segmentId||0,g=a.sampled;return{id:c,started:d,lastActivity:e,segmentId:f,sampled:g,previousSessionId:a.previousSessionId,dirty:a.dirty||!1}}function lV({sessionSampleRate:a,allowBuffering:b,stickySession:c=!1},{previousSessionId:d}={}){let e=lU({sampled:lS(a)?"session":!!b&&"buffer",previousSessionId:d});return c&&lT(e),e}function lW(a,b,c=+new Date){return null===a||void 0===b||b<0||0!==b&&a+b<=c}function lX(a,{maxReplayDuration:b,sessionIdleExpire:c,targetTime:d=Date.now()}){return lW(a.started,b,d)||lW(a.lastActivity,c,d)}function lY(a,{sessionIdleExpire:b,maxReplayDuration:c}){return!!lX(a,{sessionIdleExpire:b,maxReplayDuration:c})&&("buffer"!==a.sampled||0!==a.segmentId)}function lZ({sessionIdleExpire:a,maxReplayDuration:b,previousSessionId:c},d){let e=d.stickySession&&function(){if(!lR())return null;try{let a=U.sessionStorage.getItem(jM);if(!a)return null;let b=JSON.parse(a);return lH&&lL.infoTick("Loading existing session"),lU(b)}catch{return null}}();return e?lY(e,{sessionIdleExpire:a,maxReplayDuration:b})?(lH&&lL.infoTick("Session in sessionStorage is expired, creating new one..."),lV(d,{previousSessionId:e.id})):e:(lH&&lL.infoTick("Creating new session"),lV(d,{previousSessionId:c}))}function l$(a,b,c){return!!l0(a,b)&&(l_(a,b,c),!0)}async function l_(a,b,c){let{eventBuffer:d}=a;if(!d||d.waitForCheckout&&!c)return null;let e="buffer"===a.recordingMode;try{c&&e&&d.clear(),c&&(d.hasCheckout=!0,d.waitForCheckout=!1);let f=a.getOptions(),g=function(a,b){try{if("function"==typeof b&&a.type===kL.Custom)return b(a)}catch(a){return lH&&lL.exception(a,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return a}(b,f.beforeAddRecordingEvent);if(!g)return;return await d.addEvent(g)}catch(f){let b=f&&f instanceof lM,c=a6();if(c&&c.recordDroppedEvent(b?"buffer_overflow":"internal_sdk_error","replay"),b&&e)return d.clear(),d.waitForCheckout=!0,null;a.handleException(f),await a.stop({reason:b?"addEventSizeExceeded":"addEvent"})}}function l0(a,b){if(!a.eventBuffer||a.isPaused()||!a.isEnabled())return!1;let c=ll(b.timestamp);return!(c+a.timeouts.sessionIdlePause<Date.now())&&(!(c>a.getContext().initialTimestamp+a.getOptions().maxReplayDuration)||(lH&&lL.infoTick(`Skipping event with timestamp ${c} because it is after maxReplayDuration`),!1))}function l1(a){return"transaction"===a.type}function l2(a){return"feedback"===a.type}function l3(a){return!!a.category}function l4(){let a=a1().getPropagationContext().dsc;a&&delete a.replay_id;let b=dE();if(b){let a=dK(b);delete a.replay_id}}function l5(a,b){return b.map(({type:b,start:c,end:d,name:e,data:f})=>{let g=a.throttledAddEvent({type:kL.Custom,timestamp:c,data:{tag:"performanceSpan",payload:{op:b,description:e,startTimestamp:c,endTimestamp:d,data:f}}});return"string"==typeof g?Promise.resolve(null):g})}function l6(a,b){var c;a.isEnabled()&&null!==b&&(c=b.name,(!lH||!a.getOptions()._experiments.traceInternals)&&iP(c,a6())||a.addUpdate(()=>(l5(a,[b]),!0)))}function l7(a){if(!a)return;let b=new TextEncoder;try{if("string"==typeof a)return b.encode(a).length;if(a instanceof URLSearchParams)return b.encode(a.toString()).length;if(a instanceof FormData){let c=iY(a);return b.encode(c).length}if(a instanceof Blob)return a.size;if(a instanceof ArrayBuffer)return a.byteLength}catch{}}function l8(a){if(!a)return;let b=parseInt(a,10);return isNaN(b)?void 0:b}function l9(a,b){if(!a)return{headers:{},size:void 0,_meta:{warnings:[b]}};let c={...a._meta},d=c.warnings||[];return c.warnings=[...d,b],a._meta=c,a}function ma(a,b){if(!b)return null;let{startTimestamp:c,endTimestamp:d,url:e,method:f,statusCode:g,request:h,response:i}=b;return{type:a,start:c/1e3,end:d/1e3,name:e,data:{method:f,statusCode:g,request:h,response:i}}}function mb(a){return{headers:{},size:a,_meta:{warnings:["URL_SKIPPED"]}}}function mc(a,b,c){if(!b&&0===Object.keys(a).length)return;if(!b)return{headers:a};if(!c)return{headers:a,size:b};let d={headers:a,size:b},{body:e,warnings:f}=function(a){var b;let c,d;if(!a||"string"!=typeof a)return{body:a};let e=a.length>15e4,f=(c=(b=a)[0],d=b[b.length-1],"["===c&&"]"===d||"{"===c&&"}"===d);if(e){let b=a.slice(0,15e4);return f?{body:b,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${b}`,warnings:["TEXT_TRUNCATED"]}}if(f)try{return{body:JSON.parse(a)}}catch{}return{body:a}}(c);return d.body=e,f?.length&&(d._meta={warnings:f}),d}function md(a,b){return Object.entries(a).reduce((c,[d,e])=>{let f=d.toLowerCase();return b.includes(f)&&a[d]&&(c[f]=e),c},{})}function me(a,b=U.document.baseURI){if(a.startsWith("http://")||a.startsWith("https://")||a.startsWith(U.location.origin))return a;let c=new URL(a,b);if(c.origin!==new URL(b).origin)return a;let d=c.href;return!a.endsWith("/")&&d.endsWith("/")?d.slice(0,-1):d}async function mf(a,b,c){try{let d=await mg(a,b,c),e=ma("resource.fetch",d);l6(c.replay,e)}catch(a){lH&&lL.exception(a,"Failed to capture fetch breadcrumb")}}async function mg(a,b,c){var d,e;let f=Date.now(),{startTimestamp:g=f,endTimestamp:h=f}=b,{url:i,method:j,status_code:k=0,request_body_size:l,response_body_size:m}=a.data,n=(d=c.networkDetailAllowUrls,aH(me(i),d)&&(e=c.networkDetailDenyUrls,!aH(me(i),e)));return{startTimestamp:g,endTimestamp:h,url:i,method:j,statusCode:k,request:n?function({networkCaptureBodies:a,networkRequestHeaders:b},c,d){var e,f;let g=c?(e=c,f=b,1===e.length&&"string"!=typeof e[0]?mk(e[0],f):2===e.length?mk(e[1],f):{}):{};if(!a)return mc(g,d,void 0);let[h,i]=iZ(i$(c),lL),j=mc(g,d,h);return i?l9(j,i):j}(c,b.input,l):mb(l),response:await mh(n,c,b.response,m)}}async function mh(a,{networkCaptureBodies:b,networkResponseHeaders:c},d,e){if(!a&&void 0!==e)return mb(e);let f=d?mj(d.headers,c):{};if(!d||!b&&void 0!==e)return mc(f,e,void 0);let[g,h]=await mi(d),i=function(a,{networkCaptureBodies:b,responseBodySize:c,captureDetails:d,headers:e}){try{let f=a?.length&&void 0===c?l7(a):c;if(!d)return mb(f);if(b)return mc(e,f,a);return mc(e,f,void 0)}catch(a){return lH&&lL.exception(a,"Failed to serialize response body"),mc(e,c,void 0)}}(g,{networkCaptureBodies:b,responseBodySize:e,captureDetails:a,headers:f});return h?l9(i,h):i}async function mi(a){let b=function(a){try{return a.clone()}catch(a){lH&&lL.exception(a,"Failed to clone response body")}}(a);if(!b)return[void 0,"BODY_PARSE_ERROR"];try{var c;return[await (c=b,new Promise((a,b)=>{let d=hN(()=>b(Error("Timeout while trying to read response body")),500);ml(c).then(b=>a(b),a=>b(a)).finally(()=>clearTimeout(d))}))]}catch(a){if(a instanceof Error&&a.message.indexOf("Timeout")>-1)return lH&&lL.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"];return lH&&lL.exception(a,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"]}}function mj(a,b){let c={};return b.forEach(b=>{a.get(b)&&(c[b]=a.get(b))}),c}function mk(a,b){if(!a)return{};let c=a.headers;return c?c instanceof Headers?mj(c,b):Array.isArray(c)?{}:md(c,b):{}}async function ml(a){return await a.text()}async function mm(a,b,c){try{let d=function(a,b,c){var d,e;let f=Date.now(),{startTimestamp:g=f,endTimestamp:h=f,input:i,xhr:j}=b,{url:k,method:l,status_code:m=0,request_body_size:n,response_body_size:o}=a.data;if(!k)return null;if(!j||(d=c.networkDetailAllowUrls,!aH(me(k),d))||(e=c.networkDetailDenyUrls,aH(me(k),e))){let a=mb(n);return{startTimestamp:g,endTimestamp:h,url:k,method:l,statusCode:m,request:a,response:mb(o)}}let p=j[il],q=p?md(p.request_headers,c.networkRequestHeaders):{},r=md(i_(j),c.networkResponseHeaders),[s,t]=c.networkCaptureBodies?iZ(i,lL):[void 0],[u,v]=c.networkCaptureBodies?function(a){let b=[];try{return[a.responseText]}catch(a){b.push(a)}try{var c=a.response,d=a.responseType;try{if("string"==typeof c)return[c];if(c instanceof Document)return[c.body.outerHTML];if("json"===d&&c&&"object"==typeof c)return[JSON.stringify(c)];if(!c)return[void 0]}catch(a){return lH&&lL.exception(a,"Failed to serialize body",c),[void 0,"BODY_PARSE_ERROR"]}return lH&&lL.log("Skipping network body because of body type",c),[void 0,"UNPARSEABLE_BODY_TYPE"]}catch(a){b.push(a)}return lH&&lL.warn("Failed to get xhr response body",...b),[void 0]}(j):[void 0],w=mc(q,n,s),x=mc(r,o,u);return{startTimestamp:g,endTimestamp:h,url:k,method:l,statusCode:m,request:t?l9(w,t):w,response:v?l9(x,v):x}}(a,b,c),e=ma("resource.xhr",d);l6(c.replay,e)}catch(a){lH&&lL.exception(a,"Failed to capture xhr breadcrumb")}}async function mn(a){try{return Promise.all(l5(a,[function(a){let{jsHeapSizeLimit:b,totalJSHeapSize:c,usedJSHeapSize:d}=a,e=Date.now()/1e3;return{type:"memory",name:"memory",start:e,end:e,data:{memory:{jsHeapSizeLimit:b,totalJSHeapSize:c,usedJSHeapSize:d}}}}(U.performance.memory)]))}catch{return[]}}let mo=U.navigator;async function mp({client:a,scope:b,replayId:c,event:d}){let e={event_id:c,integrations:"object"!=typeof a._integrations||null===a._integrations||Array.isArray(a._integrations)?void 0:Object.keys(a._integrations)};a.emit("preprocessEvent",d,e);let f=await dX(a.getOptions(),d,e,b,a,a2());if(!f)return null;a.emit("postprocessEvent",f,e),f.platform=f.platform||"javascript";let g=a.getSdkMetadata(),{name:h,version:i,settings:j}=g?.sdk||{};return f.sdk={...f.sdk,name:h||"sentry.javascript.unknown",version:i||"0.0.0",settings:j},f}async function mq({recordingData:a,replayId:b,segmentId:c,eventContext:d,timestamp:e,session:f}){var g;let h,i=function({recordingData:a,headers:b}){let c,d=`${JSON.stringify(b)}
`;if("string"==typeof a)c=`${d}${a}`;else{let b=new TextEncoder().encode(d);(c=new Uint8Array(b.length+a.length)).set(b),c.set(a,b.length)}return c}({recordingData:a,headers:{segment_id:c}}),{urls:j,errorIds:k,traceIds:l,initialTimestamp:m}=d,n=a6(),o=a1(),p=n?.getTransport(),q=n?.getDsn();if(!n||!p||!q||!f.sampled)return Promise.resolve({});let r={type:"replay_event",replay_start_timestamp:m/1e3,timestamp:e/1e3,error_ids:k,trace_ids:l,urls:j,replay_id:b,segment_id:c,replay_type:f.sampled},s=await mp({scope:o,client:n,replayId:b,event:r});if(!s)return n.recordDroppedEvent("event_processor","replay"),lH&&lL.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete s.sdkProcessingMetadata;let t=(g=n.getOptions().tunnel,ez(eG(s,eF(s),g,q),[[{type:"replay_event"},s],[{type:"replay_recording",length:"string"==typeof i?new TextEncoder().encode(i).length:i.length},i]]));try{h=await p.send(t)}catch(b){let a=Error(jN);try{a.cause=b}catch{}throw a}if("number"==typeof h.statusCode&&(h.statusCode<200||h.statusCode>=300))throw new mr(h.statusCode);let u=fi({},h);if(fh(u,"replay"))throw new ms(u);return h}class mr extends Error{constructor(a){super(`Transport returned status code ${a}`)}}class ms extends Error{constructor(a){super("Rate limit hit"),this.rateLimits=a}}async function mt(a,b={count:0,interval:5e3}){let{recordingData:c,onError:d}=a;if(c.length)try{return await mq(a),!0}catch(c){if(c instanceof mr||c instanceof ms)throw c;if(d0("Replays",{_retryCount:b.count}),d&&d(c),b.count>=3){let a=Error(`${jN} - max retries exceeded`);try{a.cause=c}catch{}throw a}return b.interval*=++b.count,new Promise((c,d)=>{hN(async()=>{try{await mt(a,b),c(!0)}catch(a){d(a)}},b.interval)})}}let mu="__THROTTLED";class mv{constructor({options:a,recordingOptions:b}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=b,this._options=a,this._debouncedFlush=function(a,b,c){let d,e,f,g=c?.maxWait?Math.max(c.maxWait,b):0,h=c?.setTimeoutImpl||setTimeout;function i(){return j(),d=a()}function j(){void 0!==e&&clearTimeout(e),void 0!==f&&clearTimeout(f),e=f=void 0}function k(){return e&&clearTimeout(e),e=h(i,b),g&&void 0===f&&(f=h(i,g)),d}return k.cancel=j,k.flush=function(){return void 0!==e||void 0!==f?i():d},k}(()=>this._flush(),this._options.flushMinDelay,{...{maxWait:this._options.flushMaxDelay},setTimeoutImpl:hN}),this._throttledAddEvent=function(a,b,c){let d=new Map,e=!1;return(...b)=>{let c,f=Math.floor(Date.now()/1e3);if(c=f-5,d.forEach((a,b)=>{b<c&&d.delete(b)}),[...d.values()].reduce((a,b)=>a+b,0)>=300){let a=e;return e=!0,a?"__SKIPPED":mu}e=!1;let g=d.get(f)||0;return d.set(f,g+1),a(...b)}}((a,b)=>l0(this,a)?l_(this,a,b):Promise.resolve(null),0,0);const{slowClickTimeout:c,slowClickIgnoreSelectors:d}=this.getOptions(),e=c?{threshold:Math.min(3e3,c),timeout:c,scrollTimeout:300,ignoreSelector:d?d.join(","):""}:void 0;if(e&&(this.clickDetector=new ls(this,e)),lH){const b=a._experiments;lL.setConfig({captureExceptions:!!b.captureExceptions,traceInternals:!!b.traceInternals})}this._handleVisibilityChange=()=>{"visible"===U.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{let a=lv({category:"ui.blur"});this._doChangeToBackgroundTasks(a)},this._handleWindowFocus=()=>{let a=lv({category:"ui.focus"});this._doChangeToForegroundTasks(a)},this._handleKeyboardEvent=a=>{!function(a,b){if(!a.isEnabled())return;a.updateUserActivity();let c=function(a){var b;let{metaKey:c,shiftKey:d,ctrlKey:e,altKey:f,key:g,target:h}=a;if(!h||"INPUT"===(b=h).tagName||"TEXTAREA"===b.tagName||b.isContentEditable||!g)return null;let i=c||e||f,j=1===g.length;if(!i&&j)return null;let k=am(h,{maxStringLength:200})||"<unknown>",l=ly(h,k);return lv({category:"ui.keyDown",message:k,data:{...l.data,metaKey:c,shiftKey:d,ctrlKey:e,altKey:f,key:g}})}(b);c&&ln(a,c)}(this,a)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(a){lH&&lL.exception(a),this._options.onError&&this._options.onError(a)}initializeSampling(a){let{errorSampleRate:b,sessionSampleRate:c}=this._options,d=b<=0&&c<=0;if(this._requiresManualStart=d,!d){if(this._initializeSessionForSampling(a),!this.session){lH&&lL.exception(Error("Unable to initialize and create session"));return}!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",lH&&lL.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&"session"===this.recordingMode){lH&&lL.log("Recording is already in progress");return}if(this._isEnabled&&"buffer"===this.recordingMode){lH&&lL.log("Buffering is in progress, call `flush()` to save the replay");return}lH&&lL.infoTick("Starting replay in session mode"),this._updateUserActivity();let a=lZ({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=a,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){lH&&lL.log("Buffering is in progress, call `flush()` to save the replay");return}lH&&lL.infoTick("Starting replay in buffer mode");let a=lZ({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=a,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{var a;let b,c=this._canvas;this._stopRecording=lk({...this._recordingOptions,..."buffer"===this.recordingMode?{checkoutEveryNms:6e4}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:(a=this,b=!1,(c,d)=>{if(!a.checkAndHandleExpiredSession()){lH&&lL.warn("Received replay event after session expired.");return}let e=d||!b;b=!0,a.clickDetector&&function(a,b){try{var c;if(c=b,3!==c.type)return;let{source:d}=b.data;if(lr.has(d)&&a.registerMutation(b.timestamp),d===kM.Scroll&&a.registerScroll(b.timestamp),b.data.source===kM.MouseInteraction){let{type:c,id:d}=b.data,e=lk.mirror.getNode(d);e instanceof HTMLElement&&c===kN.Click&&a.registerClick(e)}}catch{}}(a.clickDetector,c),a.addUpdate(()=>{if("buffer"===a.recordingMode&&e&&a.setInitialState(),!l$(a,c,e))return!0;if(!e)return!1;let b=a.session;if(function(a,b){if(b&&a.session&&0===a.session.segmentId){let b;l$(a,(b=a.getOptions(),{type:kL.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:a.isRecordingCanvas(),sessionSampleRate:b.sessionSampleRate,errorSampleRate:b.errorSampleRate,useCompressionOption:b.useCompression,blockAllMedia:b.blockAllMedia,maskAllText:b.maskAllText,maskAllInputs:b.maskAllInputs,useCompression:!!a.eventBuffer&&"worker"===a.eventBuffer.type,networkDetailHasUrls:b.networkDetailAllowUrls.length>0,networkCaptureBodies:b.networkCaptureBodies,networkRequestHasHeaders:b.networkRequestHeaders.length>0,networkResponseHasHeaders:b.networkResponseHeaders.length>0}}}),!1)}}(a,e),"buffer"===a.recordingMode&&b&&a.eventBuffer&&!b.dirty){let c=a.eventBuffer.getEarliestTimestamp();c&&(lH&&lL.log(`Updating session start time to earliest event in buffer to ${new Date(c)}`),b.started=c,a.getOptions().stickySession&&lT(b))}return!!b?.previousSessionId||("session"===a.recordingMode&&a.flush(),!0)})}),.../iPhone|iPad|iPod/i.test(mo?.userAgent??"")||/Macintosh/i.test(mo?.userAgent??"")&&mo?.maxTouchPoints&&mo?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{},onMutation:this._onMutationHandler.bind(this),...c?{recordCanvas:c.recordCanvas,getCanvasManager:c.getCanvasManager,sampling:c.sampling,dataURLOptions:c.dataURLOptions}:{}})}catch(a){this.handleException(a)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(a){return this.handleException(a),!1}}async stop({forceFlush:a=!1,reason:b}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{lH&&lL.log(`Stopping Replay${b?` triggered by ${b}`:""}`),l4(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),a&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,function(){if(lR())try{U.sessionStorage.removeItem(jM)}catch{}}(),this.session=void 0}catch(a){this.handleException(a)}}}pause(){!this._isPaused&&(this._isPaused=!0,this.stopRecording(),lH&&lL.log("Pausing replay"))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),lH&&lL.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:a=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();let b=Date.now();lH&&lL.log("Converting buffer to session"),await this.flushImmediate();let c=this.stopRecording();a&&c&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(b),this._updateSessionActivity(b),this._maybeSaveSession()),this.startRecording())}addUpdate(a){let b=a();"buffer"!==this.recordingMode&&this._isEnabled&&!0!==b&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(a){if(!a||this.session?.sampled!==!1)return this.session?.id}checkAndHandleExpiredSession(){return this._lastActivity&&lW(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled?void this.pause():!!this._checkSession()}setInitialState(){let a=`${U.location.pathname}${U.location.hash}${U.location.search}`,b=`${U.location.origin}${a}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=b,this._context.initialTimestamp=Date.now(),this._context.urls.push(b)}throttledAddEvent(a,b){let c=this._throttledAddEvent(a,b);if(c===mu){let a=lv({category:"replay.throttled"});this.addUpdate(()=>!l$(this,{type:5,timestamp:a.timestamp||0,data:{tag:"breadcrumb",payload:a,metric:!0}}))}return c}getCurrentRoute(){let a=this.lastActiveSpan||dE(),b=a&&dD(a),c=(b&&dw(b).data||{})[cT];if(b&&c&&["route","custom"].includes(c))return dw(b).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=function({useCompression:a,workerUrl:b}){if(a&&window.Worker){let a=function(a){try{let b=a||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__){let a;return a=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});']),URL.createObjectURL(a)}return""}();if(!b)return;lH&&lL.log(`Using compression worker${a?` from ${a}`:""}`);let c=new Worker(b);return new lQ(c)}catch(a){lH&&lL.exception(a,"Failed to create compression worker")}}(b);if(a)return a}return lH&&lL.log("Using simple buffer"),new lN}({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(a){let b=this._options.errorSampleRate>0,c=lZ({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:a},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:b});this.session=c}_checkSession(){if(!this.session)return!1;let a=this.session;return!lY(a,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(a),!1)}async _refreshSession(a){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(a.id))}_addListeners(){try{U.document.addEventListener("visibilitychange",this._handleVisibilityChange),U.addEventListener("blur",this._handleWindowBlur),U.addEventListener("focus",this._handleWindowFocus),U.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(a){let b,c=a6();ii(b=>{var c,d;if(!a.isEnabled())return;let e=function(a){let{target:b,message:c}=function(a){let b,c="click"===a.name,d=null;try{d=c?lp(a.event):lq(a.event),b=am(d,{maxStringLength:200})||"<unknown>"}catch{b="<unknown>"}return{target:d,message:b}}(a);return lv({category:`ui.${a.name}`,...ly(b,c)})}(b);if(!e)return;let f="click"===b.name,g=f?b.event:void 0;f&&a.clickDetector&&g?.target&&!g.altKey&&!g.metaKey&&!g.ctrlKey&&!g.shiftKey&&(c=a.clickDetector,d=lp(b.event),c.handleClick(e,d)),ln(a,e)}),ip(b=>{if(!a.isEnabled())return;let c=function(a){let{from:b,to:c}=a,d=Date.now()/1e3;return{type:"navigation.push",start:d,end:d,name:c,data:{previous:b}}}(b);null!==c&&(a.getContext().urls.push(c.name),a.triggerUserActivity(),a.addUpdate(()=>(l5(a,[c]),!1)))}),(b=a6())&&b.on("beforeAddBreadcrumb",b=>(function(a,b){var c;if(!a.isEnabled()||!l3(b))return;let d=(c=b,!l3(c)||["fetch","xhr","sentry.event","sentry.transaction"].includes(c.category)||c.category.startsWith("ui.")?null:"console"===c.category?function(a){let b=a.data?.arguments;if(!Array.isArray(b)||0===b.length)return lv(a);let c=!1,d=b.map(a=>{if(!a)return a;if("string"==typeof a)return a.length>5e3?(c=!0,`${a.slice(0,5e3)}`):a;if("object"==typeof a)try{let b=dW(a,7);if(JSON.stringify(b).length>5e3)return c=!0,`${JSON.stringify(b,null,2).slice(0,5e3)}`;return b}catch{}return a});return lv({...a,data:{...a.data,arguments:d,...c?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(c):lv(c));d&&ln(a,d)})(a,b));let d=a6();try{let{networkDetailAllowUrls:b,networkDetailDenyUrls:c,networkCaptureBodies:e,networkRequestHeaders:f,networkResponseHeaders:g}=a.getOptions(),h={replay:a,networkDetailAllowUrls:b,networkDetailDenyUrls:c,networkCaptureBodies:e,networkRequestHeaders:f,networkResponseHeaders:g};d&&d.on("beforeAddBreadcrumb",(a,b)=>(function(a,b,c){if(b.data)try{var d,e,f,g;d=b,"xhr"===d.category&&(e=c,e?.xhr)&&(!function(a,b){let{xhr:c,input:d}=b;if(!c)return;let e=l7(d),f=c.getResponseHeader("content-length")?l8(c.getResponseHeader("content-length")):function(a,b){try{let c="json"===b&&a&&"object"==typeof a?JSON.stringify(a):a;return l7(c)}catch{return}}(c.response,c.responseType);void 0!==e&&(a.data.request_body_size=e),void 0!==f&&(a.data.response_body_size=f)}(b,c),mm(b,c,a)),f=b,"fetch"===f.category&&(g=c,g?.response)&&(!function(a,b){let{input:c,response:d}=b,e=l7(c?i$(c):void 0),f=d?l8(d.headers.get("content-length")):void 0;void 0!==e&&(a.data.request_body_size=e),void 0!==f&&(a.data.response_body_size=f)}(b,c),mf(b,c,a))}catch(a){lH&&lL.exception(a,"Error when enriching network breadcrumb")}})(h,a,b))}catch{}eb(Object.assign((b,c)=>{if(!a.isEnabled()||a.isPaused())return b;if("replay_event"===b.type)return delete b.breadcrumbs,b;if(b.type&&!l1(b)&&!l2(b))return b;if(!a.checkAndHandleExpiredSession())return l4(),b;if(l2(b))return a.flush(),b.contexts.feedback.replay_id=a.getSessionId(),a.triggerUserActivity(),a.addUpdate(()=>!b.timestamp||(a.throttledAddEvent({type:kL.Custom,timestamp:1e3*b.timestamp,data:{tag:"breadcrumb",payload:{timestamp:b.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:b.event_id}}}}),!1)),b;if(!b.type&&b.exception?.values?.length&&c.originalException?.__rrweb__&&!a.getOptions()._experiments.captureExceptions)return lH&&lL.log("Ignoring error from rrweb internals",b),null;let d="buffer"===a.recordingMode&&b.message!==jN&&!!b.exception&&!b.type&&lS(a.getOptions().errorSampleRate);if((d||"session"===a.recordingMode)&&(b.tags={...b.tags,replayId:a.getSessionId()}),d&&"buffer"===a.recordingMode&&a.session?.sampled==="buffer"){let b=a.session;b.dirty=!0,a.getOptions().stickySession&&lT(b)}return b},{id:"Replay"})),c&&(c.on("beforeSendEvent",b=>{var c,d;let e;a.isEnabled()&&!b.type&&(c=a,d=b,e=d.exception?.values?.[0]?.value,"string"==typeof e&&(e.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||e.match(/(does not match server-rendered HTML|Hydration failed because)/i))&&ln(c,lv({category:"replay.hydrate-error",data:{url:an()}})))}),c.on("afterSendEvent",(b,c)=>{if(!a.isEnabled()||b.type&&!l1(b))return;let d=c.statusCode;if(d&&!(d<200)&&!(d>=300)){if(l1(b)){var e,f;let c;return void(e=a,f=b,c=e.getContext(),f.contexts?.trace?.trace_id&&c.traceIds.size<100&&c.traceIds.add(f.contexts.trace.trace_id))}!function(a,b){let c=a.getContext();if(b.event_id&&c.errorIds.size<100&&c.errorIds.add(b.event_id),"buffer"!==a.recordingMode||!b.tags||!b.tags.replayId)return;let{beforeErrorSampling:d}=a.getOptions();("function"!=typeof d||d(b))&&hN(async()=>{try{await a.sendBufferedReplayOrFlush()}catch(b){a.handleException(b)}})}(a,b)}}),c.on("createDsc",b=>{let c=a.getSessionId();c&&a.isEnabled()&&"session"===a.recordingMode&&a.checkAndHandleExpiredSession()&&(b.replay_id=c)}),c.on("spanStart",b=>{a.lastActiveSpan=b}),c.on("spanEnd",b=>{a.lastActiveSpan=b}),c.on("beforeSendFeedback",async(b,c)=>{let d=a.getSessionId();c?.includeReplay&&a.isEnabled()&&d&&b.contexts?.feedback&&("api"===b.contexts.feedback.source&&await a.sendBufferedReplayOrFlush(),b.contexts.feedback.replay_id=d)}),c.on("openFeedbackWidget",async()=>{await a.sendBufferedReplayOrFlush()}))}(this),this._hasInitializedCoreListeners=!0)}catch(a){this.handleException(a)}this._performanceCleanupCallback=function(a){function b(b){a.performanceEntries.includes(b)||a.performanceEntries.push(b)}function c({entries:a}){a.forEach(b)}let d=[];return["navigation","paint","resource"].forEach(a=>{d.push(jD(a,c))}),d.push(jB(lA(lD,a)),jA(lA(lE,a)),jC(lA(lF,a))),()=>{d.forEach(a=>a())}}(this)}_removeListeners(){try{U.document.removeEventListener("visibilitychange",this._handleVisibilityChange),U.removeEventListener("blur",this._handleWindowBlur),U.removeEventListener("focus",this._handleWindowFocus),U.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(a){this.handleException(a)}}_doChangeToBackgroundTasks(a){!this.session||lX(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(a&&this._createCustomBreadcrumb(a),this.conditionalFlush())}_doChangeToForegroundTasks(a){if(this.session){if(!this.checkAndHandleExpiredSession()){lH&&lL.log("Document has become active, but session has expired");return}a&&this._createCustomBreadcrumb(a)}}_updateUserActivity(a=Date.now()){this._lastActivity=a}_updateSessionActivity(a=Date.now()){this.session&&(this.session.lastActivity=a,this._maybeSaveSession())}_createCustomBreadcrumb(a){this.addUpdate(()=>{this.throttledAddEvent({type:kL.Custom,timestamp:a.timestamp||0,data:{tag:"breadcrumb",payload:a}})})}_addPerformanceEntries(){let a=this.performanceEntries.map(lB).filter(Boolean).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){let b=this._context.initialTimestamp/1e3;a=a.filter(a=>a.start>=b)}return Promise.all(l5(this,a))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){let{session:a,eventBuffer:b}=this;if(!a||!b||this._requiresManualStart||a.segmentId)return;let c=b.getEarliestTimestamp();c&&c<this._context.initialTimestamp&&(this._context.initialTimestamp=c)}_popEventContext(){let a={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),a}async _runFlush(){let a=this.getSessionId();if(!this.session||!this.eventBuffer||!a){lH&&lL.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),this.eventBuffer?.hasEvents){if((await mn(this),this.eventBuffer)&&a===this.getSessionId())try{this._updateInitialTimestampFromEventBuffer();let b=Date.now();if(b-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw Error("Session is too long, not sending replay");let c=this._popEventContext(),d=this.session.segmentId++;this._maybeSaveSession();let e=await this.eventBuffer.finish();await mt({replayId:a,recordingData:e,segmentId:d,eventContext:c,session:this.session,timestamp:b,onError:a=>this.handleException(a)})}catch(b){this.handleException(b),this.stop({reason:"sendReplay"});let a=a6();a&&a.recordDroppedEvent(b instanceof ms?"ratelimit_backoff":"send_error","replay")}}}async _flush({force:a=!1}={}){if(!this._isEnabled&&!a)return;if(!this.checkAndHandleExpiredSession()){lH&&lL.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;let b=this.session.started,c=Date.now()-b;this._debouncedFlush.cancel();let d=c<this._options.minReplayDuration,e=c>this._options.maxReplayDuration+5e3;if(d||e){lH&&lL.log(`Session duration (${Math.floor(c/1e3)}s) is too ${d?"short":"long"}, not sending replay.`),d&&this._debouncedFlush();return}let f=this.eventBuffer;f&&0===this.session.segmentId&&!f.hasCheckout&&lH&&lL.log("Flushing initial segment without checkout.");let g=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(a){this.handleException(a)}finally{this._flushLock=void 0,g&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&lT(this.session)}_onMutationHandler(a){let{ignoreMutations:b}=this._options._experiments;if(b?.length&&a.some(a=>{let c=function(a){if(!a)return null;try{return a.nodeType===a.ELEMENT_NODE?a:a.parentElement}catch{return null}}(a.target),d=b.join(",");return c?.matches(d)}))return!1;let c=a.length,d=this._options.mutationLimit,e=this._options.mutationBreadcrumbLimit,f=d&&c>d;if(c>e||f){let a=lv({category:"replay.mutations",data:{count:c,limit:f}});this._createCustomBreadcrumb(a)}return!f||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}function mw(a,b){return[...a,...b].join(",")}let mx='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',my=["content-length","content-type","accept"],mz=!1,mA=a=>new mB(a);class mB{constructor({flushMinDelay:a=5e3,flushMaxDelay:b=5500,minReplayDuration:c=4999,maxReplayDuration:d=36e5,stickySession:e=!0,useCompression:f=!0,workerUrl:g,_experiments:h={},maskAllText:i=!0,maskAllInputs:j=!0,blockAllMedia:k=!0,mutationBreadcrumbLimit:l=750,mutationLimit:m=1e4,slowClickTimeout:n=7e3,slowClickIgnoreSelectors:o=[],networkDetailAllowUrls:p=[],networkDetailDenyUrls:q=[],networkCaptureBodies:r=!0,networkRequestHeaders:s=[],networkResponseHeaders:t=[],mask:u=[],maskAttributes:v=["title","placeholder","aria-label"],unmask:w=[],block:x=[],unblock:y=[],ignore:z=[],maskFn:A,beforeAddRecordingEvent:B,beforeErrorSampling:C,onError:D}={}){this.name="Replay";const E=function({mask:a,unmask:b,block:c,unblock:d,ignore:e}){return{maskTextSelector:mw(a,[".sentry-mask","[data-sentry-mask]"]),unmaskTextSelector:mw(b,[]),blockSelector:mw(c,[".sentry-block","[data-sentry-block]","base","iframe[srcdoc]:not([src])"]),unblockSelector:mw(d,[]),ignoreSelector:mw(e,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}({mask:u,unmask:w,block:x,unblock:y,ignore:z});this._recordingOptions={maskAllInputs:j,maskAllText:i,maskInputOptions:{password:!0},maskTextFn:A,maskInputFn:A,maskAttributeFn:(a,b,c)=>(function({el:a,key:b,maskAttributes:c,maskAllText:d,privacyOptions:e,value:f}){return!d||e.unmaskTextSelector&&a.matches(e.unmaskTextSelector)?f:c.includes(b)||"value"===b&&"INPUT"===a.tagName&&["submit","button"].includes(a.getAttribute("type")||"")?f.replace(/[\S]/g,"*"):f})({maskAttributes:v,maskAllText:i,privacyOptions:E,key:a,value:b,el:c}),...E,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:a=>{try{a.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!h.recordCrossOriginIframes},this._initialOptions={flushMinDelay:a,flushMaxDelay:b,minReplayDuration:Math.min(c,15e3),maxReplayDuration:Math.min(d,36e5),stickySession:e,useCompression:f,workerUrl:g,blockAllMedia:k,maskAllInputs:j,maskAllText:i,mutationBreadcrumbLimit:l,mutationLimit:m,slowClickTimeout:n,slowClickIgnoreSelectors:o,networkDetailAllowUrls:p,networkDetailDenyUrls:q,networkCaptureBodies:r,networkRequestHeaders:mC(s),networkResponseHeaders:mC(t),beforeAddRecordingEvent:B,beforeErrorSampling:C,onError:D,_experiments:h},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${mx}`:mx,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized,this._isInitialized=!0}get _isInitialized(){return mz}set _isInitialized(a){mz=a}afterAllSetup(a){}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(a){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(a):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(a){if(this._replay?.isEnabled())return this._replay.getSessionId(a)}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(a){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(a),this._replay.initializeSampling())}_setup(a){var b;let c,d,e,f,g=(b=this._initialOptions,c=a.getOptions(),d={sessionSampleRate:0,errorSampleRate:0,...b},e=dk(c.replaysSessionSampleRate),f=dk(c.replaysOnErrorSampleRate),null==e&&null==f&&ar(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),null!=e&&(d.sessionSampleRate=e),null!=f&&(d.errorSampleRate=f),d);this._replay=new mv({options:g,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(a){try{let b=a.getIntegrationByName("ReplayCanvas");if(!b)return;this._replay._canvas=b.getOptions()}catch{}}}function mC(a){return[...my,...a.map(a=>a.toLowerCase())]}function mD(){let a=a6();return a?.getIntegrationByName("Replay")}var mE=Object.defineProperty,mF=(a,b,c)=>{let d;return(d="symbol"!=typeof b?b+"":b)in a?mE(a,d,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[d]=c};function mG(a,b,c=1/0,d=0){return!a||a.nodeType!==a.ELEMENT_NODE||d>c?-1:b(a)?d:mG(a.parentNode,b,c,d+1)}function mH(a,b){return c=>{if(null===c)return!1;try{if(a){if("string"==typeof a){if(c.matches(`.${a}`))return!0}else if(function(a,b){for(let c=a.classList.length;c--;){let d=a.classList[c];if(b.test(d))return!0}return!1}(c,a))return!0}if(b&&c.matches(b))return!0;return!1}catch{return!1}}}function mI(a,b,c,d,e=window){let f=e.Object.getOwnPropertyDescriptor(a,b);return e.Object.defineProperty(a,b,d?c:{set(a){mO(()=>{c.set.call(this,a)},0),f&&f.set&&f.set.call(this,a)}}),()=>mI(a,b,f||{},!0)}function mJ(a,b,c){try{if(!(b in a))return()=>{};let d=a[b],e=c(d);return"function"==typeof e&&(e.prototype=e.prototype||{},Object.defineProperties(e,{__rrweb_original__:{enumerable:!1,value:d}})),a[b]=e,()=>{a[b]=d}}catch{return()=>{}}}function mK(a,b,c,d,e){if(!a)return!1;let f=function(a){if(!a)return null;try{return a.nodeType===a.ELEMENT_NODE?a:a.parentElement}catch(a){return null}}(a);if(!f)return!1;let g=mH(b,c);if(!e){let a=d&&f.matches(d);return g(f)&&!a}let h=mG(f,g),i=-1;return!(h<0)&&(d&&(i=mG(f,mH(null,d))),h>-1&&i<0||h<i)}Date.now().toString();let mL={};function mM(a){let b=mL[a];if(b)return b;let c=window.document,d=window[a];if(c&&"function"==typeof c.createElement)try{let b=c.createElement("iframe");b.hidden=!0,c.head.appendChild(b);let e=b.contentWindow;e&&e[a]&&(d=e[a]),c.head.removeChild(b)}catch(a){}return mL[a]=d.bind(window)}function mN(...a){return mM("requestAnimationFrame")(...a)}function mO(...a){return mM("setTimeout")(...a)}var mP=((M=mP||{})[M["2D"]=0]="2D",M[M.WebGL=1]="WebGL",M[M.WebGL2=2]="WebGL2",M);let mQ=a=>y?(...b)=>{try{return a(...b)}catch(a){if(y&&!0===y(a))return()=>{};throw a}}:a;for(var mR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mS="undefined"==typeof Uint8Array?[]:new Uint8Array(256),mT=0;mT<mR.length;mT++)mS[mR.charCodeAt(mT)]=mT;var mU=function(a){var b,c=new Uint8Array(a),d=c.length,e="";for(b=0;b<d;b+=3)e+=mR[c[b]>>2],e+=mR[(3&c[b])<<4|c[b+1]>>4],e+=mR[(15&c[b+1])<<2|c[b+2]>>6],e+=mR[63&c[b+2]];return d%3==2?e=e.substring(0,e.length-1)+"=":d%3==1&&(e=e.substring(0,e.length-2)+"=="),e};let mV=new Map,mW=(a,b,c)=>{let d;if(!a||!(mY(a,b)||"object"==typeof a))return;let e=a.constructor.name,f=((d=mV.get(c))||(d=new Map,mV.set(c,d)),d.has(e)||d.set(e,[]),d.get(e)),g=f.indexOf(a);return -1===g&&(g=f.length,f.push(a)),g},mX=(a,b,c)=>a.map(a=>(function a(b,c,d){if(b instanceof Array)return b.map(b=>a(b,c,d));if(null===b);else if(b instanceof Float32Array||b instanceof Float64Array||b instanceof Int32Array||b instanceof Uint32Array||b instanceof Uint8Array||b instanceof Uint16Array||b instanceof Int16Array||b instanceof Int8Array||b instanceof Uint8ClampedArray)return{rr_type:b.constructor.name,args:[Object.values(b)]};else if(b instanceof ArrayBuffer)return{rr_type:b.constructor.name,base64:mU(b)};else if(b instanceof DataView)return{rr_type:b.constructor.name,args:[a(b.buffer,c,d),b.byteOffset,b.byteLength]};else if(b instanceof HTMLImageElement){let a=b.constructor.name,{src:c}=b;return{rr_type:a,src:c}}else if(b instanceof HTMLCanvasElement)return{rr_type:"HTMLImageElement",src:b.toDataURL()};else if(b instanceof ImageData)return{rr_type:b.constructor.name,args:[a(b.data,c,d),b.width,b.height]};else if(mY(b,c)||"object"==typeof b)return{rr_type:b.constructor.name,index:mW(b,c,d)};return b})(a,b,c)),mY=(a,b)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(a=>"function"==typeof b[a]).find(c=>a instanceof b[c]);function mZ(a,b,c,d,e){let f=[];try{let g=mJ(a.HTMLCanvasElement.prototype,"getContext",function(a){return function(f,...g){if(!mK(this,b,c,d,!0)){let a="experimental-webgl"===f?"webgl":f;if("__context"in this||(this.__context=a),e&&["webgl","webgl2"].includes(a))if(g[0]&&"object"==typeof g[0]){let a=g[0];a.preserveDrawingBuffer||(a.preserveDrawingBuffer=!0)}else g.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[f,...g])}});f.push(g)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{f.forEach(a=>a())}}function m$(a,b,c,d,e,f,g,h){let i=[];for(let g of Object.getOwnPropertyNames(a))if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(g))try{if("function"!=typeof a[g])continue;let j=mJ(a,g,function(a){return function(...i){let j=a.apply(this,i);if(mW(j,h,this),"tagName"in this.canvas&&!mK(this.canvas,d,e,f,!0)){let a=mX(i,h,this),d={type:b,property:g,args:a};c(this.canvas,d)}return j}});i.push(j)}catch{let d=mI(a,g,{set(a){c(this.canvas,{type:b,property:g,args:[a],setter:!0})}});i.push(d)}return i}class m_{constructor(a){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(a,b)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(b)};const{enableManualSnapshot:b,sampling:c="all",win:d,recordCanvas:e,errorHandler:f}=a;if(a.sampling=c,this.mutationCb=a.mutationCb,this.mirror=a.mirror,this.options=a,f&&(y=f),(e&&"number"==typeof c||b)&&(this.worker=this.initFPSWorker()),this.addWindow(d),b)return;mQ(()=>{e&&"all"===c&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),e&&"number"==typeof c&&this.initCanvasFPSObserver()})()}reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(a=>{try{a()}catch(a){}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,this.worker?.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(a){let{sampling:b="all",blockClass:c,blockSelector:d,unblockSelector:e,recordCanvas:f,enableManualSnapshot:g}=this.options;if(!this.windowsSet.has(a)){if(g){this.windowsSet.add(a),this.windows.push(new WeakRef(a));return}mQ(()=>{if(f&&"all"===b&&this.initCanvasMutationObserver(a,c,d,e),f&&"number"==typeof b){let b=mZ(a,c,d,e,!0);this.restoreHandlers.push(()=>{b()})}})(),this.windowsSet.add(a),this.windows.push(new WeakRef(a))}}addShadowRoot(a){this.shadowDoms.add(new WeakRef(a))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(a,b){b?.skipRequestAnimationFrame?this.takeSnapshot(performance.now(),!0,a):mN(b=>this.takeSnapshot(b,!0,a))}initFPSWorker(){let a,b=new Worker((a=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']),URL.createObjectURL(a)));return b.onmessage=a=>{let b=a.data,{id:c}=b;if(this.snapshotInProgressMap.set(c,!1),!("base64"in b))return;let{base64:d,type:e,width:f,height:g}=b;this.mutationCb({id:c,type:mP["2D"],commands:[{property:"clearRect",args:[0,0,f,g]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:d}],type:e}]},0,0,f,g]}]})},b}initCanvasFPSObserver(){let a;if(!this.windows.length&&!this.shadowDoms.size)return;let b=c=>{this.takeSnapshot(c,!1),a=mN(b)};a=mN(b),this.restoreHandlers.push(()=>{a&&cancelAnimationFrame(a)})}initCanvasMutationObserver(a,b,c,d){var e,f;let g,h=mZ(a,b,c,d,!1),i=function(a,b,c,d,e){let f=[];for(let g of Object.getOwnPropertyNames(b.CanvasRenderingContext2D.prototype))try{if("function"!=typeof b.CanvasRenderingContext2D.prototype[g])continue;let h=mJ(b.CanvasRenderingContext2D.prototype,g,function(f){return function(...h){return mK(this.canvas,c,d,e,!0)||mO(()=>{let c=mX(h,b,this);a(this.canvas,{type:mP["2D"],property:g,args:c})},0),f.apply(this,h)}});f.push(h)}catch{let c=mI(b.CanvasRenderingContext2D.prototype,g,{set(b){a(this.canvas,{type:mP["2D"],property:g,args:[b],setter:!0})}});f.push(c)}return()=>{f.forEach(a=>a())}}(this.processMutation.bind(this),a,b,c,d),j=(e=this.processMutation.bind(this),f=this.mirror,(g=[]).push(...m$(a.WebGLRenderingContext.prototype,mP.WebGL,e,b,c,d,f,a)),void 0!==a.WebGL2RenderingContext&&g.push(...m$(a.WebGL2RenderingContext.prototype,mP.WebGL2,e,b,c,d,f,a)),()=>{g.forEach(a=>a())});this.restoreHandlers.push(()=>{h(),i(),j()})}getCanvasElements(a,b,c){let d=[],e=e=>{e.querySelectorAll("canvas").forEach(e=>{mK(e,a,b,c,!0)||d.push(e)})};for(let a of this.windows){let b,c=a.deref();try{b=c&&c.document}catch{}b&&e(b)}for(let a of this.shadowDoms){let b=a.deref();b&&e(b)}return d}takeSnapshot(a,b,c){let{sampling:d,blockClass:e,blockSelector:f,unblockSelector:g,dataURLOptions:h,maxCanvasSize:i}=this.options;return(!this.lastSnapshotTime||!(a-this.lastSnapshotTime<1e3/("all"===d?2:d||2)))&&(this.lastSnapshotTime=a,(c?[c]:this.getCanvasElements(e,f,g)).forEach(a=>{let c=this.mirror.getId(a);if(!(!this.mirror.hasNode(a)||!a.width||!a.height||this.snapshotInProgressMap.get(c))){if(this.snapshotInProgressMap.set(c,!0),!b&&["webgl","webgl2"].includes(a.__context)){let b=a.getContext(a.__context);b?.getContextAttributes()?.preserveDrawingBuffer===!1&&b.clear(b.COLOR_BUFFER_BIT)}createImageBitmap(a).then(b=>{this.worker?.postMessage({id:c,bitmap:b,width:a.width,height:a.height,dataURLOptions:h,maxCanvasSize:i},[b])}).catch(a=>{mQ(()=>{throw this.snapshotInProgressMap.delete(c),a})()})}}),!0)}startPendingCanvasMutationFlusher(){mN(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let a=b=>{this.rafStamps.latestId=b,mN(a)};mN(a)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((a,b)=>{let c=this.mirror.getId(b);this.flushPendingCanvasMutationFor(b,c)}),mN(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(a,b){if(this.frozen||this.locked)return;let c=this.pendingCanvasMutations.get(a);if(!c||-1===b)return;let d=c.map(a=>{let{type:b,...c}=a;return c}),{type:e}=c[0];this.mutationCb({id:b,type:e,commands:d}),this.pendingCanvasMutations.delete(a)}}try{if(2!==Array.from([1],a=>2*a)[0]){let a=document.createElement("iframe");document.body.appendChild(a),Array.from=a.contentWindow?.Array.from||Array.from,document.body.removeChild(a)}}catch(a){console.debug("Unable to override Array.from",a)}new class a{constructor(){mF(this,"idNodeMap",new Map),mF(this,"nodeMetaMap",new WeakMap)}getId(a){return a?this.getMeta(a)?.id??-1:-1}getNode(a){return this.idNodeMap.get(a)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(a){return this.nodeMetaMap.get(a)||null}removeNodeFromMap(a){let b=this.getId(a);this.idNodeMap.delete(b),a.childNodes&&a.childNodes.forEach(a=>this.removeNodeFromMap(a))}has(a){return this.idNodeMap.has(a)}hasNode(a){return this.nodeMetaMap.has(a)}add(a,b){let c=b.id;this.idNodeMap.set(c,a),this.nodeMetaMap.set(a,b)}replace(a,b){let c=this.getNode(a);if(c){let a=this.nodeMetaMap.get(c);a&&this.nodeMetaMap.set(b,a)}this.idNodeMap.set(a,b)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}},(N=P||(P={}))[N.NotStarted=0]="NotStarted",N[N.Running=1]="Running",N[N.Stopped=2]="Stopped";let m0={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},m1=(a={})=>{let b,[c,d]=a.maxCanvasSize||[],e={quality:a.quality||"medium",enableManualSnapshot:a.enableManualSnapshot,maxCanvasSize:[c?Math.min(c,1280):1280,d?Math.min(d,1280):1280]},f=new Promise(a=>b=a);return{name:"ReplayCanvas",getOptions(){let{quality:a,enableManualSnapshot:c,maxCanvasSize:d}=e;return{enableManualSnapshot:c,recordCanvas:!0,getCanvasManager:a=>{let e=new m_({...a,enableManualSnapshot:c,maxCanvasSize:d,errorHandler:a=>{try{"object"==typeof a&&(a.__rrweb__=!0)}catch{}}});return b(e),e},...m0[a]||m0.medium}},async snapshot(a,b){(await f).snapshot(a,b)}}};function m2(a){return a.split(",").some(a=>a.trim().startsWith(c2))}function m3(a){return"number"==typeof a&&isFinite(a)}function m4(a,b,c,{...d}){let e=dw(a).start_timestamp;return e&&e>b&&"function"==typeof a.updateStartTime&&a.updateStartTime(b),e1(a,()=>{let a=e_({startTime:b,...d});return a&&a.end(c),a})}function m5(a){let b,c=a6();if(!c)return;let{name:d,transaction:e,attributes:f,startTime:g}=a,{release:h,environment:i,sendDefaultPii:j}=c.getOptions(),k=c.getIntegrationByName("Replay"),l=k?.getReplayId(),m=a1(),n=m.getUser(),o=void 0!==n?n.email||n.id||n.ip_address:void 0;try{b=m.getScopeData().contexts.profile.profile_id}catch{}return e_({name:d,attributes:{release:h,environment:i,user:o||void 0,profile_id:b||void 0,replay_id:l||void 0,transaction:e,"user_agent.original":U.navigator?.userAgent,"client.address":j?"{{auto}}":void 0,...f},startTime:g,experimental:{standalone:!0}})}function m6(){return U.addEventListener&&U.performance}function m7(a){return a/1e3}function m8(a){try{return PerformanceObserver.supportedEntryTypes.includes(a)}catch{return!1}}function m9(a,b){let c,d=!1;function e(a){!d&&c&&b(a,c),d=!0}jr(()=>{e("pagehide")});let f=a.on("beforeStartNavigationSpan",(a,b)=>{b?.isRedirect||(e("navigation"),f(),g())}),g=a.on("afterStartPageLoadSpan",a=>{c=a.spanContext().spanId,g()})}function na(a){return a?((aQ()||performance.timeOrigin)+a)/1e3:a}function nb(a){let b={};if(void 0!=a.nextHopProtocol){let{name:c,version:d}=function(a){let b="unknown",c="unknown",d="";for(let e of a){if("/"===e){[b,c]=a.split("/");break}if(!isNaN(Number(e))){b="h"===d?"http":d,c=a.split(d)[1];break}d+=e}return d===a&&(b=d),{name:b,version:c}}(a.nextHopProtocol);b["network.protocol.version"]=d,b["network.protocol.name"]=c}return aQ()||m6()?.timeOrigin?Object.fromEntries(Object.entries({...b,"http.request.redirect_start":na(a.redirectStart),"http.request.redirect_end":na(a.redirectEnd),"http.request.worker_start":na(a.workerStart),"http.request.fetch_start":na(a.fetchStart),"http.request.domain_lookup_start":na(a.domainLookupStart),"http.request.domain_lookup_end":na(a.domainLookupEnd),"http.request.connect_start":na(a.connectStart),"http.request.secure_connection_start":na(a.secureConnectionStart),"http.request.connection_end":na(a.connectEnd),"http.request.request_start":na(a.requestStart),"http.request.response_start":na(a.responseStart),"http.request.response_end":na(a.responseEnd),"http.request.time_to_first_byte":null!=a.responseStart?a.responseStart/1e3:void 0}).filter(([,a])=>null!=a)):b}function nc(a){try{return new URL(a,U.location.origin).href}catch{return}}function nd(a){try{return new Headers(a)}catch{return}}let ne=new WeakMap,nf=new Map,ng={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function nh(a,b){let{traceFetch:c,traceXHR:d,trackFetchStreamPerformance:e,shouldCreateSpanForRequest:f,enableHTTPTimings:g,tracePropagationTargets:h,onRequestSpanStart:i,onRequestSpanEnd:j}={...ng,...b},k="function"==typeof f?f:a=>!0,l=a=>(function(a,b){let c=an();if(c){let d,e;try{d=new URL(a,c),e=new URL(c).origin}catch{return!1}let f=d.origin===e;return b?aH(d.toString(),b)||f&&aH(d.pathname,b):f}{let c=!!a.match(/^\/(?!\/)/);return b?aH(a,b):c}})(a,h),m={},n=a.getOptions().propagateTraceparent;if(c){let b;a.addEventProcessor(a=>("transaction"===a.type&&a.spans&&a.spans.forEach(a=>{if("http.client"===a.op){let b=nf.get(a.span_id);b&&(a.timestamp=b/1e3,nf.delete(a.span_id))}}),a)),e&&(eq(b="fetch-body-resolved",a=>{if(a.response){let b=ne.get(a.response);b&&a.endTimestamp&&nf.set(b,a.endTimestamp)}}),er(b,()=>h7(h9))),h6(a=>{let b=function(a,b,c,d,e){var f,g,h,i,j,k,l,m;let n,o;if(!a.fetchData)return;let{method:p,url:q}=a.fetchData,r=de()&&b(q);if(a.endTimestamp&&r){let b,c=a.fetchData.__span;if(!c)return;let i=d[c];i&&(function(a,b){if(b.response){dg(a,b.response.status);let c=b.response?.headers?.get("content-length");if(c){let b=parseInt(c);b>0&&a.setAttribute("http.response_content_length",b)}}else b.error&&a.setStatus({code:2,message:"internal_error"});a.end()}(i,a),f=i,g=a,b="object"==typeof(h=e)&&null!==h?h.onRequestSpanEnd:void 0,b?.(f,{headers:g.response?.headers,error:g.error}),delete d[c]);return}let{spanOrigin:s="auto.http.browser",propagateTraceparent:t=!1}="object"==typeof e?e:{spanOrigin:e},u=!!dE(),v=r&&u?e_((i=q,j=p,k=s,{name:(n=ie(i))?`${j} ${function(a){if(id(a))return a.pathname;let b=new URL(a);return b.search="",b.hash="",["80","443"].includes(b.port)&&(b.port=""),b.password&&(b.password="%filtered%"),b.username&&(b.username="%filtered%"),b.toString()}(n)}`:j,attributes:(l=i,m=n,o={url:l,type:"fetch","http.method":j,[cX]:k,[cW]:"http.client"},m&&(id(m)||(o["http.url"]=m.href,o["server.address"]=m.host),m.search&&(o["http.query"]=m.search),m.hash&&(o["http.fragment"]=m.hash)),o)})):new eQ;if(a.fetchData.__span=v.spanContext().spanId,d[v.spanContext().spanId]=v,c(a.fetchData.url)){let b=a.args[0],c=a.args[1]||{},d=function(a,b,c,d){var e;let f=fC({span:c,propagateTraceparent:d}),g=f["sentry-trace"],h=f.baggage,i=f.traceparent;if(!g)return;let j=b.headers||(al(a)?a.headers:void 0);if(!j)return{...f};if(e=j,"undefined"!=typeof Headers&&aj(e,Headers)){let a=new Headers(j);if(a.get("sentry-trace")||a.set("sentry-trace",g),d&&i&&!a.get("traceparent")&&a.set("traceparent",i),h){let b=a.get("baggage");b?m2(b)||a.set("baggage",`${b},${h}`):a.set("baggage",h)}return a}if(Array.isArray(j)){let a=[...j];j.find(a=>"sentry-trace"===a[0])||a.push(["sentry-trace",g]),d&&i&&!j.find(a=>"traceparent"===a[0])&&a.push(["traceparent",i]);let b=j.find(a=>"baggage"===a[0]&&m2(a[1]));return h&&!b&&a.push(["baggage",h]),a}{let a="sentry-trace"in j?j["sentry-trace"]:void 0,b="traceparent"in j?j.traceparent:void 0,c="baggage"in j?j.baggage:void 0,e=c?Array.isArray(c)?[...c]:[c]:[],f=c&&(Array.isArray(c)?c.find(a=>m2(a)):m2(c));h&&!f&&e.push(h);let k={...j,"sentry-trace":a??g,baggage:e.length>0?e.join(","):void 0};return d&&i&&!b&&(k.traceparent=i),k}}(b,c,de()&&u?v:void 0,t);d&&(a.args[1]=c,c.headers=d)}let w=a6();if(w){let b={input:a.args,response:a.response,startTimestamp:a.startTimestamp,endTimestamp:a.endTimestamp};w.emit("beforeOutgoingRequestSpan",v,b)}return v}(a,k,l,m,{propagateTraceparent:n,onRequestSpanEnd:j});if(a.response&&a.fetchData.__span&&ne.set(a.response,a.fetchData.__span),b){let c=nc(a.fetchData.url),d=c?ig(c).host:void 0;b.setAttributes({"http.url":c,"server.address":d}),g&&ni(b),i?.(b,{headers:a.headers})}})}d&&im(a=>{let b=function(a,b,c,d,e,f){let g=a.xhr,h=g?.[il];if(!g||g.__sentry_own_request__||!h)return;let{url:i,method:j}=h,k=de()&&b(i);if(a.endTimestamp&&k){let b=g.__sentry_xhr_span_id__;if(!b)return;let c=d[b];c&&void 0!==h.status_code&&(dg(c,h.status_code),c.end(),f?.(c,{headers:nd(i_(g)),error:a.error}),delete d[b]);return}let l=nc(i),m=l?ig(l):ig(i),n=ih(i),o=!!dE(),p=k&&o?e_({name:`${j} ${n}`,attributes:{url:i,type:"xhr","http.method":j,"http.url":l,"server.address":m?.host,[cX]:"auto.http.browser",[cW]:"http.client",...m?.search&&{"http.query":m?.search},...m?.hash&&{"http.fragment":m?.hash}}}):new eQ;g.__sentry_xhr_span_id__=p.spanContext().spanId,d[g.__sentry_xhr_span_id__]=p,c(i)&&function(a,b,c){let{"sentry-trace":d,baggage:e,traceparent:f}=fC({span:b,propagateTraceparent:c});d&&function(a,b,c,d){let e=a.__sentry_xhr_v3__?.request_headers;if(!e?.["sentry-trace"]&&a.setRequestHeader)try{if(a.setRequestHeader("sentry-trace",b),d&&!e?.traceparent&&a.setRequestHeader("traceparent",d),c){let b=e?.baggage;b&&b.split(",").some(a=>a.trim().startsWith("sentry-"))||a.setRequestHeader("baggage",c)}}catch{}}(a,d,e,f)}(g,de()&&o?p:void 0,e);let q=a6();return q&&q.emit("beforeOutgoingRequestSpan",p,a),p}(a,k,l,m,n,j);b&&(g&&ni(b),i?.(b,{headers:nd(a.xhr.__sentry_xhr_v3__?.request_headers)}))})}function ni(a){let{url:b}=dw(a).data;if(!b||"string"!=typeof b)return;let c=jD("resource",({entries:d})=>{d.forEach(d=>{"resource"===d.entryType&&"initiatorType"in d&&"string"==typeof d.nextHopProtocol&&("fetch"===d.initiatorType||"xmlhttprequest"===d.initiatorType)&&d.name.endsWith(b)&&(a.setAttributes(nb(d)),setTimeout(c))})})}let nj={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};function nk(a,b={}){let c,d,e=new Map,f=!1,g="externalFinish",h=!b.disableAutoFinish,i=[],{idleTimeout:j=nj.idleTimeout,finalTimeout:k=nj.finalTimeout,childSpanTimeout:l=nj.childSpanTimeout,beforeSpanEnd:m,trimIdleSpanEndTimestamp:n=!0}=b,o=a6();if(!o||!de()){let a=new eQ,b={sample_rate:"0",sampled:"false",...dK(a)};return ax(a,dH,b),a}let p=a1(),q=dE(),r=(c=e_(a),aV(a1(),c),Z&&av.log("[Tracing] Started span is an idle span"),c);function s(){d&&(clearTimeout(d),d=void 0)}function t(a){s(),d=setTimeout(()=>{!f&&0===e.size&&h&&(g="idleTimeout",r.end(a))},j)}function u(a){d=setTimeout(()=>{!f&&h&&(g="heartbeatFailed",r.end(a))},l)}function v(a){f=!0,e.clear(),i.forEach(a=>a()),aV(p,q);let b=dw(r),{start_timestamp:c}=b;if(!c)return;b.data[cY]||r.setAttribute(cY,g),av.log(`[Tracing] Idle span "${b.op}" finished`);let d=dC(r).filter(a=>a!==r),h=0;d.forEach(b=>{b.isRecording()&&(b.setStatus({code:2,message:"cancelled"}),b.end(a),Z&&av.log("[Tracing] Cancelling span since span ended early",JSON.stringify(b,void 0,2)));let{timestamp:c=0,start_timestamp:d=0}=dw(b),e=d<=a,f=c-d<=(k+j)/1e3;if(Z){let a=JSON.stringify(b,void 0,2);e?f||av.log("[Tracing] Discarding span since it finished after idle span final timeout",a):av.log("[Tracing] Discarding span since it happened after idle span was finished",a)}(!f||!e)&&(r[dz]&&r[dz].delete(b),h++)}),h>0&&r.setAttribute("sentry.idle_span_discarded_spans",h)}return r.end=new Proxy(r.end,{apply(a,b,c){if(m&&m(r),b instanceof eQ)return;let[d,...e]=c,f=du(d||aP()),g=dC(r).filter(a=>a!==r),h=dw(r);if(!g.length||!n)return v(f),Reflect.apply(a,b,[f,...e]);let i=o.getOptions().ignoreSpans,j=g?.reduce((a,b)=>{let c=dw(b);return!c.timestamp||i&&eS(c,i)?a:a?Math.max(a,c.timestamp):c.timestamp},void 0),l=h.start_timestamp,p=Math.min(l?l+k/1e3:1/0,Math.max(l||-1/0,Math.min(f,j||1/0)));return v(p),Reflect.apply(a,b,[p,...e])}}),i.push(o.on("spanStart",a=>{var b;!(f||a===r||dw(a).timestamp||a instanceof eV&&a.isStandaloneSpan())&&dC(r).includes(a)&&(b=a.spanContext().spanId,s(),e.set(b,!0),u(aP()+l/1e3))})),i.push(o.on("spanEnd",a=>{if(!f){var b;b=a.spanContext().spanId,e.has(b)&&e.delete(b),0===e.size&&t(aP()+j/1e3)}})),i.push(o.on("idleSpanEnableAutoFinish",a=>{a===r&&(h=!0,t(),e.size&&u())})),b.disableAutoFinish||t(),setTimeout(()=>{f||(r.setStatus({code:2,message:"deadline_exceeded"}),g="finalTimeout",r.end())},k),r}let nl=[],nm=new Map,nn=new Map,no={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"},np=({metric:a})=>{if(void 0==a.value)return;let b=m7(a.value);if(b>60)return;let c=a.entries.find(b=>b.duration===a.value&&no[b.name]);if(!c)return;let{interactionId:d}=c,e=no[c.name],f=m7(aQ()+c.startTime),g=dE(),h=g?dD(g):void 0,i=null!=d?nm.get(d):void 0,j=i?.span||h,k=j?dw(j).description:a1().getScopeData().transactionName,l=m5({name:i?.elementName||am(c.target),transaction:k,attributes:{[cX]:"auto.http.browser.inp",[cW]:`ui.interaction.${e}`,[c1]:c.duration},startTime:f});l&&(l.addEvent("inp",{[cZ]:"millisecond",[c$]:a.value}),l.end(f+b))},nq=0,nr={};function ns(a,b,c,d,e=c){var f;let g=b["secureConnection"===(f=c)?"connectEnd":"fetch"===f?"domainLookupStart":`${f}End`],h=b[`${c}Start`];h&&g&&m4(a,d+m7(h),d+m7(g),{op:`browser.${e}`,name:b.name,attributes:{[cX]:"auto.ui.browser.metrics",..."redirect"===c&&null!=b.redirectCount?{"http.redirect_count":b.redirectCount}:{}}})}let nt=({entries:a})=>{let b=dE(),c=b?dD(b):void 0,d=c?dw(c).description:a1().getScopeData().transactionName;a.forEach(a=>{if(!a.identifier)return;let b=a.name,c=a.renderTime,e=a.loadTime,[f,g]=e?[m7(e),"load-time"]:c?[m7(c),"render-time"]:[aP(),"entry-emission"],h="image-paint"===b?m7(Math.max(0,(c??0)-(e??0))):0,i={[cX]:"auto.ui.browser.elementtiming",[cW]:"ui.elementtiming",[cT]:"component","sentry.span_start_time_source":g,"sentry.transaction_name":d,"element.id":a.id,"element.type":a.element?.tagName?.toLowerCase()||"unknown","element.size":a.naturalWidth&&a.naturalHeight?`${a.naturalWidth}x${a.naturalHeight}`:void 0,"element.render_time":c,"element.load_time":e,"element.url":a.url||void 0,"element.identifier":a.identifier,"element.paint_type":b};eZ({name:`element[${a.identifier}]`,attributes:i,startTime:f,onlyIfParent:!0},a=>{a.end(f+h)})})},nu="sentry_previous_trace";function nv(a){return 1===a.traceFlags}let nw={...nj,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...ng},nx=(a={})=>{let b,c,d,e={name:void 0,source:void 0},f=U.document,{enableInp:g,enableElementTiming:h,enableLongTask:i,enableLongAnimationFrame:j,_experiments:{enableInteractions:k,enableStandaloneClsSpans:l,enableStandaloneLcpSpans:m},beforeStartSpan:n,idleTimeout:o,finalTimeout:p,childSpanTimeout:r,markBackgroundSpan:s,traceFetch:t,traceXHR:u,trackFetchStreamPerformance:v,shouldCreateSpanForRequest:w,enableHTTPTimings:x,ignoreResourceSpans:y,ignorePerformanceApiSpans:B,instrumentPageLoad:C,instrumentNavigation:D,detectRedirects:E,linkPreviousTrace:F,consistentTraceSampling:G,enableReportPageLoaded:H,onRequestSpanStart:I,onRequestSpanEnd:J}={...nw,...a};function K(a,c,g=!0){let h="pageload"===c.op,i=c.name,j=n?n(c):c,k=j.attributes||{};if(i!==j.name&&(k[cT]="custom",j.attributes=k),!g){let a=aO();e_({...j,startTime:a}).end(a);return}e.name=j.name,e.source=k[cT];let q=nk(j,{idleTimeout:o,finalTimeout:p,childSpanTimeout:r,disableAutoFinish:h,beforeSpanEnd:c=>{b?.(),function(a,b){var c,d;let e=m6(),f=aQ();if(!e?.getEntries||!f)return;let g=m7(f),h=e.getEntries(),{op:i,start_timestamp:j}=dw(a);h.slice(nq).forEach(c=>{let d=m7(c.startTime),e=m7(Math.max(0,c.duration));if("navigation"!==i||!j||!(g+d<j))switch(c.entryType){case"navigation":var f,h,k,l,m,n;let o,p,q;f=a,h=c,k=g,["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(a=>{ns(f,h,a,k)}),ns(f,h,"secureConnection",k,"TLS/SSL"),ns(f,h,"fetch",k,"cache"),ns(f,h,"domainLookup",k,"DNS"),l=f,m=h,o=(n=k)+m7(m.requestStart),p=n+m7(m.responseEnd),q=n+m7(m.responseStart),m.responseEnd&&(m4(l,o,p,{op:"browser.request",name:m.name,attributes:{[cX]:"auto.ui.browser.metrics"}}),m4(l,q,p,{op:"browser.response",name:m.name,attributes:{[cX]:"auto.ui.browser.metrics"}}));break;case"mark":case"paint":case"measure":{!function(a,b,c,d,e,f){if(function(a){if(a?.entryType==="measure")try{return"Components "===a.detail.devtools.track}catch{return}}(b)||["mark","measure"].includes(b.entryType)&&aH(b.name,f))return;let g=i5(!1),h=e+Math.max(c,m7(g?g.requestStart:0)),i=e+c,j=i+d,k={[cX]:"auto.resource.browser.metrics"};h!==i&&(k["sentry.browser.measure_happened_before_request"]=!0,k["sentry.browser.measure_start_time"]=h),function(a,b){try{let c=b.detail;if(!c)return;if("object"==typeof c){for(let[b,d]of Object.entries(c))if(d&&af(d))a[`sentry.browser.measure.detail.${b}`]=d;else if(void 0!==d)try{a[`sentry.browser.measure.detail.${b}`]=JSON.stringify(d)}catch{}return}if(af(c)){a["sentry.browser.measure.detail"]=c;return}try{a["sentry.browser.measure.detail"]=JSON.stringify(c)}catch{}}catch{}}(k,b),h<=j&&m4(a,h,j,{name:b.name,op:b.entryType,attributes:k})}(a,c,d,e,g,b.ignorePerformanceApiSpans);let f=jg(),h=c.startTime<f.firstHiddenTime;"first-paint"===c.name&&h&&(nr.fp={value:c.startTime,unit:"millisecond"}),"first-contentful-paint"===c.name&&h&&(nr.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":!function(a,b,c,d,e,f,g){var h,i;if("xmlhttprequest"===b.initiatorType||"fetch"===b.initiatorType)return;let j=b.initiatorType?`resource.${b.initiatorType}`:"resource.other";if(g?.includes(j))return;let k={[cX]:"auto.resource.browser.metrics"},l=ig(c);l.protocol&&(k["url.scheme"]=l.protocol.split(":").pop()),l.host&&(k["server.address"]=l.host),k["url.same_origin"]=c.includes(U.location.origin),h=b,i=k,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]].forEach(([a,b])=>{let c=h[a];null!=c&&("number"==typeof c&&c<0x7fffffff||"string"==typeof c)&&(i[b]=c)});let m={...k,...nb(b)},n=f+d;m4(a,n,n+e,{name:c.replace(U.location.origin,""),op:j,attributes:m})}(a,c,c.name,d,e,g,b.ignoreResourceSpans)}}),nq=Math.max(h.length-1,0),function(a){let b=U.navigator;if(!b)return;let c=b.connection;c&&(c.effectiveType&&a.setAttribute("effectiveConnectionType",c.effectiveType),c.type&&a.setAttribute("connectionType",c.type),m3(c.rtt)&&(nr["connection.rtt"]={value:c.rtt,unit:"millisecond"})),m3(b.deviceMemory)&&a.setAttribute("deviceMemory",`${b.deviceMemory} GB`),m3(b.hardwareConcurrency)&&a.setAttribute("hardwareConcurrency",String(b.hardwareConcurrency))}(a),"pageload"===i&&(function(a){let b=i5(!1);if(!b)return;let{responseStart:c,requestStart:d}=b;d<=c&&(a["ttfb.requestTime"]={value:c-d,unit:"millisecond"})}(nr),b.recordClsOnPageloadSpan||delete nr.cls,b.recordLcpOnPageloadSpan||delete nr.lcp,Object.entries(nr).forEach(([a,b])=>{eT(a,b.value,b.unit)}),a.setAttribute("performance.timeOrigin",g),a.setAttribute("performance.activationStart",i6()),c=a,d=b,z&&d.recordLcpOnPageloadSpan&&(z.element&&c.setAttribute("lcp.element",am(z.element)),z.id&&c.setAttribute("lcp.id",z.id),z.url&&c.setAttribute("lcp.url",z.url.trim().slice(0,200)),null!=z.loadTime&&c.setAttribute("lcp.loadTime",z.loadTime),null!=z.renderTime&&c.setAttribute("lcp.renderTime",z.renderTime),c.setAttribute("lcp.size",z.size)),A?.sources&&d.recordClsOnPageloadSpan&&A.sources.forEach((a,b)=>c.setAttribute(`cls.source.${b+1}`,am(a.node)))),z=void 0,A=void 0,nr={}}(c,{recordClsOnPageloadSpan:!l,recordLcpOnPageloadSpan:!m,ignoreResourceSpans:y,ignorePerformanceApiSpans:B}),ax(a,nB,void 0);let e=a1(),f=e.getPropagationContext();e.setPropagationContext({...f,traceId:q.spanContext().traceId,sampled:dx(q),dsc:dK(c)}),h&&(d=void 0)},trimIdleSpanEndTimestamp:!H});function s(){f&&["interactive","complete"].includes(f.readyState)&&a.emit("idleSpanEnableAutoFinish",q)}h&&H&&(d=q),ax(a,nB,q),h&&!H&&f&&(f.addEventListener("readystatechange",()=>{s()}),s())}return{name:"BrowserTracing",setup(a){if(g7(),b=function({recordClsStandaloneSpans:a,recordLcpStandaloneSpans:b,client:c}){let d=m6();if(d&&aQ()){d.mark&&U.performance.mark("sentry-tracing-init");let e=b?function(a){let b,c=0;if(!m8("largest-contentful-paint"))return;let d=jB(({metric:a})=>{let d=a.entries[a.entries.length-1];d&&(c=a.value,b=d)},!0);m9(a,(a,e)=>{var f,g,h,i;let j,k,l,m,n;f=c,g=b,h=e,i=a,hK&&av.log(`Sending LCP span (${f})`),j=m7((aQ()||0)+(g?.startTime||0)),k=a1().getScopeData().transactionName,l=g?am(g.element):"Largest contentful paint",m={[cX]:"auto.http.browser.lcp",[cW]:"ui.webvital.lcp",[c1]:0,"sentry.pageload.span_id":h,"sentry.report_event":i},g&&(g.element&&(m["lcp.element"]=am(g.element)),g.id&&(m["lcp.id"]=g.id),g.url&&(m["lcp.url"]=g.url),null!=g.loadTime&&(m["lcp.loadTime"]=g.loadTime),null!=g.renderTime&&(m["lcp.renderTime"]=g.renderTime),null!=g.size&&(m["lcp.size"]=g.size)),(n=m5({name:l,transaction:k,attributes:m,startTime:j}))&&(n.addEvent("lcp",{[cZ]:"millisecond",[c$]:f}),n.end(j)),d()})}(c):jB(({metric:a})=>{let b=a.entries[a.entries.length-1];b&&(nr.lcp={value:a.value,unit:"millisecond"},z=b)},!0),f=jJ("ttfb",({metric:a})=>{a.entries[a.entries.length-1]&&(nr.ttfb={value:a.value,unit:"millisecond"})},jH,q),g=a?function(a){let b,c=0;if(!m8("layout-shift"))return;let d=jA(({metric:a})=>{let d=a.entries[a.entries.length-1];d&&(c=a.value,b=d)},!0);m9(a,(a,e)=>{var f,g,h,i;let j,k,l,m,n;f=c,g=b,h=e,i=a,hK&&av.log(`Sending CLS span (${f})`),j=g?m7((aQ()||0)+g.startTime):aP(),k=a1().getScopeData().transactionName,l=g?am(g.sources[0]?.node):"Layout shift",m={[cX]:"auto.http.browser.cls",[cW]:"ui.webvital.cls",[c1]:0,"sentry.pageload.span_id":h,"sentry.report_event":i},g?.sources&&g.sources.forEach((a,b)=>{m[`cls.source.${b+1}`]=am(a.node)}),(n=m5({name:l,transaction:k,attributes:m,startTime:j}))&&(n.addEvent("cls",{[cZ]:"",[c$]:f}),n.end(j)),d()})}(c):jA(({metric:a})=>{let b=a.entries[a.entries.length-1];b&&(nr.cls={value:a.value,unit:""},A=b)},!0);return()=>{e?.(),f(),g?.()}}return()=>void 0}({recordClsStandaloneSpans:l||!1,recordLcpStandaloneSpans:m||!1,client:a}),g&&function(){if(m6()&&aQ()){let a=jC(np);()=>{a()}}}(),h&&m6()&&aQ()&&jD("element",nt),j&&U.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?new PerformanceObserver(a=>{let b=dE();if(b)for(let c of a.getEntries()){if(!c.scripts[0])continue;let a=m7(aQ()+c.startTime),{start_timestamp:d,op:e}=dw(b);if("navigation"===e&&d&&a<d)continue;let f=m7(c.duration),g={[cX]:"auto.ui.browser.metrics"},{invoker:h,invokerType:i,sourceURL:j,sourceFunctionName:k,sourceCharPosition:l}=c.scripts[0];g["browser.script.invoker"]=h,g["browser.script.invoker_type"]=i,j&&(g["code.filepath"]=j),k&&(g["code.function"]=k),-1!==l&&(g["browser.script.source_char_position"]=l),m4(b,a,a+f,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:g})}}).observe({type:"long-animation-frame",buffered:!0}):i&&jD("longtask",({entries:a})=>{let b=dE();if(!b)return;let{op:c,start_timestamp:d}=dw(b);for(let e of a){let a=m7(aQ()+e.startTime),f=m7(e.duration);"navigation"===c&&d&&a<d||m4(b,a,a+f,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[cX]:"auto.ui.browser.metrics"}})}}),k&&jD("event",({entries:a})=>{let b=dE();if(b){for(let c of a)if("click"===c.name){let a=m7(aQ()+c.startTime),d=m7(c.duration),e={name:am(c.target),op:`ui.interaction.${c.name}`,startTime:a,attributes:{[cX]:"auto.ui.browser.metrics"}},f=ao(c.target);f&&(e.attributes["ui.component_name"]=f),m4(b,a,a+d,e)}}}),E&&f){let a=()=>{c=aP()};addEventListener("click",a,{capture:!0}),addEventListener("keydown",a,{capture:!0,passive:!0})}function e(){let b=a[nB];b&&!dw(b).timestamp&&(ir&&av.log(`[Tracing] Finishing current active span with op: ${dw(b).op}`),b.setAttribute(cY,"cancelled"),b.end())}a.on("startNavigationSpan",(b,d)=>{if(a6()!==a)return;if(d?.isRedirect){ir&&av.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),K(a,{op:"navigation.redirect",...b},!1);return}c=void 0,e(),a2().setPropagationContext({traceId:aI(),sampleRand:Math.random(),propagationSpanId:de()?void 0:aT()});let f=a1();f.setPropagationContext({traceId:aI(),sampleRand:Math.random(),propagationSpanId:de()?void 0:aT()}),f.setSDKProcessingMetadata({normalizedRequest:void 0}),K(a,{op:"navigation",...b,parentSpan:null,forceTransaction:!0})}),a.on("startPageLoadSpan",(b,c={})=>{if(a6()!==a)return;e();let d=dm(c.sentryTrace||nA("sentry-trace"),c.baggage||nA("baggage")),f=a1();f.setPropagationContext(d),de()||(f.getPropagationContext().propagationSpanId=aT()),f.setSDKProcessingMetadata({normalizedRequest:ei()}),K(a,{op:"pageload",...b})}),a.on("endPageloadSpan",()=>{H&&d&&(d.setAttribute(cY,"reportPageLoaded"),d.end())})},afterAllSetup(a){var b,d,f,h,i;let j,l,m=an();if("off"!==F&&function(a,{linkPreviousTrace:b,consistentTraceSampling:c}){let d="session-storage"===b,e=d?function(){try{let a=U.sessionStorage?.getItem(nu);return JSON.parse(a)}catch{return}}():void 0;a.on("spanStart",a=>{if(dD(a)!==a)return;let b=a1().getPropagationContext();e=function(a,b,c){let d=dw(b),e={spanContext:b.spanContext(),startTimestamp:d.start_timestamp,sampleRate:function(){try{return Number(c.dsc?.sample_rate)??Number(d.data?.[cU])}catch{return 0}}(),sampleRand:c.sampleRand};if(!a)return e;let f=a.spanContext;return f.traceId===d.trace_id?a:(Date.now()/1e3-a.startTimestamp<=3600&&(ir&&av.log(`Adding previous_trace ${f} link to span ${{op:d.op,...b.spanContext()}}`),b.addLink({context:f,attributes:{"sentry.link.type":"previous_trace"}}),b.setAttribute("sentry.previous_trace",`${f.traceId}-${f.spanId}-${+!!nv(f)}`)),e)}(e,a,b),d&&function(a){try{U.sessionStorage.setItem(nu,JSON.stringify(a))}catch(a){ir&&av.warn("Could not store previous trace in sessionStorage",a)}}(e)});let f=!0;c&&a.on("beforeSampling",a=>{if(!e)return;let b=a1(),c=b.getPropagationContext();if(f&&c.parentSpanId){f=!1;return}b.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(e.sampleRate),sampled:String(nv(e.spanContext))},sampleRand:e.sampleRand}),a.parentSampled=nv(e.spanContext),a.parentSampleRate=e.sampleRate,a.spanAttributes={...a.spanAttributes,[cV]:e.sampleRate}})}(a,{linkPreviousTrace:F,consistentTraceSampling:G}),U.location){if(C){let b=aQ();ny(a,{name:U.location.pathname,startTime:b?b/1e3:void 0,attributes:{[cT]:"url",[cX]:"auto.pageload.browser"}})}D&&ip(({to:b,from:d})=>{var e,f;let g,h;if(void 0===d&&m?.indexOf(b)!==-1){m=void 0;return}m=void 0;let i=ie(b),j=a[nB],k=j&&E&&(e=j,f=c,g=dw(e),!((h=aO())-g.start_timestamp>1.5)&&(!f||!(h-f<=1.5)));nz(a,{name:i?.pathname||U.location.pathname,attributes:{[cT]:"url",[cX]:"auto.navigation.browser"}},{url:b,isRedirect:k})})}s&&(U.document?U.document.addEventListener("visibilitychange",()=>{let a=dE();if(!a)return;let b=dD(a);if(U.document.hidden&&b){let a="cancelled",{op:c,status:d}=dw(b);ir&&av.log(`[Tracing] Transaction: ${a} -> since tab moved to the background, op: ${c}`),d||b.setStatus({code:2,message:a}),b.setAttribute("sentry.cancellation_reason","document.hidden"),b.end()}}):ir&&av.warn("[Tracing] Could not set up background tab detection due to lack of global document")),k&&(b=a,d=o,f=p,h=r,i=e,U.document&&addEventListener("click",()=>{let a="ui.action.click",c=function(a){return a[nB]}(b);if(c&&["navigation","pageload"].includes(dw(c).op)){ir&&av.warn(`[Tracing] Did not create ${a} span because a pageload or navigation span is in progress.`);return}if(j&&(j.setAttribute(cY,"interactionInterrupted"),j.end(),j=void 0),!i.name){ir&&av.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`);return}j=nk({name:i.name,op:a,attributes:{[cT]:i.source||"url"}},{idleTimeout:d,finalTimeout:f,childSpanTimeout:h})},{capture:!0})),g&&(Object.keys(no),jD("event",l=({entries:a})=>{let b=dE(),c=b&&dD(b);a.forEach(a=>{if(!("duration"in a))return;let b=a.interactionId;if(null==b||nm.has(b))return;let d=a.target?am(a.target):function(a){let b=Math.round(a.startTime),c=nn.get(b);if(!c)for(let a=-5;a<=5;a++){let d=nn.get(b+a);if(d){c=d;break}}return c||"<unknown>"}(a);if(nl.length>10){let a=nl.shift();nm.delete(a)}nl.push(b),nm.set(b,{span:c,elementName:d})})}),jD("first-input",l)),nh(a,{traceFetch:t,traceXHR:u,trackFetchStreamPerformance:v,tracePropagationTargets:a.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:w,enableHTTPTimings:x,onRequestSpanStart:I,onRequestSpanEnd:J})}}};function ny(a,b,c){a.emit("startPageLoadSpan",b,c),a1().setTransactionName(b.name);let d=a[nB];return d&&a.emit("afterStartPageLoadSpan",d),d}function nz(a,b,c){let{url:d,isRedirect:e}=c||{};a.emit("beforeStartNavigationSpan",b,{isRedirect:e}),a.emit("startNavigationSpan",b,{isRedirect:e});let f=a1();return f.setTransactionName(b.name),d&&!e&&f.setSDKProcessingMetadata({normalizedRequest:{...ei(),url:d}}),a[nB]}function nA(a){let b=U.document,c=b?.querySelector(`meta[name=${a}]`);return c?.getAttribute("content")||void 0}let nB="_sentry_idleSpan";function nC(a=a6()){a?.emit("endPageloadSpan")}function nD(a){let b=dE();if(b===a)return;let c=a1();a.end=new Proxy(a.end,{apply:(a,d,e)=>(aV(c,b),Reflect.apply(a,d,e))}),aV(c,a)}function nE(a){return new Promise((b,c)=>{a.oncomplete=a.onsuccess=()=>b(a.result),a.onabort=a.onerror=()=>c(a.error)})}function nF(a){return nE(a.getAllKeys())}function nG(a){let b;function c(){var c,d;let e,f;return void 0==b&&(c=a.dbName||"sentry-offline",d=a.storeName||"queue",(e=indexedDB.open(c)).onupgradeneeded=()=>e.result.createObjectStore(d),f=nE(e),b=a=>f.then(b=>a(b.transaction(d,"readwrite").objectStore(d)))),b}return{push:async b=>{try{var d,e;let f=await eD(b);await (d=c(),e=a.maxQueueSize||30,d(a=>nF(a).then(b=>{if(!(b.length>=e))return a.put(f,Math.max(...b,0)+1),nE(a.transaction)})))}catch{}},unshift:async b=>{try{var d,e;let f=await eD(b);await (d=c(),e=a.maxQueueSize||30,d(a=>nF(a).then(b=>{if(!(b.length>=e))return a.put(f,Math.min(...b,0)-1),nE(a.transaction)})))}catch{}},shift:async()=>{try{let a=await c()(a=>nF(a).then(b=>{let c=b[0];if(null!=c)return nE(a.get(c)).then(b=>(a.delete(c),nE(a.transaction).then(()=>b)))}));if(a)return function(a){let b="string"==typeof a?eC(a):a;function c(a){let c=b.subarray(0,a);return b=b.subarray(a+1),c}function d(){var a;let d,e=b.indexOf(10);return e<0&&(e=b.length),JSON.parse((a=c(e),(d=X(U)).decodePolyfill?d.decodePolyfill(a):new TextDecoder().decode(a)))}let e=d(),f=[];for(;b.length;){let a=d(),b="number"==typeof a.length?a.length:void 0;f.push([a,b?c(b):d()])}return[e,f]}(a)}catch{}}}}function nH(a=hO){var b;return b=function(a){function b(...a){Z&&av.log("[Offline]:",...a)}return c=>{let d,e=a(c);if(!c.createStore)throw Error("No `createStore` function was provided");let f=c.createStore(c),g=5e3;function h(a){d&&clearTimeout(d),"number"!=typeof(d=setTimeout(async()=>{d=void 0;let a=await f.shift();a&&(b("Attempting to send previously queued event"),a[0].sent_at=new Date().toISOString(),j(a,!0).catch(a=>{b("Failed to retry sending",a)}))},a))&&d.unref&&d.unref()}function i(){d||(h(g),g=Math.min(2*g,36e5))}async function j(a,d=!1){if(!d&&eB(a,["replay_event","replay_recording"]))return await f.push(a),h(100),{};try{if(c.shouldSend&&await c.shouldSend(a)===!1)throw Error("Envelope not sent because `shouldSend` callback returned false");let b=await e.send(a),d=100;if(b){if(b.headers?.["retry-after"])d=fg(b.headers["retry-after"]);else if(b.headers?.["x-sentry-rate-limits"])d=6e4;else if((b.statusCode||0)>=400)return b}return h(d),g=5e3,b}catch(e){var k;if(await (k=g,!eB(a,["client_report"])&&(!c.shouldStore||c.shouldStore(a,e,k))))return d?await f.unshift(a):await f.push(a),i(),b("Error sending. Event queued.",e),{};throw e}}return c.flushAtStartup&&i(),{send:j,flush:a=>(void 0===a&&(g=5e3,h(100)),e.flush(a))}}}(a),a=>{let c=b({...a,createStore:nG});return U.addEventListener("online",async a=>{await c.flush()}),c}}let nI="window"in U&&U.window===U&&"undefined"==typeof importScripts,nJ=String(0),nK=nI?"main":"worker",nL=U.navigator,nM="",nN="",nO="",nP=nL?.userAgent||"",nQ="",nR=nL?.language||nL?.languages?.[0]||"",nS=nL?.userAgentData;function nT(a){return"pageload"===dw(a).op}function nU(a){let b=a6(),c=b?.getOptions(),d=c?.stackParser;if(!d)return[];let e=dO(d);if(!e)return[];let f=[];for(let b of a)b&&e[b]&&f.push({type:"sourcemap",code_file:b,debug_id:e[b]});return f}function nV(a){return"number"!=typeof a&&"boolean"!=typeof a||"number"==typeof a&&isNaN(a)?(ir&&av.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(a)} of type ${JSON.stringify(typeof a)}.`),!1):!0===a||!1===a||!(a<0)&&!(a>1)||(ir&&av.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${a}.`),!1)}"object"==typeof nS&&null!==nS&&"getHighEntropyValues"in nS&&nS.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(a=>{if(nM=a.platform||"",nO=a.architecture||"",nQ=a.model||"",nN=a.platformVersion||"",a.fullVersionList?.length){let b=a.fullVersionList[a.fullVersionList.length-1];nP=`${b.brand} ${b.version}`}}).catch(a=>void 0);let nW=!1;function nX(){let a=U.Profiler;if("function"!=typeof a){ir&&av.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}let b=Math.floor(3e3);try{return new a({sampleInterval:10,maxBufferSize:b})}catch(a){ir&&(av.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),av.log("[Profiling] Disabling profiling for current user session.")),nW=!0}}function nY(a){if(nW)return ir&&av.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!a.isRecording())return ir&&av.log("[Profiling] Discarding profile because root span was not sampled."),!1;let b=a6(),c=b?.getOptions();if(!c)return ir&&av.log("[Profiling] Profiling disabled, no options found."),!1;let d=c.profilesSampleRate;return nV(d)?d?!!(!0===d||Math.random()<d)||(ir&&av.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(d)})`),!1):(ir&&av.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(ir&&av.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function nZ(a){return void 0!==a.profilesSampleRate}let n$=new Map;class n_{constructor(){this._client=void 0,this._profiler=void 0,this._chunkTimer=void 0,this._activeRootSpanIds=new Set,this._rootSpanTimeouts=new Map,this._profilerId=void 0,this._isRunning=!1,this._sessionSampled=!1}initialize(a,b){this._profilerId=aI(),ir&&av.log("[Profiling] Initializing profiler (lifecycle='trace')."),this._client=a,this._sessionSampled=b,a.on("spanStart",a=>{if(!this._sessionSampled){ir&&av.log("[Profiling] Session not sampled because of negative sampling decision.");return}if(a!==dD(a))return;if(!a.isRecording()){ir&&av.log("[Profiling] Discarding profile because root span was not sampled.");return}a3().setContext("profile",{profiler_id:this._profilerId});let b=a.spanContext().spanId;if(!b||this._activeRootSpanIds.has(b))return;this._activeRootSpanIds.add(b);let c=this._activeRootSpanIds.size,d=setTimeout(()=>{this._onRootSpanTimeout(b)},3e5);this._rootSpanTimeouts.set(b,d),1===c&&(ir&&av.log(`[Profiling] Root span with ID ${b} started. Will continue profiling for as long as there are active root spans (currently: ${c}).`),this.start())}),a.on("spanEnd",a=>{if(!this._sessionSampled)return;let b=a.spanContext().spanId;if(!b||!this._activeRootSpanIds.has(b))return;this._activeRootSpanIds.delete(b);let c=this._activeRootSpanIds.size;ir&&av.log(`[Profiling] Root span with ID ${b} ended. Will continue profiling for as long as there are active root spans (currently: ${c}).`),0===c&&(this._collectCurrentChunk().catch(a=>{ir&&av.error("[Profiling] Failed to collect current profile chunk on `spanEnd`:",a)}),this.stop())})}notifyRootSpanActive(a){if(!this._sessionSampled)return;let b=a.spanContext().spanId;if(!b||this._activeRootSpanIds.has(b))return;this._activeRootSpanIds.add(b);let c=this._activeRootSpanIds.size;1===c&&(ir&&av.log("[Profiling] Detected already active root span during setup. Active root spans now:",c),this.start())}start(){if(!this._isRunning){if(this._isRunning=!0,ir&&av.log("[Profiling] Started profiling with profile ID:",this._profilerId),this._startProfilerInstance(),!this._profiler){ir&&av.log("[Profiling] Stopping trace lifecycle profiling."),this._resetProfilerInfo();return}this._startPeriodicChunking()}}stop(){this._isRunning&&(this._isRunning=!1,this._chunkTimer&&(clearTimeout(this._chunkTimer),this._chunkTimer=void 0),this._clearAllRootSpanTimeouts(),this._collectCurrentChunk().catch(a=>{ir&&av.error("[Profiling] Failed to collect current profile chunk on `stop()`:",a)}))}_resetProfilerInfo(){this._isRunning=!1,a3().setContext("profile",{})}_clearAllRootSpanTimeouts(){this._rootSpanTimeouts.forEach(a=>clearTimeout(a)),this._rootSpanTimeouts.clear()}_startProfilerInstance(){if(this._profiler?.stopped===!1)return;let a=nX();if(!a){ir&&av.log("[Profiling] Failed to start JS Profiler in trace lifecycle.");return}this._profiler=a}_startPeriodicChunking(){this._isRunning&&(this._chunkTimer=setTimeout(()=>{if(this._collectCurrentChunk().catch(a=>{ir&&av.error("[Profiling] Failed to collect current profile chunk during periodic chunking:",a)}),this._isRunning){if(this._startProfilerInstance(),!this._profiler)return void this._resetProfilerInfo();this._startPeriodicChunking()}},6e4))}_onRootSpanTimeout(a){!this._rootSpanTimeouts.has(a)||(this._rootSpanTimeouts.delete(a),this._activeRootSpanIds.has(a)&&(ir&&av.log(`[Profiling] Reached 5-minute timeout for root span ${a}. You likely started a manual root span that never called \`.end()\`.`),this._activeRootSpanIds.delete(a),0===this._activeRootSpanIds.size&&this.stop()))}async _collectCurrentChunk(){let a=this._profiler;if(this._profiler=void 0,a)try{let b=await a.stop(),c=function(a,b,c){if(null==a)throw TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${a} instead.`);let d=function(a){let b=[];for(let c=0;c<a.frames.length;c++){let d=a.frames[c];d&&(b[c]={function:d.name,abs_path:"number"==typeof d.resourceId?a.resources[d.resourceId]:void 0,lineno:d.line,colno:d.column})}let c=[];for(let b=0;b<a.stacks.length;b++){let d=a.stacks[b];if(!d)continue;let e=[],f=d;for(;f;)e.push(f.frameId),f=void 0===f.parentId?void 0:a.stacks[f.parentId];c[b]=e}let d=aQ(),e="number"==typeof performance.timeOrigin?performance.timeOrigin:d||0,f=e-(d||e),g=[];for(let b=0;b<a.samples.length;b++){let c=a.samples[b];if(!c)continue;let d=(e+(c.timestamp-f))/1e3;g[b]={stack_id:c.stackId??0,thread_id:nJ,timestamp:d}}return{frames:b,stacks:c,samples:g,thread_metadata:{[nJ]:{name:nK}}}}(a),e=b.getOptions(),f=b.getSdkMetadata?.()?.sdk;return{chunk_id:aI(),client_sdk:{name:f?.name??"sentry.javascript.browser",version:f?.version??"0.0.0"},profiler_id:c||aI(),platform:"javascript",version:"2",release:e.release??"",environment:e.environment??"production",debug_meta:{images:nU(a.resources)},profile:d}}(b,this._client,this._profilerId),d=function(a){try{if(!a||"object"!=typeof a)return{reason:"chunk is not an object"};let b=a=>"string"==typeof a&&/^[a-f0-9]{32}$/.test(a);if(!b(a.profiler_id))return{reason:"missing or invalid profiler_id"};if(!b(a.chunk_id))return{reason:"missing or invalid chunk_id"};if(!a.client_sdk)return{reason:"missing client_sdk metadata"};let c=a.profile;if(!c)return{reason:"missing profile data"};if(!Array.isArray(c.frames)||!c.frames.length)return{reason:"profile has no frames"};if(!Array.isArray(c.stacks)||!c.stacks.length)return{reason:"profile has no stacks"};if(!Array.isArray(c.samples)||!c.samples.length)return{reason:"profile has no samples"};return{valid:!0}}catch(a){return{reason:`unknown validation error: ${a}`}}}(c);if("reason"in d){ir&&av.log("[Profiling] Discarding invalid profile chunk (this is probably a bug in the SDK):",d.reason);return}this._sendProfileChunk(c),ir&&av.log("[Profiling] Collected browser profile chunk.")}catch(a){ir&&av.log("[Profiling] Error while stopping JS Profiler for chunk:",a)}}_sendProfileChunk(a){let b=this._client,c=eF(b.getSdkMetadata?.()),d=b.getDsn(),e=b.getOptions().tunnel,f=ez({event_id:aI(),sent_at:new Date().toISOString(),...c&&{sdk:c},...!!e&&d&&{dsn:c9(d)}},[[{type:"profile_chunk"},a]]);b.sendEnvelope(f).then(null,a=>{ir&&av.error("Error while sending profile chunk envelope:",a)})}}function n0(a){let b;nT(a)&&(b=1e3*aP());let c=nX();if(!c)return;ir&&av.log(`[Profiling] started profiling span: ${dw(a).description}`);let d=aI(),e=null;async function f(){if(a&&c){if(e){ir&&av.log("[Profiling] profile for:",dw(a).description,"already exists, returning early");return}return c.stop().then(b=>{if(g&&(U.clearTimeout(g),g=void 0),ir&&av.log(`[Profiling] stopped profiling of span: ${dw(a).description}`),!b){ir&&av.log(`[Profiling] profiler returned null profile for: ${dw(a).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}e=b;if(n$.set(d,b),n$.size>30){let a=n$.keys().next().value;void 0!==a&&n$.delete(a)}}).catch(a=>{ir&&av.log("[Profiling] error while stopping profiler:",a)})}}a1().setContext("profile",{profile_id:d,start_timestamp:b});let g=U.setTimeout(()=>{ir&&av.log("[Profiling] max profile duration elapsed, stopping profiling for:",dw(a).description),f()},3e4),h=a.end.bind(a);a.end=function(){return a?(f().then(()=>{h()},()=>{h()}),a):h()}}let n1=()=>({name:"BrowserProfiling",setup(a){let b=a.getOptions();if(nZ(b)||b.profileLifecycle||(b.profileLifecycle="manual"),nZ(b)&&!b.profilesSampleRate){ir&&av.log("[Profiling] Profiling disabled, no profiling options found.");return}let c=dE(),d=c&&dD(c);if(nZ(b)&&void 0!==b.profileSessionSampleRate&&ir&&av.warn("[Profiling] Both legacy profiling (`profilesSampleRate`) and UI profiling settings are defined. `profileSessionSampleRate` has no effect when legacy profiling is enabled."),nZ(b))d&&nT(d)&&nY(d)&&n0(d),a.on("spanStart",a=>{a===dD(a)&&nY(a)&&n0(a)}),a.on("beforeEnvelope",a=>{let b;if(!n$.size)return;let c=(b=[],eA(a,(a,c)=>{if("transaction"===c)for(let c=1;c<a.length;c++){let d=a[c];d?.contexts?.profile?.profile_id&&b.push(a[c])}}),b);if(!c.length)return;let d=[];for(let a of c){let b=a?.contexts,c=b?.profile?.profile_id,e=b?.profile?.start_timestamp;if("string"!=typeof c||!c){ir&&av.log("[Profiling] cannot find profile for a span without a profile context");continue}b?.profile&&delete b.profile;let f=function(a){let b=n$.get(a);return b&&n$.delete(a),b}(c);if(!f){ir&&av.log(`[Profiling] Could not retrieve profile for span: ${c}`);continue}let g=function(a,b,c,d){return(c.samples.length<2?(ir&&av.log("[Profiling] Discarding profile because it contains less than 2 samples"),1):!c.frames.length&&(ir&&av.log("[Profiling] Discarding profile because it contains no frames"),1))?null:function(a,b,c,d){var e;let f;if("transaction"!==d.type)throw TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==c)throw TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${c} instead.`);let g=("string"==typeof(f=d.contexts?.trace?.trace_id)&&32!==f.length&&ir&&av.log(`[Profiling] Invalid traceId: ${f} on profiled event`),"string"!=typeof f)?"":f,h="thread_metadata"in(e=c)?e:function(a){let b,c=0,d={samples:[],stacks:[],frames:[],thread_metadata:{[nJ]:{name:nK}}},e=a.samples[0];if(!e)return d;let f=e.timestamp,g=aQ(),h="number"==typeof performance.timeOrigin?performance.timeOrigin:g||0,i=h-(g||h);return a.samples.forEach((e,g)=>{if(void 0===e.stackId){void 0===b&&(b=c,d.stacks[b]=[],c++),d.samples[g]={elapsed_since_start_ns:((e.timestamp+i-f)*1e6).toFixed(0),stack_id:b,thread_id:nJ};return}let h=a.stacks[e.stackId],j=[];for(;h;){j.push(h.frameId);let b=a.frames[h.frameId];b&&void 0===d.frames[h.frameId]&&(d.frames[h.frameId]={function:b.name,abs_path:"number"==typeof b.resourceId?a.resources[b.resourceId]:void 0,lineno:b.line,colno:b.column}),h=void 0===h.parentId?void 0:a.stacks[h.parentId]}let k={elapsed_since_start_ns:((e.timestamp+i-f)*1e6).toFixed(0),stack_id:c,thread_id:nJ};d.stacks[c]=j,d.samples[g]=k,c++}),d}(e),i=b||("number"==typeof d.start_timestamp?1e3*d.start_timestamp:1e3*aP()),j="number"==typeof d.timestamp?1e3*d.timestamp:1e3*aP();return{event_id:a,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:d.release||"",environment:d.environment||cP,runtime:{name:"javascript",version:U.navigator.userAgent},os:{name:nM,version:nN,build_number:nP},device:{locale:nR,model:nQ,manufacturer:nP,architecture:nO,is_emulator:!1},debug_meta:{images:nU(c.resources)},profile:h,transactions:[{name:d.transaction||"",id:d.event_id||aI(),trace_id:g,active_thread_id:nJ,relative_start_ns:"0",relative_end_ns:((j-i)*1e6).toFixed(0)}]}}(a,b,c,d)}(c,e,f,a);g&&d.push(g)}!function(a,b){if(b.length)for(let c of b)a[1].push([{type:"profile"},c])}(a,d)});else{let c=function(a){if(nW)return ir&&av.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if("trace"!==a.profileLifecycle)return!1;let b=a.profileSessionSampleRate;return nV(b)?b?Math.random()<=b:(ir&&av.log("[Profiling] Discarding profile because profileSessionSampleRate is not defined or set to 0"),!1):(ir&&av.warn("[Profiling] Discarding profile because of invalid profileSessionSampleRate."),!1)}(b);if(!c&&ir&&av.log("[Profiling] Session not sampled. Skipping lifecycle profiler initialization."),"trace"===b.profileLifecycle){if(!de(b)){ir&&av.warn("[Profiling] `profileLifecycle` is 'trace' but tracing is disabled. Set a `tracesSampleRate` or `tracesSampler` to enable span tracing.");return}let e=new n_;e.initialize(a,c),d&&e.notifyRootSpanActive(d),U.setTimeout(()=>{let a=dE(),b=a&&dD(a);b&&e.notifyRootSpanActive(b)},0)}}},processEvent:a=>(a?.contexts?.profile&&a.contexts&&(a.contexts.trace={...a.contexts?.trace??{},data:{...a.contexts?.trace?.data??{},"thread.id":nJ,"thread.name":nK}},a.spans?.forEach(a=>{a.data={...a.data||{},"thread.id":nJ,"thread.name":nK}})),a)}),n2=(a={})=>{let b=a.sidecarUrl||"http://localhost:8969/stream";return{name:"SpotlightBrowser",setup:()=>{ir&&av.log("Using Sidecar URL",b)},processEvent:a=>{var b;return"transaction"===(b=a).type&&b.spans&&b.contexts?.trace&&"ui.action.click"===b.contexts.trace.op&&b.spans.some(({description:a})=>a?.includes("#sentry-spotlight"))?null:a},afterAllSetup:a=>{var c,d;let e,f;c=a,d=b,e=hM("fetch"),f=0,c.on("beforeEnvelope",a=>{f>3?av.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",f):e(d,{method:"POST",body:eD(a),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(a=>{a.status>=200&&a.status<400&&(f=0)},a=>{f++,av.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",a)})})}}},n3=()=>({name:"LaunchDarkly",processEvent:(a,b,c)=>fw(a)});function n4(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(a,b,c)=>{fx(a,b.value),fy(a,b.value)}}}let n5=()=>({name:"OpenFeature",processEvent:(a,b,c)=>fw(a)});class n6{after(a,b){fx(b.flagKey,b.value),fy(b.flagKey,b.value)}error(a,b,c){fx(a.flagKey,a.defaultValue),fy(a.flagKey,a.defaultValue)}}let n7=({featureFlagClientClass:a})=>({name:"Unleash",setupOnce(){aw(a.prototype,"isEnabled",n8)},processEvent:(a,b,c)=>fw(a)});function n8(a){return function(...b){let c=b[0],d=a.apply(this,b);return"string"==typeof c&&"boolean"==typeof d?(fx(c,d),fy(c,d)):ir&&av.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${c} (${typeof c}), result: ${d} (${typeof d})`),d}}function n9(a){return function(...b){let c=b[0],d=a.apply(this,b);return"string"==typeof c&&"boolean"==typeof d&&(fx(c,d),fy(c,d)),d}}let oa=({growthbookClass:a})=>(({growthbookClass:a})=>({name:"GrowthBook",setupOnce(){let b=a.prototype;"function"==typeof b.isOn&&aw(b,"isOn",n9),"function"==typeof b.getFeatureValue&&aw(b,"getFeatureValue",n9)},processEvent:(a,b,c)=>fw(a)}))({growthbookClass:a}),ob=({featureFlagClient:a})=>({name:"Statsig",setup(b){a.on("gate_evaluation",a=>{fx(a.gate.name,a.gate.value),fy(a.gate.name,a.gate.value)})},processEvent:(a,b,c)=>fw(a)});async function oc(){let a=a6();if(!a)return"no-client-active";if(!a.getDsn())return"no-dsn-configured";try{await e2(()=>fetch("https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}let od=({worker:a})=>({name:"WebWorker",setupOnce:()=>{(Array.isArray(a)?a:[a]).forEach(a=>oe(a))},addWorker:a=>oe(a)});function oe(a){a.addEventListener("message",a=>{(function(a){if(!ag(a)||!0!==a._sentryMessage)return!1;let b="_sentryDebugIds"in a,c="_sentryWorkerError"in a;return(!!b||!!c)&&(!b||!!(ag(a._sentryDebugIds)||void 0===a._sentryDebugIds))&&(!c||!!ag(a._sentryWorkerError))})(a.data)&&(a.stopImmediatePropagation(),a.data._sentryDebugIds&&(ir&&av.log("Sentry debugId web worker message received",a.data),U._sentryDebugIds={...a.data._sentryDebugIds,...U._sentryDebugIds}),a.data._sentryWorkerError&&(ir&&av.log("Sentry worker rejection message received",a.data._sentryWorkerError),function(a){let b=a6();if(!b)return;let c=b.getOptions().stackParser,d=b.getOptions().attachStacktrace,e=a.reason,f=af(e)?iB(e):hF(c,e,void 0,d,!0);f.level="error",a.filename&&(f.contexts={...f.contexts,worker:{filename:a.filename}}),d_(f,{originalException:e,mechanism:{handled:!1,type:"auto.browser.web_worker.onunhandledrejection"}}),ir&&av.log("Captured worker unhandled rejection",e)}(a.data._sentryWorkerError)))})}function of({self:a}){a.postMessage({_sentryMessage:!0,_sentryDebugIds:a._sentryDebugIds??void 0}),a.addEventListener("unhandledrejection",b=>{let c={reason:iA(b),filename:a.location?.href};a.postMessage({_sentryMessage:!0,_sentryWorkerError:c}),ir&&av.log("[Sentry Worker] Forwarding unhandled rejection to parent",c)}),ir&&av.log("[Sentry Worker] Registered worker with unhandled rejection handling")}function og({children:a}){return(0,R.useEffect)(()=>{let a;(a=process.env.NEXT_PUBLIC_SENTRY_DSN)&&iJ({dsn:a,integrations:[nx(),mA()],tracesSampleRate:1,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1,environment:"production"})},[]),(0,Q.jsx)(S.GuestModeProvider,{children:(0,Q.jsx)(T.AuthProvider,{children:a})})}a.s(["BrowserClient",()=>hH,"OpenFeatureIntegrationHook",()=>n6,"SDK_VERSION",()=>V,"SEMANTIC_ATTRIBUTE_SENTRY_OP",()=>cW,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN",()=>cX,"SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE",()=>cU,"SEMANTIC_ATTRIBUTE_SENTRY_SOURCE",()=>cT,"Scope",()=>aW,"WINDOW",()=>U,"addBreadcrumb",()=>en,"addEventProcessor",()=>eb,"addIntegration",()=>bc,"breadcrumbsIntegration",()=>is,"browserApiErrorsIntegration",()=>iu,"browserProfilingIntegration",()=>n1,"browserSessionIntegration",()=>iy,"browserTracingIntegration",()=>nx,"buildLaunchDarklyFlagUsedHandler",()=>n4,"captureConsoleIntegration",()=>ew,"captureEvent",()=>d_,"captureException",()=>dZ,"captureFeedback",()=>a8,"captureMessage",()=>d$,"captureSession",()=>ef,"chromeStackLineParser",()=>hU,"close",()=>d8,"consoleLoggingIntegration",()=>eO,"contextLinesIntegration",()=>iX,"continueTrace",()=>e0,"createConsolaReporter",()=>fb,"createTransport",()=>fj,"createUserFeedbackEnvelope",()=>h5,"dedupeIntegration",()=>fk,"defaultRequestInstrumentationOptions",()=>ng,"defaultStackLineParsers",()=>h2,"defaultStackParser",()=>h3,"diagnoseSdkConnectivity",()=>oc,"endSession",()=>ed,"eventFiltersIntegration",()=>fq,"eventFromException",()=>hD,"eventFromMessage",()=>hE,"exceptionFromError",()=>hy,"extraErrorDataIntegration",()=>fu,"featureFlagsIntegration",()=>fz,"feedbackAsyncIntegration",()=>el,"feedbackIntegration",()=>em,"feedbackSyncIntegration",()=>em,"flush",()=>d7,"forceLoad",()=>iK,"functionToStringIntegration",()=>fB,"geckoStackLineParser",()=>hX,"getActiveSpan",()=>dE,"getClient",()=>a6,"getCurrentScope",()=>a1,"getDefaultIntegrations",()=>iI,"getFeedback",()=>bG,"getGlobalScope",()=>a3,"getIsolationScope",()=>a2,"getReplay",()=>mD,"getRootSpan",()=>dD,"getSpanDescendants",()=>dC,"getSpanStatusFromHttpCode",()=>df,"getTraceData",()=>fC,"globalHandlersIntegration",()=>iz,"graphqlClientIntegration",()=>i3,"growthbookIntegration",()=>oa,"httpClientIntegration",()=>iR,"httpContextIntegration",()=>iE,"inboundFiltersIntegration",()=>fr,"init",()=>iJ,"instrumentAnthropicAiClient",()=>gb,"instrumentGoogleGenAIClient",()=>gi,"instrumentOpenAiClient",()=>gr,"instrumentOutgoingRequests",()=>nh,"instrumentSupabaseClient",()=>gz,"isEnabled",()=>ea,"isInitialized",()=>d9,"lastEventId",()=>d6,"launchDarklyIntegration",()=>n3,"lazyLoadIntegration",()=>ek,"linkedErrorsIntegration",()=>iH,"logger",()=>gJ,"makeBrowserOfflineTransport",()=>nH,"makeFetchTransport",()=>hO,"makeMultiplexedTransport",()=>gN,"metrics",()=>gW,"moduleMetadataIntegration",()=>g_,"onLoad",()=>iL,"openFeatureIntegration",()=>n5,"opera10StackLineParser",()=>h_,"opera11StackLineParser",()=>h1,"parameterize",()=>gI,"registerSpanErrorInstrumentation",()=>g7,"registerWebWorker",()=>of,"replayCanvasIntegration",()=>m1,"replayIntegration",()=>mA,"reportPageLoaded",()=>nC,"reportingObserverIntegration",()=>iO,"rewriteFramesIntegration",()=>hb,"sendFeedback",()=>bx,"setActiveSpanInBrowser",()=>nD,"setContext",()=>d0,"setCurrentClient",()=>hc,"setExtra",()=>d2,"setExtras",()=>d1,"setHttpStatus",()=>dg,"setMeasurement",()=>eT,"setTag",()=>d4,"setTags",()=>d3,"setUser",()=>d5,"showReportDialog",()=>iM,"spanToBaggageHeader",()=>dL,"spanToJSON",()=>dw,"spanToTraceHeader",()=>ds,"spotlightBrowserIntegration",()=>n2,"startBrowserTracingNavigationSpan",()=>nz,"startBrowserTracingPageLoadSpan",()=>ny,"startInactiveSpan",()=>e_,"startNewTrace",()=>e3,"startSession",()=>ec,"startSpan",()=>eZ,"startSpanManual",()=>e$,"statsigIntegration",()=>ob,"supabaseIntegration",()=>gA,"suppressTracing",()=>e2,"thirdPartyErrorFilterIntegration",()=>hd,"unleashIntegration",()=>n7,"updateSpanName",()=>dG,"webWorkerIntegration",()=>od,"winjsStackLineParser",()=>hZ,"withActiveSpan",()=>e1,"withIsolationScope",()=>a5,"withScope",()=>a4,"zodErrorsIntegration",()=>hg],59356),a.i(59356),a.s(["AppProviders",()=>og],647)}];

//# sourceMappingURL=Omi-AI-1_components_providers_app-providers_tsx_5d17870e._.js.map