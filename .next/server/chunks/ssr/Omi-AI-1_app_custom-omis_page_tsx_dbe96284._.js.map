{"version":3,"sources":["../../../../../Omi-AI-1/app/custom-omis/page.tsx","../../../../../Omi-AI-1/src/CustomOmis.tsx","../../../../../Omi-AI-1/src/ragService.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useRouter } from \"next/navigation\";\r\nimport CustomOmis from \"@/src/CustomOmis\";\r\n\r\nexport default function CustomOmisPage() {\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <div className=\"page-transition fade-in\">\r\n      <CustomOmis onClose={() => router.back()} />\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { gsap } from 'gsap';\r\nimport { useAuth } from '@/context/auth-context';\r\nimport * as ragService from './ragService';\r\n\r\ninterface CustomOmisProps {\r\n  onClose?: () => void;\r\n}\r\n\r\ninterface CustomOmi {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  status: 'training' | 'ready' | 'idle';\r\n  documentsCount?: number;\r\n  embeddingsCount?: number;\r\n  accuracy: number;\r\n}\r\n\r\ninterface Document {\r\n  id: string;\r\n  name: string;\r\n  type: string;\r\n  size: number;\r\n  uploadedAt: string;\r\n  status: 'processing' | 'indexed' | 'failed';\r\n  chunkCount: number;\r\n}\r\n\r\nconst DOCUMENT_ACCEPT_STRING = '.txt,.md,.markdown,.json,.yaml,.yml,.csv,.js,.jsx,.ts,.tsx,.py,.cs,.html,.htm,.css';\r\nconst DOCUMENT_TYPE_BADGES = ['TXT', 'MD', 'JSON', 'YAML', 'CSV', 'JS/TS', 'PY/CS', 'HTML/CSS'];\r\n\r\nconst CustomOmis: React.FC<CustomOmisProps> = ({ onClose }) => {\r\n  const { session } = useAuth();\r\n  const [activeTab, setActiveTab] = useState<'bots' | 'documents' | 'training'>('bots');\r\n  const [selectedBot, setSelectedBot] = useState<string | null>(null);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [uploadStatus, setUploadStatus] = useState('');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [newBotName, setNewBotName] = useState('');\r\n  const [newBotDescription, setNewBotDescription] = useState('');\r\n  const [showCreateModal, setShowCreateModal] = useState(false);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const [customOmis, setCustomOmis] = useState<CustomOmi[]>([]);\r\n  const [documents, setDocuments] = useState<Document[]>([]);\r\n\r\n  // Load bots on mount\r\n  useEffect(() => {\r\n    if (session?.user?.id) {\r\n      loadBots();\r\n    }\r\n  }, [session?.user?.id]);\r\n\r\n  // Load documents when a bot is selected or tab changes\r\n  useEffect(() => {\r\n    if (session?.user?.id && activeTab === 'documents') {\r\n      loadDocuments();\r\n      \r\n      // Auto-refresh every 5 seconds to check processing status\r\n      const interval = setInterval(() => {\r\n        loadDocuments();\r\n      }, 5000);\r\n      \r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [session?.user?.id, activeTab, selectedBot]);\r\n\r\n  const loadBots = async () => {\r\n    if (!session?.user?.id) return;\r\n    setIsLoading(true);\r\n    try {\r\n      const bots = await ragService.loadCustomOmis(session.user.id);\r\n      setCustomOmis(bots);\r\n    } catch (error) {\r\n      console.error('Failed to load bots:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadDocuments = async () => {\r\n    if (!session?.user?.id) return;\r\n    setIsLoading(true);\r\n    try {\r\n      const docs = await ragService.loadDocuments(selectedBot || undefined);\r\n      setDocuments(docs.map(doc => ({\r\n        id: doc.id,\r\n        name: doc.name,\r\n        type: doc.type,\r\n        size: doc.size,\r\n        uploadedAt: doc.uploaded_at,\r\n        status: doc.status,\r\n        chunkCount: doc.chunk_count\r\n      })));\r\n    } catch (error) {\r\n      console.error('Failed to load documents:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (containerRef.current) {\r\n      gsap.fromTo(\r\n        containerRef.current,\r\n        { opacity: 0 },\r\n        { opacity: 1, duration: 0.5, ease: 'power2.out' }\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = event.target.files;\r\n    if (!files || files.length === 0) return;\r\n    \r\n    if (!selectedBot && customOmis.length === 0) {\r\n      alert('Please create a bot first before uploading documents');\r\n      return;\r\n    }\r\n\r\n    const botId = selectedBot || customOmis[0]?.id;\r\n    if (!botId) return;\r\n\r\n    setIsUploading(true);\r\n    \r\n    for (const file of Array.from(files)) {\r\n      try {\r\n        await ragService.uploadDocument(file, botId, (status) => {\r\n          console.log(status);\r\n        });\r\n      } catch (error: any) {\r\n        console.error('Upload failed:', error);\r\n        alert(`Failed to upload ${file.name}: ${error.message}`);\r\n      }\r\n    }\r\n\r\n    setIsUploading(false);\r\n    // Reload documents to show the new ones\r\n    await loadDocuments();\r\n    \r\n    // Clear the file input\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  const handleCreateBot = async () => {\r\n    if (!newBotName.trim() || !session?.user?.id) return;\r\n    \r\n    try {\r\n      await ragService.createCustomOmi(session.user.id, newBotName, newBotDescription);\r\n      setNewBotName('');\r\n      setNewBotDescription('');\r\n      setShowCreateModal(false);\r\n      // Reload bots to show the new one\r\n      await loadBots();\r\n    } catch (error: any) {\r\n      console.error('Failed to create bot:', error);\r\n      alert(`Failed to create bot: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleDeleteDocument = async (docId: string, docName: string) => {\r\n    if (!confirm(`Are you sure you want to delete \"${docName}\"?`)) return;\r\n    \r\n    try {\r\n      await ragService.deleteDocument(docId);\r\n      alert('Document deleted successfully');\r\n      await loadDocuments();\r\n    } catch (error: any) {\r\n      console.error('Failed to delete document:', error);\r\n      alert(`Failed to delete document: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleDeleteBot = async (botId: string, botName: string) => {\r\n    if (!confirm(`Are you sure you want to delete \"${botName}\"? This will also delete all associated documents.`)) return;\r\n    \r\n    try {\r\n      await ragService.deleteBot(botId);\r\n      alert('Bot deleted successfully');\r\n      if (selectedBot === botId) {\r\n        setSelectedBot(null);\r\n      }\r\n      await loadBots();\r\n      await loadDocuments();\r\n    } catch (error: any) {\r\n      console.error('Failed to delete bot:', error);\r\n      alert(`Failed to delete bot: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const formatFileSize = (bytes: number) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'ready': return '#4ade80';\r\n      case 'training': return '#fbbf24';\r\n      case 'processing': return '#60a5fa';\r\n      case 'indexed': return '#4ade80';\r\n      case 'failed': return '#f87171';\r\n      default: return '#94a3b8';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"custom-omis-container\" ref={containerRef}>\r\n      <header className=\"custom-omis-header\">\r\n        <div className=\"header-left\">\r\n          <div className=\"logo\">\r\n            <span className=\"logo-icon\">ü§ñ</span>\r\n            <span className=\"logo-text\">Custom Omi Training</span>\r\n          </div>\r\n          <nav className=\"header-tabs\">\r\n            <button \r\n              className={'header-tab' + (activeTab === 'bots' ? ' active' : '')}\r\n              onClick={() => setActiveTab('bots')}\r\n            >\r\n              <span className=\"tab-icon\">ü§ñ</span>\r\n              My Bots\r\n            </button>\r\n            <button \r\n              className={'header-tab' + (activeTab === 'documents' ? ' active' : '')}\r\n              onClick={() => setActiveTab('documents')}\r\n            >\r\n              <span className=\"tab-icon\">üìÑ</span>\r\n              Knowledge Base\r\n            </button>\r\n            <button \r\n              className={'header-tab' + (activeTab === 'training' ? ' active' : '')}\r\n              onClick={() => setActiveTab('training')}\r\n            >\r\n              <span className=\"tab-icon\">‚ö°</span>\r\n              Training Dashboard\r\n            </button>\r\n          </nav>\r\n        </div>\r\n        <div className=\"header-right\">\r\n          {onClose && (\r\n            <button className=\"close-btn\" onClick={onClose}>‚úï</button>\r\n          )}\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"custom-omis-main\">\r\n        {activeTab === 'bots' && (\r\n          <div className=\"bots-tab\">\r\n            <div className=\"tab-header\">\r\n              <div>\r\n                <h2 className=\"tab-title\">Your Custom Omi Bots</h2>\r\n                <p className=\"tab-subtitle\">Create and manage specialized AI assistants trained on your data</p>\r\n              </div>\r\n              <button className=\"create-bot-btn\" onClick={() => setShowCreateModal(true)}>\r\n                <span className=\"btn-icon\">+</span>\r\n                Create New Bot\r\n              </button>\r\n            </div>\r\n            <div className=\"bots-grid\">\r\n              {customOmis.length === 0 ? (\r\n                <div style={{ \r\n                  gridColumn: '1 / -1', \r\n                  textAlign: 'center', \r\n                  padding: '60px 40px',\r\n                  background: 'rgba(16,16,16,0.6)',\r\n                  borderRadius: '16px',\r\n                  border: '1px solid rgba(192,192,192,0.15)'\r\n                }}>\r\n                  <div style={{ fontSize: '48px', marginBottom: '16px' }}>ü§ñ</div>\r\n                  <h3 style={{ color: 'rgba(255,255,255,0.9)', marginBottom: '12px', fontSize: '20px', fontWeight: '400' }}>\r\n                    Create Your First Custom Omi Bot\r\n                  </h3>\r\n                  <p style={{ color: 'rgba(255,255,255,0.6)', marginBottom: '24px', maxWidth: '500px', margin: '0 auto 24px' }}>\r\n                    Custom Omi bots are AI assistants trained on your own documents using RAG (Retrieval-Augmented Generation). \r\n                    They can answer questions based on your uploaded knowledge base.\r\n                  </p>\r\n                  <button \r\n                    className=\"create-bot-btn\" \r\n                    onClick={() => setShowCreateModal(true)}\r\n                    style={{ fontSize: '16px', padding: '14px 28px' }}\r\n                  >\r\n                    <span className=\"btn-icon\">+</span>\r\n                    Create Your First Bot\r\n                  </button>\r\n                </div>\r\n              ) : (\r\n                customOmis.map((bot) => (\r\n                  <div key={bot.id} className={'bot-card' + (selectedBot === bot.id ? ' selected' : '')} onClick={() => setSelectedBot(bot.id)}>\r\n                    <div className=\"bot-card-header\">\r\n                      <div className=\"bot-icon\">ü§ñ</div>\r\n                      <div className=\"bot-status-badge\" style={{ backgroundColor: getStatusColor(bot.status) }}>{bot.status}</div>\r\n                    </div>\r\n                    <h3 className=\"bot-name\">{bot.name}</h3>\r\n                    <p className=\"bot-description\">{bot.description}</p>\r\n                    <div className=\"bot-stats\">\r\n                      <div className=\"bot-stat\"><span className=\"stat-label\">Documents</span><span className=\"stat-value\">{bot.documentsCount || 0}</span></div>\r\n                      <div className=\"bot-stat\"><span className=\"stat-label\">Embeddings</span><span className=\"stat-value\">{bot.embeddingsCount || 0}</span></div>\r\n                      <div className=\"bot-stat\"><span className=\"stat-label\">Accuracy</span><span className=\"stat-value\">{bot.accuracy || 0}%</span></div>\r\n                    </div>\r\n                    <div className=\"bot-card-actions\">\r\n                      <button \r\n                        className=\"bot-action-btn\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          setSelectedBot(bot.id);\r\n                          setActiveTab('documents');\r\n                        }}\r\n                      >\r\n                        <span>üìÑ</span> Manage Docs\r\n                      </button>\r\n                      <button \r\n                        className=\"bot-action-btn\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          alert(`Testing bot: ${bot.name}\\n\\nRAG chat interface coming soon! This will allow you to chat with your bot using the uploaded documents as context.`);\r\n                        }}\r\n                      >\r\n                        <span>üí¨</span> Test\r\n                      </button>\r\n                      <button \r\n                        className=\"bot-action-btn delete\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          handleDeleteBot(bot.id, bot.name);\r\n                        }}\r\n                        title=\"Delete bot and all documents\"\r\n                      >\r\n                        <span>üóëÔ∏è</span> Delete\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === 'documents' && (\r\n          <div className=\"documents-tab\">\r\n            <div className=\"tab-header\">\r\n              <div>\r\n                <h2 className=\"tab-title\">Knowledge Base Documents</h2>\r\n                <p className=\"tab-subtitle\">Upload and manage training documents for RAG fine-tuning</p>\r\n                {selectedBot && customOmis.length > 0 && (\r\n                  <div style={{ marginTop: '8px', padding: '8px 12px', background: 'rgba(192,192,192,0.1)', borderRadius: '8px', display: 'inline-block' }}>\r\n                    <span style={{ color: 'rgba(255,255,255,0.6)', fontSize: '12px' }}>Selected Bot: </span>\r\n                    <span style={{ color: 'rgba(255,255,255,0.9)', fontSize: '13px', fontWeight: '500' }}>\r\n                      {customOmis.find(b => b.id === selectedBot)?.name || 'Unknown'}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n                {!selectedBot && customOmis.length > 0 && (\r\n                  <div style={{ marginTop: '8px', padding: '8px 12px', background: 'rgba(255,193,7,0.1)', border: '1px solid rgba(255,193,7,0.3)', borderRadius: '8px', display: 'inline-block' }}>\r\n                    <span style={{ color: 'rgba(255,193,7,0.9)', fontSize: '12px' }}>‚ö†Ô∏è Select a bot first to upload documents</span>\r\n                  </div>\r\n                )}\r\n                {customOmis.length === 0 && (\r\n                  <div style={{ marginTop: '8px', padding: '8px 12px', background: 'rgba(248,113,113,0.1)', border: '1px solid rgba(248,113,113,0.3)', borderRadius: '8px', display: 'inline-block' }}>\r\n                    <span style={{ color: 'rgba(248,113,113,0.9)', fontSize: '12px' }}>‚ùå Create a bot first in the \"My Bots\" tab</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"header-actions\">\r\n                <div className=\"search-box\">\r\n                  <span className=\"search-icon\">üîç</span>\r\n                  <input \r\n                    type=\"text\" \r\n                    placeholder=\"Search documents...\"\r\n                    value={searchQuery}\r\n                    onChange={(e) => setSearchQuery(e.target.value)}\r\n                  />\r\n                </div>\r\n                <button \r\n                  className=\"upload-btn\" \r\n                  onClick={() => {\r\n                    if (!selectedBot && customOmis.length > 0) {\r\n                      alert('Please select a bot first by clicking on it in the \"My Bots\" tab, then come back here to upload documents.');\r\n                      return;\r\n                    }\r\n                    if (customOmis.length === 0) {\r\n                      alert('Please create a bot first in the \"My Bots\" tab before uploading documents.');\r\n                      return;\r\n                    }\r\n                    fileInputRef.current?.click();\r\n                  }}\r\n                  disabled={isUploading || customOmis.length === 0}\r\n                  style={customOmis.length === 0 ? { opacity: 0.5, cursor: 'not-allowed' } : {}}\r\n                >\r\n                  {isUploading ? (\r\n                    <>\r\n                      <div className=\"spinner-small\"></div>\r\n                      Uploading...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <span className=\"btn-icon\">üì§</span>\r\n                      Upload Documents\r\n                    </>\r\n                  )}\r\n                </button>\r\n                <input \r\n                  ref={fileInputRef}\r\n                  type=\"file\" \r\n                  multiple \r\n                  accept={DOCUMENT_ACCEPT_STRING}\r\n                  style={{ display: 'none' }}\r\n                  onChange={handleFileUpload}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"documents-table-container\">\r\n              <table className=\"documents-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Document Name</th>\r\n                    <th>Type</th>\r\n                    <th>Size</th>\r\n                    <th>Chunks</th>\r\n                    <th>Status</th>\r\n                    <th>Uploaded</th>\r\n                    <th>Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {documents.length === 0 ? (\r\n                    <tr>\r\n                      <td colSpan={7} style={{ textAlign: 'center', padding: '40px', color: 'rgba(255,255,255,0.5)' }}>\r\n                        No documents yet. Upload your first document to start training!\r\n                      </td>\r\n                    </tr>\r\n                  ) : (\r\n                    documents.map((doc) => (\r\n                      <tr key={doc.id}>\r\n                        <td>\r\n                          <div className=\"doc-name-cell\">\r\n                            <span className=\"doc-icon\">üìÑ</span>\r\n                            {doc.name}\r\n                          </div>\r\n                        </td>\r\n                        <td><span className=\"doc-type-badge\">{doc.type}</span></td>\r\n                        <td>{formatFileSize(doc.size)}</td>\r\n                        <td>{doc.chunkCount || '-'}</td>\r\n                        <td>\r\n                          <span \r\n                            className=\"status-badge\"\r\n                            style={{ backgroundColor: getStatusColor(doc.status) }}\r\n                          >\r\n                            {doc.status}\r\n                          </span>\r\n                        </td>\r\n                        <td>{formatDate(doc.uploadedAt)}</td>\r\n                        <td>\r\n                          <div className=\"table-actions\">\r\n                            <button className=\"action-btn\" title=\"View\">üëÅÔ∏è</button>\r\n                            <button className=\"action-btn\" title=\"Download\">‚¨áÔ∏è</button>\r\n                            <button \r\n                              className=\"action-btn delete\" \r\n                              title=\"Delete\"\r\n                              onClick={() => handleDeleteDocument(doc.id, doc.name)}\r\n                            >\r\n                              üóëÔ∏è\r\n                            </button>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    ))\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n\r\n            <div className=\"upload-instructions\">\r\n              <h4>Supported File Types (plain text only, &lt; 1&nbsp;MB each):</h4>\r\n              <div className=\"file-types\">\r\n                {DOCUMENT_TYPE_BADGES.map((badge) => (\r\n                  <span key={badge} className=\"file-type\">{badge}</span>\r\n                ))}\r\n              </div>\r\n              <p className=\"instructions-text\">\r\n                Upload lightweight text sources (docs, JSON, YAML, code, CSV, HTML/CSS). Files are chunked\r\n                and embedded automatically for semantic search‚Äîbinary formats like PDF/Word are not supported.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === 'training' && (\r\n          <div className=\"training-tab\">\r\n            <div className=\"tab-header\">\r\n              <div>\r\n                <h2 className=\"tab-title\">Training Dashboard</h2>\r\n                <p className=\"tab-subtitle\">Monitor and configure RAG training processes</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"training-grid\">\r\n              <div className=\"training-card\">\r\n                <div className=\"card-icon\">üìä</div>\r\n                <h3>Embedding Generation</h3>\r\n                <div className=\"training-stats\">\r\n                  <div className=\"stat-row\">\r\n                    <span>Total Documents:</span>\r\n                    <span className=\"stat-value\">{documents.length}</span>\r\n                  </div>\r\n                  <div className=\"stat-row\">\r\n                    <span>Processed Chunks:</span>\r\n                    <span className=\"stat-value\">{documents.reduce((acc, doc) => acc + doc.chunkCount, 0)}</span>\r\n                  </div>\r\n                  <div className=\"stat-row\">\r\n                    <span>Pending:</span>\r\n                    <span className=\"stat-value\">{documents.filter(d => d.status === 'processing').length}</span>\r\n                  </div>\r\n                </div>\r\n                <button className=\"training-action-btn\">\r\n                  <span>‚ö°</span> Start Batch Processing\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"training-card\">\r\n                <div className=\"card-icon\">üéØ</div>\r\n                <h3>Vector Database</h3>\r\n                <div className=\"training-stats\">\r\n                  <div className=\"stat-row\">\r\n                    <span>Total Vectors:</span>\r\n                    <span className=\"stat-value\">2,140</span>\r\n                  </div>\r\n                  <div className=\"stat-row\">\r\n                    <span>Dimensions:</span>\r\n                    <span className=\"stat-value\">1536</span>\r\n                  </div>\r\n                  <div className=\"stat-row\">\r\n                    <span>Index Status:</span>\r\n                    <span className=\"stat-value ready\">Active</span>\r\n                  </div>\r\n                </div>\r\n                <button className=\"training-action-btn\">\r\n                  <span>üîÑ</span> Rebuild Index\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"training-card\">\r\n                <div className=\"card-icon\">üß†</div>\r\n                <h3>Fine-Tuning</h3>\r\n                <div className=\"training-stats\">\r\n                  <div className=\"stat-row\">\r\n                    <span>Active Jobs:</span>\r\n                    <span className=\"stat-value\">1</span>\r\n                  </div>\r\n                  <div className=\"stat-row\">\r\n                    <span>Completed:</span>\r\n                    <span className=\"stat-value\">5</span>\r\n                  </div>\r\n                  <div className=\"stat-row\">\r\n                    <span>Avg. Accuracy:</span>\r\n                    <span className=\"stat-value\">91%</span>\r\n                  </div>\r\n                </div>\r\n                <button className=\"training-action-btn\">\r\n                  <span>üöÄ</span> Start Fine-Tuning\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"rag-config-section\">\r\n              <h3>RAG Configuration</h3>\r\n              <div className=\"config-grid\">\r\n                <div className=\"config-item\">\r\n                  <label>Chunk Size</label>\r\n                  <input type=\"number\" defaultValue={1000} />\r\n                  <span className=\"config-hint\">Tokens per chunk</span>\r\n                </div>\r\n                <div className=\"config-item\">\r\n                  <label>Chunk Overlap</label>\r\n                  <input type=\"number\" defaultValue={200} />\r\n                  <span className=\"config-hint\">Overlapping tokens</span>\r\n                </div>\r\n                <div className=\"config-item\">\r\n                  <label>Top K Results</label>\r\n                  <input type=\"number\" defaultValue={5} />\r\n                  <span className=\"config-hint\">Retrieval results</span>\r\n                </div>\r\n                <div className=\"config-item\">\r\n                  <label>Similarity Threshold</label>\r\n                  <input type=\"number\" step=\"0.01\" defaultValue={0.7} />\r\n                  <span className=\"config-hint\">Min similarity score</span>\r\n                </div>\r\n              </div>\r\n              <button className=\"save-config-btn\">\r\n                <span>üíæ</span> Save Configuration\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {showCreateModal && (\r\n        <div className=\"modal-overlay\" onClick={() => setShowCreateModal(false)}>\r\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n            <h2>Create New Custom Omi</h2>\r\n            <div className=\"modal-form\">\r\n              <div className=\"form-group\">\r\n                <label>Bot Name</label>\r\n                <input \r\n                  type=\"text\" \r\n                  placeholder=\"e.g., Customer Support Assistant\"\r\n                  value={newBotName}\r\n                  onChange={(e) => setNewBotName(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Description</label>\r\n                <textarea \r\n                  placeholder=\"Describe the purpose and specialty of this bot...\"\r\n                  value={newBotDescription}\r\n                  onChange={(e) => setNewBotDescription(e.target.value)}\r\n                  rows={4}\r\n                />\r\n              </div>\r\n              <div className=\"modal-actions\">\r\n                <button \r\n                  className=\"modal-btn cancel\"\r\n                  onClick={() => setShowCreateModal(false)}\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button \r\n                  className=\"modal-btn create\"\r\n                  onClick={handleCreateBot}\r\n                  disabled={!newBotName.trim()}\r\n                >\r\n                  Create Bot\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomOmis;\r\n","import { supabase } from './supabaseClient';\r\n\r\nexport interface CustomOmi {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  status: 'idle' | 'training' | 'ready';\r\n  accuracy: number;\r\n  documentsCount?: number;\r\n  embeddingsCount?: number;\r\n}\r\n\r\nexport interface KnowledgeDocument {\r\n  id: string;\r\n  bot_id: string;\r\n  name: string;\r\n  type: string;\r\n  size: number;\r\n  status: 'processing' | 'indexed' | 'failed';\r\n  chunk_count: number;\r\n  uploaded_at: string;\r\n}\r\n\r\n// Load all custom bots for the current user\r\nexport async function loadCustomOmis(userId: string): Promise<CustomOmi[]> {\r\n  const { data: bots, error } = await supabase\r\n    .from('custom_omis')\r\n    .select('*')\r\n    .eq('user_id', userId)\r\n    .order('created_at', { ascending: false });\r\n\r\n  if (error) {\r\n    console.error('Error loading bots:', error);\r\n    return [];\r\n  }\r\n\r\n  // Get document and embedding counts for each bot\r\n  const botsWithCounts = await Promise.all(\r\n    (bots || []).map(async (bot: any) => {\r\n      const { count: docCount } = await supabase\r\n        .from('knowledge_documents')\r\n        .select('*', { count: 'exact', head: true })\r\n        .eq('bot_id', bot.id);\r\n\r\n      const { count: embeddingCount } = await supabase\r\n        .from('document_embeddings')\r\n        .select('*', { count: 'exact', head: true })\r\n        .eq('user_id', userId);\r\n\r\n      return {\r\n        id: bot.id,\r\n        name: bot.name,\r\n        description: bot.description || '',\r\n        status: bot.status as 'idle' | 'training' | 'ready',\r\n        accuracy: bot.accuracy || 0,\r\n        documentsCount: docCount || 0,\r\n        embeddingsCount: embeddingCount || 0\r\n      };\r\n    })\r\n  );\r\n\r\n  return botsWithCounts;\r\n}\r\n\r\n// Load all documents for a specific bot\r\nexport async function loadDocuments(botId?: string): Promise<KnowledgeDocument[]> {\r\n  let query = supabase\r\n    .from('knowledge_documents')\r\n    .select('*')\r\n    .order('uploaded_at', { ascending: false });\r\n\r\n  if (botId) {\r\n    query = query.eq('bot_id', botId);\r\n  }\r\n\r\n  const { data, error } = await query;\r\n\r\n  if (error) {\r\n    console.error('Error loading documents:', error);\r\n    return [];\r\n  }\r\n\r\n  return data || [];\r\n}\r\n\r\n// Create a new custom bot\r\nexport async function createCustomOmi(userId: string, name: string, description: string) {\r\n  const { data, error } = await supabase\r\n    .from('custom_omis')\r\n    .insert({\r\n      user_id: userId,\r\n      name,\r\n      description,\r\n      status: 'idle',\r\n      accuracy: 0\r\n    })\r\n    .select()\r\n    .single();\r\n\r\n  if (error) {\r\n    console.error('Error creating bot:', error);\r\n    throw error;\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\n// Read file content as text or base64\r\nconst MAX_FILE_SIZE_BYTES = 1024 * 1024; // 1 MB\r\nconst TEXT_EXTENSIONS = [\r\n  '.txt',\r\n  '.md',\r\n  '.markdown',\r\n  '.json',\r\n  '.yaml',\r\n  '.yml',\r\n  '.csv',\r\n  '.js',\r\n  '.jsx',\r\n  '.ts',\r\n  '.tsx',\r\n  '.py',\r\n  '.cs',\r\n  '.html',\r\n  '.htm',\r\n  '.css'\r\n];\r\nconst TEXT_MIME_TYPES = [\r\n  'text/plain',\r\n  'text/markdown',\r\n  'application/json',\r\n  'application/x-yaml',\r\n  'text/yaml',\r\n  'text/csv',\r\n  'application/javascript',\r\n  'text/javascript',\r\n  'application/typescript',\r\n  'text/typescript',\r\n  'text/css',\r\n  'text/html'\r\n];\r\n\r\nconst ALLOWED_TYPES_MESSAGE =\r\n  '.txt, .md, .json, .yaml/.yml, .csv, .js/.ts/.tsx, .py, .cs, .html/.htm, .css';\r\n\r\nconst getFileExtension = (fileName: string) => {\r\n  const dotIndex = fileName.lastIndexOf('.');\r\n  return dotIndex === -1 ? '' : fileName.slice(dotIndex).toLowerCase();\r\n};\r\n\r\nconst isPlainTextFile = (file: File) => {\r\n  const ext = getFileExtension(file.name);\r\n  return TEXT_EXTENSIONS.includes(ext) || (!!file.type && TEXT_MIME_TYPES.includes(file.type));\r\n};\r\n\r\nconst ensureValidFile = (file: File) => {\r\n  if (file.size > MAX_FILE_SIZE_BYTES) {\r\n    throw new Error('File size exceeds the 1 MB limit for document processing.');\r\n  }\r\n\r\n  if (!isPlainTextFile(file)) {\r\n    throw new Error(`Unsupported file type. Please upload plain text formats such as ${ALLOWED_TYPES_MESSAGE}.`);\r\n  }\r\n};\r\n\r\nconst getDocumentTypeLabel = (fileName: string) => {\r\n  const ext = getFileExtension(fileName);\r\n  return ext ? ext.replace('.', '').toUpperCase() : 'TEXT';\r\n};\r\n\r\nexport async function readFileAsBase64(file: File): Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onload = (event) => {\r\n      const result = event.target?.result as string;\r\n      const base64 = result.includes(',') ? result.split(',')[1] : result;\r\n      resolve(base64);\r\n    };\r\n    reader.onerror = () => reject(new Error('Failed to read file'));\r\n    reader.readAsDataURL(file);\r\n  });\r\n}\r\n\r\n// Upload and process a document\r\nexport async function uploadDocument(\r\n  file: File,\r\n  botId: string,\r\n  onProgress?: (status: string) => void\r\n): Promise<void> {\r\n  try {\r\n    ensureValidFile(file);\r\n    onProgress?.('Reading file...');\r\n    const fileData = await readFileAsBase64(file);\r\n\r\n    onProgress?.('Uploading document...');\r\n    const session = await supabase.auth.getSession();\r\n    const token = session.data.session?.access_token;\r\n\r\n    if (!token) {\r\n      throw new Error('Not authenticated');\r\n    }\r\n\r\n    // Step 1: Upload document metadata\r\n    const uploadPayload = {\r\n      fileName: file.name,\r\n      fileType: file.type || getDocumentTypeLabel(file.name),\r\n      fileSize: file.size,\r\n      botId,\r\n      fileData\r\n    };\r\n    \r\n    console.log('Uploading with payload:', { ...uploadPayload, fileData: fileData ? `${fileData.length} bytes` : 'none' });\r\n    \r\n    const uploadResponse = await fetch('/api/upload-document', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify(uploadPayload)\r\n    });\r\n\r\n    if (!uploadResponse.ok) {\r\n      let errorMessage = 'Upload failed';\r\n      try {\r\n        const contentType = uploadResponse.headers.get('content-type');\r\n        if (contentType?.includes('application/json')) {\r\n          const error = await uploadResponse.json();\r\n          console.error('Upload API error:', error);\r\n          errorMessage = error.details || error.error || errorMessage;\r\n        } else {\r\n          const errorText = await uploadResponse.text();\r\n          console.error('Upload API non-JSON error:', errorText);\r\n          errorMessage = `Upload failed: ${uploadResponse.status} ${uploadResponse.statusText}`;\r\n        }\r\n      } catch (parseError) {\r\n        console.error('Error parsing upload response:', parseError);\r\n        errorMessage = `Upload failed: ${uploadResponse.status} ${uploadResponse.statusText}`;\r\n      }\r\n      throw new Error(errorMessage);\r\n    }\r\n\r\n    const { documentId } = await uploadResponse.json();\r\n\r\n    // Step 2: Process document (chunk and embed)\r\n    onProgress?.('Processing and generating embeddings...');\r\n    const processResponse = await fetch('/api/process-document', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify({\r\n        documentId,\r\n        fileData,\r\n        chunkSize: 1000,\r\n        overlap: 200\r\n      })\r\n    });\r\n\r\n    if (!processResponse.ok) {\r\n      let errorMessage = 'Processing failed';\r\n      try {\r\n        const contentType = processResponse.headers.get('content-type');\r\n        if (contentType?.includes('application/json')) {\r\n          const error = await processResponse.json();\r\n          console.error('Process API error:', error);\r\n          errorMessage = error.details || error.error || errorMessage;\r\n        } else {\r\n          const errorText = await processResponse.text();\r\n          console.error('Process API non-JSON error:', errorText);\r\n          errorMessage = `Processing failed: ${processResponse.status} ${processResponse.statusText}`;\r\n        }\r\n      } catch (parseError) {\r\n        console.error('Error parsing process response:', parseError);\r\n        errorMessage = `Processing failed: ${processResponse.status} ${processResponse.statusText}`;\r\n      }\r\n      throw new Error(errorMessage);\r\n    }\r\n\r\n    onProgress?.('Document indexed successfully!');\r\n  } catch (error) {\r\n    console.error('Upload error:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Perform RAG search\r\nexport async function performRAGSearch(\r\n  query: string,\r\n  matchThreshold: number = 0.7,\r\n  matchCount: number = 5\r\n) {\r\n  try {\r\n    const session = await supabase.auth.getSession();\r\n    const token = session.data.session?.access_token;\r\n\r\n    if (!token) {\r\n      throw new Error('Not authenticated');\r\n    }\r\n\r\n    const response = await fetch('/api/rag-search', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify({\r\n        query,\r\n        matchThreshold,\r\n        matchCount\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.error || 'Search failed');\r\n    }\r\n\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('RAG search error:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Delete a document\r\nexport async function deleteDocument(documentId: string) {\r\n  const { error } = await supabase\r\n    .from('knowledge_documents')\r\n    .delete()\r\n    .eq('id', documentId);\r\n\r\n  if (error) {\r\n    console.error('Error deleting document:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Delete a bot\r\nexport async function deleteBot(botId: string) {\r\n  const { error } = await supabase\r\n    .from('custom_omis')\r\n    .delete()\r\n    .eq('id', botId);\r\n\r\n  if (error) {\r\n    console.error('Error deleting bot:', error);\r\n    throw error;\r\n  }\r\n}\r\n"],"names":[],"mappings":"uDAEA,EAAA,EAAA,CAAA,CAAA,OCAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCJA,EAAA,EAAA,CAAA,CAAA,OAwBO,eAAe,EAAe,CAAc,EACjD,GAAM,CAAE,KAAM,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CACzC,IAAI,CAAC,eACL,MAAM,CAAC,KACP,EAAE,CAAC,UAAW,GACd,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,UAE1C,AAAI,GACF,IADS,IACD,KAAK,CAAC,sBAAuB,GAC9B,EAAE,EAIY,MAAM,QAAQ,GAAG,CACtC,AAAC,IAAQ,EAAA,AAAE,EAAE,GAAG,CAAC,MAAO,IACtB,GAAM,CAAE,MAAO,CAAQ,CAAE,CAAG,MAAM,EAAA,QAAQ,CACvC,IAAI,CAAC,uBACL,MAAM,CAAC,IAAK,CAAE,MAAO,QAAS,MAAM,CAAK,GACzC,EAAE,CAAC,SAAU,EAAI,EAAE,EAEhB,CAAE,MAAO,CAAc,CAAE,CAAG,MAAM,EAAA,QAAQ,CAC7C,IAAI,CAAC,uBACL,MAAM,CAAC,IAAK,CAAE,MAAO,QAAS,MAAM,CAAK,GACzC,EAAE,CAAC,UAAW,GAEjB,MAAO,CACL,GAAI,EAAI,EAAE,CACV,KAAM,EAAI,IAAI,CACd,YAAa,EAAI,WAAW,EAAI,GAChC,OAAQ,EAAI,MAAM,CAClB,SAAU,EAAI,QAAQ,EAAI,EAC1B,eAAgB,GAAY,EAC5B,gBAAiB,GAAkB,CACrC,CACF,GAIJ,CAGO,eAAe,EAAc,CAAc,EAChD,IAAI,EAAQ,EAAA,QAAQ,CACjB,IAAI,CAAC,uBACL,MAAM,CAAC,KACP,KAAK,CAAC,cAAe,CAAE,WAAW,CAAM,GAEvC,IACF,EAAQ,CADC,CACK,EAAE,CAAC,SAAU,EAAA,EAG7B,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,SAE9B,AAAI,GACF,IADS,IACD,KAAK,CAAC,2BAA4B,GACnC,EAAE,EAGJ,GAAQ,EACjB,AADmB,CAIZ,eAAe,EAAgB,CAAc,CAAE,CAAY,CAAE,CAAmB,EACrF,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CACnC,IAAI,CAAC,eACL,MAAM,CAAC,CACN,QAAS,OACT,cACA,EACA,OAAQ,OACR,SAAU,CACZ,GACC,MAAM,GACN,MAAM,GAET,GAAI,EAEF,KAFS,CACT,QAAQ,KAAK,CAAC,sBAAuB,GAC/B,EAGR,OAAO,CACT,CAIA,IAAM,EAAkB,CACtB,OACA,MACA,YACA,QACA,QACA,OACA,OACA,MACA,OACA,MACA,OACA,MACA,MACA,QACA,OACA,OACD,CACK,EAAkB,CACtB,aACA,gBACA,mBACA,qBACA,YACA,WACA,yBACA,kBACA,yBACA,kBACA,WACA,YACD,CAKK,EAAmB,AAAC,IACxB,IAAM,EAAW,EAAS,WAAW,CAAC,KACtC,OAAoB,CAAC,IAAd,EAAkB,GAAK,EAAS,KAAK,CAAC,GAAU,WAAW,EACpE,EAsBO,eAAe,EAAiB,CAAU,EAC/C,OAAO,IAAI,QAAQ,CAAC,EAAS,KAC3B,IAAM,EAAS,IAAI,WACnB,EAAO,MAAM,CAAI,AAAD,IACd,IAAM,EAAS,EAAM,MAAM,EAAE,OAE7B,EADe,EAAO,IACd,IADsB,CAAC,KAAO,EAAO,KAAK,CAAC,IAAI,CAAC,EAAE,CAAG,EAE/D,EACA,EAAO,OAAO,CAAG,IAAM,EAAO,AAAI,MAAM,wBACxC,EAAO,aAAa,CAAC,EACvB,EACF,CAGO,eAAe,EACpB,CAAU,CACV,CAAa,CACb,CAAqC,EAErC,GAAI,eAjCJ,GAkCkB,AAlCd,EAAK,IAAI,CAhDa,EAgDV,KAhDiB,CAiD/B,KAjDqC,CAiD/B,AAAI,MAAM,AAjD4B,GAgDT,0DAIrC,GATM,CASF,CATQ,AASP,EATwB,EAAK,IAAI,IAC/B,EAAgB,EAQF,MARU,CAQH,AARI,IAAS,AAAE,CAAD,CAAM,IAAI,EAAI,EAAgB,QAAQ,CAAC,EAAK,KAAI,EASxF,MAAM,AAAI,MAAM,CAAC,gEAAgE,EAAE,sBAAsB,CAAC,CAAC,sDA8B3G,IAAa,mBACb,IAAM,EAAW,MAAM,EAAiB,GAExC,IAAa,yBACb,IAAM,EAAU,MAAM,EAAA,QAAQ,CAAC,IAAI,CAAC,UAAU,GACxC,EAAQ,EAAQ,IAAI,CAAC,OAAO,EAAE,aAEpC,GAAI,CAAC,EACH,KADU,CACJ,AAAI,MAAM,qBAIlB,IAAM,EAAgB,CACpB,SAAU,EAAK,IAAI,CACnB,SAAU,EAAK,IAAI,GAxCK,CAwCD,CAAqB,EAAK,IAAI,CAtClD,CADD,EAAM,EAAiB,IAChB,EAAI,OAAO,CAAC,IAAK,IAAI,WAAW,GAAK,QAuC9C,SAAU,EAAK,IAAI,OACnB,WACA,CACF,EAEA,QAAQ,GAAG,CAAC,0BAA2B,CAAE,GAAG,CAAa,CAAE,SAAU,EAAW,CAAA,EAAG,EAAS,MAAM,CAAC,MAAM,CAAC,CAAG,MAAO,GAEpH,IAAM,EAAiB,MAAM,MAAM,uBAAwB,CACzD,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,AACpC,EACA,KAAM,KAAK,SAAS,CAAC,EACvB,GAEA,GAAI,CAAC,EAAe,EAAE,CAAE,CACtB,IAAI,EAAe,gBACnB,GAAI,CACF,IAAM,EAAc,EAAe,OAAO,CAAC,GAAG,CAAC,gBAC/C,GAAI,GAAa,SAAS,oBAAqB,CAC7C,IAAM,EAAQ,MAAM,EAAe,IAAI,GACvC,QAAQ,KAAK,CAAC,oBAAqB,GACnC,EAAe,EAAM,OAAO,EAAI,EAAM,KAAK,EAAI,CACjD,KAAO,CACL,IAAM,EAAY,MAAM,EAAe,IAAI,GAC3C,QAAQ,KAAK,CAAC,6BAA8B,GAC5C,EAAe,CAAC,eAAe,EAAE,EAAe,MAAM,CAAC,CAAC,EAAE,EAAe,UAAU,CAAA,CAAE,AACvF,CACF,CAAE,MAAO,EAAY,CACnB,QAAQ,KAAK,CAAC,iCAAkC,GAChD,EAAe,CAAC,eAAe,EAAE,EAAe,MAAM,CAAC,CAAC,EAAE,EAAe,UAAU,CAAA,CAAE,AACvF,CACA,MAAU,AAAJ,MAAU,EAClB,CAEA,GAAM,YAAE,CAAU,CAAE,CAAG,MAAM,EAAe,IAAI,GAGhD,IAAa,2CACb,IAAM,EAAkB,MAAM,MAAM,wBAAyB,CAC3D,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,AACpC,EACA,KAAM,KAAK,SAAS,CAAC,YACnB,WACA,EACA,UAAW,IACX,QAAS,GACX,EACF,GAEA,GAAI,CAAC,EAAgB,EAAE,CAAE,CACvB,IAAI,EAAe,oBACnB,GAAI,CACF,IAAM,EAAc,EAAgB,OAAO,CAAC,GAAG,CAAC,gBAChD,GAAI,GAAa,SAAS,oBAAqB,CAC7C,IAAM,EAAQ,MAAM,EAAgB,IAAI,GACxC,QAAQ,KAAK,CAAC,qBAAsB,GACpC,EAAe,EAAM,OAAO,EAAI,EAAM,KAAK,EAAI,CACjD,KAAO,CACL,IAAM,EAAY,MAAM,EAAgB,IAAI,GAC5C,QAAQ,KAAK,CAAC,8BAA+B,GAC7C,EAAe,CAAC,mBAAmB,EAAE,EAAgB,MAAM,CAAC,CAAC,EAAE,EAAgB,UAAU,CAAA,CAAE,AAC7F,CACF,CAAE,MAAO,EAAY,CACnB,QAAQ,KAAK,CAAC,kCAAmC,GACjD,EAAe,CAAC,mBAAmB,EAAE,EAAgB,MAAM,CAAC,CAAC,EAAE,EAAgB,UAAU,CAAA,CAAE,AAC7F,CACA,MAAU,AAAJ,MAAU,EAClB,CAEA,IAAa,iCACf,CAAE,MAAO,EAAO,CAEd,MADA,QAAQ,KAAK,CAAC,gBAAiB,GACzB,CACR,CACF,CA0CO,eAAe,EAAe,CAAkB,EACrD,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CAC7B,IAAI,CAAC,uBACL,MAAM,GACN,EAAE,CAAC,KAAM,GAEZ,GAAI,EAEF,KAFS,CACT,QAAQ,KAAK,CAAC,2BAA4B,GACpC,CAEV,CAGO,eAAe,EAAU,CAAa,EAC3C,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CAC7B,IAAI,CAAC,eACL,MAAM,GACN,EAAE,CAAC,KAAM,GAEZ,GAAI,EAEF,KAFS,CACT,QAAQ,KAAK,CAAC,sBAAuB,GAC/B,CAEV,CD9TA,IAAM,EAAuB,CAAC,MAAO,KAAM,OAAQ,OAAQ,MAAO,QAAS,QAAS,WAAW,GAEjD,CAAC,SAAE,CAAO,CAAE,IACxD,GAAM,SAAE,CAAO,CAAE,CAAG,AA8mBP,CA9mBO,EAAA,EAAA,OAAA,AAAO,IACrB,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAoC,QACxE,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAwB,MACxD,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACzC,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrC,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IAC3C,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACvC,CAAC,EAAmB,EAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACrD,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GACjD,EAAe,CAAA,EAAA,EAAA,MAAA,AAAM,EAAiB,MACtC,EAAe,CAAA,EAAA,EAAA,MAAA,AAAM,EAAmB,MAExC,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAsB,EAAE,EACtD,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAa,EAAE,EAGzD,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,GAAS,MAAM,IAAI,AACrB,GAEJ,EAAG,CAAC,GAAS,MAAM,GAAG,EAGtB,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,GAAS,MAAM,IAAoB,cAAd,EAA2B,CAClD,IAGA,IAAM,EAAW,YAAY,KAC3B,GACF,EAAG,KAEH,MAAO,IAAM,cAAc,EAC7B,CACF,EAAG,CAAC,GAAS,MAAM,GAAI,EAAW,EAAY,EAE9C,IAAM,EAAW,UACf,GAAK,CAAD,EAAU,MAAM,IAAI,AACxB,GAAa,GACb,GAAI,CACF,IAAM,EAAO,MAAM,EAA0B,EAAQ,IAAI,CAAC,EAAE,EAC5D,EAAc,EAChB,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,uBAAwB,EACxC,QAAU,CACR,GAAa,EACf,EACF,EAEM,EAAgB,UACpB,GAAK,CAAD,EAAU,MAAM,IACpB,AADwB,EACX,IACb,GAAI,CACF,IAAM,EAAO,MAAM,EAAyB,QAAe,GAC3D,EAAa,EAAK,GAAG,CAAC,IAAQ,CAC5B,CAD2B,EACvB,EAAI,EAAE,CACV,KAAM,EAAI,IAAI,CACd,KAAM,EAAI,IAAI,CACd,KAAM,EAAI,IAAI,CACd,WAAY,EAAI,WAAW,CAC3B,OAAQ,EAAI,MAAM,CAClB,WAAY,EAAI,WAAW,CAC7B,CAAC,EACH,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,4BAA6B,EAC7C,QAAU,CACR,GAAa,EACf,EACF,EAEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,EAAa,OAAO,EAAE,AACxB,EAAA,IAAI,CAAC,MAAM,CACT,EAAa,OAAO,CACpB,CAAE,QAAS,CAAE,EACb,CAAE,QAAS,EAAG,SAAU,GAAK,KAAM,YAAa,EAGtD,EAAG,EAAE,EAEL,IAAM,EAAmB,MAAO,IAC9B,IAAM,EAAQ,EAAM,MAAM,CAAC,KAAK,CAChC,GAAI,CAAC,GAA0B,IAAjB,EAAM,MAAM,CAAQ,OAElC,GAAI,CAAC,GAAqC,IAAtB,EAAW,MAAM,CAAQ,YAC3C,MAAM,wDAIR,IAAM,EAAQ,GAAe,CAAU,CAAC,EAAE,EAAE,GAC5C,GAAK,CAAD,EAIJ,IAJY,AAIP,IAAM,KAFX,GAAe,GAEI,MAAM,IAAI,CAAC,IAC5B,GAAI,AADgC,CAElC,MAAM,EAA0B,EAAM,EAAO,AAAC,IAC5C,QAAQ,GAAG,CAAC,EACd,EACF,CAAE,MAAO,EAAY,CACnB,QAAQ,KAAK,CAAC,iBAAkB,GAChC,MAAM,CAAC,iBAAiB,EAAE,EAAK,IAAI,CAAC,EAAE,EAAE,EAAM,OAAO,CAAA,CAAE,CACzD,CAGF,GAAe,GAEf,MAAM,IAGF,EAAa,OAAO,EAAE,CACxB,EAAa,OAAO,CAAC,KAAK,CAAG,EAAA,EAEjC,EAEM,EAAkB,UACtB,GAAI,AAAC,EAAW,IAAI,IAAO,EAAD,CAAU,MAAM,GAE1C,CAF8C,EAE1C,CACF,MAAM,EAA2B,EAAQ,IAAI,CAAC,EAAE,CAAE,EAAY,GAC9D,EAAc,IACd,EAAqB,IACrB,GAAmB,GAEnB,MAAM,GACR,CAAE,MAAO,EAAY,CACnB,QAAQ,KAAK,CAAC,wBAAyB,GACvC,MAAM,CAAC,sBAAsB,EAAE,EAAM,OAAO,CAAA,CAAE,CAChD,CACF,EAEM,EAAuB,MAAO,EAAe,KACjD,GAAK,CAAD,OAAS,CAAC,iCAAiC,EAAE,EAAQ,EAAE,CAAC,EAE5D,CAF+D,EAE3D,CACF,MAAM,EAA0B,GAChC,MAAM,iCACN,MAAM,GACR,CAAE,MAAO,EAAY,CACnB,QAAQ,KAAK,CAAC,6BAA8B,GAC5C,MAAM,CAAC,2BAA2B,EAAE,EAAM,OAAO,CAAA,CAAE,CACrD,CACF,EAEM,EAAkB,MAAO,EAAe,KAC5C,GAAK,CAAD,OAAS,CAAC,iCAAiC,EAAE,EAAQ,kDAAkD,CAAC,EAE5G,CAF+G,EAE3G,CACF,MAAM,EAAqB,GAC3B,MAAM,4BACF,IAAgB,GAClB,EAAe,EADU,IAG3B,MAAM,IACN,MAAM,GACR,CAAE,MAAO,EAAY,CACnB,QAAQ,KAAK,CAAC,wBAAyB,GACvC,MAAM,CAAC,sBAAsB,EAAE,EAAM,OAAO,CAAA,CAAE,CAChD,CACF,EAeM,EAAiB,AAAC,IACtB,OAAQ,GACN,IAAK,QAGL,IAAK,UAHS,MAAO,SACrB,KAAK,WAAY,MAAO,SACxB,KAAK,aAAc,MAAO,SAE1B,KAAK,SAAU,MAAO,SACtB,SAAS,MAAO,SAClB,CACF,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBAAwB,IAAK,YAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,UAAU,+BAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qBAAY,OAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qBAAY,2BAE9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,UAAW,cAA8B,CAAf,QAAC,EAAuB,UAAY,EAAA,CAAE,CAChE,QAAS,IAAM,EAAa,kBAE5B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oBAAW,OAAS,aAGtC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,UAAW,cAA8B,CAAf,aAAC,EAA4B,UAAY,EAAA,CAAE,CACrE,QAAS,IAAM,EAAa,uBAE5B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oBAAW,OAAS,oBAGtC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,UAAW,cAA8B,CAAf,YAAC,EAA2B,UAAY,EAAA,CAAE,CACpE,QAAS,IAAM,EAAa,sBAE5B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oBAAW,MAAQ,8BAKzC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wBACZ,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,YAAY,QAAS,WAAS,WAKtD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACE,SAAd,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,yBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wBAAe,wEAE9B,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,UAAU,iBAAiB,QAAS,IAAM,GAAmB,aACnE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oBAAW,MAAQ,uBAIvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACU,IAAtB,EAAW,MAAM,CAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CACV,WAAY,SACZ,UAAW,SACX,QAAS,YACT,WAAY,qBACZ,aAAc,OACd,OAAQ,kCACV,YACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,SAAU,OAAQ,aAAc,MAAO,WAAG,OACxD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,MAAO,CAAE,MAAO,wBAAyB,aAAc,OAAQ,SAAU,OAAQ,WAAY,KAAM,WAAG,qCAG1G,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,MAAO,CAAE,MAAO,wBAAyB,aAAc,OAAQ,SAAU,QAAS,OAAQ,aAAc,WAAG,iLAI9G,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,UAAU,iBACV,QAAS,IAAM,GAAmB,GAClC,MAAO,CAAE,SAAU,OAAQ,QAAS,WAAY,YAEhD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oBAAW,MAAQ,8BAKvC,EAAW,GAAG,CAAC,AAAC,GACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAiB,UAAW,YAAc,CAAD,GAAiB,EAAI,EAAE,CAAG,YAAc,EAAA,CAAE,CAAG,QAAS,IAAM,EAAe,EAAI,EAAE,YACzH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oBAAW,OAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mBAAmB,MAAO,CAAE,gBAAiB,EAAe,EAAI,MAAM,CAAE,WAAI,EAAI,MAAM,MAEvG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oBAAY,EAAI,IAAI,GAClC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,2BAAmB,EAAI,WAAW,GAC/C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBAAW,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAa,cAAgB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAc,EAAI,cAAc,EAAI,OAC3H,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBAAW,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAa,eAAiB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAc,EAAI,eAAe,EAAI,OAC7H,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBAAW,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAa,aAAe,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,uBAAc,EAAI,QAAQ,EAAI,EAAE,aAExH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,UAAU,iBACV,QAAU,AAAD,IACP,EAAE,eAAe,GACjB,EAAe,EAAI,EAAE,EACrB,EAAa,YACf,YAEA,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,OAAS,kBAEjB,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,UAAU,iBACV,QAAS,AAAC,IACR,EAAE,eAAe,GACjB,MAAM,CAAC,aAAa,EAAE,EAAI,IAAI,CAAC;AAAA;AAAA,kHAAsH,CAAC,CACxJ,YAEA,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,OAAS,WAEjB,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,UAAU,wBACV,QAAU,AAAD,IACP,EAAE,eAAe,GACjB,EAAgB,EAAI,EAAE,CAAE,EAAI,IAAI,CAClC,EACA,MAAM,yCAEN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,QAAU,kBAxCZ,EAAI,EAAE,QAkDX,cAAd,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,6BAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wBAAe,6DAC3B,GAAe,EAAW,MAAM,CAAG,GAClC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,UAAW,MAAO,QAAS,WAAY,WAAY,wBAAyB,aAAc,MAAO,QAAS,cAAe,YACrI,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,MAAO,CAAE,MAAO,wBAAyB,SAAU,MAAO,WAAG,mBACnE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,MAAO,CAAE,MAAO,wBAAyB,SAAU,OAAQ,WAAY,KAAM,WAChF,EAAW,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,IAAc,MAAQ,eAI1D,CAAC,GAAe,EAAW,MAAM,CAAG,GACnC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,UAAW,MAAO,QAAS,WAAY,WAAY,sBAAuB,OAAQ,gCAAiC,aAAc,MAAO,QAAS,cAAe,WAC5K,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,MAAO,CAAE,MAAO,sBAAuB,SAAU,MAAO,WAAG,gDAG9C,IAAtB,EAAW,MAAM,EAChB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,UAAW,MAAO,QAAS,WAAY,WAAY,wBAAyB,OAAQ,kCAAmC,aAAc,MAAO,QAAS,cAAe,WAChL,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,MAAO,CAAE,MAAO,wBAAyB,SAAU,MAAO,WAAG,mDAIzE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBAAc,OAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,YAAY,sBACZ,MAAO,EACP,SAAU,AAAC,GAAM,EAAe,EAAE,MAAM,CAAC,KAAK,OAGlD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,aACV,QAAS,KACP,AAAI,CAAC,GAAe,EAAW,MAAM,CAAG,EACtC,CADyC,KACnC,8GAGJ,AAAsB,GAAG,GAAd,MAAM,CACnB,MAAM,8EAGR,EAAa,OAAO,EAAE,OACxB,EACA,SAAU,GAAqC,IAAtB,EAAW,MAAM,CAC1C,MAA6B,IAAtB,EAAW,MAAM,CAAS,CAAE,QAAS,GAAK,OAAQ,aAAc,EAAI,CAAC,WAE3E,EACC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kBAAsB,kBAIvC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oBAAW,OAAS,wBAK1C,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,IAAK,EACL,KAAK,OACL,QAAQ,CAAA,CAAA,EACR,OApYa,CAoYL,oFACR,MAAO,CAAE,QAAS,MAAO,EACzB,SAAU,UAKhB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,4BACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,kBACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,SACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,SACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,WACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,WACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,aACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,iBAGR,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACE,AAAqB,MAAX,MAAM,CACf,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,QAAS,EAAG,MAAO,CAAE,UAAW,SAAU,QAAS,OAAQ,MAAO,uBAAwB,WAAG,sEAKnG,EAAU,GAAG,CAAC,AAAC,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oBAAW,OAC1B,EAAI,IAAI,MAGb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0BAAkB,EAAI,IAAI,KAC9C,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAI,CAnQJ,AAAC,IACtB,GAAc,IAAV,EAAa,MAAO,UAGxB,IAAM,EAAI,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,GAAS,KAAK,GAAG,CAAC,OAChD,OAAO,KAAK,KAAK,CAAC,EAAQ,KAAK,GAAG,CAAC,AAHzB,KAG4B,GAAK,KAAO,IAAM,IAF1C,AAEgD,CAF/C,QAAS,KAAM,KAAM,KAAK,AAE0B,CAAC,EACtE,AADwE,GA8P9B,EAAI,IAAI,IAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAI,EAAI,UAAU,EAAI,MACvB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,UAAU,eACV,MAAO,CAAE,gBAAiB,EAAe,EAAI,MAAM,CAAE,WAEpD,EAAI,MAAM,KAGf,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAnQd,AADM,CAoQY,GApQR,KAoQmB,AApQd,EAoQkB,UAAU,EAnQtC,kBAAkB,CAAC,QAAS,CAAE,MAAO,QAAS,IAAK,UAAW,KAAM,SAAU,KAoQtE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,aAAa,MAAM,gBAAO,QAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,aAAa,MAAM,oBAAW,OAChD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,oBACV,MAAM,SACN,QAAS,IAAM,EAAqB,EAAI,EAAE,CAAE,EAAI,IAAI,WACrD,eA3BE,EAAI,EAAE,UAuCzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gCACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,yDACJ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACZ,EAAqB,GAAG,CAAC,AAAC,GACzB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAiB,UAAU,qBAAa,GAA9B,MAGf,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6BAAoB,oMAQtC,AAAc,gBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,uBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wBAAe,sDAIhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBAAY,OAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,yBACJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,qBACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAc,EAAU,MAAM,MAEhD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,sBACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAc,EAAU,MAAM,CAAC,CAAC,EAAK,IAAQ,EAAM,EAAI,UAAU,CAAE,QAErF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,aACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAc,EAAU,MAAM,CAAC,GAAkB,eAAb,EAAE,MAAM,EAAmB,MAAM,SAGzF,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,UAAU,gCAChB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,MAAQ,gCAIlB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBAAY,OAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,oBACJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,mBACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAa,aAE/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,gBACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAa,YAE/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,kBACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4BAAmB,iBAGvC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,UAAU,gCAChB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,OAAS,uBAInB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBAAY,OAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,gBACJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,iBACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAa,SAE/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,eACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAa,SAE/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,mBACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAa,cAGjC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,UAAU,gCAChB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,OAAS,8BAKrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+BACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,sBACJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAM,eACP,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,SAAS,aAAc,MACnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBAAc,wBAEhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAM,kBACP,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,SAAS,aAAc,MACnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBAAc,0BAEhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAM,kBACP,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,SAAS,aAAc,IACnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBAAc,yBAEhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAM,yBACP,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,SAAS,KAAK,OAAO,aAAc,KAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBAAc,+BAGlC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,UAAU,4BAChB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,OAAS,kCAOxB,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBAAgB,QAAS,IAAM,GAAmB,YAC/D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBAAgB,QAAS,AAAC,GAAM,EAAE,eAAe,aAC9D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,0BACJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAM,aACP,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,YAAY,mCACZ,MAAO,EACP,SAAU,AAAC,GAAM,EAAc,EAAE,MAAM,CAAC,KAAK,OAGjD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAM,gBACP,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACC,YAAY,oDACZ,MAAO,EACP,SAAU,AAAC,GAAM,EAAqB,EAAE,MAAM,CAAC,KAAK,EACpD,KAAM,OAGV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,mBACV,QAAS,IAAM,GAAmB,YACnC,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,mBACV,QAAS,EACT,SAAU,CAAC,EAAW,IAAI,YAC3B,4BAUjB,ED1oBe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAExB,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAW,QAAS,IAAM,EAAO,IAAI,MAG5C"}