module.exports=[71458,a=>{"use strict";var b,c,d,e,f,g,h,i,j,k,l=a.i(30703),m=a.i(57726),n=a.i(23155),o=a.i(64770),p=a.i(67155);let q={some:0,all:1};function r({text:a,className:b="",delay:c=0}){let d,e,f=(0,n.useRef)(null),g=function(a,{root:b,margin:c,amount:d,once:e=!1,initial:f=!1}={}){let[g,h]=(0,n.useState)(f);return(0,n.useEffect)(()=>{if(!a.current||e&&g)return;let f={root:b&&b.current||void 0,margin:c,amount:d};return function(a,b,{root:c,margin:d,amount:e="some"}={}){let f=(0,p.resolveElements)(a),g=new WeakMap,h=new IntersectionObserver(a=>{a.forEach(a=>{let c=g.get(a.target);if(!!c!==a.isIntersecting)if(a.isIntersecting){let c=b(a.target,a);"function"==typeof c?g.set(a.target,c):h.unobserve(a.target)}else"function"==typeof c&&(c(a),g.delete(a.target))})},{root:c,rootMargin:d,threshold:"number"==typeof e?e:q[e]});return f.forEach(a=>h.observe(a)),()=>h.disconnect()}(a.current,()=>(h(!0),e?void 0:()=>h(!1)),f)},[b,a,c,e,d]),g}(f,{once:!0});return(0,l.jsx)("div",{ref:f,className:b,children:(d=[],e=0,a.split(/(\*\*[^*]+\*\*|\*[^*]+\*|`[^`]+`|\[([^\]]+)\]\(([^)]+)\)|^[-•]\s+.*$|^\d+\.\s+.*$)/gm).forEach((a,b)=>{if(a)if(a.match(/^\*\*[^*]+\*\*$/))a.slice(2,-2).split(" ").forEach((a,f)=>{a.trim()&&(d.push((0,l.jsx)(o.motion.strong,{initial:{opacity:0,filter:"blur(10px)"},animate:g?{opacity:1,filter:"blur(0px)"}:{},transition:{duration:.3,delay:.03*e+c,ease:[.4,0,.2,1]},style:{display:"inline-block",marginRight:"0.25em"},className:"text-bold",children:a},`${b}-${f}-${e}`)),e++)});else if(a.match(/^\*[^*]+\*$/)&&!a.match(/^\*\*.*\*\*$/))a.slice(1,-1).split(" ").forEach((a,f)=>{a.trim()&&(d.push((0,l.jsx)(o.motion.em,{initial:{opacity:0,filter:"blur(10px)"},animate:g?{opacity:1,filter:"blur(0px)"}:{},transition:{duration:.3,delay:.03*e+c,ease:[.4,0,.2,1]},style:{display:"inline-block",marginRight:"0.25em"},className:"text-italic",children:a},`${b}-${f}-${e}`)),e++)});else if(a.match(/^`[^`]+`$/)){let f=a.slice(1,-1);d.push((0,l.jsx)(o.motion.code,{initial:{opacity:0,filter:"blur(10px)"},animate:g?{opacity:1,filter:"blur(0px)"}:{},transition:{duration:.3,delay:.03*e+c,ease:[.4,0,.2,1]},style:{display:"inline-block",marginRight:"0.25em"},className:"text-code",children:f},`${b}-${e}`)),e++}else if(a.match(/\[([^\]]+)\]\(([^)]+)\)/)){let f=a.match(/\[([^\]]+)\]\(([^)]+)\)/);if(f){let a=f[1],h=f[2];d.push((0,l.jsx)(o.motion.a,{href:h,target:"_blank",rel:"noopener noreferrer",initial:{opacity:0,filter:"blur(10px)"},animate:g?{opacity:1,filter:"blur(0px)"}:{},transition:{duration:.3,delay:.03*e+c,ease:[.4,0,.2,1]},style:{display:"inline-block",marginRight:"0.25em"},className:"text-link gradient-link",children:a},`${b}-${e}`)),e+=a.split(" ").length}}else if(a.match(/^[-•]\s+/)||a.match(/^\d+\.\s+/)){let f=a.match(/^\d+\.\s+/)?a.match(/^\d+\./)[0]:"•",h=a.replace(/^[-•]\s+|^\d+\.\s+/,"");d.push((0,l.jsxs)(o.motion.div,{initial:{opacity:0,filter:"blur(10px)"},animate:g?{opacity:1,filter:"blur(0px)"}:{},transition:{duration:.3,delay:.03*e+c,ease:[.4,0,.2,1]},className:"bullet-point",children:[(0,l.jsx)("span",{className:"bullet",children:f}),(0,l.jsx)("span",{className:"bullet-text",children:h})]},`${b}-${e}`)),e+=h.split(" ").length}else"\n"===a?d.push((0,l.jsx)("br",{},`br-${b}-${e}`)):a.split(/(\s+)/).forEach((a,f)=>{a.trim()?(d.push((0,l.jsx)(o.motion.span,{initial:{opacity:0,filter:"blur(10px)"},animate:g?{opacity:1,filter:"blur(0px)"}:{},transition:{duration:.3,delay:.03*e+c,ease:[.4,0,.2,1]},style:{display:"inline-block",marginRight:"0.25em"},children:a},`${b}-${f}-${e}`)),e++):" "===a&&d.push((0,l.jsx)("span",{children:" "},`space-${b}-${f}`))})}),d)})}var s=a.i(18258),t=a.i(88481),u=a.i(29677);function v(a){let b=(0,u.useConstant)(()=>(0,s.motionValue)(a)),{isStatic:c}=(0,n.useContext)(t.MotionConfigContext);if(c){let[,c]=(0,n.useState)(a);(0,n.useEffect)(()=>b.on("change",c),[])}return b}var w=a.i(45278),x=a.i(70692),y=a.i(42139);function z(a){return"number"==typeof a?a:parseFloat(a)}var A=a.i(94493),B=a.i(30480);function C(a,b){let c=v(b()),d=()=>c.set(b());return d(),(0,B.useIsomorphicLayoutEffect)(()=>{let b=()=>y.frame.preRender(d,!1,!0),c=a.map(a=>a.on("change",b));return()=>{c.forEach(a=>a()),(0,y.cancelFrame)(d)}}),c}function D(a,b,c,d){if("function"==typeof a){let b;return s.collectMotionValues.current=[],a(),b=C(s.collectMotionValues.current,a),s.collectMotionValues.current=void 0,b}let e="function"==typeof b?b:function(...a){let b=!Array.isArray(a[0]),c=b?0:-1,d=a[0+c],e=a[1+c],f=a[2+c],g=a[3+c],h=(0,A.interpolate)(e,f,g);return b?h(d):h}(b,c,d);return Array.isArray(a)?E(a,e):E([a],([a])=>e(a))}function E(a,b){let c=(0,u.useConstant)(()=>[]);return C(a,()=>{c.length=0;let d=a.length;for(let b=0;b<d;b++)c[b]=a[b].get();return b(c)})}function F(a,b={}){let{isStatic:c}=(0,n.useContext)(t.MotionConfigContext),d=()=>(0,x.isMotionValue)(a)?a.get():a;if(c)return D(d);let e=v(d());return(0,n.useInsertionEffect)(()=>(function(a,b,c){let d,e=a.get(),f=null,g=e,h="string"==typeof e?e.replace(/[\d.-]/g,""):void 0,i=()=>{f&&(f.stop(),f=null)},j=()=>{i(),f=new w.JSAnimation({keyframes:[z(a.get()),z(g)],velocity:a.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...c,onUpdate:d})};if(a.attach((a,b)=>{g=a,d=a=>{var c,d;return b((c=a,(d=h)?c+d:c))},y.frame.postRender(j)},i),(0,x.isMotionValue)(b)){let c=b.on("change",b=>{var c,d;return a.set((c=b,(d=h)?c+d:c))}),d=a.on("destroy",c);return()=>{c(),d()}}return i})(e,a,b),[e,JSON.stringify(b)]),e}var G=a.i(94836);function H({children:a,className:b="",onClick:c,mouseX:d,spring:e,distance:f,magnification:g,baseItemSize:h}){let i=(0,n.useRef)(null),j=v(0),k=D(d,a=>a-(i.current?.getBoundingClientRect()??{x:0,width:h}).x-h/2),m=F(D(k,[-f,0,f],[h,g,h]),e);return(0,l.jsx)(o.motion.div,{ref:i,style:{width:m,height:m},onHoverStart:()=>j.set(1),onHoverEnd:()=>j.set(0),onFocus:()=>j.set(1),onBlur:()=>j.set(0),onClick:c,className:`dock-item ${b}`,tabIndex:0,role:"button","aria-haspopup":"true",children:n.Children.map(a,a=>(0,n.cloneElement)(a,{isHovered:j}))})}function I({children:a,className:b="",...c}){let{isHovered:d}=c,[e,f]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let a=d.on("change",a=>{f(1===a)});return()=>a()},[d]),(0,l.jsx)(G.AnimatePresence,{children:e&&(0,l.jsx)(o.motion.div,{initial:{opacity:0,y:0},animate:{opacity:1,y:-10},exit:{opacity:0,y:0},transition:{duration:.2},className:`dock-label ${b}`,role:"tooltip",style:{x:"-50%"},children:a})})}function J({children:a,className:b=""}){return(0,l.jsx)("div",{className:`dock-icon ${b}`,children:a})}function K({items:a,className:b="",spring:c={mass:.1,stiffness:150,damping:12},magnification:d=70,distance:e=200,panelHeight:f=68,dockHeight:g=256,baseItemSize:h=50}){let i=v(1/0),j=v(0),k=F(D(j,[0,1],[f,(0,n.useMemo)(()=>Math.max(g,d+d/2+4),[d,g])]),c);return(0,l.jsx)(o.motion.div,{style:{height:k,scrollbarWidth:"none"},className:"dock-outer",children:(0,l.jsx)(o.motion.div,{onMouseMove:({pageX:a})=>{j.set(1),i.set(a)},onMouseLeave:()=>{j.set(0),i.set(1/0)},className:`dock-panel ${b}`,style:{height:f},role:"toolbar","aria-label":"Application dock",children:a.map((a,b)=>(0,l.jsxs)(H,{onClick:a.onClick,className:a.className,mouseX:i,spring:c,distance:e,magnification:d,baseItemSize:h,children:[(0,l.jsx)(J,{children:a.isImage?(0,l.jsx)("img",{src:a.icon,alt:a.label,style:{width:"100%",height:"100%",objectFit:"contain"}}):a.icon}),(0,l.jsx)(I,{children:a.label})]},b))})})}var L=a.i(64568),M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z=function(){return M||!1},$=1,_=[],aa=[],ab=[],ac=Date.now,ad=function(a,b){return b},ae=function(){var a=U.core,b=a.bridge||{},c=a._scrollers,d=a._proxies;c.push.apply(c,aa),d.push.apply(d,ab),aa=c,ab=d,ad=function(a,c){return b[a](c)}},af=function(a){return!!~V.indexOf(a)},ag=function(a,b,c,d,e){return a.addEventListener(b,c,{passive:!1!==d,capture:!!e})},ah=function(a,b,c,d){return a.removeEventListener(b,c,!!d)},ai="scrollLeft",aj="scrollTop",ak=function(){return W&&W.isPressed||aa.cache++},al=function(a,b){var c=function c(d){if(d||0===d){$&&(O.history.scrollRestoration="manual");var e=W&&W.isPressed;a(d=c.v=Math.round(d)||(W&&W.iOS?1:0)),c.cacheID=aa.cache,e&&ad("ss",d)}else(b||aa.cache!==c.cacheID||ad("ref"))&&(c.cacheID=aa.cache,c.v=a());return c.v+c.offset};return c.offset=0,a&&c},am={s:ai,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:al(function(a){return arguments.length?O.scrollTo(a,an.sc()):O.pageXOffset||P[ai]||Q[ai]||R[ai]||0})},an={s:aj,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:am,sc:al(function(a){return arguments.length?O.scrollTo(am.sc(),a):O.pageYOffset||P[aj]||Q[aj]||R[aj]||0})},ao=function(a,b){for(var c=b.length;c--;)if(b[c]===a||b[c].contains(a))return!0;return!1},ap=function(a,b){var c,d=b.s,e=b.sc;af(a)&&(a=P.scrollingElement||Q);var f=aa.indexOf(a),g=e===an.sc?1:2;~f||(f=aa.push(a)-1),aa[f+g]||ag(a,"scroll",ak);var h=aa[f+g],i=h||(aa[f+g]=al((c=a,~ab.indexOf(c)&&ab[ab.indexOf(c)+1][d]),!0)||(af(a)?e:al(function(b){return arguments.length?a[d]=b:a[d]})));return i.target=a,h||(i.smooth="smooth"===M.getProperty(a,"scrollBehavior")),i},aq=function(a,b,c){var d=a,e=a,f=ac(),g=f,h=b||50,i=Math.max(500,3*h),j=function(a,b){var i=ac();b||i-f>h?(e=d,d=a,g=f,f=i):c?d+=a:d=e+(a-e)/(i-g)*(f-g)};return{update:j,reset:function(){e=d=c?0:d,g=f=0},getVelocity:function(a){var b=g,h=e,k=ac();return(a||0===a)&&a!==d&&j(a),f===g||k-g>i?0:(d+(c?h:-h))/((c?k:f)-b)*1e3}}},ar=function(a,b){return b&&!a._gsapAllow&&a.preventDefault(),a.changedTouches?a.changedTouches[0]:a},as=function(a){var b=Math.max.apply(Math,a),c=Math.min.apply(Math,a);return Math.abs(b)>=Math.abs(c)?b:c},at=function(){(U=M.core.globals().ScrollTrigger)&&U.core&&ae()},au=function(a){return M=a||Z(),!N&&M&&"undefined"!=typeof document&&document.body&&(O=window,Q=(P=document).documentElement,R=P.body,V=[O,P,Q,R],M.utils.clamp,Y=M.core.context||function(){},T="onpointerenter"in R?"pointer":"mouse",S=av.isTouch=O.matchMedia&&O.matchMedia("(hover: none), (pointer: coarse)").matches?1:2*("ontouchstart"in O||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),X=av.eventTypes=("ontouchstart"in Q?"touchstart,touchmove,touchcancel,touchend":!("onpointerdown"in Q)?"mousedown,mousemove,mouseup,mouseup":"pointerdown,pointermove,pointercancel,pointerup").split(","),setTimeout(function(){return $=0},500),at(),N=1),N};am.op=an,aa.cache=0;var av=function(){var a;function b(a){this.init(a)}return b.prototype.init=function(a){N||au(M)||console.warn("Please gsap.registerPlugin(Observer)"),U||at();var b=a.tolerance,c=a.dragMinimum,d=a.type,e=a.target,f=a.lineHeight,g=a.debounce,h=a.preventDefault,i=a.onStop,j=a.onStopDelay,k=a.ignore,l=a.wheelSpeed,m=a.event,n=a.onDragStart,o=a.onDragEnd,p=a.onDrag,q=a.onPress,r=a.onRelease,s=a.onRight,t=a.onLeft,u=a.onUp,v=a.onDown,w=a.onChangeX,x=a.onChangeY,y=a.onChange,z=a.onToggleX,A=a.onToggleY,B=a.onHover,C=a.onHoverEnd,D=a.onMove,E=a.ignoreCheck,F=a.isNormalizer,G=a.onGestureStart,H=a.onGestureEnd,I=a.onWheel,J=a.onEnable,K=a.onDisable,L=a.onClick,V=a.scrollSpeed,Z=a.capture,$=a.allowClicks,aa=a.lockAxis,ab=a.onLockAxis;this.target=(ad=e,e=(0,M.utils.toArray)(ad)[0]||("string"==typeof ad&&!1!==M.config().nullTargetWarn?console.warn("Element not found:",ad):null)||Q),this.vars=a,k&&(k=M.utils.toArray(k)),b=b||1e-9,c=c||0,l=l||1,V=V||1,d=d||"wheel,touch,pointer",g=!1!==g,f||(f=parseFloat(O.getComputedStyle(R).lineHeight)||22);var ad,ae,ai,aj,al,av,aw,ax,ay=this,az=0,aA=0,aB=a.passive||!h&&!1!==a.passive,aC=ap(e,am),aD=ap(e,an),aE=aC(),aF=aD(),aG=~d.indexOf("touch")&&!~d.indexOf("pointer")&&"pointerdown"===X[0],aH=af(e),aI=e.ownerDocument||P,aJ=[0,0,0],aK=[0,0,0],aL=0,aM=function(){return aL=ac()},aN=function(a,b){return(ay.event=a)&&k&&ao(a.target,k)||b&&aG&&"touch"!==a.pointerType||E&&E(a,b)},aO=function(){var a=ay.deltaX=as(aJ),c=ay.deltaY=as(aK),d=Math.abs(a)>=b,e=Math.abs(c)>=b;y&&(d||e)&&y(ay,a,c,aJ,aK),d&&(s&&ay.deltaX>0&&s(ay),t&&ay.deltaX<0&&t(ay),w&&w(ay),z&&ay.deltaX<0!=az<0&&z(ay),az=ay.deltaX,aJ[0]=aJ[1]=aJ[2]=0),e&&(v&&ay.deltaY>0&&v(ay),u&&ay.deltaY<0&&u(ay),x&&x(ay),A&&ay.deltaY<0!=aA<0&&A(ay),aA=ay.deltaY,aK[0]=aK[1]=aK[2]=0),(al||aj)&&(D&&D(ay),aj&&(n&&1===aj&&n(ay),p&&p(ay),aj=0),al=!1),aw&&(aw=!1,1)&&ab&&ab(ay),av&&(I(ay),av=!1),ae=0},aP=function(a,b,c){aJ[c]+=a,aK[c]+=b,ay._vx.update(a),ay._vy.update(b),g?ae||(ae=requestAnimationFrame(aO)):aO()},aQ=function(a,b){aa&&!ax&&(ay.axis=ax=Math.abs(a)>Math.abs(b)?"x":"y",aw=!0),"y"!==ax&&(aJ[2]+=a,ay._vx.update(a,!0)),"x"!==ax&&(aK[2]+=b,ay._vy.update(b,!0)),g?ae||(ae=requestAnimationFrame(aO)):aO()},aR=function(a){if(!aN(a,1)){var b=(a=ar(a,h)).clientX,d=a.clientY,e=b-ay.x,f=d-ay.y,g=ay.isDragging;ay.x=b,ay.y=d,(g||(e||f)&&(Math.abs(ay.startX-b)>=c||Math.abs(ay.startY-d)>=c))&&(aj=g?2:1,g||(ay.isDragging=!0),aQ(e,f))}},aS=ay.onPress=function(a){aN(a,1)||a&&a.button||(ay.axis=ax=null,ai.pause(),ay.isPressed=!0,a=ar(a),az=aA=0,ay.startX=ay.x=a.clientX,ay.startY=ay.y=a.clientY,ay._vx.reset(),ay._vy.reset(),ag(F?e:aI,X[1],aR,aB,!0),ay.deltaX=ay.deltaY=0,q&&q(ay))},aT=ay.onRelease=function(a){if(!aN(a,1)){ah(F?e:aI,X[1],aR,!0);var b=!isNaN(ay.y-ay.startY),c=ay.isDragging,d=c&&(Math.abs(ay.x-ay.startX)>3||Math.abs(ay.y-ay.startY)>3),f=ar(a);!d&&b&&(ay._vx.reset(),ay._vy.reset(),h&&$&&M.delayedCall(.08,function(){if(ac()-aL>300&&!a.defaultPrevented){if(a.target.click)a.target.click();else if(aI.createEvent){var b=aI.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,O,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(b)}}})),ay.isDragging=ay.isGesturing=ay.isPressed=!1,i&&c&&!F&&ai.restart(!0),aj&&aO(),o&&c&&o(ay),r&&r(ay,d)}},aU=function(a){return a.touches&&a.touches.length>1&&(ay.isGesturing=!0)&&G(a,ay.isDragging)},aV=function(){return ay.isGesturing=!1,H(ay)},aW=function(a){if(!aN(a)){var b=aC(),c=aD();aP((b-aE)*V,(c-aF)*V,1),aE=b,aF=c,i&&ai.restart(!0)}},aX=function(a){if(!aN(a)){a=ar(a,h),I&&(av=!0);var b=(1===a.deltaMode?f:2===a.deltaMode?O.innerHeight:1)*l;aP(a.deltaX*b,a.deltaY*b,0),i&&!F&&ai.restart(!0)}},aY=function(a){if(!aN(a)){var b=a.clientX,c=a.clientY,d=b-ay.x,e=c-ay.y;ay.x=b,ay.y=c,al=!0,i&&ai.restart(!0),(d||e)&&aQ(d,e)}},aZ=function(a){ay.event=a,B(ay)},a$=function(a){ay.event=a,C(ay)},a_=function(a){return aN(a)||ar(a,h)&&L(ay)};ai=ay._dc=M.delayedCall(j||.25,function(){ay._vx.reset(),ay._vy.reset(),ai.pause(),i&&i(ay)}).pause(),ay.deltaX=ay.deltaY=0,ay._vx=aq(0,50,!0),ay._vy=aq(0,50,!0),ay.scrollX=aC,ay.scrollY=aD,ay.isDragging=ay.isGesturing=ay.isPressed=!1,Y(this),ay.enable=function(a){return!ay.isEnabled&&(ag(aH?aI:e,"scroll",ak),d.indexOf("scroll")>=0&&ag(aH?aI:e,"scroll",aW,aB,Z),d.indexOf("wheel")>=0&&ag(e,"wheel",aX,aB,Z),(d.indexOf("touch")>=0&&S||d.indexOf("pointer")>=0)&&(ag(e,X[0],aS,aB,Z),ag(aI,X[2],aT),ag(aI,X[3],aT),$&&ag(e,"click",aM,!0,!0),L&&ag(e,"click",a_),G&&ag(aI,"gesturestart",aU),H&&ag(aI,"gestureend",aV),B&&ag(e,T+"enter",aZ),C&&ag(e,T+"leave",a$),D&&ag(e,T+"move",aY)),ay.isEnabled=!0,ay.isDragging=ay.isGesturing=ay.isPressed=al=aj=!1,ay._vx.reset(),ay._vy.reset(),aE=aC(),aF=aD(),a&&a.type&&aS(a),J&&J(ay)),ay},ay.disable=function(){ay.isEnabled&&(_.filter(function(a){return a!==ay&&af(a.target)}).length||ah(aH?aI:e,"scroll",ak),ay.isPressed&&(ay._vx.reset(),ay._vy.reset(),ah(F?e:aI,X[1],aR,!0)),ah(aH?aI:e,"scroll",aW,Z),ah(e,"wheel",aX,Z),ah(e,X[0],aS,Z),ah(aI,X[2],aT),ah(aI,X[3],aT),ah(e,"click",aM,!0),ah(e,"click",a_),ah(aI,"gesturestart",aU),ah(aI,"gestureend",aV),ah(e,T+"enter",aZ),ah(e,T+"leave",a$),ah(e,T+"move",aY),ay.isEnabled=ay.isPressed=ay.isDragging=!1,K&&K(ay))},ay.kill=ay.revert=function(){ay.disable();var a=_.indexOf(ay);a>=0&&_.splice(a,1),W===ay&&(W=0)},_.push(ay),F&&af(e)&&(W=ay),ay.enable(m)},a=[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}],function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}(b.prototype,a),b}();av.version="3.13.0",av.create=function(a){return new av(a)},av.register=au,av.getAll=function(){return _.slice()},av.getById=function(a){return _.filter(function(b){return b.vars.id===a})[0]},Z()&&M.registerPlugin(av),L.gsap.registerPlugin(av);let aw=({width:a="30rem",maxHeight:b="100%",negativeMargin:c="-0.5em",items:d=[],itemMinHeight:e=150,isTilted:f=!1,tiltDirection:g="left",autoplay:h=!1,autoplaySpeed:i=.5,autoplayDirection:j="down",pauseOnHover:k=!1})=>{let m=(0,n.useRef)(null),o=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let a=o.current;if(!a||0===d.length)return;let b=L.gsap.utils.toArray(a.children);if(!b.length)return;let c=b[0],e=getComputedStyle(c),f=c.offsetHeight,g=parseFloat(e.marginTop)||0,l=f+g,m=f*d.length+g*(d.length-1),n=L.gsap.utils.wrap(-m,m);b.forEach((a,b)=>{L.gsap.set(a,{y:b*l})});let p=av.create({target:a,type:"wheel,touch,pointer",preventDefault:!0,onPress:({target:a})=>{a.style.cursor="grabbing"},onRelease:({target:a})=>{a.style.cursor="grab"},onChange:({deltaY:a,isDragging:c,event:d})=>{let e="wheel"===d.type?-a:a,f=c?5*e:10*e;b.forEach(a=>{L.gsap.to(a,{duration:.5,ease:"expo.out",y:`+=${f}`,modifiers:{y:L.gsap.utils.unitize(n)}})})}}),q=null;if(h){let c=i*("down"===j?1:-1),d=()=>{b.forEach(a=>{L.gsap.set(a,{y:`+=${c}`,modifiers:{y:L.gsap.utils.unitize(n)}})}),q=requestAnimationFrame(d)};if(q=requestAnimationFrame(d),!k)return()=>{p.kill(),q&&cancelAnimationFrame(q)};{let b=()=>q&&cancelAnimationFrame(q),c=()=>q=requestAnimationFrame(d);return a.addEventListener("mouseenter",b),a.addEventListener("mouseleave",c),()=>{p.kill(),b(),a.removeEventListener("mouseenter",b),a.removeEventListener("mouseleave",c)}}}return()=>{p.kill(),q&&cancelAnimationFrame(q)}},[d,h,i,j,k,f,g,c]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("style",{children:`
        .infinite-scroll-wrapper {
          max-height: ${b};
        }

        .infinite-scroll-container {
          width: ${a};
        }

        .infinite-scroll-item {
          height: ${e}px;
          margin-top: ${c};
        }
        `}),(0,l.jsx)("div",{className:"infinite-scroll-wrapper",ref:m,children:(0,l.jsx)("div",{className:"infinite-scroll-container",ref:o,style:{transform:f?"left"===g?"rotateX(20deg) rotateZ(-20deg) skewX(20deg)":"rotateX(20deg) rotateZ(20deg) skewX(-20deg)":"none"},children:d.map((a,b)=>(0,l.jsx)("div",{className:"infinite-scroll-item",children:a.content},b))})})]})};var ax="undefined"!=typeof Float32Array?Float32Array:Array,ay=Math.random;function az(a){return a>=0?Math.round(a):a%.5==0?Math.floor(a):Math.round(a)}function aA(){var a=new ax(16);return ax!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a}function aB(a){var b=new ax(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b}function aC(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a}function aD(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=new ax(16);return q[0]=a,q[1]=b,q[2]=c,q[3]=d,q[4]=e,q[5]=f,q[6]=g,q[7]=h,q[8]=i,q[9]=j,q[10]=k,q[11]=l,q[12]=m,q[13]=n,q[14]=o,q[15]=p,q}function aE(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a[4]=f,a[5]=g,a[6]=h,a[7]=i,a[8]=j,a[9]=k,a[10]=l,a[11]=m,a[12]=n,a[13]=o,a[14]=p,a[15]=q,a}function aF(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function aG(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a}function aH(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null}function aI(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q;return a[0]=h*D-i*C+j*B,a[1]=e*C-d*D-f*B,a[2]=p*x-q*w+r*v,a[3]=m*w-l*x-n*v,a[4]=i*A-g*D-j*z,a[5]=c*D-e*A+f*z,a[6]=q*u-o*x-r*t,a[7]=k*x-m*u+n*t,a[8]=g*C-h*A+j*y,a[9]=d*A-c*C-f*y,a[10]=o*w-p*u+r*s,a[11]=l*u-k*w-n*s,a[12]=h*z-g*B-i*y,a[13]=c*B-d*z+e*y,a[14]=p*t-o*v-q*s,a[15]=k*v-l*t+m*s,a}function aJ(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15],r=b*g-c*f,s=b*h-d*f,t=c*h-d*g,u=j*o-k*n,v=j*p-l*n,w=k*p-l*o;return i*(b*w-c*v+d*u)-e*(f*w-g*v+h*u)+q*(j*t-k*s+l*r)-m*(n*t-o*s+p*r)}function aK(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a}function aL(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a}function aM(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a}function aN(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=d[0],D=d[1],E=d[2],F=Math.sqrt(C*C+D*D+E*E);return F<1e-6?null:(C*=F=1/F,D*=F,E*=F,e=Math.sin(c),g=1-(f=Math.cos(c)),h=b[0],i=b[1],j=b[2],k=b[3],l=b[4],m=b[5],n=b[6],o=b[7],p=b[8],q=b[9],r=b[10],s=b[11],t=C*C*g+f,u=D*C*g+E*e,v=E*C*g-D*e,w=C*D*g-E*e,x=D*D*g+f,y=E*D*g+C*e,z=C*E*g+D*e,A=D*E*g-C*e,B=E*E*g+f,a[0]=h*t+l*u+p*v,a[1]=i*t+m*u+q*v,a[2]=j*t+n*u+r*v,a[3]=k*t+o*u+s*v,a[4]=h*w+l*x+p*y,a[5]=i*w+m*x+q*y,a[6]=j*w+n*x+r*y,a[7]=k*w+o*x+s*y,a[8]=h*z+l*A+p*B,a[9]=i*z+m*A+q*B,a[10]=j*z+n*A+r*B,a[11]=k*z+o*A+s*B,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)}function aO(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a}function aP(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a}function aQ(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a}function aR(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a}function aS(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=b[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function aT(a,b,c){var d,e,f,g=c[0],h=c[1],i=c[2],j=Math.sqrt(g*g+h*h+i*i);return j<1e-6?null:(g*=j=1/j,h*=j,i*=j,d=Math.sin(b),f=1-(e=Math.cos(b)),a[0]=g*g*f+e,a[1]=h*g*f+i*d,a[2]=i*g*f-h*d,a[3]=0,a[4]=g*h*f-i*d,a[5]=h*h*f+e,a[6]=i*h*f+g*d,a[7]=0,a[8]=g*i*f+h*d,a[9]=h*i*f-g*d,a[10]=i*i*f+e,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}function aU(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=d,a[6]=c,a[7]=0,a[8]=0,a[9]=-c,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function aV(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=0,a[2]=-c,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=c,a[9]=0,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function aW(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=0,a[4]=-c,a[5]=d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function aX(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a}function aY(a,b){var c=new ax(3),d=-b[0],e=-b[1],f=-b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=d*d+e*e+f*f+g*g;return l>0?(c[0]=(h*g+k*d+i*f-j*e)*2/l,c[1]=(i*g+k*e+j*d-h*f)*2/l,c[2]=(j*g+k*f+h*e-i*d)*2/l):(c[0]=(h*g+k*d+i*f-j*e)*2,c[1]=(i*g+k*e+j*d-h*f)*2,c[2]=(j*g+k*f+h*e-i*d)*2),aX(a,b,c),a}function aZ(a,b){return a[0]=b[12],a[1]=b[13],a[2]=b[14],a}function a$(a,b){var c=b[0],d=b[1],e=b[2],f=b[4],g=b[5],h=b[6],i=b[8],j=b[9],k=b[10];return a[0]=Math.sqrt(c*c+d*d+e*e),a[1]=Math.sqrt(f*f+g*g+h*h),a[2]=Math.sqrt(i*i+j*j+k*k),a}function a_(a,b){var c=new ax(3);a$(c,b);var d=1/c[0],e=1/c[1],f=1/c[2],g=b[0]*d,h=b[1]*e,i=b[2]*f,j=b[4]*d,k=b[5]*e,l=b[6]*f,m=b[8]*d,n=b[9]*e,o=b[10]*f,p=g+k+o,q=0;return p>0?(q=2*Math.sqrt(p+1),a[3]=.25*q,a[0]=(l-n)/q,a[1]=(m-i)/q,a[2]=(h-j)/q):g>k&&g>o?(q=2*Math.sqrt(1+g-k-o),a[3]=(l-n)/q,a[0]=.25*q,a[1]=(h+j)/q,a[2]=(m+i)/q):k>o?(q=2*Math.sqrt(1+k-g-o),a[3]=(m-i)/q,a[0]=(h+j)/q,a[1]=.25*q,a[2]=(l+n)/q):(q=2*Math.sqrt(1+o-g-k),a[3]=(h-j)/q,a[0]=(m+i)/q,a[1]=(l+n)/q,a[2]=.25*q),a}function a0(a,b,c,d){b[0]=d[12],b[1]=d[13],b[2]=d[14];var e=d[0],f=d[1],g=d[2],h=d[4],i=d[5],j=d[6],k=d[8],l=d[9],m=d[10];c[0]=Math.sqrt(e*e+f*f+g*g),c[1]=Math.sqrt(h*h+i*i+j*j),c[2]=Math.sqrt(k*k+l*l+m*m);var n=1/c[0],o=1/c[1],p=1/c[2],q=e*n,r=f*o,s=g*p,t=h*n,u=i*o,v=j*p,w=k*n,x=l*o,y=m*p,z=q+u+y,A=0;return z>0?(A=2*Math.sqrt(z+1),a[3]=.25*A,a[0]=(v-x)/A,a[1]=(w-s)/A,a[2]=(r-t)/A):q>u&&q>y?(A=2*Math.sqrt(1+q-u-y),a[3]=(v-x)/A,a[0]=.25*A,a[1]=(r+t)/A,a[2]=(w+s)/A):u>y?(A=2*Math.sqrt(1+u-q-y),a[3]=(w-s)/A,a[0]=(r+t)/A,a[1]=.25*A,a[2]=(v+x)/A):(A=2*Math.sqrt(1+y-q-u),a[3]=(r-t)/A,a[0]=(w+s)/A,a[1]=(v+x)/A,a[2]=.25*A),a}function a1(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3],i=e+e,j=f+f,k=g+g,l=e*i,m=e*j,n=e*k,o=f*j,p=f*k,q=g*k,r=h*i,s=h*j,t=h*k,u=d[0],v=d[1],w=d[2];return a[0]=(1-(o+q))*u,a[1]=(m+t)*u,a[2]=(n-s)*u,a[3]=0,a[4]=(m-t)*v,a[5]=(1-(l+q))*v,a[6]=(p+r)*v,a[7]=0,a[8]=(n+s)*w,a[9]=(p-r)*w,a[10]=(1-(l+o))*w,a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a}function a2(a,b,c,d,e){var f=b[0],g=b[1],h=b[2],i=b[3],j=f+f,k=g+g,l=h+h,m=f*j,n=f*k,o=f*l,p=g*k,q=g*l,r=h*l,s=i*j,t=i*k,u=i*l,v=d[0],w=d[1],x=d[2],y=e[0],z=e[1],A=e[2],B=(1-(p+r))*v,C=(n+u)*v,D=(o-t)*v,E=(n-u)*w,F=(1-(m+r))*w,G=(q+s)*w,H=(o+t)*x,I=(q-s)*x,J=(1-(m+p))*x;return a[0]=B,a[1]=C,a[2]=D,a[3]=0,a[4]=E,a[5]=F,a[6]=G,a[7]=0,a[8]=H,a[9]=I,a[10]=J,a[11]=0,a[12]=c[0]+y-(B*y+E*z+H*A),a[13]=c[1]+z-(C*y+F*z+I*A),a[14]=c[2]+A-(D*y+G*z+J*A),a[15]=1,a}function a3(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[1]=k+r,a[2]=m-q,a[3]=0,a[4]=k-r,a[5]=1-j-o,a[6]=n+p,a[7]=0,a[8]=m+q,a[9]=n-p,a[10]=1-j-l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function a4(a,b,c,d,e,f,g){var h=1/(c-b),i=1/(e-d),j=1/(f-g);return a[0]=2*f*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*f*i,a[6]=0,a[7]=0,a[8]=(c+b)*h,a[9]=(e+d)*i,a[10]=(g+f)*j,a[11]=-1,a[12]=0,a[13]=0,a[14]=g*f*2*j,a[15]=0,a}function a5(a,b,c,d,e){var f=1/Math.tan(b/2);if(a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,null!=e&&e!==1/0){var g=1/(d-e);a[10]=(e+d)*g,a[14]=2*e*d*g}else a[10]=-1,a[14]=-2*d;return a}function a6(a,b,c,d,e){var f=1/Math.tan(b/2);if(a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,null!=e&&e!==1/0){var g=1/(d-e);a[10]=e*g,a[14]=e*d*g}else a[10]=-1,a[14]=-d;return a}function a7(a,b,c,d){var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180),h=Math.tan(b.rightDegrees*Math.PI/180),i=2/(g+h),j=2/(e+f);return a[0]=i,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=j,a[6]=0,a[7]=0,a[8]=-((g-h)*i*.5),a[9]=(e-f)*j*.5,a[10]=d/(c-d),a[11]=-1,a[12]=0,a[13]=0,a[14]=d*c/(c-d),a[15]=0,a}function a8(a,b,c,d,e,f,g){var h=1/(b-c),i=1/(d-e),j=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*j,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*i,a[14]=(g+f)*j,a[15]=1,a}function a9(a,b,c,d,e,f,g){var h=1/(b-c),i=1/(d-e),j=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=j,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*i,a[14]=f*j,a[15]=1,a}function ba(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o=b[0],p=b[1],q=b[2],r=d[0],s=d[1],t=d[2],u=c[0],v=c[1],w=c[2];return 1e-6>Math.abs(o-u)&&1e-6>Math.abs(p-v)&&1e-6>Math.abs(q-w)?aF(a):(n=1/Math.sqrt((k=o-u)*k+(l=p-v)*l+(m=q-w)*m),k*=n,l*=n,m*=n,(n=Math.sqrt((e=s*m-t*l)*e+(f=t*k-r*m)*f+(g=r*l-s*k)*g))?(e*=n=1/n,f*=n,g*=n):(e=0,f=0,g=0),(n=Math.sqrt((h=l*g-m*f)*h+(i=m*e-k*g)*i+(j=k*f-l*e)*j))?(h*=n=1/n,i*=n,j*=n):(h=0,i=0,j=0),a[0]=e,a[1]=h,a[2]=k,a[3]=0,a[4]=f,a[5]=i,a[6]=l,a[7]=0,a[8]=g,a[9]=j,a[10]=m,a[11]=0,a[12]=-(e*o+f*p+g*q),a[13]=-(h*o+i*p+j*q),a[14]=-(k*o+l*p+m*q),a[15]=1,a)}function bb(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=d[0],i=d[1],j=d[2],k=e-c[0],l=f-c[1],m=g-c[2],n=k*k+l*l+m*m;n>0&&(k*=n=1/Math.sqrt(n),l*=n,m*=n);var o=i*m-j*l,p=j*k-h*m,q=h*l-i*k;return(n=o*o+p*p+q*q)>0&&(o*=n=1/Math.sqrt(n),p*=n,q*=n),a[0]=o,a[1]=p,a[2]=q,a[3]=0,a[4]=l*q-m*p,a[5]=m*o-k*q,a[6]=k*p-l*o,a[7]=0,a[8]=k,a[9]=l,a[10]=m,a[11]=0,a[12]=e,a[13]=f,a[14]=g,a[15]=1,a}function bc(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function bd(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3]+a[4]*a[4]+a[5]*a[5]+a[6]*a[6]+a[7]*a[7]+a[8]*a[8]+a[9]*a[9]+a[10]*a[10]+a[11]*a[11]+a[12]*a[12]+a[13]*a[13]+a[14]*a[14]+a[15]*a[15])}function be(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a[8]=b[8]+c[8],a[9]=b[9]+c[9],a[10]=b[10]+c[10],a[11]=b[11]+c[11],a[12]=b[12]+c[12],a[13]=b[13]+c[13],a[14]=b[14]+c[14],a[15]=b[15]+c[15],a}function bf(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a[6]=b[6]-c[6],a[7]=b[7]-c[7],a[8]=b[8]-c[8],a[9]=b[9]-c[9],a[10]=b[10]-c[10],a[11]=b[11]-c[11],a[12]=b[12]-c[12],a[13]=b[13]-c[13],a[14]=b[14]-c[14],a[15]=b[15]-c[15],a}function bg(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*c,a[9]=b[9]*c,a[10]=b[10]*c,a[11]=b[11]*c,a[12]=b[12]*c,a[13]=b[13]*c,a[14]=b[14]*c,a[15]=b[15]*c,a}function bh(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a[6]=b[6]+c[6]*d,a[7]=b[7]+c[7]*d,a[8]=b[8]+c[8]*d,a[9]=b[9]+c[9]*d,a[10]=b[10]+c[10]*d,a[11]=b[11]+c[11]*d,a[12]=b[12]+c[12]*d,a[13]=b[13]+c[13]*d,a[14]=b[14]+c[14]*d,a[15]=b[15]+c[15]*d,a}function bi(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]}function bj(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=a[9],m=a[10],n=a[11],o=a[12],p=a[13],q=a[14],r=a[15],s=b[0],t=b[1],u=b[2],v=b[3],w=b[4],x=b[5],y=b[6],z=b[7],A=b[8],B=b[9],C=b[10],D=b[11],E=b[12],F=b[13],G=b[14],H=b[15];return Math.abs(c-s)<=1e-6*Math.max(1,Math.abs(c),Math.abs(s))&&Math.abs(d-t)<=1e-6*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(e-u)<=1e-6*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(f-v)<=1e-6*Math.max(1,Math.abs(f),Math.abs(v))&&Math.abs(g-w)<=1e-6*Math.max(1,Math.abs(g),Math.abs(w))&&Math.abs(h-x)<=1e-6*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(i-y)<=1e-6*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(j-z)<=1e-6*Math.max(1,Math.abs(j),Math.abs(z))&&Math.abs(k-A)<=1e-6*Math.max(1,Math.abs(k),Math.abs(A))&&Math.abs(l-B)<=1e-6*Math.max(1,Math.abs(l),Math.abs(B))&&Math.abs(m-C)<=1e-6*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(n-D)<=1e-6*Math.max(1,Math.abs(n),Math.abs(D))&&Math.abs(o-E)<=1e-6*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(p-F)<=1e-6*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(q-G)<=1e-6*Math.max(1,Math.abs(q),Math.abs(G))&&Math.abs(r-H)<=1e-6*Math.max(1,Math.abs(r),Math.abs(H))}a.s(["add",()=>be,"adjoint",()=>aI,"clone",()=>aB,"copy",()=>aC,"create",()=>aA,"decompose",()=>a0,"determinant",()=>aJ,"equals",()=>bj,"exactEquals",()=>bi,"frob",()=>bd,"fromQuat",()=>a3,"fromQuat2",()=>aY,"fromRotation",()=>aT,"fromRotationTranslation",()=>aX,"fromRotationTranslationScale",()=>a1,"fromRotationTranslationScaleOrigin",()=>a2,"fromScaling",()=>aS,"fromTranslation",()=>aR,"fromValues",()=>aD,"fromXRotation",()=>aU,"fromYRotation",()=>aV,"fromZRotation",()=>aW,"frustum",()=>a4,"getRotation",()=>a_,"getScaling",()=>a$,"getTranslation",()=>aZ,"identity",()=>aF,"invert",()=>aH,"lookAt",()=>ba,"mul",()=>aK,"multiply",()=>aK,"multiplyScalar",()=>bg,"multiplyScalarAndAdd",()=>bh,"ortho",()=>a8,"orthoNO",()=>a8,"orthoZO",()=>a9,"perspective",()=>a5,"perspectiveFromFieldOfView",()=>a7,"perspectiveNO",()=>a5,"perspectiveZO",()=>a6,"rotate",()=>aN,"rotateX",()=>aO,"rotateY",()=>aP,"rotateZ",()=>aQ,"scale",()=>aM,"set",()=>aE,"str",()=>bc,"sub",()=>bf,"subtract",()=>bf,"targetTo",()=>bb,"translate",()=>aL,"transpose",()=>aG],3600);var bk=a.i(3600),bk=bk;function bl(){var a=new ax(3);return ax!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function bm(a){var b=new ax(3);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b}function bn(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)}function bo(a,b,c){var d=new ax(3);return d[0]=a,d[1]=b,d[2]=c,d}function bp(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a}function bq(a,b,c,d){return a[0]=b,a[1]=c,a[2]=d,a}function br(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a}function bs(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a}function bt(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a}function bu(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a}function bv(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a[2]=Math.ceil(b[2]),a}function bw(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a[2]=Math.floor(b[2]),a}function bx(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a}function by(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a}function bz(a,b){return a[0]=az(b[0]),a[1]=az(b[1]),a[2]=az(b[2]),a}function bA(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a}function bB(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a}function bC(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)}function bD(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e}function bE(a){var b=a[0],c=a[1],d=a[2];return b*b+c*c+d*d}function bF(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a}function bG(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a}function bH(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f)),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f,a}function bI(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function bJ(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a}function bK(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a}function bL(a,b,c,d){var e=Math.acos(Math.min(Math.max(bI(b,c),-1),1)),f=Math.sin(e),g=Math.sin((1-d)*e)/f,h=Math.sin(d*e)/f;return a[0]=g*b[0]+h*c[0],a[1]=g*b[1]+h*c[1],a[2]=g*b[2]+h*c[2],a}function bM(a,b,c,d,e,f){var g=f*f,h=g*(2*f-3)+1,i=g*(f-2)+f,j=g*(f-1),k=g*(3-2*f);return a[0]=b[0]*h+c[0]*i+d[0]*j+e[0]*k,a[1]=b[1]*h+c[1]*i+d[1]*j+e[1]*k,a[2]=b[2]*h+c[2]*i+d[2]*j+e[2]*k,a}function bN(a,b,c,d,e,f){var g=1-f,h=g*g,i=f*f,j=h*g,k=3*f*h,l=3*i*g,m=i*f;return a[0]=b[0]*j+c[0]*k+d[0]*l+e[0]*m,a[1]=b[1]*j+c[1]*k+d[1]*l+e[1]*m,a[2]=b[2]*j+c[2]*k+d[2]*l+e[2]*m,a}function bO(a,b){b=void 0===b?1:b;var c=2*ay()*Math.PI,d=2*ay()-1,e=Math.sqrt(1-d*d)*b;return a[0]=Math.cos(c)*e,a[1]=Math.sin(c)*e,a[2]=d*b,a}function bP(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[3]*d+c[7]*e+c[11]*f+c[15];return g=g||1,a[0]=(c[0]*d+c[4]*e+c[8]*f+c[12])/g,a[1]=(c[1]*d+c[5]*e+c[9]*f+c[13])/g,a[2]=(c[2]*d+c[6]*e+c[10]*f+c[14])/g,a}function bQ(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=d*c[0]+e*c[3]+f*c[6],a[1]=d*c[1]+e*c[4]+f*c[7],a[2]=d*c[2]+e*c[5]+f*c[8],a}function bR(a,b,c){var d=c[0],e=c[1],f=c[2],g=c[3],h=b[0],i=b[1],j=b[2],k=e*j-f*i,l=f*h-d*j,m=d*i-e*h;return k+=k,l+=l,m+=m,a[0]=h+g*k+e*m-f*l,a[1]=i+g*l+f*k-d*m,a[2]=j+g*m+d*l-e*k,a}function bS(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0],f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d),f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a}function bT(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d),f[1]=e[1],f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a}function bU(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d),f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d),f[2]=e[2],a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a}function bV(a,b){var c=a[0],d=a[1],e=a[2],f=b[0],g=b[1],h=b[2],i=Math.sqrt((c*c+d*d+e*e)*(f*f+g*g+h*h));return Math.acos(Math.min(Math.max(i&&bI(a,b)/i,-1),1))}function bW(a){return a[0]=0,a[1]=0,a[2]=0,a}function bX(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"}function bY(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]}function bZ(a,b){var c=a[0],d=a[1],e=a[2],f=b[0],g=b[1],h=b[2];return Math.abs(c-f)<=1e-6*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(d-g)<=1e-6*Math.max(1,Math.abs(d),Math.abs(g))&&Math.abs(e-h)<=1e-6*Math.max(1,Math.abs(e),Math.abs(h))}var b$=(b=bl(),function(a,c,d,e,f,g){var h,i;for(c||(c=3),d||(d=0),i=e?Math.min(e*c+d,a.length):a.length,h=d;h<i;h+=c)b[0]=a[h],b[1]=a[h+1],b[2]=a[h+2],f(b,b,g),a[h]=b[0],a[h+1]=b[1],a[h+2]=b[2];return a});function b_(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function b0(){var a=new ax(4);return ax!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function b1(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}function b2(a,b,c){var d=Math.sin(c*=.5);return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=Math.cos(c),a}function b3(a,b){var c=2*Math.acos(b[3]),d=Math.sin(c/2);return d>1e-6?(a[0]=b[0]/d,a[1]=b[1]/d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=0),c}function b4(a,b){var c=cq(a,b);return Math.acos(2*c*c-1)}function b5(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*k+g*h+e*j-f*i,a[1]=e*k+g*i+f*h-d*j,a[2]=f*k+g*j+d*i-e*h,a[3]=g*k-d*h-e*i-f*j,a}function b6(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+g*h,a[1]=e*i+f*h,a[2]=f*i-e*h,a[3]=g*i-d*h,a}function b7(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i-f*h,a[1]=e*i+g*h,a[2]=f*i+d*h,a[3]=g*i-e*h,a}function b8(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+e*h,a[1]=e*i-d*h,a[2]=f*i+g*h,a[3]=g*i-f*h,a}function b9(a,b){var c=b[0],d=b[1],e=b[2];return a[0]=c,a[1]=d,a[2]=e,a[3]=Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a}function ca(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=Math.sqrt(c*c+d*d+e*e),h=Math.exp(f),i=g>0?h*Math.sin(g)/g:0;return a[0]=c*i,a[1]=d*i,a[2]=e*i,a[3]=h*Math.cos(g),a}function cb(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=Math.sqrt(c*c+d*d+e*e),h=g>0?Math.atan2(g,f)/g:0;return a[0]=c*h,a[1]=d*h,a[2]=e*h,a[3]=.5*Math.log(c*c+d*d+e*e+f*f),a}function cc(a,b,c){return cb(a,b),cp(a,a,c),ca(a,a),a}function cd(a,b,c,d){var e,f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3];return(f=j*n+k*o+l*p+m*q)<0&&(f=-f,n=-n,o=-o,p=-p,q=-q),1-f>1e-6?(g=Math.sin(e=Math.acos(f)),h=Math.sin((1-d)*e)/g,i=Math.sin(d*e)/g):(h=1-d,i=d),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a}function ce(a){var b=ay(),c=ay(),d=ay(),e=Math.sqrt(1-b),f=Math.sqrt(b);return a[0]=e*Math.sin(2*Math.PI*c),a[1]=e*Math.cos(2*Math.PI*c),a[2]=f*Math.sin(2*Math.PI*d),a[3]=f*Math.cos(2*Math.PI*d),a}function cf(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,h=g?1/g:0;return a[0]=-c*h,a[1]=-d*h,a[2]=-e*h,a[3]=f*h,a}function cg(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a}function ch(a,b){var c,d=b[0]+b[4]+b[8];if(d>0)c=Math.sqrt(d+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var e=0;b[4]>b[0]&&(e=1),b[8]>b[3*e+e]&&(e=2);var f=(e+1)%3,g=(e+2)%3;c=Math.sqrt(b[3*e+e]-b[3*f+f]-b[3*g+g]+1),a[e]=.5*c,c=.5/c,a[3]=(b[3*f+g]-b[3*g+f])*c,a[f]=(b[3*f+e]+b[3*e+f])*c,a[g]=(b[3*g+e]+b[3*e+g])*c}return a}function ci(a,b,c,d){var e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"zyx",f=Math.PI/360;b*=f,d*=f;var g=Math.sin(b),h=Math.cos(b),i=Math.sin(c*=f),j=Math.cos(c),k=Math.sin(d),l=Math.cos(d);switch(e){case"xyz":a[0]=g*j*l+h*i*k,a[1]=h*i*l-g*j*k,a[2]=h*j*k+g*i*l,a[3]=h*j*l-g*i*k;break;case"xzy":a[0]=g*j*l-h*i*k,a[1]=h*i*l-g*j*k,a[2]=h*j*k+g*i*l,a[3]=h*j*l+g*i*k;break;case"yxz":a[0]=g*j*l+h*i*k,a[1]=h*i*l-g*j*k,a[2]=h*j*k-g*i*l,a[3]=h*j*l+g*i*k;break;case"yzx":a[0]=g*j*l+h*i*k,a[1]=h*i*l+g*j*k,a[2]=h*j*k-g*i*l,a[3]=h*j*l-g*i*k;break;case"zxy":a[0]=g*j*l-h*i*k,a[1]=h*i*l+g*j*k,a[2]=h*j*k+g*i*l,a[3]=h*j*l-g*i*k;break;case"zyx":a[0]=g*j*l-h*i*k,a[1]=h*i*l+g*j*k,a[2]=h*j*k-g*i*l,a[3]=h*j*l+g*i*k;break;default:throw Error("Unknown angle order "+e)}return a}function cj(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}a.s(["add",()=>br,"angle",()=>bV,"bezier",()=>bN,"ceil",()=>bv,"clone",()=>bm,"copy",()=>bp,"create",()=>bl,"cross",()=>bJ,"dist",()=>bC,"distance",()=>bC,"div",()=>bu,"divide",()=>bu,"dot",()=>bI,"equals",()=>bZ,"exactEquals",()=>bY,"floor",()=>bw,"forEach",()=>b$,"fromValues",()=>bo,"hermite",()=>bM,"inverse",()=>bG,"len",()=>bn,"length",()=>bn,"lerp",()=>bK,"max",()=>by,"min",()=>bx,"mul",()=>bt,"multiply",()=>bt,"negate",()=>bF,"normalize",()=>bH,"random",()=>bO,"rotateX",()=>bS,"rotateY",()=>bT,"rotateZ",()=>bU,"round",()=>bz,"scale",()=>bA,"scaleAndAdd",()=>bB,"set",()=>bq,"slerp",()=>bL,"sqrDist",()=>bD,"sqrLen",()=>bE,"squaredDistance",()=>bD,"squaredLength",()=>bE,"str",()=>bX,"sub",()=>bs,"subtract",()=>bs,"transformMat3",()=>bQ,"transformMat4",()=>bP,"transformQuat",()=>bR,"zero",()=>bW],4680),c=new ax(4),ax!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0,c[3]=0);var ck=function(a){var b=new ax(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},cl=function(a,b,c,d){var e=new ax(4);return e[0]=a,e[1]=b,e[2]=c,e[3]=d,e},cm=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},cn=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},co=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},cp=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},cq=b_,cr=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a[3]=h+d*(c[3]-h),a},cs=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)},ct=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return b*b+c*c+d*d+e*e},cu=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f;return g>0&&(g=1/Math.sqrt(g)),a[0]=c*g,a[1]=d*g,a[2]=e*g,a[3]=f*g,a},cv=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};function cw(a,b){return Math.abs(b_(a,b))>=.999999}var cx=(d=bl(),e=bo(1,0,0),f=bo(0,1,0),function(a,b,c){var g=bI(b,c);return g<-.999999?(bJ(d,e,b),1e-6>bn(d)&&bJ(d,f,b),bH(d,d),b2(a,d,Math.PI),a):g>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(bJ(d,b,c),a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=1+g,cu(a,a))}),cy=(g=b0(),h=b0(),function(a,b,c,d,e,f){return cd(g,b,e,f),cd(h,c,d,f),cd(a,g,h,2*f*(1-f)),a}),cz=(i=new ax(9),ax!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,j=i,function(a,b,c,d){return j[0]=c[0],j[3]=c[1],j[6]=c[2],j[1]=d[0],j[4]=d[1],j[7]=d[2],j[2]=-b[0],j[5]=-b[1],j[8]=-b[2],cu(a,ch(a,j))});a.s(["add",()=>co,"calculateW",()=>b9,"clone",()=>ck,"conjugate",()=>cg,"copy",()=>cm,"create",()=>b0,"dot",()=>cq,"equals",()=>cw,"exactEquals",()=>cv,"exp",()=>ca,"fromEuler",()=>ci,"fromMat3",()=>ch,"fromValues",()=>cl,"getAngle",()=>b4,"getAxisAngle",()=>b3,"identity",()=>b1,"invert",()=>cf,"len",()=>cs,"length",()=>cs,"lerp",()=>cr,"ln",()=>cb,"mul",()=>b5,"multiply",()=>b5,"normalize",()=>cu,"pow",()=>cc,"random",()=>ce,"rotateX",()=>b6,"rotateY",()=>b7,"rotateZ",()=>b8,"rotationTo",()=>cx,"scale",()=>cp,"set",()=>cn,"setAxes",()=>cz,"setAxisAngle",()=>b2,"slerp",()=>cd,"sqlerp",()=>cy,"sqrLen",()=>ct,"squaredLength",()=>ct,"str",()=>cj],78923);var cA=a.i(78923),cA=cA;function cB(){var a=new ax(2);return ax!=Float32Array&&(a[0]=0,a[1]=0),a}function cC(a){var b=new ax(2);return b[0]=a[0],b[1]=a[1],b}function cD(a,b){var c=new ax(2);return c[0]=a,c[1]=b,c}function cE(a,b){return a[0]=b[0],a[1]=b[1],a}function cF(a,b,c){return a[0]=b,a[1]=c,a}function cG(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a}function cH(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a}function cI(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a}function cJ(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a}function cK(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a}function cL(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a}function cM(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a}function cN(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a}function cO(a,b){return a[0]=az(b[0]),a[1]=az(b[1]),a}function cP(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a}function cQ(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a}function cR(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)}function cS(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d}function cT(a){var b=a[0],c=a[1];return Math.sqrt(b*b+c*c)}function cU(a){var b=a[0],c=a[1];return b*b+c*c}function cV(a,b){return a[0]=-b[0],a[1]=-b[1],a}function cW(a,b){return a[0]=1/b[0],a[1]=1/b[1],a}function cX(a,b){var c=b[0],d=b[1],e=c*c+d*d;return e>0&&(e=1/Math.sqrt(e)),a[0]=b[0]*e,a[1]=b[1]*e,a}function cY(a,b){return a[0]*b[0]+a[1]*b[1]}function cZ(a,b,c){var d=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=d,a}function c$(a,b,c,d){var e=b[0],f=b[1];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a}function c_(a,b){b=void 0===b?1:b;var c=2*ay()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a}function c0(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e,a[1]=c[1]*d+c[3]*e,a}function c1(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e+c[4],a[1]=c[1]*d+c[3]*e+c[5],a}function c2(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[3]*e+c[6],a[1]=c[1]*d+c[4]*e+c[7],a}function c3(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[4]*e+c[12],a[1]=c[1]*d+c[5]*e+c[13],a}function c4(a,b,c,d){var e=b[0]-c[0],f=b[1]-c[1],g=Math.sin(d),h=Math.cos(d);return a[0]=e*h-f*g+c[0],a[1]=e*g+f*h+c[1],a}function c5(a,b){var c=a[0],d=a[1],e=b[0],f=b[1];return Math.abs(Math.atan2(d*e-c*f,c*e+d*f))}function c6(a,b){var c=a[0],d=a[1],e=b[0],f=b[1];return Math.atan2(c*f-d*e,c*e+d*f)}function c7(a){return a[0]=0,a[1]=0,a}function c8(a){return"vec2("+a[0]+", "+a[1]+")"}function c9(a,b){return a[0]===b[0]&&a[1]===b[1]}function da(a,b){var c=a[0],d=a[1],e=b[0],f=b[1];return Math.abs(c-e)<=1e-6*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(d-f)<=1e-6*Math.max(1,Math.abs(d),Math.abs(f))}var db=(k=cB(),function(a,b,c,d,e,f){var g,h;for(b||(b=2),c||(c=0),h=d?Math.min(d*b+c,a.length):a.length,g=c;g<h;g+=b)k[0]=a[g],k[1]=a[g+1],e(k,k,f),a[g]=k[0],a[g+1]=k[1];return a});a.s(["add",()=>cG,"angle",()=>c5,"ceil",()=>cK,"clone",()=>cC,"copy",()=>cE,"create",()=>cB,"cross",()=>cZ,"dist",()=>cR,"distance",()=>cR,"div",()=>cJ,"divide",()=>cJ,"dot",()=>cY,"equals",()=>da,"exactEquals",()=>c9,"floor",()=>cL,"forEach",()=>db,"fromValues",()=>cD,"inverse",()=>cW,"len",()=>cT,"length",()=>cT,"lerp",()=>c$,"max",()=>cN,"min",()=>cM,"mul",()=>cI,"multiply",()=>cI,"negate",()=>cV,"normalize",()=>cX,"random",()=>c_,"rotate",()=>c4,"round",()=>cO,"scale",()=>cP,"scaleAndAdd",()=>cQ,"set",()=>cF,"signedAngle",()=>c6,"sqrDist",()=>cS,"sqrLen",()=>cU,"squaredDistance",()=>cS,"squaredLength",()=>cU,"str",()=>c8,"sub",()=>cH,"subtract",()=>cH,"transformMat2",()=>c0,"transformMat2d",()=>c1,"transformMat3",()=>c2,"transformMat4",()=>c3,"zero",()=>c7],40992);var dc=a.i(40992),dc=dc,dd=a.i(4680),dd=dd;let de=`#version 300 es

uniform mat4 uWorldMatrix;
uniform mat4 uViewMatrix;
uniform mat4 uProjectionMatrix;
uniform vec3 uCameraPosition;
uniform vec4 uRotationAxisVelocity;

in vec3 aModelPosition;
in vec3 aModelNormal;
in vec2 aModelUvs;
in mat4 aInstanceMatrix;

out vec2 vUvs;
out float vAlpha;
flat out int vInstanceId;

#define PI 3.141593

void main() {
    vec4 worldPosition = uWorldMatrix * aInstanceMatrix * vec4(aModelPosition, 1.);

    vec3 centerPos = (uWorldMatrix * aInstanceMatrix * vec4(0., 0., 0., 1.)).xyz;
    float radius = length(centerPos.xyz);

    if (gl_VertexID > 0) {
        vec3 rotationAxis = uRotationAxisVelocity.xyz;
        float rotationVelocity = min(.15, uRotationAxisVelocity.w * 15.);
        vec3 stretchDir = normalize(cross(centerPos, rotationAxis));
        vec3 relativeVertexPos = normalize(worldPosition.xyz - centerPos);
        float strength = dot(stretchDir, relativeVertexPos);
        float invAbsStrength = min(0., abs(strength) - 1.);
        strength = rotationVelocity * sign(strength) * abs(invAbsStrength * invAbsStrength * invAbsStrength + 1.);
        worldPosition.xyz += stretchDir * strength;
    }

    worldPosition.xyz = radius * normalize(worldPosition.xyz);

    gl_Position = uProjectionMatrix * uViewMatrix * worldPosition;

    vAlpha = smoothstep(0.5, 1., normalize(worldPosition.xyz).z) * .9 + .1;
    vUvs = aModelUvs;
    vInstanceId = gl_InstanceID;
}
`,df=`#version 300 es
precision highp float;

uniform sampler2D uTex;
uniform int uItemCount;
uniform int uAtlasSize;

out vec4 outColor;

in vec2 vUvs;
in float vAlpha;
flat in int vInstanceId;

void main() {
    int itemIndex = vInstanceId % uItemCount;
    int cellsPerRow = uAtlasSize;
    int cellX = itemIndex % cellsPerRow;
    int cellY = itemIndex / cellsPerRow;
    vec2 cellSize = vec2(1.0) / vec2(float(cellsPerRow));
    vec2 cellOffset = vec2(float(cellX), float(cellY)) * cellSize;

    ivec2 texSize = textureSize(uTex, 0);
    float imageAspect = float(texSize.x) / float(texSize.y);
    float containerAspect = 1.0;
    
    float scale = max(imageAspect / containerAspect, 
                     containerAspect / imageAspect);
    
    vec2 st = vec2(vUvs.x, 1.0 - vUvs.y);
    st = (st - 0.5) * scale + 0.5;
    
    st = clamp(st, 0.0, 1.0);
    
    st = st * cellSize + cellOffset;
    
    outColor = texture(uTex, st);
    outColor.a *= vAlpha;
}
`;class dg{constructor(a,b,c){this.a=a,this.b=b,this.c=c}a;b;c}class dh{constructor(a,b,c){this.position=dd.fromValues(a,b,c),this.normal=dd.create(),this.uv=dc.create()}position;normal;uv}class di{constructor(){this.vertices=[],this.faces=[]}vertices;faces;addVertex(...a){for(let b=0;b<a.length;b+=3)this.vertices.push(new dh(a[b],a[b+1],a[b+2]));return this}addFace(...a){for(let b=0;b<a.length;b+=3)this.faces.push(new dg(a[b],a[b+1],a[b+2]));return this}get lastVertex(){return this.vertices[this.vertices.length-1]}subdivide(a=1){let b={},c=this.faces;for(let d=0;d<a;++d){let a=Array(4*c.length);c.forEach((c,d)=>{let e=this.getMidPoint(c.a,c.b,b),f=this.getMidPoint(c.b,c.c,b),g=this.getMidPoint(c.c,c.a,b),h=4*d;a[h+0]=new dg(c.a,e,g),a[h+1]=new dg(c.b,f,e),a[h+2]=new dg(c.c,g,f),a[h+3]=new dg(e,f,g)}),c=a}return this.faces=c,this}spherize(a=1){return this.vertices.forEach(b=>{dd.normalize(b.normal,b.position),dd.scale(b.position,b.normal,a)}),this}get data(){return{vertices:this.vertexData,indices:this.indexData,normals:this.normalData,uvs:this.uvData}}get vertexData(){return new Float32Array(this.vertices.flatMap(a=>Array.from(a.position)))}get normalData(){return new Float32Array(this.vertices.flatMap(a=>Array.from(a.normal)))}get uvData(){return new Float32Array(this.vertices.flatMap(a=>Array.from(a.uv)))}get indexData(){return new Uint16Array(this.faces.flatMap(a=>[a.a,a.b,a.c]))}getMidPoint(a,b,c){let d=a<b?`k_${b}_${a}`:`k_${a}_${b}`;if(Object.prototype.hasOwnProperty.call(c,d))return c[d];let e=this.vertices[a].position,f=this.vertices[b].position,g=this.vertices.length;return c[d]=g,this.addVertex((e[0]+f[0])*.5,(e[1]+f[1])*.5,(e[2]+f[2])*.5),g}}class dj extends di{constructor(){super();const a=.5*Math.sqrt(5)+.5;this.addVertex(-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1).addFace(0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1)}}class dk extends di{constructor(a=4,b=1){super();const c=2*Math.PI/(a=Math.max(4,a));this.addVertex(0,0,0),this.lastVertex.uv[0]=.5,this.lastVertex.uv[1]=.5;for(let d=0;d<a;++d){const a=Math.cos(c*d),e=Math.sin(c*d);this.addVertex(b*a,b*e,0),this.lastVertex.uv[0]=.5*a+.5,this.lastVertex.uv[1]=.5*e+.5,d>0&&this.addFace(0,d,d+1)}this.addFace(0,a,1)}}function dl(a,b,c){let d=a.createBuffer();return a.bindBuffer(a.ARRAY_BUFFER,d),a.bufferData(a.ARRAY_BUFFER,b,c),a.bindBuffer(a.ARRAY_BUFFER,null),d}class dm{isPointerDown=!1;orientation=cA.create();pointerRotation=cA.create();rotationVelocity=0;rotationAxis=dd.fromValues(1,0,0);snapDirection=dd.fromValues(0,0,-1);snapTargetDirection;EPSILON=.1;IDENTITY_QUAT=cA.create();canvas;updateCallback;pointerPos=dc.create();previousPointerPos=dc.create();_rotationVelocity=0;_combinedQuat=cA.create();constructor(a,b){this.canvas=a,this.updateCallback=b||(()=>null),a.addEventListener("pointerdown",a=>{dc.set(this.pointerPos,a.clientX,a.clientY),dc.copy(this.previousPointerPos,this.pointerPos),this.isPointerDown=!0}),a.addEventListener("pointerup",()=>{this.isPointerDown=!1}),a.addEventListener("pointerleave",()=>{this.isPointerDown=!1}),a.addEventListener("pointermove",a=>{this.isPointerDown&&dc.set(this.pointerPos,a.clientX,a.clientY)}),a.style.touchAction="none"}update(a,b=16){let c=a/b+1e-5,d=c,e=cA.create();if(this.isPointerDown){let a=.3*c,b=dc.sub(dc.create(),this.pointerPos,this.previousPointerPos);if(dc.scale(b,b,a),dc.sqrLen(b)>this.EPSILON){dc.add(b,this.previousPointerPos,b);let a=this.#a(b),e=this.#a(this.previousPointerPos),f=dd.normalize(dd.create(),a),g=dd.normalize(dd.create(),e);dc.copy(this.previousPointerPos,b),d*=5/c,this.quatFromVectors(f,g,this.pointerRotation,d)}else cA.slerp(this.pointerRotation,this.pointerRotation,this.IDENTITY_QUAT,a)}else if(cA.slerp(this.pointerRotation,this.pointerRotation,this.IDENTITY_QUAT,.1*c),this.snapTargetDirection){let a=this.snapTargetDirection,b=this.snapDirection;d*=.2*Math.max(.1,1-10*dd.squaredDistance(a,b)),this.quatFromVectors(a,b,e,d)}let f=cA.multiply(cA.create(),e,this.pointerRotation);this.orientation=cA.multiply(cA.create(),f,this.orientation),cA.normalize(this.orientation,this.orientation),cA.slerp(this._combinedQuat,this._combinedQuat,f,.8*c),cA.normalize(this._combinedQuat,this._combinedQuat);let g=2*Math.acos(this._combinedQuat[3]),h=Math.sin(g/2),i=0;h>1e-6&&(i=g/(2*Math.PI),this.rotationAxis[0]=this._combinedQuat[0]/h,this.rotationAxis[1]=this._combinedQuat[1]/h,this.rotationAxis[2]=this._combinedQuat[2]/h),this._rotationVelocity+=(i-this._rotationVelocity)*(.5*c),this.rotationVelocity=this._rotationVelocity/c,this.updateCallback(a)}quatFromVectors(a,b,c,d=1){let e=dd.cross(dd.create(),a,b);dd.normalize(e,e);let f=Math.acos(Math.max(-1,Math.min(1,dd.dot(a,b))))*d;return cA.setAxisAngle(c,e,f),{q:c,axis:e,angle:f}}#a(a){let b=this.canvas.clientWidth,c=this.canvas.clientHeight,d=Math.max(b,c)-1,e=(2*a[0]-b-1)/d,f=(2*a[1]-c-1)/d,g=0,h=e*e+f*f;return g=h<=2?Math.sqrt(4-h):4/Math.sqrt(h),dd.fromValues(-e,f,g)}}class dn{TARGET_FRAME_DURATION=1e3/60;SPHERE_RADIUS=2;#b=0;#c=0;#d=0;#e=0;camera={matrix:bk.create(),near:.1,far:40,fov:Math.PI/4,aspect:1,position:dd.fromValues(0,0,3),up:dd.fromValues(0,1,0),matrices:{view:bk.create(),projection:bk.create(),inversProjection:bk.create()}};nearestVertexIndex=null;smoothRotationVelocity=0;scaleFactor=1;movementActive=!1;canvas;items;onActiveItemChange;onMovementChange;gl;viewportSize;drawBufferSize;discProgram;discLocations;discGeo;discBuffers;discVAO;icoGeo;instancePositions;DISC_INSTANCE_COUNT;worldMatrix;tex;atlasSize;discInstances;control;constructor(a,b,c,d,e){this.canvas=a,this.items=b||[],this.onActiveItemChange=c||(()=>{}),this.onMovementChange=d||(()=>{}),this.#f(e)}resize(){var a;let b,c,d,e;this.viewportSize=dc.set(this.viewportSize||dc.create(),this.canvas.clientWidth,this.canvas.clientHeight);let f=this.gl;a=this.canvas,b=Math.min(2,window.devicePixelRatio),c=Math.round(a.clientWidth*b),d=Math.round(a.clientHeight*b),(e=a.width!==c||a.height!==d)&&(a.width=c,a.height=d),e&&f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight),this.#g(f)}run(a=0){this.#c=Math.min(32,a-this.#b),this.#b=a,this.#d=this.#c/this.TARGET_FRAME_DURATION,this.#e+=this.#d,this.#h(this.#c),this.#i(),requestAnimationFrame(a=>this.run(a))}#f(a){console.log("Initializing InfiniteGridMenu..."),this.gl=this.canvas.getContext("webgl2",{antialias:!0,alpha:!1});let b=this.gl;if(!b)throw console.error("WebGL2 not supported!"),Error("No WebGL 2 context!");if(console.log("WebGL2 context created successfully"),this.viewportSize=dc.fromValues(this.canvas.clientWidth,this.canvas.clientHeight),this.drawBufferSize=dc.clone(this.viewportSize),console.log("Creating shader program..."),this.discProgram=function(a,b,c,d){let e=a.createProgram();if(!e)return null;if([a.VERTEX_SHADER,a.FRAGMENT_SHADER].forEach((c,d)=>{var f;let g,h=(f=b[d],(g=a.createShader(c))?(a.shaderSource(g,f),a.compileShader(g),a.getShaderParameter(g,a.COMPILE_STATUS))?g:(console.error(a.getShaderInfoLog(g)),a.deleteShader(g),null):null);h&&a.attachShader(e,h)}),c&&a.transformFeedbackVaryings(e,c,a.SEPARATE_ATTRIBS),d)for(let b in d)a.bindAttribLocation(e,d[b],b);return(a.linkProgram(e),a.getProgramParameter(e,a.LINK_STATUS))?e:(console.error(a.getProgramInfoLog(e)),a.deleteProgram(e),null)}(b,[de,df],void 0,{aModelPosition:0,aModelNormal:1,aModelUvs:2,aInstanceMatrix:3}),!this.discProgram)throw console.error("Failed to create shader program!"),Error("Failed to create shader program");console.log("Shader program created successfully"),this.discLocations={aModelPosition:b.getAttribLocation(this.discProgram,"aModelPosition"),aModelUvs:b.getAttribLocation(this.discProgram,"aModelUvs"),aInstanceMatrix:b.getAttribLocation(this.discProgram,"aInstanceMatrix"),uWorldMatrix:b.getUniformLocation(this.discProgram,"uWorldMatrix"),uViewMatrix:b.getUniformLocation(this.discProgram,"uViewMatrix"),uProjectionMatrix:b.getUniformLocation(this.discProgram,"uProjectionMatrix"),uCameraPosition:b.getUniformLocation(this.discProgram,"uCameraPosition"),uScaleFactor:b.getUniformLocation(this.discProgram,"uScaleFactor"),uRotationAxisVelocity:b.getUniformLocation(this.discProgram,"uRotationAxisVelocity"),uTex:b.getUniformLocation(this.discProgram,"uTex"),uFrames:b.getUniformLocation(this.discProgram,"uFrames"),uItemCount:b.getUniformLocation(this.discProgram,"uItemCount"),uAtlasSize:b.getUniformLocation(this.discProgram,"uAtlasSize")},this.discGeo=new dk(56,1),this.discBuffers=this.discGeo.data,this.discVAO=function(a,b,c){let d=a.createVertexArray();for(let[c,e,f]of(a.bindVertexArray(d),b))-1!==e&&(a.bindBuffer(a.ARRAY_BUFFER,c),a.enableVertexAttribArray(e),a.vertexAttribPointer(e,f,a.FLOAT,!1,0,0));if(c){let b=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,b),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),a.STATIC_DRAW)}return a.bindVertexArray(null),d}(b,[[dl(b,this.discBuffers.vertices,b.STATIC_DRAW),this.discLocations.aModelPosition,3],[dl(b,this.discBuffers.uvs,b.STATIC_DRAW),this.discLocations.aModelUvs,2]],Array.from(this.discBuffers.indices)),this.icoGeo=new dj,this.icoGeo.subdivide(1).spherize(this.SPHERE_RADIUS),this.instancePositions=this.icoGeo.vertices.map(a=>a.position),this.DISC_INSTANCE_COUNT=this.icoGeo.vertices.length,this.#j(this.DISC_INSTANCE_COUNT),this.worldMatrix=bk.create(),this.#k(),this.control=new dm(this.canvas,a=>this.#l(a)),this.#m(),this.#g(b),this.resize(),a&&a(this)}#k(){var a,b,c,d;let e,f=this.gl;this.tex=(a=f.LINEAR,b=f.LINEAR,c=f.CLAMP_TO_EDGE,d=f.CLAMP_TO_EDGE,e=f.createTexture(),f.bindTexture(f.TEXTURE_2D,e),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,c),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,d),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,a),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,b),e);let g=Math.max(1,this.items.length);this.atlasSize=Math.ceil(Math.sqrt(g));let h=document.createElement("canvas"),i=h.getContext("2d");h.width=512*this.atlasSize,h.height=512*this.atlasSize,Promise.all(this.items.map(a=>new Promise(b=>{let c=new Image;c.crossOrigin="anonymous",c.onload=()=>b(c),c.src=a.image}))).then(a=>{a.forEach((a,b)=>{let c=b%this.atlasSize*512,d=512*Math.floor(b/this.atlasSize);i.drawImage(a,c,d,512,512)}),f.bindTexture(f.TEXTURE_2D,this.tex),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,h),f.generateMipmap(f.TEXTURE_2D)})}#j(a){let b=this.gl;this.discInstances={matricesArray:new Float32Array(16*a),matrices:[],buffer:b.createBuffer()};for(let b=0;b<a;++b){let a=new Float32Array(this.discInstances.matricesArray.buffer,16*b*4,16);a.set(bk.create()),this.discInstances.matrices.push(a)}b.bindVertexArray(this.discVAO),b.bindBuffer(b.ARRAY_BUFFER,this.discInstances.buffer),b.bufferData(b.ARRAY_BUFFER,this.discInstances.matricesArray.byteLength,b.DYNAMIC_DRAW);for(let a=0;a<4;++a){let c=this.discLocations.aInstanceMatrix+a;b.enableVertexAttribArray(c),b.vertexAttribPointer(c,4,b.FLOAT,!1,64,4*a*4),b.vertexAttribDivisor(c,1)}b.bindBuffer(b.ARRAY_BUFFER,null),b.bindVertexArray(null)}#h(a){let b=this.gl;this.control.update(a,this.TARGET_FRAME_DURATION),this.instancePositions.map(a=>dd.transformQuat(dd.create(),a,this.control.orientation)).forEach((a,b)=>{let c=(Math.abs(a[2])/this.SPHERE_RADIUS*.6+.4)*.25,d=bk.create();bk.multiply(d,d,bk.fromTranslation(bk.create(),dd.negate(dd.create(),a))),bk.multiply(d,d,bk.targetTo(bk.create(),[0,0,0],a,[0,1,0])),bk.multiply(d,d,bk.fromScaling(bk.create(),[c,c,c])),bk.multiply(d,d,bk.fromTranslation(bk.create(),[0,0,-this.SPHERE_RADIUS])),bk.copy(this.discInstances.matrices[b],d)}),b.bindBuffer(b.ARRAY_BUFFER,this.discInstances.buffer),b.bufferSubData(b.ARRAY_BUFFER,0,this.discInstances.matricesArray),b.bindBuffer(b.ARRAY_BUFFER,null),this.smoothRotationVelocity=this.control.rotationVelocity}#i(){let a=this.gl;a.useProgram(this.discProgram),a.enable(a.CULL_FACE),a.enable(a.DEPTH_TEST),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.uniformMatrix4fv(this.discLocations.uWorldMatrix,!1,this.worldMatrix),a.uniformMatrix4fv(this.discLocations.uViewMatrix,!1,this.camera.matrices.view),a.uniformMatrix4fv(this.discLocations.uProjectionMatrix,!1,this.camera.matrices.projection),a.uniform3f(this.discLocations.uCameraPosition,this.camera.position[0],this.camera.position[1],this.camera.position[2]),a.uniform4f(this.discLocations.uRotationAxisVelocity,this.control.rotationAxis[0],this.control.rotationAxis[1],this.control.rotationAxis[2],1.1*this.smoothRotationVelocity),a.uniform1i(this.discLocations.uItemCount,this.items.length),a.uniform1i(this.discLocations.uAtlasSize,this.atlasSize),a.uniform1f(this.discLocations.uFrames,this.#e),a.uniform1f(this.discLocations.uScaleFactor,this.scaleFactor),a.uniform1i(this.discLocations.uTex,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.tex),a.bindVertexArray(this.discVAO),a.drawElementsInstanced(a.TRIANGLES,this.discBuffers.indices.length,a.UNSIGNED_SHORT,0,this.DISC_INSTANCE_COUNT)}#m(){bk.targetTo(this.camera.matrix,this.camera.position,[0,0,0],this.camera.up),bk.invert(this.camera.matrices.view,this.camera.matrix)}#g(a){this.camera.aspect=this.canvas.clientWidth/this.canvas.clientHeight;let b=.35*this.SPHERE_RADIUS,c=this.camera.position[2];this.camera.aspect>1?this.camera.fov=2*Math.atan(b/c):this.camera.fov=2*Math.atan(b/this.camera.aspect/c),bk.perspective(this.camera.matrices.projection,this.camera.fov,this.camera.aspect,this.camera.near,this.camera.far),bk.invert(this.camera.matrices.inversProjection,this.camera.matrices.projection)}#l(a){let b=a/this.TARGET_FRAME_DURATION+1e-4,c=5/b,d=3,e=this.control.isPointerDown||Math.abs(this.smoothRotationVelocity)>.01;if(e!==this.movementActive&&(this.movementActive=e,this.onMovementChange(e)),this.control.isPointerDown)d+=80*this.control.rotationVelocity+2.5,c=7/b;else{let a=this.#n(),b=a%Math.max(1,this.items.length);this.onActiveItemChange(b);let c=dd.normalize(dd.create(),this.#o(a));this.control.snapTargetDirection=c}this.camera.position[2]+=(d-this.camera.position[2])/c,this.#m()}#n(){let a=this.control.snapDirection,b=cA.conjugate(cA.create(),this.control.orientation),c=dd.transformQuat(dd.create(),a,b),d=-1,e=0;for(let a=0;a<this.instancePositions.length;++a){let b=dd.dot(c,this.instancePositions[a]);b>d&&(d=b,e=a)}return e}#o(a){let b=this.instancePositions[a];return dd.transformQuat(dd.create(),b,this.control.orientation)}}let dp=[{image:"https://picsum.photos/900/900?grayscale",link:"https://google.com/",title:"Generate Images",description:"Create AI-powered visuals"},{image:"https://picsum.photos/901/900?grayscale",link:"https://google.com/",title:"Generate Videos",description:"AI video creation and editing"},{image:"https://picsum.photos/902/900?grayscale",link:"https://google.com/",title:"Generate Bots",description:"Build intelligent chatbots"},{image:"https://picsum.photos/903/900?grayscale",link:"https://percify.io/",title:"Generate Avatars",description:"Create digital personas with Percify"},{image:"https://picsum.photos/904/900?grayscale",link:"https://google.com/",title:"Generate Audio",description:"AI-powered sound creation"},{image:"https://picsum.photos/905/900?grayscale",link:"https://google.com/",title:"Generate Income",description:"AI monetization strategies"}];function dq({isVisible:a,onClose:b}){let c=(0,n.useRef)(null),[d,e]=(0,n.useState)(null),[f,g]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{let b,d=c.current;if(d&&a){console.log("Creating InfiniteGridMenu with items:",(dp.length,dp));try{b=new dn(d,(dp.length,dp),a=>{let b=a%dp.length;e(dp[b])},g,a=>a.run()),console.log("InfiniteGridMenu created successfully")}catch(a){console.error("Error creating InfiniteGridMenu:",a)}}else console.log("Canvas or isVisible condition not met:",{canvas:!!d,isVisible:a});let f=()=>{b&&b.resize()};return window.addEventListener("resize",f),f(),()=>{window.removeEventListener("resize",f)}},[dp,a]),a)?(0,l.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4,background:"#000"},children:[(0,l.jsxs)("div",{style:{position:"absolute",top:"10px",left:"10px",color:"white",zIndex:10001,fontSize:"12px"},children:["Debug: InfiniteMenu Loaded - Items: ",dp.length," - Active: ",d?.title||"None"]}),(0,l.jsx)("button",{onClick:b,className:"infinite-menu-close","aria-label":"Close menu",children:"×"}),(0,l.jsx)("canvas",{id:"infinite-grid-menu-canvas",ref:c,style:{width:"100%",height:"100%",cursor:"grab"}}),d&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h2",{className:`face-title ${f?"inactive":"active"}`,children:d.title}),(0,l.jsxs)("p",{className:`face-description ${f?"inactive":"active"}`,children:[" ",d.description]}),(0,l.jsx)("div",{onClick:()=>{d?.link&&(console.log("Selected:",d.title,"Link:",d.link),d.link.startsWith("http")?window.open(d.link,"_blank"):console.log("Internal route:",d.link),b())},className:`action-button ${f?"inactive":"active"}`,children:(0,l.jsx)("p",{className:"action-button-icon",children:"↗"})})]})]}):null}let dr={patternScale:1,refraction:.07,edge:0,patternBlur:0,liquid:.75,speed:.39},ds=`#version 300 es
precision mediump float;

in vec2 a_position;
out vec2 vUv;

void main() {
    vUv = .5 * (a_position + 1.);
    gl_Position = vec4(a_position, 0.0, 1.0);
}`,dt=`#version 300 es
precision mediump float;

in vec2 vUv;
out vec4 fragColor;

uniform sampler2D u_image_texture;
uniform float u_time;
uniform float u_ratio;
uniform float u_img_ratio;
uniform float u_patternScale;
uniform float u_refraction;
uniform float u_edge;
uniform float u_patternBlur;
uniform float u_liquid;

#define TWO_PI 6.28318530718
#define PI 3.14159265358979323846

vec3 mod289(vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 permute(vec3 x) { return mod289(((x*34.)+1.)*x); }
float snoise(vec2 v) {
    const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439);
    vec2 i = floor(v + dot(v, C.yy));
    vec2 x0 = v - i + dot(i, C.xx);
    vec2 i1;
    i1 = (x0.x > x0.y) ? vec2(1., 0.) : vec2(0., 1.);
    vec4 x12 = x0.xyxy + C.xxzz;
    x12.xy -= i1;
    i = mod289(i);
    vec3 p = permute(permute(i.y + vec3(0., i1.y, 1.)) + i.x + vec3(0., i1.x, 1.));
    vec3 m = max(0.5 - vec3(dot(x0, x0), dot(x12.xy, x12.xy), dot(x12.zw, x12.zw)), 0.);
    m = m*m;
    m = m*m;
    vec3 x = 2. * fract(p * C.www) - 1.;
    vec3 h = abs(x) - 0.5;
    vec3 ox = floor(x + 0.5);
    vec3 a0 = x - ox;
    m *= 1.79284291400159 - 0.85373472095314 * (a0*a0 + h*h);
    vec3 g;
    g.x = a0.x * x0.x + h.x * x0.y;
    g.yz = a0.yz * x12.xz + h.yz * x12.yw;
    return 130. * dot(m, g);
}

vec2 get_img_uv() {
    vec2 img_uv = vUv;
    img_uv -= .5;
    if (u_ratio > u_img_ratio) {
        img_uv.x = img_uv.x * u_ratio / u_img_ratio;
    } else {
        img_uv.y = img_uv.y * u_img_ratio / u_ratio;
    }
    float scale_factor = 1.;
    img_uv *= scale_factor;
    img_uv += .5;
    img_uv.y = 1. - img_uv.y;
    return img_uv;
}
vec2 rotate(vec2 uv, float th) {
    return mat2(cos(th), sin(th), -sin(th), cos(th)) * uv;
}
float get_color_channel(float c1, float c2, float stripe_p, vec3 w, float extra_blur, float b) {
    float ch = c2;
    float border = 0.;
    float blur = u_patternBlur + extra_blur;
    ch = mix(ch, c1, smoothstep(.0, blur, stripe_p));
    border = w[0];
    ch = mix(ch, c2, smoothstep(border - blur, border + blur, stripe_p));
    b = smoothstep(.2, .8, b);
    border = w[0] + .4 * (1. - b) * w[1];
    ch = mix(ch, c1, smoothstep(border - blur, border + blur, stripe_p));
    border = w[0] + .5 * (1. - b) * w[1];
    ch = mix(ch, c2, smoothstep(border - blur, border + blur, stripe_p));
    border = w[0] + w[1];
    ch = mix(ch, c1, smoothstep(border - blur, border + blur, stripe_p));
    float gradient_t = (stripe_p - w[0] - w[1]) / w[2];
    float gradient = mix(c1, c2, smoothstep(0., 1., gradient_t));
    ch = mix(ch, gradient, smoothstep(border - blur, border + blur, stripe_p));
    return ch;
}
float get_img_frame_alpha(vec2 uv, float img_frame_width) {
    float img_frame_alpha = smoothstep(0., img_frame_width, uv.x) * smoothstep(1., 1. - img_frame_width, uv.x);
    img_frame_alpha *= smoothstep(0., img_frame_width, uv.y) * smoothstep(1., 1. - img_frame_width, uv.y);
    return img_frame_alpha;
}
void main() {
    vec2 uv = vUv;
    uv.y = 1. - uv.y;
    uv.x *= u_ratio;
    float diagonal = uv.x - uv.y;
    float t = .001 * u_time;
    vec2 img_uv = get_img_uv();
    vec4 img = texture(u_image_texture, img_uv);
    vec3 color = vec3(0.);
    float opacity = 1.;
    vec3 color1 = vec3(.98, 0.98, 1.);
    vec3 color2 = vec3(.1, .1, .1 + .1 * smoothstep(.7, 1.3, uv.x + uv.y));
    float edge = img.r;
    vec2 grad_uv = uv;
    grad_uv -= .5;
    float dist = length(grad_uv + vec2(0., .2 * diagonal));
    grad_uv = rotate(grad_uv, (.25 - .2 * diagonal) * PI);
    float bulge = pow(1.8 * dist, 1.2);
    bulge = 1. - bulge;
    bulge *= pow(uv.y, .3);
    float cycle_width = u_patternScale;
    float thin_strip_1_ratio = .12 / cycle_width * (1. - .4 * bulge);
    float thin_strip_2_ratio = .07 / cycle_width * (1. + .4 * bulge);
    float wide_strip_ratio = (1. - thin_strip_1_ratio - thin_strip_2_ratio);
    float thin_strip_1_width = cycle_width * thin_strip_1_ratio;
    float thin_strip_2_width = cycle_width * thin_strip_2_ratio;
    opacity = 1. - smoothstep(.9 - .5 * u_edge, 1. - .5 * u_edge, edge);
    opacity *= get_img_frame_alpha(img_uv, 0.01);
    float noise = snoise(uv - t);
    edge += (1. - edge) * u_liquid * noise;
    float refr = 0.;
    refr += (1. - bulge);
    refr = clamp(refr, 0., 1.);
    float dir = grad_uv.x;
    dir += diagonal;
    dir -= 2. * noise * diagonal * (smoothstep(0., 1., edge) * smoothstep(1., 0., edge));
    bulge *= clamp(pow(uv.y, .1), .3, 1.);
    dir *= (.1 + (1.1 - edge) * bulge);
    dir *= smoothstep(1., .7, edge);
    dir += .18 * (smoothstep(.1, .2, uv.y) * smoothstep(.4, .2, uv.y));
    dir += .03 * (smoothstep(.1, .2, 1. - uv.y) * smoothstep(.4, .2, 1. - uv.y));
    dir *= (.5 + .5 * pow(uv.y, 2.));
    dir *= cycle_width;
    dir -= t;
    float refr_r = refr;
    refr_r += .03 * bulge * noise;
    float refr_b = 1.3 * refr;
    refr_r += 5. * (smoothstep(-.1, .2, uv.y) * smoothstep(.5, .1, uv.y)) * (smoothstep(.4, .6, bulge) * smoothstep(1., .4, bulge));
    refr_r -= diagonal;
    refr_b += (smoothstep(0., .4, uv.y) * smoothstep(.8, .1, uv.y)) * (smoothstep(.4, .6, bulge) * smoothstep(.8, .4, bulge));
    refr_b -= .2 * edge;
    refr_r *= u_refraction;
    refr_b *= u_refraction;
    vec3 w = vec3(thin_strip_1_width, thin_strip_2_width, wide_strip_ratio);
    w[1] -= .02 * smoothstep(.0, 1., edge + bulge);
    float stripe_r = mod(dir + refr_r, 1.);
    float r = get_color_channel(color1.r, color2.r, stripe_r, w, 0.02 + .03 * u_refraction * bulge, bulge);
    float stripe_g = mod(dir, 1.);
    float g = get_color_channel(color1.g, color2.g, stripe_g, w, 0.01 / (1. - diagonal), bulge);
    float stripe_b = mod(dir - refr_b, 1.);
    float b = get_color_channel(color1.b, color2.b, stripe_b, w, .01, bulge);
    color = vec3(r, g, b);
    color *= opacity;
    fragColor = vec4(color, opacity);
}
`;function du({imageData:a,params:b=dr}){let c=(0,n.useRef)(null),[d,e]=(0,n.useState)(null),[f,g]=(0,n.useState)({}),h=(0,n.useRef)(0),i=(0,n.useRef)(0);function j(){d&&f&&(d.uniform1f(f.u_edge,b.edge),d.uniform1f(f.u_patternBlur,b.patternBlur),d.uniform1f(f.u_time,0),d.uniform1f(f.u_patternScale,b.patternScale),d.uniform1f(f.u_refraction,b.refraction),d.uniform1f(f.u_liquid,b.liquid))}return(0,n.useEffect)(()=>{!function(){let a=c.current,b=a?.getContext("webgl2",{antialias:!0,alpha:!0});if(!a||!b)return;function d(a,b,c){let d=a.createShader(c);return d?(a.shaderSource(d,b),a.compileShader(d),a.getShaderParameter(d,a.COMPILE_STATUS))?d:(console.error("An error occurred compiling the shaders: "+a.getShaderInfoLog(d)),a.deleteShader(d),null):null}let f=d(b,ds,b.VERTEX_SHADER),h=d(b,dt,b.FRAGMENT_SHADER),i=b.createProgram();if(!i||!f||!h)return;if(b.attachShader(i,f),b.attachShader(i,h),b.linkProgram(i),!b.getProgramParameter(i,b.LINK_STATUS))return console.error("Unable to initialize the shader program: "+b.getProgramInfoLog(i));g(function(a,b){let c={},d=b.getProgramParameter(a,b.ACTIVE_UNIFORMS);for(let e=0;e<d;e++){let d=b.getActiveUniform(a,e)?.name;d&&(c[d]=b.getUniformLocation(a,d))}return c}(i,b));let j=new Float32Array([-1,-1,1,-1,-1,1,1,1]),k=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,k),b.bufferData(b.ARRAY_BUFFER,j,b.STATIC_DRAW),b.useProgram(i);let l=b.getAttribLocation(i,"a_position");b.enableVertexAttribArray(l),b.bindBuffer(b.ARRAY_BUFFER,k),b.vertexAttribPointer(l,2,b.FLOAT,!1,0,0),e(b)}(),j()},[]),(0,n.useEffect)(()=>{d&&f&&j()},[d,b,f]),(0,n.useEffect)(()=>{let a;if(d&&f)return i.current=performance.now(),a=requestAnimationFrame(function c(e){let g=e-i.current;i.current=e,h.current+=g*b.speed,d.uniform1f(f.u_time,h.current),d.drawArrays(d.TRIANGLE_STRIP,0,4),a=requestAnimationFrame(c)}),()=>{cancelAnimationFrame(a)}},[d,b.speed]),(0,n.useEffect)(()=>{let b=c.current;if(b&&d&&f)return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)};function e(){if(!b||!d||!f||!a)return;let c=a.width/a.height;d.uniform1f(f.u_img_ratio,c),b.width=1e3*devicePixelRatio,b.height=1e3*devicePixelRatio,d.viewport(0,0,b.height,b.height),d.uniform1f(f.u_ratio,1),d.uniform1f(f.u_img_ratio,c)}},[d,f,a]),(0,n.useEffect)(()=>{if(!d||!f)return;let b=d.getParameter(d.TEXTURE_BINDING_2D);b&&d.deleteTexture(b);let c=d.createTexture();d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,c),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.pixelStorei(d.UNPACK_ALIGNMENT,1);try{d.texImage2D(d.TEXTURE_2D,0,d.RGBA,a?.width,a?.height,0,d.RGBA,d.UNSIGNED_BYTE,a?.data),d.uniform1i(f.u_image_texture,0)}catch(a){console.error("Error uploading texture:",a)}return()=>{c&&d.deleteTexture(c)}},[d,f,a]),(0,l.jsx)("canvas",{ref:c,className:"paint-container"})}function dv(){let[a,b]=(0,n.useState)(null);return((0,n.useEffect)(()=>{let a=document.createElement("canvas"),c=a.getContext("2d");if(c){a.width=800,a.height=800,c.fillStyle="white",c.fillRect(0,0,800,800);c.fillStyle="black",c.beginPath(),c.arc(400,400,280,0,2*Math.PI),c.fill(),c.fillStyle="white",c.beginPath(),c.arc(400,400,168,0,2*Math.PI),c.fill();for(let a=0;a<8;a++){let b=a/8*Math.PI*2,d=400+392*Math.cos(b),e=400+392*Math.sin(b);c.fillStyle="black",c.beginPath(),c.arc(d,e,22.400000000000002,0,2*Math.PI),c.fill()}b(c.getImageData(0,0,800,800))}},[]),a)?(0,l.jsx)(du,{imageData:a,params:{patternScale:1,refraction:.07,edge:0,patternBlur:0,liquid:.75,speed:.39}}):null}let dw=({items:a,className:b="",radius:c=300,columns:d=3,rows:e=2,damping:f=.45,fadeOut:g=.6,ease:h="power3.out",onClose:i,onPersonaSelect:j,selectedPersona:k})=>{let m=(0,n.useRef)(null),o=(0,n.useRef)(null),p=(0,n.useRef)(null),q=(0,n.useRef)(null),r=(0,n.useRef)({x:0,y:0}),s=a?.length?a:[{image:"https://i.pravatar.cc/300?img=8",title:"The Teacher",subtitle:"Patient & Explanatory",handle:"@educator",borderColor:"#4F46E5",gradient:"linear-gradient(145deg, #4F46E5, #000)",url:"#"},{image:"https://i.pravatar.cc/300?img=11",title:"The Critic",subtitle:"Analytical & Direct",handle:"@analyst",borderColor:"#EF4444",gradient:"linear-gradient(210deg, #EF4444, #000)",url:"#"},{image:"https://i.pravatar.cc/300?img=3",title:"The Explorer",subtitle:"Curious & Adventurous",handle:"@wanderer",borderColor:"#F59E0B",gradient:"linear-gradient(165deg, #F59E0B, #000)",url:"#"},{image:"https://i.pravatar.cc/300?img=16",title:"The Poet",subtitle:"Creative & Eloquent",handle:"@wordsmith",borderColor:"#8B5CF6",gradient:"linear-gradient(195deg, #8B5CF6, #000)",url:"#"},{image:"/images/personas/scientist.jpg",title:"The Scientist",subtitle:"Logical & Precise",handle:"@researcher",borderColor:"#10B981",gradient:"linear-gradient(225deg, #10B981, #000)",url:"#"},{image:"https://i.pravatar.cc/300?img=60",title:"The Friend",subtitle:"Supportive & Empathetic",handle:"@companion",borderColor:"#06B6D4",gradient:"linear-gradient(135deg, #06B6D4, #000)",url:"#"}];(0,n.useEffect)(()=>{let a=m.current;if(!a)return;p.current=L.gsap.quickSetter(a,"--x","px"),q.current=L.gsap.quickSetter(a,"--y","px");let{width:b,height:c}=a.getBoundingClientRect();r.current={x:b/2,y:c/2},p.current&&p.current(r.current.x),q.current&&q.current(r.current.y)},[]),(0,n.useEffect)(()=>{let a=a=>{"Escape"===a.key&&i&&i()};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[i]);let t=a=>{let b=a.currentTarget,c=b.getBoundingClientRect(),d=a.clientX-c.left,e=a.clientY-c.top;b.style.setProperty("--mouse-x",`${d}px`),b.style.setProperty("--mouse-y",`${e}px`)};return(0,l.jsx)("div",{className:`chroma-grid-container active ${b}`,children:(0,l.jsxs)("div",{ref:m,className:"chroma-grid",style:{"--r":`${c}px`,"--cols":d,"--rows":e},onPointerMove:a=>{var b,c;if(!m.current)return;let d=m.current.getBoundingClientRect();b=a.clientX-d.left,c=a.clientY-d.top,L.gsap.to(r.current,{x:b,y:c,duration:f,ease:h,onUpdate:()=>{p.current?.(r.current.x),q.current?.(r.current.y)},overwrite:!0}),L.gsap.to(o.current,{opacity:0,duration:.25,overwrite:!0})},onPointerLeave:()=>{L.gsap.to(o.current,{opacity:1,duration:g,overwrite:!0})},children:[(0,l.jsx)("div",{ref:o,className:"chroma-grid-fade"}),i&&(0,l.jsx)("button",{className:"chroma-grid-close",onClick:i,"aria-label":"Close personas",children:"×"}),(0,l.jsx)("div",{className:"chroma-grid-content",children:s.map((a,b)=>{let c=k===a.title;return(0,l.jsxs)("article",{className:`chroma-grid-card ${c?"selected":""}`,onMouseMove:t,onClick:()=>{a.url&&"#"!==a.url?window.open(a.url,"_blank","noopener,noreferrer"):j&&(j(a),console.log("Selected persona:",a.title))},style:{"--border-color":a.borderColor||"#e5e5e5","--card-gradient":a.gradient||"linear-gradient(135deg, #e5e5e5, #000)",cursor:a.url&&"#"!==a.url?"pointer":"default"},children:[c&&(0,l.jsx)("div",{className:"chroma-grid-selected-indicator",children:(0,l.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"11",fill:a.borderColor||"#e5e5e5"}),(0,l.jsx)("path",{d:"M7 12L10.5 15.5L17 9",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,l.jsx)("img",{src:a.image,alt:a.title,className:"chroma-grid-avatar",loading:"lazy"}),(0,l.jsx)("h3",{className:"chroma-grid-title",children:a.title}),(0,l.jsx)("p",{className:"chroma-grid-subtitle",children:a.subtitle}),a.handle&&(0,l.jsx)("span",{className:"chroma-grid-handle",children:a.handle})]},b)})})]})})};var dx=a.i(71025),dy=a.i(97377),dz=a.i(8927);let dA=new dy.Mat4,dB=new dz.Vec3,dC=new dz.Vec3;class dD extends dx.Transform{constructor(a,{near:b=.1,far:c=100,fov:d=45,aspect:e=1,left:f,right:g,bottom:h,top:i,zoom:j=1}={}){super(),Object.assign(this,{near:b,far:c,fov:d,aspect:e,left:f,right:g,bottom:h,top:i,zoom:j}),this.projectionMatrix=new dy.Mat4,this.viewMatrix=new dy.Mat4,this.projectionViewMatrix=new dy.Mat4,this.worldPosition=new dz.Vec3,this.type=f||g?"orthographic":"perspective","orthographic"===this.type?this.orthographic():this.perspective()}perspective({near:a=this.near,far:b=this.far,fov:c=this.fov,aspect:d=this.aspect}={}){return Object.assign(this,{near:a,far:b,fov:c,aspect:d}),this.projectionMatrix.fromPerspective({fov:Math.PI/180*c,aspect:d,near:a,far:b}),this.type="perspective",this}orthographic({near:a=this.near,far:b=this.far,left:c=this.left||-1,right:d=this.right||1,bottom:e=this.bottom||-1,top:f=this.top||1,zoom:g=this.zoom}={}){return Object.assign(this,{near:a,far:b,left:c,right:d,bottom:e,top:f,zoom:g}),c/=g,d/=g,e/=g,f/=g,this.projectionMatrix.fromOrthogonal({left:c,right:d,bottom:e,top:f,near:a,far:b}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}updateProjectionMatrix(){return"perspective"===this.type?this.perspective():this.orthographic()}lookAt(a){return super.lookAt(a,!0),this}project(a){return a.applyMatrix4(this.viewMatrix),a.applyMatrix4(this.projectionMatrix),this}unproject(a){return a.applyMatrix4(dA.inverse(this.projectionMatrix)),a.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new dz.Vec3,new dz.Vec3,new dz.Vec3,new dz.Vec3,new dz.Vec3,new dz.Vec3]);let a=this.projectionViewMatrix;this.frustum[0].set(a[3]-a[0],a[7]-a[4],a[11]-a[8]).constant=a[15]-a[12],this.frustum[1].set(a[3]+a[0],a[7]+a[4],a[11]+a[8]).constant=a[15]+a[12],this.frustum[2].set(a[3]+a[1],a[7]+a[5],a[11]+a[9]).constant=a[15]+a[13],this.frustum[3].set(a[3]-a[1],a[7]-a[5],a[11]-a[9]).constant=a[15]-a[13],this.frustum[4].set(a[3]-a[2],a[7]-a[6],a[11]-a[10]).constant=a[15]-a[14],this.frustum[5].set(a[3]+a[2],a[7]+a[6],a[11]+a[10]).constant=a[15]+a[14];for(let a=0;a<6;a++){let b=1/this.frustum[a].distance();this.frustum[a].multiply(b),this.frustum[a].constant*=b}}frustumIntersectsMesh(a,b=a.worldMatrix){if(!a.geometry.attributes.position||(a.geometry.bounds&&a.geometry.bounds.radius!==1/0||a.geometry.computeBoundingSphere(),!a.geometry.bounds))return!0;dB.copy(a.geometry.bounds.center),dB.applyMatrix4(b);let c=a.geometry.bounds.radius*b.getMaxScaleOnAxis();return this.frustumIntersectsSphere(dB,c)}frustumIntersectsSphere(a,b){for(let c=0;c<6;c++){let d=this.frustum[c];if(dC.copy(d).dot(a)+d.constant<-b)return!1}return!0}}var dE=a.i(28941),dF=a.i(72652);class dG extends dF.Geometry{constructor(a,{width:b=1,height:c=1,widthSegments:d=1,heightSegments:e=1,attributes:f={}}={}){const g=(d+1)*(e+1),h=d*e*6,i=new Float32Array(3*g),j=new Float32Array(3*g),k=new Float32Array(2*g),l=h>65536?new Uint32Array(h):new Uint16Array(h);dG.buildPlane(i,j,k,l,b,c,0,d,e),Object.assign(f,{position:{size:3,data:i},normal:{size:3,data:j},uv:{size:2,data:k},index:{data:l}}),super(a,f)}static buildPlane(a,b,c,d,e,f,g,h,i,j=0,k=1,l=2,m=1,n=-1,o=0,p=0){let q=o,r=e/h,s=f/i;for(let t=0;t<=i;t++){let u=t*s-f/2;for(let f=0;f<=h;f++,o++){let s=f*r-e/2;if(a[3*o+j]=s*m,a[3*o+k]=u*n,a[3*o+l]=g/2,b[3*o+j]=0,b[3*o+k]=0,b[3*o+l]=g>=0?1:-1,c[2*o]=f/h,c[2*o+1]=1-t/i,t===i||f===h)continue;let v=q+f+t*(h+1),w=q+f+(t+1)*(h+1),x=q+f+(t+1)*(h+1)+1,y=q+f+t*(h+1)+1;d[6*p]=v,d[6*p+1]=w,d[6*p+2]=y,d[6*p+3]=w,d[6*p+4]=x,d[6*p+5]=y,p++}}}}var dH=a.i(37263),dI=a.i(65133);let dJ=new Uint8Array(4),dK=1;class dL{constructor(a,{image:b,target:c=a.TEXTURE_2D,type:d=a.UNSIGNED_BYTE,format:e=a.RGBA,internalFormat:f=e,wrapS:g=a.CLAMP_TO_EDGE,wrapT:h=a.CLAMP_TO_EDGE,wrapR:i=a.CLAMP_TO_EDGE,generateMipmaps:j=c===(a.TEXTURE_2D||a.TEXTURE_CUBE_MAP),minFilter:k=j?a.NEAREST_MIPMAP_LINEAR:a.LINEAR,magFilter:l=a.LINEAR,premultiplyAlpha:m=!1,unpackAlignment:n=4,flipY:o=c==(a.TEXTURE_2D||a.TEXTURE_3D),anisotropy:p=0,level:q=0,width:r,height:s=r,length:t=1}={}){this.gl=a,this.id=dK++,this.image=b,this.target=c,this.type=d,this.format=e,this.internalFormat=f,this.minFilter=k,this.magFilter=l,this.wrapS=g,this.wrapT=h,this.wrapR=i,this.generateMipmaps=j,this.premultiplyAlpha=m,this.unpackAlignment=n,this.flipY=o,this.anisotropy=Math.min(p,this.gl.renderer.parameters.maxAnisotropy),this.level=q,this.width=r,this.height=s,this.length=t,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0}bind(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}update(a=0){let b=!(this.image===this.store.image&&!this.needsUpdate);if((b||this.glState.textureUnits[a]!==this.id)&&(this.gl.renderer.activeTexture(a),this.bind()),b){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.wrapR!==this.state.wrapR&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_R,this.wrapR),this.state.wrapR=this.wrapR),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(let a=0;a<6;a++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+a,this.level,this.internalFormat,this.format,this.type,this.image[a]);else if(ArrayBuffer.isView(this.image))this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image):(this.target===this.gl.TEXTURE_2D_ARRAY||this.target===this.gl.TEXTURE_3D)&&this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(let a=0;a<this.image.length;a++)this.gl.compressedTexImage2D(this.target,a,this.internalFormat,this.image[a].width,this.image[a].height,0,this.image[a].data);else this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image):this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,this.image);if(this.generateMipmaps){var c,d;this.gl.renderer.isWebgl2||((c=this.image.width)&c-1)==0&&((d=this.image.height)&d-1)==0?this.gl.generateMipmap(this.target):(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR)}this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(let a=0;a<6;a++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,dJ);else this.width?this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,dJ);this.store.image=this.image}}}class dM{gl;plane;renderer;text;textColor;font;mesh;constructor({gl:a,plane:b,renderer:c,text:d,textColor:e="#545050",font:f="30px sans-serif"}){!function(a){Object.getOwnPropertyNames(Object.getPrototypeOf(a)).forEach(b=>{"constructor"!==b&&"function"==typeof a[b]&&(a[b]=a[b].bind(a))})}(this),this.gl=a,this.plane=b,this.renderer=c,this.text=d,this.textColor=e,this.font=f,this.createMesh()}createMesh(){let{texture:a,width:b,height:c}=function(a,b,c="bold 30px monospace",d="black"){let e,f=document.createElement("canvas"),g=f.getContext("2d");if(!g)throw Error("Could not get 2d context");g.font=c;let h=Math.ceil(g.measureText(b).width),i=Math.ceil(1.2*((e=c.match(/(\d+)px/))?parseInt(e[1],10):30));f.width=h+20,f.height=i+20,g.font=c,g.fillStyle=d,g.textBaseline="middle",g.textAlign="center",g.clearRect(0,0,f.width,f.height),g.fillText(b,f.width/2,f.height/2);let j=new dL(a,{generateMipmaps:!1});return j.image=f,{texture:j,width:f.width,height:f.height}}(this.gl,this.text,this.font,this.textColor),d=new dG(this.gl),e=new dH.Program(this.gl,{vertex:`
        attribute vec3 position;
        attribute vec2 uv;
        uniform mat4 modelViewMatrix;
        uniform mat4 projectionMatrix;
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,fragment:`
        precision highp float;
        uniform sampler2D tMap;
        varying vec2 vUv;
        void main() {
          vec4 color = texture2D(tMap, vUv);
          if (color.a < 0.1) discard;
          gl_FragColor = color;
        }
      `,uniforms:{tMap:{value:a}},transparent:!0});this.mesh=new dE.Mesh(this.gl,{geometry:d,program:e});let f=.15*this.plane.scale.y;this.mesh.scale.set(b/c*f,f,1),this.mesh.position.y=-(.5*this.plane.scale.y)-.5*f-.05,this.mesh.setParent(this.plane)}}class dN{extra=0;geometry;gl;image;index;length;renderer;scene;screen;text;viewport;bend;textColor;borderRadius;font;program;plane;title;scale;padding;width;widthTotal;x;speed=0;isBefore=!1;isAfter=!1;constructor({geometry:a,gl:b,image:c,index:d,length:e,renderer:f,scene:g,screen:h,text:i,viewport:j,bend:k,textColor:l,borderRadius:m=0,font:n}){this.geometry=a,this.gl=b,this.image=c,this.index=d,this.length=e,this.renderer=f,this.scene=g,this.screen=h,this.text=i,this.viewport=j,this.bend=k,this.textColor=l,this.borderRadius=m,this.font=n,this.createShader(),this.createMesh(),this.createTitle(),this.onResize()}createShader(){let a=new dL(this.gl,{generateMipmaps:!0});this.program=new dH.Program(this.gl,{depthTest:!1,depthWrite:!1,vertex:`
        precision highp float;
        attribute vec3 position;
        attribute vec2 uv;
        uniform mat4 modelViewMatrix;
        uniform mat4 projectionMatrix;
        uniform float uTime;
        uniform float uSpeed;
        varying vec2 vUv;
        void main() {
          vUv = uv;
          vec3 p = position;
          p.z = (sin(p.x * 4.0 + uTime) * 1.5 + cos(p.y * 2.0 + uTime) * 1.5) * (0.1 + uSpeed * 0.5);
          gl_Position = projectionMatrix * modelViewMatrix * vec4(p, 1.0);
        }
      `,fragment:`
        precision highp float;
        uniform vec2 uImageSizes;
        uniform vec2 uPlaneSizes;
        uniform sampler2D tMap;
        uniform float uBorderRadius;
        varying vec2 vUv;
        
        float roundedBoxSDF(vec2 p, vec2 b, float r) {
          vec2 d = abs(p) - b;
          return length(max(d, vec2(0.0))) + min(max(d.x, d.y), 0.0) - r;
        }
        
        void main() {
          vec2 ratio = vec2(
            min((uPlaneSizes.x / uPlaneSizes.y) / (uImageSizes.x / uImageSizes.y), 1.0),
            min((uPlaneSizes.y / uPlaneSizes.x) / (uImageSizes.y / uImageSizes.x), 1.0)
          );
          vec2 uv = vec2(
            vUv.x * ratio.x + (1.0 - ratio.x) * 0.5,
            vUv.y * ratio.y + (1.0 - ratio.y) * 0.5
          );
          vec4 color = texture2D(tMap, uv);
          
          float d = roundedBoxSDF(vUv - 0.5, vec2(0.5 - uBorderRadius), uBorderRadius);
          
          float edgeSmooth = 0.002;
          float alpha = 1.0 - smoothstep(-edgeSmooth, edgeSmooth, d);
          
          gl_FragColor = vec4(color.rgb, alpha);
        }
      `,uniforms:{tMap:{value:a},uPlaneSizes:{value:[0,0]},uImageSizes:{value:[0,0]},uSpeed:{value:0},uTime:{value:100*Math.random()},uBorderRadius:{value:this.borderRadius}},transparent:!0});let b=new Image;b.crossOrigin="anonymous",b.src=this.image,b.onload=()=>{a.image=b,this.program.uniforms.uImageSizes.value=[b.naturalWidth,b.naturalHeight]}}createMesh(){this.plane=new dE.Mesh(this.gl,{geometry:this.geometry,program:this.program}),this.plane.setParent(this.scene)}createTitle(){this.title=new dM({gl:this.gl,plane:this.plane,renderer:this.renderer,text:this.text,textColor:this.textColor,font:this.font})}update(a,b){this.plane.position.x=this.x-a.current-this.extra;let c=this.plane.position.x,d=this.viewport.width/2;if(0===this.bend)this.plane.position.y=0,this.plane.rotation.z=0;else{let a=Math.abs(this.bend),b=(d*d+a*a)/(2*a),e=Math.min(Math.abs(c),d),f=b-Math.sqrt(b*b-e*e);this.bend>0?(this.plane.position.y=-f,this.plane.rotation.z=-Math.sign(c)*Math.asin(e/b)):(this.plane.position.y=f,this.plane.rotation.z=Math.sign(c)*Math.asin(e/b))}this.speed=a.current-a.last,this.program.uniforms.uTime.value+=.04,this.program.uniforms.uSpeed.value=this.speed;let e=this.plane.scale.x/2,f=this.viewport.width/2;this.isBefore=this.plane.position.x+e<-f,this.isAfter=this.plane.position.x-e>f,"right"===b&&this.isBefore&&(this.extra-=this.widthTotal,this.isBefore=this.isAfter=!1),"left"===b&&this.isAfter&&(this.extra+=this.widthTotal,this.isBefore=this.isAfter=!1)}onResize({screen:a,viewport:b}={}){a&&(this.screen=a),b&&(this.viewport=b,this.plane.program.uniforms.uViewportSizes&&(this.plane.program.uniforms.uViewportSizes.value=[this.viewport.width,this.viewport.height])),this.scale=this.screen.height/1500,this.plane.scale.y=this.viewport.height*(900*this.scale)/this.screen.height,this.plane.scale.x=this.viewport.width*(700*this.scale)/this.screen.width,this.plane.program.uniforms.uPlaneSizes.value=[this.plane.scale.x,this.plane.scale.y],this.padding=2,this.width=this.plane.scale.x+this.padding,this.widthTotal=this.width*this.length,this.x=this.width*this.index}}class dO{container;scrollSpeed;scroll;onCheckDebounce;renderer;gl;camera;scene;planeGeometry;medias=[];mediasImages=[];screen;viewport;raf=0;boundOnResize;boundOnWheel;boundOnTouchDown;boundOnTouchMove;boundOnTouchUp;isDown=!1;start=0;constructor(a,{items:b,bend:c=1,textColor:d="#ffffff",borderRadius:e=0,font:f="bold 30px Figtree",scrollSpeed:g=2,scrollEase:h=.05}){document.documentElement.classList.remove("no-js"),this.container=a,this.scrollSpeed=g,this.scroll={ease:h,current:0,target:0,last:0},this.onCheckDebounce=function(a,b){let c;return function(...b){window.clearTimeout(c),c=window.setTimeout(()=>a.apply(this,b),200)}}(this.onCheck.bind(this),0),this.createRenderer(),this.createCamera(),this.createScene(),this.onResize(),this.createGeometry(),this.createMedias(b,c,d,e,f),this.update(),this.addEventListeners()}createRenderer(){this.renderer=new dI.Renderer({alpha:!0,antialias:!0,dpr:Math.min(window.devicePixelRatio||1,2)}),this.gl=this.renderer.gl,this.gl.clearColor(0,0,0,0),this.container.appendChild(this.renderer.gl.canvas)}createCamera(){this.camera=new dD(this.gl),this.camera.fov=45,this.camera.position.z=20}createScene(){this.scene=new dx.Transform}createGeometry(){this.planeGeometry=new dG(this.gl,{heightSegments:50,widthSegments:100})}createMedias(a,b=1,c,d,e){let f=a&&a.length?a:[{image:"https://picsum.photos/seed/1/800/600?grayscale",text:"Bridge"},{image:"https://picsum.photos/seed/2/800/600?grayscale",text:"Desk Setup"},{image:"https://picsum.photos/seed/3/800/600?grayscale",text:"Waterfall"},{image:"https://picsum.photos/seed/4/800/600?grayscale",text:"Strawberries"},{image:"https://picsum.photos/seed/5/800/600?grayscale",text:"Deep Diving"},{image:"https://picsum.photos/seed/16/800/600?grayscale",text:"Train Track"},{image:"https://picsum.photos/seed/17/800/600?grayscale",text:"Santorini"},{image:"https://picsum.photos/seed/8/800/600?grayscale",text:"Blurry Lights"},{image:"https://picsum.photos/seed/9/800/600?grayscale",text:"New York"},{image:"https://picsum.photos/seed/10/800/600?grayscale",text:"Good Boy"},{image:"https://picsum.photos/seed/21/800/600?grayscale",text:"Coastline"},{image:"https://picsum.photos/seed/12/800/600?grayscale",text:"Palm Trees"}];this.mediasImages=f.concat(f),this.medias=this.mediasImages.map((a,f)=>new dN({geometry:this.planeGeometry,gl:this.gl,image:a.image,index:f,length:this.mediasImages.length,renderer:this.renderer,scene:this.scene,screen:this.screen,text:a.text,viewport:this.viewport,bend:b,textColor:c,borderRadius:d,font:e}))}onTouchDown(a){this.isDown=!0,this.scroll.position=this.scroll.current,this.start="touches"in a?a.touches[0].clientX:a.clientX}onTouchMove(a){if(!this.isDown)return;let b="touches"in a?a.touches[0].clientX:a.clientX,c=(this.start-b)*(.025*this.scrollSpeed);this.scroll.target=(this.scroll.position??0)+c}onTouchUp(){this.isDown=!1,this.onCheck()}onWheel(a){let b=a.deltaY||a.wheelDelta||a.detail;this.scroll.target+=(b>0?this.scrollSpeed:-this.scrollSpeed)*.2,this.onCheckDebounce()}onCheck(){if(!this.medias||!this.medias[0])return;let a=this.medias[0].width,b=Math.round(Math.abs(this.scroll.target)/a),c=a*b;this.scroll.target=this.scroll.target<0?-c:c}onResize(){this.screen={width:this.container.clientWidth,height:this.container.clientHeight},this.renderer.setSize(this.screen.width,this.screen.height),this.camera.perspective({aspect:this.screen.width/this.screen.height});let a=2*Math.tan(this.camera.fov*Math.PI/180/2)*this.camera.position.z,b=a*this.camera.aspect;this.viewport={width:b,height:a},this.medias&&this.medias.forEach(a=>a.onResize({screen:this.screen,viewport:this.viewport}))}update(){var a;this.scroll.current=(a=this.scroll.current,a+(this.scroll.target-a)*this.scroll.ease);let b=this.scroll.current>this.scroll.last?"right":"left";this.medias&&this.medias.forEach(a=>a.update(this.scroll,b)),this.renderer.render({scene:this.scene,camera:this.camera}),this.scroll.last=this.scroll.current,this.raf=window.requestAnimationFrame(this.update.bind(this))}addEventListeners(){this.boundOnResize=this.onResize.bind(this),this.boundOnWheel=this.onWheel.bind(this),this.boundOnTouchDown=this.onTouchDown.bind(this),this.boundOnTouchMove=this.onTouchMove.bind(this),this.boundOnTouchUp=this.onTouchUp.bind(this),window.addEventListener("resize",this.boundOnResize),window.addEventListener("mousewheel",this.boundOnWheel),window.addEventListener("wheel",this.boundOnWheel),window.addEventListener("mousedown",this.boundOnTouchDown),window.addEventListener("mousemove",this.boundOnTouchMove),window.addEventListener("mouseup",this.boundOnTouchUp),window.addEventListener("touchstart",this.boundOnTouchDown),window.addEventListener("touchmove",this.boundOnTouchMove),window.addEventListener("touchend",this.boundOnTouchUp)}destroy(){window.cancelAnimationFrame(this.raf),window.removeEventListener("resize",this.boundOnResize),window.removeEventListener("mousewheel",this.boundOnWheel),window.removeEventListener("wheel",this.boundOnWheel),window.removeEventListener("mousedown",this.boundOnTouchDown),window.removeEventListener("mousemove",this.boundOnTouchMove),window.removeEventListener("mouseup",this.boundOnTouchUp),window.removeEventListener("touchstart",this.boundOnTouchDown),window.removeEventListener("touchmove",this.boundOnTouchMove),window.removeEventListener("touchend",this.boundOnTouchUp),this.renderer&&this.renderer.gl&&this.renderer.gl.canvas.parentNode&&this.renderer.gl.canvas.parentNode.removeChild(this.renderer.gl.canvas)}}function dP({items:a,bend:b=3,textColor:c="#ffffff",borderRadius:d=.05,font:e="bold 30px Figtree",scrollSpeed:f=2,scrollEase:g=.02}){let h=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(!h.current)return;let i=new dO(h.current,{items:a,bend:b,textColor:c,borderRadius:d,font:e,scrollSpeed:f,scrollEase:g});return()=>{i.destroy()}},[a,b,c,d,e,f,g]),(0,l.jsx)("div",{className:"circular-gallery",ref:h})}function dQ({conversations:a,currentConversationId:b,onSelectConversation:c,onNewConversation:d,onDeleteConversation:e,isOpen:f,onClose:g}){let[h,i]=(0,n.useState)(null);(0,n.useEffect)(()=>{let a=a=>{"Escape"===a.key&&f&&g()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[f,g]);let j=async(a,b)=>{a.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&(i(b),await e(b),i(null))};return(0,l.jsxs)(l.Fragment,{children:[f&&(0,l.jsx)("div",{className:"sidebar-backdrop",onClick:g}),(0,l.jsxs)("div",{className:`conversation-sidebar ${f?"open":""}`,children:[(0,l.jsxs)("div",{className:"sidebar-header",children:[(0,l.jsx)("h2",{className:"sidebar-title",children:"Conversations"}),(0,l.jsx)("button",{className:"sidebar-close-btn",onClick:g,"aria-label":"Close sidebar",children:"✕"})]}),(0,l.jsxs)("button",{className:"new-conversation-btn",onClick:()=>{d(),g()},children:[(0,l.jsx)("span",{className:"new-conversation-icon",children:"+"}),"New Conversation"]}),(0,l.jsx)("div",{className:"conversations-list",children:0===a.length?(0,l.jsxs)("div",{className:"empty-state",children:[(0,l.jsx)("p",{children:"No conversations yet"}),(0,l.jsx)("p",{className:"empty-state-hint",children:"Start chatting to create one!"})]}):a.map(a=>{let d,e,f,i,k;return(0,l.jsxs)("div",{className:`conversation-item ${a.id===b?"active":""} ${h===a.id?"deleting":""}`,onClick:()=>{c(a.id),g()},children:[(0,l.jsxs)("div",{className:"conversation-info",children:[(0,l.jsx)("div",{className:"conversation-title",children:a.title}),(0,l.jsxs)("div",{className:"conversation-meta",children:[(0,l.jsx)("span",{className:"conversation-model",children:a.model}),(0,l.jsx)("span",{className:"conversation-date",children:(d=new Date(a.updated_at),f=Math.floor((e=new Date().getTime()-d.getTime())/6e4),i=Math.floor(e/36e5),k=Math.floor(e/864e5),f<1?"Just now":f<60?`${f}m ago`:i<24?`${i}h ago`:k<7?`${k}d ago`:d.toLocaleDateString())})]})]}),(0,l.jsx)("button",{className:"delete-conversation-btn",onClick:b=>j(b,a.id),"aria-label":"Delete conversation",disabled:h===a.id,children:h===a.id?"...":"🗑️"})]},a.id)})})]})]})}function dR(){let[a,b]=(0,n.useState)([]),c=(0,n.useRef)(null);(0,n.useEffect)(()=>{d();let a=setInterval(d,3e4);return()=>clearInterval(a)},[]);let d=()=>{let a=["Alex414","SamantaGlory","Pirateboy","tomandjarry","DataNinja","CodeWizard","AIEnthusiast","TechSavvy","PixelMaster","DevGuru","CloudRider","ByteHunter","CyberPhoenix","QuantumLeap","NeonDreamer","SyntaxKing","LogicLord","BinaryBoss","ScriptMage","DigitalDuke","AlgoAce","MatrixMind","VirtualVoyager","CryptoChamp","WebWarrior","CodeCrusader","TechTitan","PixelPirate","DataDragon","CloudChaser","ByteBender","CyberSamurai","QuantumQuest","NeonNinja","SyntaxSage","LogicLegend","BinaryBard","ScriptSensei","DigitalDynamo","AlgoArchitect","MatrixMaverick"],c=["just trained a Custom Omi","just chatted with Omi Chat","just generated a new image in the Media Studio","just Upgraded to the Pro Plan!","just created a new AI Workflow","just generated a stunning video","just completed a deep web search","just customized their AI assistant","just exported media from the gallery","just discovered a new feature","just integrated an API","just automated a complex task","just analyzed data with AI","just created research content","just generated code snippets","just trained a specialized model","just built a business workflow","just designed a creative project","just optimized their AI settings","just shared their Custom Omi","just completed an AI task","just explored the Command Hub","just unlocked advanced features","just personalized their workspace","just generated multiple images","just created AI-powered content","just enhanced their workflow","just automated data processing","just built an intelligent system","just mastered a new AI tool"],d=[];for(let b=0;b<40;b++){let b=a[Math.floor(Math.random()*a.length)],e=c[Math.floor(Math.random()*c.length)],f=Math.floor(60*Math.random())+1;d.push({username:b,action:e,timestamp:new Date(Date.now()-6e4*f).toISOString()})}b(d)};return 0===a.length?(0,l.jsx)("div",{className:"news-ticker",children:(0,l.jsxs)("div",{className:"news-ticker-container",children:[(0,l.jsxs)("div",{className:"news-ticker-label",children:[(0,l.jsx)("span",{className:"ticker-icon",children:"◈"}),(0,l.jsx)("span",{children:"LIVE ACTIVITY"})]}),(0,l.jsx)("div",{className:"news-ticker-content loading",children:(0,l.jsx)("span",{children:"Loading user activity..."})})]})}):(0,l.jsx)("div",{className:"news-ticker",children:(0,l.jsxs)("div",{className:"news-ticker-container",children:[(0,l.jsxs)("div",{className:"news-ticker-label",children:[(0,l.jsx)("span",{className:"ticker-icon",children:"◈"}),(0,l.jsx)("span",{children:"LIVE ACTIVITY"})]}),(0,l.jsx)("div",{className:"news-ticker-content",ref:c,children:(0,l.jsx)("div",{className:"news-ticker-track",children:[...a,...a].map((a,b)=>{let c,d,e,f;return(0,l.jsxs)("div",{className:"news-item",children:[(0,l.jsx)("span",{className:"news-bullet",children:"●"}),(0,l.jsx)("span",{className:"activity-username",children:a.username}),(0,l.jsx)("span",{className:"activity-action",children:a.action}),(0,l.jsx)("span",{className:"news-meta",children:(0,l.jsx)("span",{className:"news-time",children:(c=new Date(a.timestamp),f=Math.floor((e=Math.floor((d=Math.floor((new Date().getTime()-c.getTime())/6e4))/60))/24),d<1?"just now":d<60?`${d}m ago`:e<24?`${e}h ago`:`${f}d ago`)})})]},b)})})})]})})}var dS=a.i(59696);async function dT(a,b,c,d){try{let{error:e}=await dS.supabase.from("generated_media").insert([{user_id:a,type:b,url:c,prompt:d,created_at:new Date().toISOString()}]);if(e)return console.error("Error saving media:",e),!1;return!0}catch(a){return console.error("Error saving media:",a),!1}}async function dU(a){try{let{data:b,error:c}=await dS.supabase.from("generated_media").select("*").eq("user_id",a).order("created_at",{ascending:!1});if(c)return console.error("Error fetching media:",c),[];return b||[]}catch(a){return console.error("Error fetching media:",a),[]}}async function dV(a){try{let{error:b}=await dS.supabase.from("generated_media").delete().eq("id",a);if(b)return console.error("Error deleting media:",b),!1;return!0}catch(a){return console.error("Error deleting media:",a),!1}}function dW({isOpen:a,onClose:b,userId:c}){let[d,e]=(0,n.useState)([]),[f,g]=(0,n.useState)(!0),[h,i]=(0,n.useState)("all"),[j,k]=(0,n.useState)(null);(0,n.useEffect)(()=>{a&&c&&(console.log("📥 Loading media for user:",c),m())},[a,c]),(0,n.useEffect)(()=>{a&&c&&m()},[a]);let m=async()=>{if(!c){console.warn("⚠️ No userId provided to MediaGallery"),g(!1);return}g(!0);let a=await dU(c);console.log("📸 Loaded media items:",a.length),e(a),g(!1)},o=async a=>{!confirm("Are you sure you want to delete this item?")||await dV(a)&&(e(d.filter(b=>b.id!==a)),j?.id===a&&k(null))},p="all"===h?d:d.filter(a=>a.type===h);return a?(0,l.jsx)("div",{className:"media-gallery-overlay",onClick:b,children:(0,l.jsxs)("div",{className:"media-gallery-modal",onClick:a=>a.stopPropagation(),children:[(0,l.jsxs)("div",{className:"media-gallery-header",children:[(0,l.jsx)("h2",{children:"Your Generated Media"}),(0,l.jsx)("button",{className:"close-btn",onClick:b,children:"✕"})]}),(0,l.jsxs)("div",{className:"media-gallery-filters",children:[(0,l.jsxs)("button",{className:`filter-btn ${"all"===h?"active":""}`,onClick:()=>i("all"),children:["All (",d.length,")"]}),(0,l.jsxs)("button",{className:`filter-btn ${"image"===h?"active":""}`,onClick:()=>i("image"),children:["Images (",d.filter(a=>"image"===a.type).length,")"]}),(0,l.jsxs)("button",{className:`filter-btn ${"video"===h?"active":""}`,onClick:()=>i("video"),children:["Videos (",d.filter(a=>"video"===a.type).length,")"]})]}),(0,l.jsx)("div",{className:"media-gallery-content",children:f?(0,l.jsxs)("div",{className:"loading-state",children:[(0,l.jsx)("div",{className:"spinner"}),(0,l.jsx)("p",{children:"Loading your media..."})]}):0===p.length?(0,l.jsxs)("div",{className:"empty-state",children:[(0,l.jsx)("div",{className:"empty-icon",children:"📁"}),(0,l.jsxs)("p",{children:["No ","all"!==h?h+"s":"media"," yet"]}),(0,l.jsx)("p",{className:"empty-hint",children:"Generate images and videos in the AI Media Studio to see them here"})]}):(0,l.jsx)("div",{className:"media-grid",children:p.map(a=>(0,l.jsxs)("div",{className:"media-card",children:[(0,l.jsxs)("div",{className:"media-preview",onClick:()=>k(a),children:["image"===a.type?(0,l.jsx)("img",{src:a.url,alt:a.prompt,loading:"lazy",onError:b=>{console.error("Failed to load image:",a.url),b.currentTarget.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300"%3E%3Crect fill="%23111" width="400" height="300"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" fill="%23666" font-size="16"%3EImage unavailable%3C/text%3E%3C/svg%3E'}}):(0,l.jsx)("video",{src:a.url,onError:()=>{console.error("Failed to load video:",a.url)}}),(0,l.jsx)("div",{className:"media-overlay",children:(0,l.jsx)("span",{className:"media-type-badge",children:"image"===a.type?"🖼️":"🎬"})})]}),(0,l.jsxs)("div",{className:"media-card-footer",children:[(0,l.jsx)("p",{className:"media-prompt",title:a.prompt,children:a.prompt}),(0,l.jsxs)("div",{className:"media-card-actions",children:[(0,l.jsx)("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"media-action-btn",title:"Open",children:"🔗"}),(0,l.jsx)("button",{className:"media-action-btn delete-btn",onClick:()=>o(a.id),title:"Delete",children:"🗑️"})]})]})]},a.id))})}),j&&(0,l.jsx)("div",{className:"media-lightbox",onClick:()=>k(null),children:(0,l.jsxs)("div",{className:"lightbox-content",onClick:a=>a.stopPropagation(),children:[(0,l.jsx)("button",{className:"lightbox-close",onClick:()=>k(null),children:"✕"}),"image"===j.type?(0,l.jsx)("img",{src:j.url,alt:j.prompt,onError:a=>{console.error("Failed to load image in lightbox:",j.url),a.currentTarget.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600"%3E%3Crect fill="%23111" width="800" height="600"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" fill="%23666" font-size="24"%3EImage unavailable%3C/text%3E%3C/svg%3E'}}):(0,l.jsx)("video",{src:j.url,controls:!0,autoPlay:!0,onError:()=>{console.error("Failed to load video in lightbox:",j.url)}}),(0,l.jsxs)("div",{className:"lightbox-info",children:[(0,l.jsx)("p",{className:"lightbox-prompt",children:j.prompt}),(0,l.jsx)("p",{className:"lightbox-date",children:new Date(j.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})})]})}):null}function dX({isOpen:a,onClose:b}){let[c,d]=(0,n.useState)(""),[e,f]=(0,n.useState)([]),[g,h]=(0,n.useState)(!1),i=(0,n.useRef)(null);(0,n.useEffect)(()=>{a&&i.current&&i.current.focus()},[a]),(0,n.useEffect)(()=>{let c=c=>{"Escape"===c.key&&a&&b()};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[a,b]);let j=[{type:"feature",title:"Omi Chat",description:"Conversational AI with advanced reasoning",icon:"💬",onClick:()=>{console.log("Navigate to Omi Chat"),b()}},{type:"feature",title:"Web Search",description:"Search the web with AI-powered insights",icon:"🌐",onClick:()=>{console.log("Navigate to Web Search"),b()}},{type:"feature",title:"Image Generation",description:"Create stunning visuals with AI",icon:"🎨",onClick:()=>{console.log("Navigate to Image Generation"),b()}},{type:"feature",title:"Video Generation",description:"Transform ideas into motion",icon:"🎬",onClick:()=>{console.log("Navigate to Video Generation"),b()}},{type:"feature",title:"Media Gallery",description:"View all your generated images and videos",icon:"⊞",onClick:()=>{console.log("Navigate to Media Gallery"),b()}},{type:"feature",title:"Settings",description:"Configure your preferences",icon:"⚙",onClick:()=>{console.log("Navigate to Settings"),b()}},{type:"feature",title:"Command Hub",description:"Access all tools and features",icon:"◆",onClick:()=>{console.log("Navigate to Command Hub"),b()}}];return((0,n.useEffect)(()=>{if(!c.trim()){f([]),h(!1);return}h(!0);let a=c.toLowerCase(),b=j.filter(b=>b.title.toLowerCase().includes(a)||b.description.toLowerCase().includes(a)),d=setTimeout(()=>{f(b),h(!1)},150);return()=>clearTimeout(d)},[c]),a)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"search-backdrop",onClick:b}),(0,l.jsxs)("div",{className:"search-modal",children:[(0,l.jsxs)("div",{className:"search-header",children:[(0,l.jsx)("div",{className:"search-icon",children:"🔍"}),(0,l.jsx)("input",{ref:i,type:"text",className:"search-input",placeholder:"Search features, conversations, or keywords...",value:c,onChange:a=>d(a.target.value),autoComplete:"off"}),(0,l.jsx)("button",{className:"search-close",onClick:b,children:"✕"})]}),(0,l.jsxs)("div",{className:"search-content",children:[!c&&(0,l.jsxs)("div",{className:"search-empty",children:[(0,l.jsx)("div",{className:"search-empty-icon",children:"🔎"}),(0,l.jsx)("p",{className:"search-empty-text",children:"Search across the entire app"}),(0,l.jsx)("p",{className:"search-empty-hint",children:"Try searching for features, conversations, or actions"})]}),g&&(0,l.jsxs)("div",{className:"search-loading",children:[(0,l.jsx)("div",{className:"search-spinner"}),(0,l.jsx)("p",{children:"Searching..."})]}),c&&!g&&0===e.length&&(0,l.jsxs)("div",{className:"search-no-results",children:[(0,l.jsx)("div",{className:"search-no-results-icon",children:"🔍"}),(0,l.jsx)("p",{className:"search-no-results-text",children:"No results found"}),(0,l.jsx)("p",{className:"search-no-results-hint",children:"Try a different search term"})]}),e.length>0&&(0,l.jsxs)("div",{className:"search-results",children:[(0,l.jsxs)("p",{className:"search-results-label",children:[e.length," result",1!==e.length?"s":""]}),e.map((a,b)=>(0,l.jsxs)("button",{className:"search-result-item",onClick:a.onClick,children:[(0,l.jsx)("div",{className:"search-result-icon",children:a.icon}),(0,l.jsxs)("div",{className:"search-result-content",children:[(0,l.jsx)("div",{className:"search-result-title",children:a.title}),(0,l.jsx)("div",{className:"search-result-description",children:a.description})]}),(0,l.jsx)("div",{className:"search-result-arrow",children:"→"})]},b))]})]}),(0,l.jsx)("div",{className:"search-footer",children:(0,l.jsxs)("div",{className:"search-shortcut",children:[(0,l.jsx)("kbd",{children:"ESC"})," to close"]})})]})]}):null}let dY=({isVisible:a})=>{let[b,c]=(0,n.useState)(0),d=["/images/samples/ai.jpg","/images/samples/sample2.jpg","/images/samples/little guy.png","/images/samples/overl.png"];return((0,n.useEffect)(()=>{if(!a)return;let b=setInterval(()=>{c(a=>(a+1)%d.length)},1500);return()=>clearInterval(b)},[a,d.length]),a)?(0,l.jsxs)("div",{className:"image-preview-tooltip",children:[(0,l.jsxs)("div",{className:"preview-content",children:[(0,l.jsx)("div",{className:"preview-text",children:"Real-time AI image generation"}),(0,l.jsx)("div",{className:"preview-carousel",children:d.map((a,c)=>(0,l.jsx)("img",{src:a,alt:`Sample ${c+1}`,className:`preview-image ${c===b?"active":""}`},c))}),(0,l.jsx)("div",{className:"preview-caption",children:"Type a prompt to generate stunning images"})]}),(0,l.jsx)("div",{className:"tooltip-arrow"})]}):null},dZ=({isVisible:a})=>{let[b,c]=(0,n.useState)(0),d=(0,n.useRef)(null),e=["/videos/vidpreview.mp4","/videos/dogclimb.mp4","/videos/matrixcode.mp4","/videos/rockbug.mp4"];return((0,n.useEffect)(()=>{if(!a){d.current&&d.current.pause();return}d.current&&d.current.play().catch(a=>{console.log("Video autoplay failed:",a)});let b=setInterval(()=>{c(a=>(a+1)%e.length)},4e3);return()=>clearInterval(b)},[a,e.length]),(0,n.useEffect)(()=>{if(d.current&&a){let a=d.current;console.log("Loading video:",e[b]);let c=()=>{console.log("Video can play:",e[b]),a.play().catch(a=>{console.log("Video autoplay failed:",a)})},f=()=>{console.error("Video load error:",e[b],a.error)};return a.addEventListener("canplay",c),a.addEventListener("error",f),a.load(),()=>{a.removeEventListener("canplay",c),a.removeEventListener("error",f)}}},[b,a,e]),a)?(0,l.jsxs)("div",{className:"video-preview-tooltip",children:[(0,l.jsxs)("div",{className:"preview-content",children:[(0,l.jsx)("div",{className:"preview-text",children:"Generate AI videos from text prompts"}),(0,l.jsxs)("div",{className:"preview-video-container",children:[(0,l.jsxs)("video",{ref:d,className:"preview-video",muted:!0,loop:!1,playsInline:!0,autoPlay:!0,preload:"auto",children:[(0,l.jsx)("source",{src:e[b],type:"video/mp4"}),"Your browser does not support the video tag."]},b),(0,l.jsx)("div",{className:"video-overlay-gradient"})]}),(0,l.jsx)("div",{className:"preview-caption",children:"Create stunning video content with AI"})]}),(0,l.jsx)("div",{className:"tooltip-arrow"})]}):null};var d$=a.i(41460);async function d_(a,b="New Conversation",c="Gemini Pro"){try{let{data:d,error:e}=await dS.supabase.from("conversations").insert({user_id:a,title:b,model:c}).select().single();if(e)return console.error("Error creating conversation:",e),null;return d}catch(a){return console.error("Error creating conversation:",a),null}}async function d0(a){try{let{data:b,error:c}=await dS.supabase.from("conversations").select("*").eq("user_id",a).order("updated_at",{ascending:!1});if(c)return console.error("Error fetching conversations:",c),[];return b||[]}catch(a){return console.error("Error fetching conversations:",a),[]}}async function d1(a){try{let{data:b,error:c}=await dS.supabase.from("messages").select("*").eq("conversation_id",a).order("timestamp",{ascending:!0});if(c)return console.error("Error fetching messages:",c),[];return b||[]}catch(a){return console.error("Error fetching messages:",a),[]}}async function d2(a,b,c){try{let{data:d,error:e}=await dS.supabase.from("messages").insert({conversation_id:a,role:b,content:c}).select().single();if(e)return console.error("Error saving message:",e),null;return await dS.supabase.from("conversations").update({updated_at:new Date().toISOString()}).eq("id",a),d}catch(a){return console.error("Error saving message:",a),null}}async function d3(a){try{let{error:b}=await dS.supabase.from("conversations").delete().eq("id",a);if(b)return console.error("Error deleting conversation:",b),!1;return!0}catch(a){return console.error("Error deleting conversation:",a),!1}}let d4=({children:a,color:b="#5227FF",speed:c=1,chaos:d=1,thickness:e=2,className:f,style:g})=>{let h=(0,n.useId)().replace(/[:]/g,""),i=`turbulent-displace-${h}`,j=(0,n.useRef)(null),k=(0,n.useRef)(null),m=(0,n.useRef)(null),o=()=>{let a=j.current,b=k.current;if(!a||!b)return;m.current&&(m.current.style.filter=`url(#${i})`);let e=Math.max(1,Math.round(b.clientWidth||b.getBoundingClientRect().width||0)),f=Math.max(1,Math.round(b.clientHeight||b.getBoundingClientRect().height||0)),g=Array.from(a.querySelectorAll('feOffset > animate[attributeName="dy"]'));g.length>=2&&(g[0].setAttribute("values",`${f}; 0`),g[1].setAttribute("values",`0; -${f}`));let h=Array.from(a.querySelectorAll('feOffset > animate[attributeName="dx"]'));h.length>=2&&(h[0].setAttribute("values",`${e}; 0`),h[1].setAttribute("values",`0; -${e}`));let l=Math.max(.001,6/(c||1));[...g,...h].forEach(a=>a.setAttribute("dur",`${l}s`));let n=a.querySelector("feDisplacementMap");n&&n.setAttribute("scale",String(30*(d||1)));let o=a.querySelector(`#${CSS.escape(i)}`);o&&(o.setAttribute("x","-200%"),o.setAttribute("y","-200%"),o.setAttribute("width","500%"),o.setAttribute("height","500%")),requestAnimationFrame(()=>{[...g,...h].forEach(a=>{if("function"==typeof a.beginElement)try{a.beginElement()}catch{console.warn("ElectricBorder: beginElement failed, this may be due to a browser limitation.")}})})};(0,n.useEffect)(()=>{o()},[c,d]),(0,n.useLayoutEffect)(()=>{if(!k.current)return;let a=new ResizeObserver(()=>o());return a.observe(k.current),o(),()=>a.disconnect()},[]);let p={"--electric-border-color":b,"--eb-border-width":`${e}px`};return(0,l.jsxs)("div",{ref:k,className:`electric-border ${f??""}`,style:{...p,...g},children:[(0,l.jsx)("svg",{ref:j,className:"eb-svg","aria-hidden":!0,focusable:"false",children:(0,l.jsx)("defs",{children:(0,l.jsxs)("filter",{id:i,colorInterpolationFilters:"sRGB",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[(0,l.jsx)("feTurbulence",{type:"turbulence",baseFrequency:"0.02",numOctaves:10,result:"noise1",seed:"1"}),(0,l.jsx)("feOffset",{in:"noise1",dx:"0",dy:"0",result:"offsetNoise1",children:(0,l.jsx)("animate",{attributeName:"dy",values:"700; 0",dur:"6s",repeatCount:"indefinite",calcMode:"linear"})}),(0,l.jsx)("feTurbulence",{type:"turbulence",baseFrequency:"0.02",numOctaves:10,result:"noise2",seed:"1"}),(0,l.jsx)("feOffset",{in:"noise2",dx:"0",dy:"0",result:"offsetNoise2",children:(0,l.jsx)("animate",{attributeName:"dy",values:"0; -700",dur:"6s",repeatCount:"indefinite",calcMode:"linear"})}),(0,l.jsx)("feTurbulence",{type:"turbulence",baseFrequency:"0.02",numOctaves:10,result:"noise1",seed:"2"}),(0,l.jsx)("feOffset",{in:"noise1",dx:"0",dy:"0",result:"offsetNoise3",children:(0,l.jsx)("animate",{attributeName:"dx",values:"490; 0",dur:"6s",repeatCount:"indefinite",calcMode:"linear"})}),(0,l.jsx)("feTurbulence",{type:"turbulence",baseFrequency:"0.02",numOctaves:10,result:"noise2",seed:"2"}),(0,l.jsx)("feOffset",{in:"noise2",dx:"0",dy:"0",result:"offsetNoise4",children:(0,l.jsx)("animate",{attributeName:"dx",values:"0; -490",dur:"6s",repeatCount:"indefinite",calcMode:"linear"})}),(0,l.jsx)("feComposite",{in:"offsetNoise1",in2:"offsetNoise2",result:"part1"}),(0,l.jsx)("feComposite",{in:"offsetNoise3",in2:"offsetNoise4",result:"part2"}),(0,l.jsx)("feBlend",{in:"part1",in2:"part2",mode:"color-dodge",result:"combinedNoise"}),(0,l.jsx)("feDisplacementMap",{in:"SourceGraphic",in2:"combinedNoise",scale:"30",xChannelSelector:"R",yChannelSelector:"B"})]})})}),(0,l.jsxs)("div",{className:"eb-layers",children:[(0,l.jsx)("div",{ref:m,className:"eb-stroke"}),(0,l.jsx)("div",{className:"eb-glow-1"}),(0,l.jsx)("div",{className:"eb-glow-2"}),(0,l.jsx)("div",{className:"eb-background-glow"})]}),(0,l.jsx)("div",{className:"eb-content",children:a})]})},d5=(0,a.i(3856).getBrowserSupabaseClient)(),d6=({isOpen:a,onClose:b,limitType:c,currentUsage:d,usageLimit:e,resetAt:f})=>{if(!a)return null;let g=async a=>{try{if("ultra"===a){window.location.href="https://buy.stripe.com/fZu14ndCtdVZfvf4Y8dfG0g";return}let{data:{user:b}}=await d5.auth.getUser();if(!b)return void alert("Please log in to upgrade");let c=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:b.id,email:b.email,plan:a})}),d=await c.json();if(d.url)window.location.href=d.url;else throw Error("No checkout URL returned")}catch(a){console.error("Error creating checkout:",a),alert("Failed to start checkout. Please try again.")}};return(0,l.jsx)("div",{className:"paywall-overlay",onClick:b,children:(0,l.jsxs)("div",{className:"paywall-modal",onClick:a=>a.stopPropagation(),children:[(0,l.jsx)("button",{className:"paywall-close",onClick:b,children:"×"}),(0,l.jsxs)("div",{className:"paywall-content",children:[(0,l.jsx)("h2",{className:"plans-title",children:"Choose Your Plan"}),(0,l.jsxs)("div",{className:"plans-container",children:[(0,l.jsxs)("div",{className:"pro-plan-card",children:[(0,l.jsx)("div",{className:"card-glow"}),(0,l.jsx)("div",{className:"card-border"}),(0,l.jsxs)("div",{className:"plan-header",children:[(0,l.jsx)("div",{className:"plan-icon-badge",children:(0,l.jsx)("div",{className:"icon-inner",children:"⚡"})}),(0,l.jsxs)("div",{className:"plan-title-group",children:[(0,l.jsx)("h3",{className:"plan-name",children:"OMI PRO"}),(0,l.jsx)("p",{className:"plan-subtitle",children:"Essential AI power"})]})]}),(0,l.jsxs)("div",{className:"plan-pricing",children:[(0,l.jsxs)("div",{className:"price-wrapper",children:[(0,l.jsx)("span",{className:"currency",children:"$"}),(0,l.jsx)("span",{className:"amount",children:"4.99"})]}),(0,l.jsx)("p",{className:"billing-text",children:"per month"})]}),(0,l.jsxs)("div",{className:"features-list",children:[(0,l.jsxs)("div",{className:"feature-item",children:[(0,l.jsx)("div",{className:"feature-icon-box",children:(0,l.jsx)("span",{className:"icon",children:"∞"})}),(0,l.jsx)("span",{className:"feature-text",children:"Unlimited AI Conversations"})]}),(0,l.jsxs)("div",{className:"feature-item",children:[(0,l.jsx)("div",{className:"feature-icon-box",children:(0,l.jsx)("span",{className:"icon",children:"◈"})}),(0,l.jsx)("span",{className:"feature-text",children:"50 Images per day"})]}),(0,l.jsxs)("div",{className:"feature-item",children:[(0,l.jsx)("div",{className:"feature-icon-box",children:(0,l.jsx)("span",{className:"icon",children:"◇"})}),(0,l.jsx)("span",{className:"feature-text",children:"10 Videos per day"})]}),(0,l.jsxs)("div",{className:"feature-item",children:[(0,l.jsx)("div",{className:"feature-icon-box",children:(0,l.jsx)("span",{className:"icon",children:"⚡"})}),(0,l.jsx)("span",{className:"feature-text",children:"Standard Processing"})]})]}),(0,l.jsxs)("button",{className:"cta-button",onClick:()=>g("pro"),children:[(0,l.jsx)("div",{className:"button-glow"}),(0,l.jsx)("span",{className:"button-text",children:"Choose Pro"})]}),(0,l.jsxs)("div",{className:"secure-badge",children:[(0,l.jsx)("span",{className:"lock",children:"◆"}),(0,l.jsx)("span",{className:"text",children:"Secured by Stripe"})]})]}),(0,l.jsx)(d4,{color:"#C0C0C0",speed:1,chaos:.5,thickness:3.5,style:{borderRadius:20},children:(0,l.jsxs)("div",{className:"ultra-plan-card",children:[(0,l.jsx)("div",{className:"ultra-badge",children:"ULTRA"}),(0,l.jsxs)("div",{className:"plan-header",children:[(0,l.jsx)("div",{className:"plan-icon-badge ultra-icon",children:(0,l.jsx)("div",{className:"icon-inner",children:"✦"})}),(0,l.jsxs)("div",{className:"plan-title-group",children:[(0,l.jsx)("h3",{className:"plan-name ultra-name",children:"OMI ULTRA"}),(0,l.jsx)("p",{className:"plan-subtitle",children:"Maximum AI power"})]})]}),(0,l.jsxs)("div",{className:"plan-pricing",children:[(0,l.jsxs)("div",{className:"price-wrapper",children:[(0,l.jsx)("span",{className:"currency",children:"$"}),(0,l.jsx)("span",{className:"amount",children:"20"})]}),(0,l.jsx)("p",{className:"billing-text",children:"per month"})]}),(0,l.jsxs)("div",{className:"features-list",children:[(0,l.jsxs)("div",{className:"feature-item",children:[(0,l.jsx)("div",{className:"feature-icon-box ultra-feature",children:(0,l.jsx)("span",{className:"icon",children:"∞"})}),(0,l.jsx)("span",{className:"feature-text",children:"Unlimited Everything"})]}),(0,l.jsxs)("div",{className:"feature-item",children:[(0,l.jsx)("div",{className:"feature-icon-box ultra-feature",children:(0,l.jsx)("span",{className:"icon",children:"◈"})}),(0,l.jsx)("span",{className:"feature-text",children:"Unlimited Image Generation"})]}),(0,l.jsxs)("div",{className:"feature-item",children:[(0,l.jsx)("div",{className:"feature-icon-box ultra-feature",children:(0,l.jsx)("span",{className:"icon",children:"◇"})}),(0,l.jsx)("span",{className:"feature-text",children:"Unlimited Video Creation"})]}),(0,l.jsxs)("div",{className:"feature-item",children:[(0,l.jsx)("div",{className:"feature-icon-box ultra-feature",children:(0,l.jsx)("span",{className:"icon",children:"⚡"})}),(0,l.jsx)("span",{className:"feature-text",children:"Priority Processing Speed"})]}),(0,l.jsxs)("div",{className:"feature-item",children:[(0,l.jsx)("div",{className:"feature-icon-box ultra-feature",children:(0,l.jsx)("span",{className:"icon",children:"✦"})}),(0,l.jsx)("span",{className:"feature-text",children:"Early Access Features"})]})]}),(0,l.jsxs)("button",{className:"cta-button ultra-button",onClick:()=>g("ultra"),children:[(0,l.jsx)("div",{className:"button-glow"}),(0,l.jsx)("span",{className:"button-text",children:"Choose Ultra"})]}),(0,l.jsxs)("div",{className:"secure-badge",children:[(0,l.jsx)("span",{className:"lock",children:"◆"}),(0,l.jsx)("span",{className:"text",children:"Secured by Stripe"})]})]})})]})]})]})})};function d7({isOpen:a,onClose:b,user:c}){let[d,e]=(0,n.useState)(""),[f,g]=(0,n.useState)("free"),[h,i]=(0,n.useState)(!1),[j,k]=(0,n.useState)(!1);(0,n.useEffect)(()=>{c&&a&&m()},[c,a]);let m=async()=>{if(c){i(!0);try{console.log("Checking admin status for:",c.email),"andregreengp@gmail.com"===c.email?(k(!0),console.log("✅ Admin status confirmed!")):console.log("❌ Not admin account");let{data:a}=await dS.supabase.from("users").select("email, subscription_tier").eq("id",c.id).single();a&&(e(a.email||c.email),g(a.subscription_tier||"free"),console.log("User subscription tier:",a.subscription_tier))}catch(a){console.error("Error fetching user data:",a)}finally{i(!1)}}},o=async()=>{try{await dS.supabase.auth.signOut(),b(),window.location.reload()}catch(a){console.error("Error logging out:",a)}};return a?(0,l.jsx)("div",{className:"settings-modal-overlay",onClick:b,children:(0,l.jsxs)("div",{className:"settings-modal",onClick:a=>a.stopPropagation(),children:[(0,l.jsxs)("div",{className:"settings-modal-header",children:[(0,l.jsx)("h2",{children:"⚙️ Account Settings"}),(0,l.jsx)("button",{className:"settings-close-btn",onClick:b,children:"✕"})]}),(0,l.jsx)("div",{className:"settings-modal-content",children:h?(0,l.jsxs)("div",{className:"settings-loading",children:[(0,l.jsx)("div",{className:"settings-spinner"}),(0,l.jsx)("p",{children:"Loading account data..."})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"settings-section",children:[(0,l.jsx)("h3",{className:"settings-section-title",children:"👤 Profile"}),(0,l.jsxs)("div",{className:"settings-info-card",children:[(0,l.jsxs)("div",{className:"settings-info-row",children:[(0,l.jsx)("span",{className:"settings-label",children:"Email:"}),(0,l.jsx)("span",{className:"settings-value",children:d||c?.email})]}),(0,l.jsxs)("div",{className:"settings-info-row",children:[(0,l.jsx)("span",{className:"settings-label",children:"User ID:"}),(0,l.jsxs)("span",{className:"settings-value settings-value-mono",children:[c?.id?.slice(0,8),"..."]})]})]})]}),(0,l.jsxs)("div",{className:"settings-section",children:[(0,l.jsx)("h3",{className:"settings-section-title",children:"💎 Subscription"}),(0,l.jsxs)("div",{className:"settings-info-card",children:[(0,l.jsx)("div",{className:"settings-subscription-badge",children:"pro"===f?(0,l.jsx)("span",{className:"settings-badge-pro",children:"✨ Omi Pro"}):(0,l.jsx)("span",{className:"settings-badge-free",children:"🆓 Free Plan"})}),"free"===f&&(0,l.jsx)("p",{className:"settings-upgrade-hint",children:"Upgrade to Omi Pro for unlimited access to all features"})]})]}),(0,l.jsxs)("div",{className:"settings-section",children:[(0,l.jsx)("h3",{className:"settings-section-title",children:"⚡ Actions"}),(0,l.jsxs)("div",{className:"settings-actions",children:[j&&(0,l.jsxs)("button",{className:"settings-action-btn settings-admin-btn",onClick:()=>{console.log("Admin button clicked! Navigating to /admin"),b(),window.location.href="/admin"},children:[(0,l.jsx)("span",{className:"settings-action-icon",children:"👑"}),(0,l.jsx)("span",{children:"Admin Dashboard"})]}),(0,l.jsxs)("button",{className:"settings-action-btn settings-logout-btn",onClick:o,children:[(0,l.jsx)("span",{className:"settings-action-icon",children:"🚪"}),(0,l.jsx)("span",{children:"Log Out"})]})]})]})]})}),(0,l.jsx)("div",{className:"settings-modal-footer",children:(0,l.jsx)("p",{className:"settings-footer-text",children:"Omi AI • Created by Drepheus"})})]})}):null}async function d8(a,b){try{let c=await fetch("/api/usage?action=check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a,usageType:b})});if(!c.ok)throw Error("Failed to check usage limit");return await c.json()}catch(a){throw console.error("Error checking usage limit:",a),a}}async function d9(a,b){try{let c=await fetch("/api/usage?action=increment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a,usageType:b})}),d=await c.json();if(403===c.status&&d.limitReached)return{success:!1,limitReached:!0};if(!c.ok)throw Error("Failed to increment usage");return d}catch(a){throw console.error("Error incrementing usage:",a),a}}function ea(a){return a.content||""}let eb=function(){let{user:a}=(0,d$.useAuth)(),b=(0,m.useRouter)(),[c,d]=(0,n.useState)(null),[e,f]=(0,n.useState)([]),[g,h]=(0,n.useState)(""),[i,j]=(0,n.useState)(!1),[k,o]=(0,n.useState)(!1),[p,q]=(0,n.useState)("Gemini Pro"),[s,t]=(0,n.useState)(null),[u,v]=(0,n.useState)([]),[w,x]=(0,n.useState)(!1),[y,z]=(0,n.useState)(null),[A,B]=(0,n.useState)([]),[C,D]=(0,n.useState)(!1),[E,F]=(0,n.useState)(!1),[G,H]=(0,n.useState)(null),[I,J]=(0,n.useState)(!1),[L,M]=(0,n.useState)(!1),[N,O]=(0,n.useState)(!1),[P,Q]=(0,n.useState)(!1),[R,S]=(0,n.useState)(null),[T,U]=(0,n.useState)(!1),V=(0,n.useRef)(null),[W,X]=(0,n.useState)(!1),[Y,Z]=(0,n.useState)(null),[$,_]=(0,n.useState)(!1),aa=(0,n.useRef)(null),[ab,ac]=(0,n.useState)(!1),[ad,ae]=(0,n.useState)(!1),[af,ag]=(0,n.useState)(!1),[ah,ai]=(0,n.useState)("chat"),[aj,ak]=(0,n.useState)({current:0,limit:15,resetAt:null}),[al,am]=(0,n.useState)([]),[an,ao]=(0,n.useState)(!1),[ap,aq]=(0,n.useState)(!1),[ar,as]=(0,n.useState)(!1),[at,au]=(0,n.useState)(!1);(0,n.useEffect)(()=>{console.log("🎨 Media Gallery State:",ar)},[ar]);let[av,ax]=(0,n.useState)("free"),ay=[{name:"Personas",icon:"◐",description:G?`Active: ${G}`:"Shift Omi's voice (teacher, critic, explorer, poet)",onClick:()=>{let a="Personas"!==s;t(a?"Personas":null),F(a),J(!1),console.log("Personas clicked - ChromaGrid",a?"activated":"deactivated")}},{name:"Create",icon:"◇",description:"Generate visuals, stories, or creative ideas",onClick:()=>{D(!0),F(!1),J(!1),console.log("Create clicked - showing infinite menu")}},{name:"Image Gen",icon:"🖼️",description:P?"Image generation active - type a prompt!":"Real-time AI image generation",onClick:()=>{let a="Image Gen"!==s;t(a?"Image Gen":null),Q(a),F(!1),J(!1),M(!1),a||S(null),console.log("Image Gen mode",a?"activated":"deactivated")}},{name:"Compare",icon:"⚖",description:"Instantly query multiple LLMs side-by-side",onClick:()=>{let a="Compare"!==s;t(a?"Compare":null),x(a),F(!1),J(!1),a||(B([]),z(null)),console.log("Compare Minds clicked")}},{name:"Video Gen",icon:"🎬",description:"Generate AI videos from text prompts",onClick:()=>{let a="Video Gen"!==s;t(a?"Video Gen":null),X(a),F(!1),J(!1),M(!1),a||Z(null),console.log("Video Gen mode",a?"activated":"deactivated")}}],az=async b=>{if(!a)return!0;try{let c=await d8(a.id,b);if(!c.canPerform)return ai("chat"===b?"chat":"image_gen"===b?"image":"video"),ak({current:c.currentUsage,limit:c.usageLimit,resetAt:c.resetAt}),ag(!0),!1;return!0}catch(a){return console.error("Error checking usage limit:",a),!0}};(0,n.useEffect)(()=>{let a=a=>{"Escape"===a.key&&N?O(!1):"Escape"===a.key&&k?o(!1):"Escape"===a.key&&C?D(!1):"Escape"===a.key&&L&&(M(!1),t(null))};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[N,k,C,L]),(0,n.useEffect)(()=>{a&&(f([]),d(null),aB(),aA())},[a]);let aA=async()=>{if(a)try{let{data:b,error:c}=await dS.supabase.from("users").select("subscription_tier").eq("id",a.id).single();if(c)throw c;ax(b?.subscription_tier||"free")}catch(a){console.error("Error fetching subscription tier:",a),ax("free")}};(0,n.useEffect)(()=>{if(a&&c&&e.length>0){let a=e[e.length-1];if("user"===a.role||"assistant"===a.role){let b=ea(a);d2(c,a.role,b)}}},[e,c,a]);let aB=async()=>{a&&am(await d0(a.id))},aC=async a=>{d(a),f((await d1(a)).map(a=>({id:a.id||`msg-${Date.now()}-${Math.random()}`,role:a.role,content:a.content})))},aD=async()=>{if(!a){f([]),d(null);return}let b=await d_(a.id,"New Conversation",p);b&&(d(b.id),f([]),await aB())},aE=async a=>{await d3(a),a===c&&(d(null),f([])),await aB()},aF=async b=>{if(b.preventDefault(),console.log("handleSubmit called - Input:",g.trim(),"| isLoading:",i),console.log("Messages count:",e.length),!g.trim()||i||T||$)console.log("Submit blocked - Empty input or already loading");else{if(W){if(!await az("video_gen"))return;console.log("Generating video with prompt:",g.trim()),_(!0),Z(null);try{let b=await fetch("/api/generate-video",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:g.trim()})}),c=await b.json();if(b.ok&&c.videoUrl){if(console.log("Video generated successfully:",c.videoUrl),Z(c.videoUrl),a)try{await dT(a.id,"video",c.videoUrl,g.trim()),console.log("Video saved to gallery")}catch(a){console.error("Failed to save video to gallery:",a)}a&&await d9(a.id,"video_gen"),setTimeout(()=>{aa.current?.scrollIntoView({behavior:"smooth",block:"start"})},100)}else console.error("Video generation failed:",c.error),alert("Failed to generate video: "+(c.error||"Unknown error"))}catch(a){console.error("Error generating video:",a),alert("Failed to generate video. Please try again.")}finally{_(!1),h("")}return}if(P){if(!await az("image_gen"))return;console.log("Generating image with prompt:",g.trim()),U(!0),S(null);try{let b=await fetch("/api/generate-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:g.trim(),aspectRatio:"3:2"})}),c=await b.json();if(b.ok&&c.imageUrl){if(console.log("Image generated successfully:",c.imageUrl),S(c.imageUrl),a)try{await dT(a.id,"image",c.imageUrl,g.trim()),console.log("Image saved to gallery")}catch(a){console.error("Failed to save image to gallery:",a)}a&&await d9(a.id,"image_gen"),setTimeout(()=>{V.current?.scrollIntoView({behavior:"smooth",block:"start"})},100)}else console.error("Image generation failed:",c.error),alert("Failed to generate image: "+(c.error||"Unknown error"))}catch(a){console.error("Error generating image:",a),alert("Failed to generate image. Please try again.")}finally{U(!1),h("")}return}if(console.log("Processing message submission..."),console.log("=== CURRENT STATE CHECK ==="),console.log("isVideoGenActive:",W),console.log("isInstantGenActive:",P),console.log("selectedFeature:",s),a&&!c&&0===e.length){var k;let b;console.log("Creating new conversation for logged-in user...");let c=(b=(k=g.trim()).split("\n")[0].slice(0,50)).length<k.length?`${b}...`:b,e=await d_(a.id,c,p);e&&(d(e.id),await aB())}else a||console.log("Guest mode - no conversation to create");try{j(!0),console.log("Sending message:",{text:g.trim()});let a={id:`user-${Date.now()}`,role:"user",content:g.trim()};f(b=>[...b,a]),h(""),v([]);let b=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[...e,a]})});if(!b.ok)throw Error("API call failed");let c=await b.json();console.log("API response:",c);let d={id:`assistant-${Date.now()}`,role:"assistant",content:c.message};f(a=>[...a,d]),j(!1)}catch(a){console.error("Error in sendMessage:",a),console.error("Error details:",{message:a instanceof Error?a.message:"Unknown error",stack:a instanceof Error?a.stack:void 0}),j(!1)}}},aG=[{icon:"⌘",label:"Command",onClick:()=>{b.push("/command-hub")}},{icon:"⊞",label:"Gallery",onClick:()=>{console.log("Gallery button clicked!"),as(!0)}},{icon:"◈",label:"Search",onClick:()=>{console.log("Search button clicked!"),au(!0)}},{icon:"⚙",label:"AI News",onClick:()=>{console.log("Settings clicked - activating Pulse mode"),M(!L),F(!1),J(!1)}}],aH=["GPT","Claude","Gemini","Grok","DeepSeek","Perplexity","Qwen"].map(a=>({content:(0,l.jsx)("div",{className:"ai-model-card clickable",onClick:()=>{let b;return q(a),void((b=document.getElementById("ai-models-section"))&&b.classList.add("fade-out"),setTimeout(()=>{o(!1);let a=document.querySelector(".chat-interface");a&&a.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{b&&b.classList.remove("fade-out")},100)},300))},children:a})}));return(0,l.jsxs)(l.Fragment,{children:[a&&(0,l.jsx)(dQ,{conversations:al,currentConversationId:c,onSelectConversation:aC,onNewConversation:aD,onDeleteConversation:aE,isOpen:an,onClose:()=>ao(!1)}),(0,l.jsxs)("div",{className:"splash-page",children:[a&&(0,l.jsx)("button",{className:"conversations-btn",onClick:()=>ao(!0),title:"Conversations",children:"≡"}),(0,l.jsxs)("div",{className:"top-right-actions",children:[(0,l.jsxs)("button",{className:"header-action-btn new-conversation-btn",onClick:aD,title:"Start new conversation",children:[(0,l.jsx)("span",{className:"header-btn-icon",children:"✦"}),(0,l.jsx)("span",{className:"header-btn-text",children:"New Chat"})]}),a&&"free"===av&&(0,l.jsxs)("button",{className:"header-action-btn upgrade-btn",onClick:()=>ag(!0),title:"Upgrade to Pro",children:[(0,l.jsx)("span",{className:"header-btn-icon",children:"◈"}),(0,l.jsx)("span",{className:"header-btn-text",children:"Upgrade"})]}),a&&"pro"===av&&(0,l.jsxs)("div",{className:"account-tier-badge pro-badge",children:[(0,l.jsx)("span",{className:"tier-icon",children:"◆"}),(0,l.jsx)("span",{className:"tier-text",children:"Pro Account"})]}),a?(0,l.jsxs)("button",{className:"header-action-btn account-btn",onClick:()=>aq(!0),title:"Account settings",children:[(0,l.jsx)("span",{className:"header-btn-icon",children:"◉"}),(0,l.jsx)("span",{className:"header-btn-text",children:a.email?.split("@")[0]||"Account"})]}):(0,l.jsx)("div",{className:"header-guest-indicator",children:(0,l.jsx)("span",{children:"◎ Guest Mode"})})]}),a&&"free"===av&&(0,l.jsxs)("div",{className:"account-tier-badge-fixed",children:[(0,l.jsx)("span",{className:"tier-icon",children:"◎"}),(0,l.jsx)("span",{className:"tier-text",children:"Free Account"})]}),(0,l.jsxs)("div",{className:"chat-interface",children:[(0,l.jsx)("div",{className:"chat-header",children:(0,l.jsxs)("div",{className:"header-left",children:[(0,l.jsx)("h1",{className:"chat-title",children:"Omi AI"}),(0,l.jsxs)("div",{className:"selected-model",children:[(0,l.jsx)("span",{className:"model-label",children:"Active Model:"}),(0,l.jsx)("span",{className:"model-name",children:p}),(0,l.jsx)("button",{className:"model-change-btn",onClick:()=>o(!0),title:"Change AI model",children:"⚙️"})]})]})}),(0,l.jsx)("div",{className:"feature-buttons-horizontal",children:ay.map((a,b)=>{let c=s===a.name,d="Image Gen"===a.name,e="Video Gen"===a.name,f="Compare"===a.name||e;return(0,l.jsxs)("button",{className:`feature-button-horizontal ${c?"selected":"unselected"} ${f?"pro":""}`,onClick:a.onClick,onMouseEnter:()=>{d&&ac(!0),e&&ae(!0)},onMouseLeave:()=>{d&&ac(!1),e&&ae(!1)},style:{animationDelay:`${.1*b}s`},children:[(0,l.jsxs)("span",{className:c?"feature-button-selected-text":"feature-button-static-text",children:[a.icon," ",a.name,f&&(0,l.jsx)("span",{className:"pro-badge-inline",children:"PRO"})]}),d?(0,l.jsx)(dY,{isVisible:ab}):e?(0,l.jsx)(dZ,{isVisible:ad}):(0,l.jsx)("div",{className:"feature-button-tooltip",children:a.description})]},a.name)})}),(e.length>0||w)&&(0,l.jsxs)("div",{className:`chat-container ${w?"compare-mode":""} ${N?"fullscreen":""}`,children:[(0,l.jsxs)("div",{className:"chat-panel primary-panel",children:[(0,l.jsxs)("div",{className:"panel-header",children:[(0,l.jsx)("h3",{children:w?(0,l.jsxs)("select",{className:"model-selector",value:p,onChange:a=>q(a.target.value),children:[(0,l.jsx)("option",{value:"Gemini Pro",children:"Gemini Pro"}),(0,l.jsx)("option",{value:"Claude",children:"Claude"}),(0,l.jsx)("option",{value:"GPT-4",children:"GPT-4"}),(0,l.jsx)("option",{value:"Llama",children:"Llama"})]}):p||"Primary AI"}),(0,l.jsx)("button",{className:"fullscreen-toggle",onClick:()=>O(!N),title:N?"Exit Fullscreen (ESC)":"Fullscreen",children:N?"⤓":"⤢"})]}),(0,l.jsx)("div",{className:"chat-messages",children:0===e.length&&w?(0,l.jsx)("div",{className:"empty-chat-message",children:(0,l.jsx)("p",{children:"Compare mode activated. Start chatting to see responses from both models side-by-side."})}):(0,l.jsxs)(l.Fragment,{children:[e.map(a=>(0,l.jsx)("div",{className:`message ${a.role}`,children:(0,l.jsx)("div",{className:"message-content",children:"assistant"===a.role?(0,l.jsx)(r,{text:ea(a),delay:.2}):ea(a)})},a.id)),i&&(0,l.jsx)("div",{className:"message assistant loading",children:(0,l.jsx)("div",{className:"message-content",children:(0,l.jsxs)("div",{className:"typing-indicator",children:[(0,l.jsx)("span",{}),(0,l.jsx)("span",{}),(0,l.jsx)("span",{})]})})})]})})]}),w&&(0,l.jsxs)("div",{className:"chat-panel secondary-panel",children:[(0,l.jsx)("div",{className:"panel-header",children:(0,l.jsx)("h3",{children:y||(0,l.jsxs)("select",{className:"model-selector",value:y||"",onChange:a=>z(a.target.value),children:[(0,l.jsx)("option",{value:"",children:"Select Model"}),(0,l.jsx)("option",{value:"Claude",children:"Claude"}),(0,l.jsx)("option",{value:"GPT-4",children:"GPT-4"}),(0,l.jsx)("option",{value:"Gemini Pro",children:"Gemini Pro"}),(0,l.jsx)("option",{value:"Llama",children:"Llama"})]})})}),(0,l.jsx)("div",{className:"chat-messages",children:0===A.length?(0,l.jsx)("div",{className:"empty-chat-message",children:(0,l.jsx)("p",{children:"Select a model above to compare responses."})}):(0,l.jsx)(l.Fragment,{children:A.map((a,b)=>(0,l.jsxs)("div",{className:`message ${a.role}`,children:[(0,l.jsx)("div",{className:"message-content",children:"assistant"===a.role?(0,l.jsx)(r,{text:a.content,delay:.2}):a.content}),(0,l.jsx)("div",{className:"message-time",children:a.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},b))})})]})]}),(0,l.jsxs)("form",{className:"chat-form",onSubmit:aF,children:[u.length>0&&(0,l.jsx)("div",{className:"attached-files",children:u.map((a,b)=>(0,l.jsxs)("div",{className:"attached-file",children:[(0,l.jsx)("span",{className:"file-icon",children:a.type.startsWith("image/")?"🖼️":a.type.startsWith("video/")?"🎥":a.type.includes("pdf")?"📄":"📎"}),(0,l.jsx)("span",{className:"file-name",children:a.name}),(0,l.jsx)("button",{type:"button",className:"remove-file",onClick:()=>{v(a=>a.filter((a,c)=>c!==b))},title:"Remove file",children:"×"})]},b))}),P&&(0,l.jsxs)("div",{className:"instant-gen-indicator",children:[(0,l.jsx)("span",{className:"instant-gen-icon",children:"⚡"}),(0,l.jsx)("span",{className:"instant-gen-text",children:"Image Gen Mode Active - Describe the image you want to create"})]}),W&&(0,l.jsxs)("div",{className:"video-gen-indicator",children:[(0,l.jsx)("span",{className:"video-gen-icon",children:"🎬"}),(0,l.jsx)("span",{className:"video-gen-text",children:"Video Gen Mode Active - Describe the video scene you want to create"})]}),(0,l.jsxs)("div",{className:`chat-input-container ${I?"synthesize-active":""} ${P?"instant-gen-active":""} ${W?"video-gen-active":""}`,children:[(0,l.jsx)("input",{type:"file",id:"file-input",className:"file-input",onChange:a=>{let b=a.target.files;if(b){let a=Array.from(b);v(b=>[...b,...a])}a.target.value=""},multiple:!0,accept:"image/*,video/*,.pdf,.doc,.docx,.txt",style:{display:"none"}}),!P&&(0,l.jsx)("button",{type:"button",className:"attach-file-btn",onClick:()=>document.getElementById("file-input")?.click(),title:"Attach files",disabled:i,children:"📎"}),(0,l.jsx)("input",{type:"text",value:g,onChange:a=>{h(a.target.value)},placeholder:W?"🎬 Describe your video scene (e.g., 'a woman walking through Tokyo at night')...":P?"⚡ Describe your image (e.g., 'A sunset over mountains')...":I?"Type your message in Synthesize mode...":"Type your message...",className:"chat-input",autoFocus:!0,disabled:i||T||$}),(0,l.jsx)("button",{type:"submit",className:"chat-submit",disabled:!g.trim()||i||T||$,children:i?(0,l.jsx)("div",{className:"loading-spinner",children:(0,l.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",opacity:"0.3"}),(0,l.jsx)("path",{d:"M12 2A10 10 0 0 1 22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}):(0,l.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M2 12L22 2L13 21L11 13L2 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),I&&(0,l.jsx)("div",{className:"electric-border-overlay",children:(0,l.jsxs)("svg",{className:"electric-border-svg",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("filter",{id:"electric-glow",children:[(0,l.jsx)("feTurbulence",{baseFrequency:"0.02",numOctaves:"3",result:"noise",seed:"1",children:(0,l.jsx)("animate",{attributeName:"seed",values:"1;5;1",dur:"3s",repeatCount:"indefinite"})}),(0,l.jsx)("feDisplacementMap",{in:"SourceGraphic",in2:"noise",scale:"2"}),(0,l.jsx)("feGaussianBlur",{stdDeviation:"0.5"}),(0,l.jsx)("feColorMatrix",{values:"0 0 0 0 0.9 0 0 0 0 0.9 0 0 0 0 0.9 0 0 0 1 0"})]})}),(0,l.jsx)("rect",{x:"1",y:"1",width:"98",height:"98",fill:"none",stroke:"#e5e5e5",strokeWidth:"0.5",filter:"url(#electric-glow)",rx:"3",ry:"3",children:(0,l.jsx)("animate",{attributeName:"stroke-opacity",values:"0.3;1;0.3",dur:"2s",repeatCount:"indefinite"})}),(0,l.jsx)("rect",{x:"0.5",y:"0.5",width:"99",height:"99",fill:"none",stroke:"#e5e5e5",strokeWidth:"0.3",rx:"3",ry:"3",opacity:"0.6",children:(0,l.jsx)("animate",{attributeName:"stroke-dasharray",values:"0,400;200,200;400,0;0,400",dur:"4s",repeatCount:"indefinite"})})]})})]})]}),P&&(0,l.jsx)("div",{className:"generated-image-container",ref:V,children:T?(0,l.jsxs)("div",{className:"generating-indicator",children:[(0,l.jsx)("div",{className:"generating-spinner",children:(0,l.jsx)("div",{className:"metallic-paint-loader",children:(0,l.jsx)(dv,{})})}),(0,l.jsx)("p",{className:"generating-text",children:"Generating your image..."})]}):R?(0,l.jsxs)("div",{className:"generated-image-wrapper",children:[(0,l.jsxs)("div",{className:"generated-image-header",children:[(0,l.jsx)("h3",{children:"⚡ Generated Image"}),(0,l.jsxs)("div",{className:"generated-image-actions",children:[(0,l.jsx)("a",{href:"https://percify.io",target:"_blank",rel:"noopener noreferrer",className:"image-action-btn percify-btn",title:"Edit with Percify",children:"✨ Percify It"}),(0,l.jsx)("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:"image-action-btn",title:"Open in new tab",children:"🔗 Open"}),(0,l.jsx)("button",{className:"image-action-btn",onClick:()=>S(null),title:"Clear image",children:"✕ Clear"})]})]}),(0,l.jsx)("img",{src:R,alt:"Generated",className:"generated-image"})]}):(0,l.jsxs)("div",{className:"instant-gen-placeholder",children:[(0,l.jsx)("div",{className:"placeholder-icon",children:"⚡"}),(0,l.jsx)("p",{className:"placeholder-text",children:"Enter a prompt above to generate an image"}),(0,l.jsx)("p",{className:"placeholder-subtext",children:"Describe what you want to see and press enter"})]})}),W&&(0,l.jsx)("div",{className:"generated-video-container",ref:aa,children:$?(0,l.jsxs)("div",{className:"generating-indicator",children:[(0,l.jsx)("div",{className:"generating-spinner",children:(0,l.jsx)("div",{className:"metallic-paint-loader",children:(0,l.jsx)(dv,{})})}),(0,l.jsx)("p",{className:"generating-text",children:"Generating your video... This may take 1-2 minutes"})]}):Y?(0,l.jsxs)("div",{className:"generated-video-wrapper",children:[(0,l.jsxs)("div",{className:"generated-video-header",children:[(0,l.jsx)("h3",{children:"🎬 Generated Video"}),(0,l.jsxs)("div",{className:"generated-video-actions",children:[(0,l.jsx)("a",{href:Y,target:"_blank",rel:"noopener noreferrer",className:"video-action-btn",title:"Open in new tab",children:"🔗 Open"}),(0,l.jsx)("a",{href:Y,download:"generated-video.mp4",className:"video-action-btn",title:"Download video",children:"⬇ Download"}),(0,l.jsx)("button",{className:"video-action-btn",onClick:()=>Z(null),title:"Clear video",children:"✕ Clear"})]})]}),(0,l.jsx)("video",{src:Y,controls:!0,className:"generated-video",autoPlay:!0,loop:!0})]}):(0,l.jsxs)("div",{className:"video-gen-placeholder",children:[(0,l.jsx)("div",{className:"placeholder-icon",children:"🎬"}),(0,l.jsx)("p",{className:"placeholder-text",children:"Enter a prompt above to generate a video"}),(0,l.jsx)("p",{className:"placeholder-subtext",children:"Describe the scene you want to create and press enter"})]})})]}),k&&(0,l.jsx)("div",{className:"ai-models-overlay",onClick:()=>o(!1),children:(0,l.jsxs)("div",{id:"ai-models-section",className:`ai-models-section ${k?"show":""}`,onClick:a=>a.stopPropagation(),children:[(0,l.jsx)("h2",{className:"ai-models-title",children:"Popular AI Models"}),(0,l.jsx)("div",{className:"ai-models-container",children:(0,l.jsx)(aw,{items:aH,width:"100%",maxHeight:"400px",itemMinHeight:120,isTilted:!0,tiltDirection:"left",autoplay:!0,autoplaySpeed:1,autoplayDirection:"up",pauseOnHover:!0})})]})})]}),E&&(0,l.jsx)(dw,{items:void 0,ease:"power2.out",damping:.75,fadeOut:.5,onClose:()=>F(!1),selectedPersona:G,onPersonaSelect:a=>{console.log("Persona selected in SplashPage:",a.title),G===a.title?(H(null),console.log("Persona deselected:",a.title)):(H(a.title),console.log("Persona selected:",a.title))}}),L&&(0,l.jsxs)("div",{style:{position:"fixed",inset:0,zIndex:9e3,background:"#000"},children:[(0,l.jsx)("button",{onClick:()=>{M(!1),t(null)},style:{position:"absolute",top:"2rem",right:"2rem",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"50%",width:"48px",height:"48px",color:"white",fontSize:"1.5rem",cursor:"pointer",zIndex:9001},children:"✕"}),(0,l.jsx)(dP,{bend:3,textColor:"#ffffff",borderRadius:.05,scrollEase:.02,items:[{link:"#",text:"Currently Trending",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/ChatGPT_logo.svg/1024px-ChatGPT_logo.svg.png"},{link:"#",text:"AI News",image:"https://www.gstatic.com/lamda/images/gemini_sparkle_v002_d4735304ff6292a690345.svg"},{link:"#",text:"LLM Updates",image:"https://companieslogo.com/img/orig/MSFT-a203b22d.png"},{link:"#",text:"AI Content",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Google_Gemini_logo.svg/1024px-Google_Gemini_logo.svg.png"},{link:"#",text:"Grok AI",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/57/X_logo_2023_%28white%29.png/1200px-X_logo_2023_%28white%29.png"},{link:"#",text:"Claude AI",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/13/ChatGPT-Logo.png/1200px-ChatGPT-Logo.png"},{link:"#",text:"Midjourney",image:"https://seeklogo.com/images/M/midjourney-logo-156382BA01-seeklogo.com.png"},{link:"#",text:"Perplexity AI",image:"https://uxwing.com/wp-content/themes/uxwing/download/brands-and-social-media/perplexity-ai-icon.png"}]})]}),(0,l.jsx)(K,{items:aG}),(0,l.jsx)(dq,{isVisible:C,onClose:()=>D(!1)}),(0,l.jsx)(d6,{isOpen:af,onClose:()=>ag(!1),limitType:ah,currentUsage:aj.current,usageLimit:aj.limit,resetAt:aj.resetAt}),(0,l.jsx)(d7,{isOpen:ap,onClose:()=>aq(!1),user:a}),(0,l.jsx)(dW,{isOpen:ar,userId:a?.id||"",onClose:()=>as(!1)}),(0,l.jsx)(dX,{isOpen:at,onClose:()=>au(!1)}),(0,l.jsx)(dR,{})]})};function ec(){return(0,l.jsx)(eb,{})}a.s(["default",()=>ec],71458)}];

//# sourceMappingURL=Omi-AI-1_app_chat_page_tsx_383c0809._.js.map